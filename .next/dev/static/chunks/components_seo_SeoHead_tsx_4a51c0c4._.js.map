{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/seo/SeoHead.tsx"],"sourcesContent":["'use client'\r\nimport React, { useEffect } from 'react';\r\nimport { SeoConfig } from '@/data/types';\r\nimport { COMPANY_INFO } from '@/data/constants';\r\nimport { mockDb } from '@/data/mockDatabase';\r\n\r\ninterface SeoHeadProps {\r\n  seo?: SeoConfig;\r\n  title?: string;\r\n  description?: string;\r\n  path?: string;\r\n  type?: 'website' | 'article' | 'profile' | 'service';\r\n  image?: string;\r\n  forceNoIndex?: boolean; // Override for portals\r\n  structuredData?: object | object[];\r\n}\r\n\r\nexport const SeoHead = ({ \r\n  seo, \r\n  title, \r\n  description, \r\n  path, \r\n  type = 'website', \r\n  image,\r\n  forceNoIndex = false,\r\n  structuredData\r\n}: SeoHeadProps) => {\r\n  const globalSeo = mockDb.getSettings().seo;\r\n  const siteName = globalSeo.siteTitle || COMPANY_INFO.name;\r\n  \r\n  // Priority: Prop > SEO Object > Global Default\r\n  const pageTitle = seo?.metaTitle || title || siteName;\r\n  const finalTitle = pageTitle.includes(COMPANY_INFO.name) ? pageTitle : `${pageTitle} | ${COMPANY_INFO.name}`;\r\n  \r\n  const pageDescription = seo?.metaDescription || description || globalSeo.siteDescription || \"Professional Swahili Translation & Interpreting Services across the UK.\";\r\n  \r\n  const baseUrl = \"https://jambolinguists.com\"; \r\n  const canonical = seo?.canonicalUrl || (path ? `${baseUrl}${path}` : baseUrl);\r\n  \r\n  const pageImage = seo?.ogImage || image || \"https://jambolinguists.com/wp-content/uploads/2025/03/logo-purple.jpeg\";\r\n  \r\n  const shouldIndex = !forceNoIndex && !seo?.noIndex;\r\n\r\n  useEffect(() => {\r\n    // 1. Update Document Title\r\n    document.title = finalTitle;\r\n\r\n    // Helper to update/create meta tags\r\n    const updateMeta = (name: string, content: string) => {\r\n      let element = document.querySelector(`meta[name=\"${name}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('name', name);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    // Helper for OpenGraph / Twitter properties\r\n    const updateProperty = (property: string, content: string) => {\r\n      let element = document.querySelector(`meta[property=\"${property}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('property', property);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    // --- Standard Meta ---\r\n    updateMeta('description', pageDescription);\r\n    updateMeta('viewport', 'width=device-width, initial-scale=1.0');\r\n    \r\n    // Robots (Strict Security & SEO)\r\n    const robotsContent = shouldIndex \r\n        ? \"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1\" \r\n        : \"noindex, nofollow\";\r\n    updateMeta('robots', robotsContent);\r\n\r\n    // Keywords (Merge specific + global defaults)\r\n    const keywords = [...(seo?.keywords || []), ...(globalSeo.defaultKeywords || [])];\r\n    const uniqueKeywords = Array.from(new Set(keywords));\r\n    if (uniqueKeywords.length > 0) {\r\n        updateMeta('keywords', uniqueKeywords.join(', '));\r\n    }\r\n\r\n    // --- Open Graph ---\r\n    updateProperty('og:title', finalTitle);\r\n    updateProperty('og:description', pageDescription);\r\n    updateProperty('og:type', type);\r\n    updateProperty('og:site_name', siteName);\r\n    updateProperty('og:url', canonical);\r\n    updateProperty('og:image', pageImage);\r\n    updateProperty('og:image:alt', pageTitle);\r\n    updateProperty('og:locale', 'en_GB');\r\n\r\n    // --- Twitter Card ---\r\n    updateMeta('twitter:card', 'summary_large_image');\r\n    updateMeta('twitter:title', finalTitle);\r\n    updateMeta('twitter:description', pageDescription);\r\n    updateMeta('twitter:image', pageImage);\r\n    updateMeta('twitter:image:alt', pageTitle);\r\n\r\n    // --- Canonical Link ---\r\n    let linkCanonical = document.querySelector(`link[rel=\"canonical\"]`);\r\n    if (canonical) {\r\n        if (!linkCanonical) {\r\n            linkCanonical = document.createElement('link');\r\n            linkCanonical.setAttribute('rel', 'canonical');\r\n            document.head.appendChild(linkCanonical);\r\n        }\r\n        linkCanonical.setAttribute('href', canonical);\r\n    } else if (linkCanonical) {\r\n        linkCanonical.remove();\r\n    }\r\n\r\n    // --- Structured Data (JSON-LD) ---\r\n    // Remove existing injected scripts to prevent duplication on nav\r\n    const existingScripts = document.querySelectorAll('script[type=\"application/ld+json\"]');\r\n    existingScripts.forEach(s => s.remove());\r\n\r\n    const schemas: any[] = [];\r\n\r\n    // 1. Global Organization Schema (Always present)\r\n    if (globalSeo.structuredData) {\r\n        try {\r\n            const globalJson = JSON.parse(globalSeo.structuredData);\r\n            if (Array.isArray(globalJson)) schemas.push(...globalJson);\r\n            else schemas.push(globalJson);\r\n        } catch (e) {\r\n            // console.error(\"Invalid Global JSON-LD\");\r\n        }\r\n    }\r\n\r\n    // 2. Page Specific Schema from DB settings\r\n    if (seo?.structuredData) {\r\n        try {\r\n            const pageJson = JSON.parse(seo.structuredData);\r\n            if (Array.isArray(pageJson)) schemas.push(...pageJson);\r\n            else schemas.push(pageJson);\r\n        } catch (e) {\r\n            // console.error(\"Invalid Page JSON-LD from Config\");\r\n        }\r\n    }\r\n\r\n    // 3. Prop Passed Schema (Dynamic)\r\n    if (structuredData) {\r\n        if (Array.isArray(structuredData)) schemas.push(...structuredData);\r\n        else schemas.push(structuredData);\r\n    }\r\n\r\n    // Inject Script\r\n    if (schemas.length > 0) {\r\n        const script = document.createElement('script');\r\n        script.setAttribute('type', 'application/ld+json');\r\n        script.textContent = JSON.stringify({\r\n            \"@context\": \"https://schema.org\",\r\n            \"@graph\": schemas\r\n        });\r\n        document.head.appendChild(script);\r\n    }\r\n\r\n  }, [finalTitle, pageDescription, shouldIndex, seo, canonical, siteName, globalSeo, type, pageImage, structuredData]);\r\n\r\n  return null;\r\n};\r\n"],"names":[],"mappings":"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"}}]
}