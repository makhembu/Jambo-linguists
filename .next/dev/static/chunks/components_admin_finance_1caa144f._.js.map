{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/AdminFinanceStats.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Invoice } from '@/data/types';\r\nimport { PoundSterling, Clock, AlertCircle, CheckCircle, FileText } from 'lucide-react';\r\n\r\ninterface AdminFinanceStatsProps {\r\n  invoices: Invoice[];\r\n}\r\n\r\nexport const AdminFinanceStats = ({ invoices }: AdminFinanceStatsProps) => {\r\n  const totalPaid = invoices\r\n    .filter(i => i.status === 'Paid')\r\n    .reduce((sum, i) => sum + i.amount, 0);\r\n\r\n  const totalPending = invoices\r\n    .filter(i => i.status === 'Pending')\r\n    .reduce((sum, i) => sum + i.amount, 0);\r\n\r\n  const overdueCount = invoices.filter(i => i.status === 'Overdue').length;\r\n  const overdueAmount = invoices\r\n    .filter(i => i.status === 'Overdue')\r\n    .reduce((sum, i) => sum + i.amount, 0);\r\n\r\n  const draftAmount = invoices\r\n    .filter(i => i.status === 'Draft')\r\n    .reduce((sum, i) => sum + i.amount, 0);\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8\">\r\n      {/* Total Paid */}\r\n      <div className=\"bg-white dark:bg-[#13111c] p-4 md:p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"w-10 h-10 p-2 rounded-xl bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800 flex items-center justify-center\">\r\n             <PoundSterling size={20} />\r\n          </div>\r\n          <span className=\"text-[10px] md:text-xs font-bold uppercase tracking-widest text-gray-400\">Paid YTD</span>\r\n        </div>\r\n        <h3 className=\"text-xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1\">\r\n          £{totalPaid.toLocaleString('en-GB', { minimumFractionDigits: 0, maximumFractionDigits: 2 })}\r\n        </h3>\r\n        <p className=\"text-[10px] md:text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1\">\r\n          <CheckCircle size={10} className=\"text-green-500\" /> Settled\r\n        </p>\r\n      </div>\r\n\r\n      {/* Pending Payouts */}\r\n      <div className=\"bg-white dark:bg-[#13111c] p-4 md:p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"w-10 h-10 p-2 rounded-xl bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border border-orange-200 dark:border-orange-800 flex items-center justify-center\">\r\n             <Clock size={20} />\r\n          </div>\r\n          <span className=\"text-[10px] md:text-xs font-bold uppercase tracking-widest text-gray-400\">Outstanding</span>\r\n        </div>\r\n        <h3 className=\"text-xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1\">\r\n          £{totalPending.toLocaleString('en-GB', { minimumFractionDigits: 0, maximumFractionDigits: 2 })}\r\n        </h3>\r\n        <p className=\"text-[10px] md:text-xs text-gray-500 dark:text-gray-400\">\r\n          Due for payment\r\n        </p>\r\n      </div>\r\n\r\n      {/* Overdue */}\r\n      <div className=\"bg-white dark:bg-[#13111c] p-4 md:p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"w-10 h-10 p-2 rounded-xl bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border border-red-200 dark:border-red-800 flex items-center justify-center\">\r\n             <AlertCircle size={20} />\r\n          </div>\r\n          <span className=\"text-[10px] md:text-xs font-bold uppercase tracking-widest text-gray-400\">Overdue</span>\r\n        </div>\r\n        <h3 className=\"text-xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1\">\r\n          £{overdueAmount.toLocaleString('en-GB', { minimumFractionDigits: 0, maximumFractionDigits: 2 })}\r\n        </h3>\r\n        <p className=\"text-[10px] md:text-xs text-red-500 font-bold\">\r\n          {overdueCount} invoices late\r\n        </p>\r\n      </div>\r\n\r\n      {/* Drafts / Unsent */}\r\n      <div className=\"bg-white dark:bg-[#13111c] p-4 md:p-6 rounded-xl border border-gray-200 dark:border-white/5 shadow-sm\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"w-10 h-10 p-2 rounded-xl bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-400 border border-gray-200 dark:border-white/10 flex items-center justify-center\">\r\n             <FileText size={20} />\r\n          </div>\r\n          <span className=\"text-[10px] md:text-xs font-bold uppercase tracking-widest text-gray-400\">Drafts</span>\r\n        </div>\r\n        <h3 className=\"text-xl md:text-3xl font-bold text-gray-900 dark:text-white mb-1\">\r\n          £{draftAmount.toLocaleString('en-GB', { minimumFractionDigits: 0, maximumFractionDigits: 2 })}\r\n        </h3>\r\n        <p className=\"text-[10px] md:text-xs text-gray-500 dark:text-gray-400\">\r\n          Not yet issued\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;;;AAMO,MAAM,oBAAoB,CAAC,EAAE,QAAQ,EAA0B;IACpE,MAAM,YAAY,SACf,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,QACzB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,MAAM,eAAe,SAClB,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,WACzB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,MAAM,eAAe,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,WAAW,MAAM;IACxE,MAAM,gBAAgB,SACnB,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,WACzB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,MAAM,cAAc,SACjB,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,SACzB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ,cAAA,6LAAC,4OAAa;oCAAC,MAAM;;;;;;;;;;;0CAExB,6LAAC;gCAAK,WAAU;0CAA2E;;;;;;;;;;;;kCAE7F,6LAAC;wBAAG,WAAU;;4BAAmE;4BAC7E,UAAU,cAAc,CAAC,SAAS;gCAAE,uBAAuB;gCAAG,uBAAuB;4BAAE;;;;;;;kCAE3F,6LAAC;wBAAE,WAAU;;0CACX,6LAAC,6OAAW;gCAAC,MAAM;gCAAI,WAAU;;;;;;4BAAmB;;;;;;;;;;;;;0BAKxD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ,cAAA,6LAAC,gNAAK;oCAAC,MAAM;;;;;;;;;;;0CAEhB,6LAAC;gCAAK,WAAU;0CAA2E;;;;;;;;;;;;kCAE7F,6LAAC;wBAAG,WAAU;;4BAAmE;4BAC7E,aAAa,cAAc,CAAC,SAAS;gCAAE,uBAAuB;gCAAG,uBAAuB;4BAAE;;;;;;;kCAE9F,6LAAC;wBAAE,WAAU;kCAA0D;;;;;;;;;;;;0BAMzE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ,cAAA,6LAAC,sOAAW;oCAAC,MAAM;;;;;;;;;;;0CAEtB,6LAAC;gCAAK,WAAU;0CAA2E;;;;;;;;;;;;kCAE7F,6LAAC;wBAAG,WAAU;;4BAAmE;4BAC7E,cAAc,cAAc,CAAC,SAAS;gCAAE,uBAAuB;gCAAG,uBAAuB;4BAAE;;;;;;;kCAE/F,6LAAC;wBAAE,WAAU;;4BACV;4BAAa;;;;;;;;;;;;;0BAKlB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ,cAAA,6LAAC,6NAAQ;oCAAC,MAAM;;;;;;;;;;;0CAEnB,6LAAC;gCAAK,WAAU;0CAA2E;;;;;;;;;;;;kCAE7F,6LAAC;wBAAG,WAAU;;4BAAmE;4BAC7E,YAAY,cAAc,CAAC,SAAS;gCAAE,uBAAuB;gCAAG,uBAAuB;4BAAE;;;;;;;kCAE7F,6LAAC;wBAAE,WAAU;kCAA0D;;;;;;;;;;;;;;;;;;AAM/E;KArFa"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/AdminInvoiceTable.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Eye, Download, CheckCircle, FileText, Loader2 } from 'lucide-react';\r\nimport { Invoice } from '@/data/types';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell } from '../../ui/Table';\r\nimport { Badge } from '../../ui/Badge';\r\nimport { generateInvoicePDF } from '../../portal/dashboard/finance/pdfGenerator';\r\n\r\ninterface AdminInvoiceTableProps {\r\n  invoices: Invoice[];\r\n  onView: (invoice: Invoice) => void;\r\n  onMarkPaid: (invoiceId: string) => void;\r\n  onUserSelect: (userId: string) => void;\r\n}\r\n\r\nexport const AdminInvoiceTable = ({ invoices, onView, onMarkPaid, onUserSelect }: AdminInvoiceTableProps) => {\r\n  const users = mockDb.getAllUsers();\r\n  const [downloadingId, setDownloadingId] = React.useState<string | null>(null);\r\n\r\n  const getStatusVariant = (status: string) => {\r\n    switch (status) {\r\n      case 'Paid': return 'success';\r\n      case 'Pending': return 'warning';\r\n      case 'Overdue': return 'danger';\r\n      default: return 'neutral';\r\n    }\r\n  };\r\n\r\n  const handleDownload = async (e: React.MouseEvent, invoice: Invoice, user: any) => {\r\n      e.stopPropagation();\r\n      setDownloadingId(invoice.id);\r\n      try {\r\n          await generateInvoicePDF(invoice, user);\r\n      } finally {\r\n          setDownloadingId(null);\r\n      }\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#13111c] rounded-xl shadow-sm border border-gray-200 dark:border-white/5 overflow-hidden\">\r\n      {/* Mobile Card View (Hidden on Tablet+) */}\r\n      <div className=\"md:hidden divide-y divide-gray-100 dark:divide-white/5\">\r\n        {invoices.map((inv) => {\r\n          const user = users.find(u => u.id === inv.userId);\r\n          return (\r\n            <div key={inv.id} className=\"p-4 flex flex-col gap-3 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors\" onClick={() => onView(inv)}>\r\n              <div className=\"flex justify-between items-start\">\r\n                <div>\r\n                  <Badge variant={getStatusVariant(inv.status)}>{inv.status}</Badge>\r\n                  <h4 className=\"font-bold text-gray-900 dark:text-white mt-2\">{inv.reference}</h4>\r\n                  <p className=\"text-xs text-gray-500\">{new Date(inv.date).toLocaleDateString()}</p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-mono font-bold text-gray-900 dark:text-white\">£{inv.amount.toFixed(2)}</p>\r\n                  <p className=\"text-[10px] text-gray-400 mt-1\">Due: {new Date(inv.dueDate).toLocaleDateString()}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center justify-between border-t border-gray-100 dark:border-white/5 pt-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                   {user && (\r\n                     <div \r\n                        className=\"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-white/10 p-1 rounded transition-colors\"\r\n                        onClick={(e) => { e.stopPropagation(); onUserSelect(user.id); }}\r\n                     >\r\n                        <div className=\"w-6 h-6 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center text-[10px] font-bold overflow-hidden\">\r\n                           {user.avatarUrl ? <img src={user.avatarUrl} className=\"w-full h-full object-cover\"/> : user.firstName[0]}\r\n                        </div>\r\n                        <span className=\"text-xs font-bold text-gray-700 dark:text-gray-300 hover:text-jambo-600 dark:hover:text-jambo-400\">{user.firstName} {user.lastName}</span>\r\n                     </div>\r\n                   )}\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                   {inv.status !== 'Paid' && (\r\n                      <button \r\n                        onClick={(e) => { e.stopPropagation(); onMarkPaid(inv.id); }}\r\n                        className=\"p-1.5 bg-green-50 text-green-600 rounded border border-green-100 dark:bg-green-900/20 dark:border-green-800\"\r\n                      >\r\n                        <CheckCircle size={16} />\r\n                      </button>\r\n                   )}\r\n                   <button className=\"p-1.5 text-gray-400\"><Eye size={16} /></button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Desktop Table View */}\r\n      <div className=\"hidden md:block\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>Reference</TableHead>\r\n              <TableHead>Issued To</TableHead>\r\n              <TableHead>Dates</TableHead>\r\n              <TableHead>Amount</TableHead>\r\n              <TableHead>Status</TableHead>\r\n              <TableHead align=\"right\">Actions</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {invoices.map((inv) => {\r\n              const user = users.find(u => u.id === inv.userId);\r\n              return (\r\n                <TableRow key={inv.id} onClick={() => onView(inv)}>\r\n                  <TableCell>\r\n                    <span className=\"font-mono text-xs font-bold text-gray-900 dark:text-white\">{inv.reference}</span>\r\n                    <span className=\"block text-[10px] text-gray-400\">{inv.items.length} Line Item{inv.items.length !== 1 ? 's' : ''}</span>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {user ? (\r\n                      <div \r\n                        className=\"flex items-center gap-3 p-1 -ml-1 rounded hover:bg-white dark:hover:bg-white/10 transition-colors cursor-pointer w-fit\"\r\n                        onClick={(e) => { e.stopPropagation(); onUserSelect(user.id); }}\r\n                        title=\"View Profile\"\r\n                      >\r\n                        <div className=\"w-8 h-8 rounded-full bg-jambo-100 dark:bg-jambo-900/30 text-jambo-700 dark:text-jambo-300 flex items-center justify-center text-xs font-bold border border-jambo-200 dark:border-jambo-800/50\">\r\n                          {user.avatarUrl ? <img src={user.avatarUrl} className=\"w-full h-full object-cover rounded-full\"/> : user.firstName[0]}\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-bold text-gray-900 dark:text-white leading-none hover:text-jambo-600 dark:hover:text-jambo-400 transition-colors\">{user.firstName} {user.lastName}</p>\r\n                          <p className=\"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5\">{user.email}</p>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <span className=\"text-gray-400 italic\">Unknown User</span>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-0.5\">\r\n                      <p><span className=\"text-gray-400 w-10 inline-block\">Issued:</span> {new Date(inv.date).toLocaleDateString()}</p>\r\n                      <p><span className=\"text-gray-400 w-10 inline-block\">Due:</span> {new Date(inv.dueDate).toLocaleDateString()}</p>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <span className=\"font-mono font-bold text-gray-900 dark:text-white\">£{inv.amount.toFixed(2)}</span>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Badge variant={getStatusVariant(inv.status)}>{inv.status}</Badge>\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <div className=\"flex items-center justify-end gap-2\">\r\n                        {inv.status !== 'Paid' && (\r\n                            <button \r\n                                onClick={(e) => { e.stopPropagation(); onMarkPaid(inv.id); }}\r\n                                className=\"text-xs font-bold text-green-600 hover:text-green-700 hover:underline bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-lg border border-green-100 dark:border-green-900/30 flex items-center gap-1 transition-colors\"\r\n                            >\r\n                                <CheckCircle size={12} /> Pay\r\n                            </button>\r\n                        )}\r\n                        <button onClick={(e) => handleDownload(e, inv, user)} className=\"p-2 text-gray-400 hover:text-jambo-600 dark:hover:text-white transition-colors\">\r\n                            {downloadingId === inv.id ? <Loader2 size={16} className=\"animate-spin\" /> : <Download size={16} />}\r\n                        </button>\r\n                        <button className=\"p-2 text-gray-400 hover:text-jambo-600 dark:hover:text-white transition-colors\">\r\n                            <Eye size={16} />\r\n                        </button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 903, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/manual-payment/RecipientSection.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { User } from '@/data/types';\r\nimport { CustomSelect } from '../../jobs/modal/CustomSelect';\r\n\r\ninterface RecipientSectionProps {\r\n  recipientType: 'existing' | 'custom';\r\n  setRecipientType: (type: 'existing' | 'custom') => void;\r\n  selectedUserId: string;\r\n  setSelectedUserId: (id: string) => void;\r\n  customRecipient: { name: string; email: string; address: string };\r\n  setCustomRecipient: (data: { name: string; email: string; address: string }) => void;\r\n  allUsers: User[];\r\n}\r\n\r\nexport const RecipientSection = ({ \r\n  recipientType, setRecipientType, \r\n  selectedUserId, setSelectedUserId, \r\n  customRecipient, setCustomRecipient, \r\n  allUsers \r\n}: RecipientSectionProps) => {\r\n  \r\n  const userOptions = allUsers.map(u => ({\r\n      value: u.id,\r\n      label: `${u.firstName} ${u.lastName} (${u.role})`\r\n  }));\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#13111c] p-5 rounded-xl border border-gray-200 dark:border-white/10 shadow-sm\">\r\n        <div className=\"flex gap-4 mb-4 border-b border-gray-100 dark:border-white/5 pb-2\">\r\n            <button \r\n                onClick={() => setRecipientType('existing')}\r\n                className={`text-sm font-bold pb-2 border-b-2 transition-colors ${recipientType === 'existing' ? 'text-jambo-600 border-jambo-600' : 'text-gray-500 border-transparent hover:text-gray-700'}`}\r\n            >\r\n                Existing User\r\n            </button>\r\n            <button \r\n                onClick={() => setRecipientType('custom')}\r\n                className={`text-sm font-bold pb-2 border-b-2 transition-colors ${recipientType === 'custom' ? 'text-jambo-600 border-jambo-600' : 'text-gray-500 border-transparent hover:text-gray-700'}`}\r\n            >\r\n                Custom Details\r\n            </button>\r\n        </div>\r\n\r\n        {recipientType === 'existing' ? (\r\n            <div className=\"space-y-3\">\r\n                <label className=\"text-xs font-bold text-gray-500 uppercase\">Select User</label>\r\n                <CustomSelect \r\n                    options={userOptions}\r\n                    value={selectedUserId}\r\n                    onChange={setSelectedUserId}\r\n                    placeholder=\"-- Choose User --\"\r\n                />\r\n            </div>\r\n        ) : (\r\n            <div className=\"space-y-3\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Full Name</label>\r\n                        <input \r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2 text-sm dark:text-white\"\r\n                            value={customRecipient.name}\r\n                            onChange={(e) => setCustomRecipient({...customRecipient, name: e.target.value})}\r\n                            placeholder=\"Client Name\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Email</label>\r\n                        <input \r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2 text-sm dark:text-white\"\r\n                            value={customRecipient.email}\r\n                            onChange={(e) => setCustomRecipient({...customRecipient, email: e.target.value})}\r\n                            placeholder=\"client@example.com\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Address</label>\r\n                    <input \r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2 text-sm dark:text-white\"\r\n                        value={customRecipient.address}\r\n                        onChange={(e) => setCustomRecipient({...customRecipient, address: e.target.value})}\r\n                        placeholder=\"Full Billing Address\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAGA;;;AAYO,MAAM,mBAAmB,CAAC,EAC/B,aAAa,EAAE,gBAAgB,EAC/B,cAAc,EAAE,iBAAiB,EACjC,eAAe,EAAE,kBAAkB,EACnC,QAAQ,EACc;IAEtB,MAAM,cAAc,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;YACnC,OAAO,EAAE,EAAE;YACX,OAAO,GAAG,EAAE,SAAS,CAAC,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;QACrD,CAAC;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,SAAS,IAAM,iBAAiB;wBAChC,WAAW,CAAC,oDAAoD,EAAE,kBAAkB,aAAa,oCAAoC,wDAAwD;kCAChM;;;;;;kCAGD,6LAAC;wBACG,SAAS,IAAM,iBAAiB;wBAChC,WAAW,CAAC,oDAAoD,EAAE,kBAAkB,WAAW,oCAAoC,wDAAwD;kCAC9L;;;;;;;;;;;;YAKJ,kBAAkB,2BACf,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAM,WAAU;kCAA4C;;;;;;kCAC7D,6LAAC,wKAAY;wBACT,SAAS;wBACT,OAAO;wBACP,UAAU;wBACV,aAAY;;;;;;;;;;;yEAIpB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAAuD;;;;;;kDACxE,6LAAC;wCACG,WAAU;wCACV,OAAO,gBAAgB,IAAI;wCAC3B,UAAU,CAAC,IAAM,mBAAmB;gDAAC,GAAG,eAAe;gDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;4CAAA;wCAC7E,aAAY;;;;;;;;;;;;0CAGpB,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAAuD;;;;;;kDACxE,6LAAC;wCACG,WAAU;wCACV,OAAO,gBAAgB,KAAK;wCAC5B,UAAU,CAAC,IAAM,mBAAmB;gDAAC,GAAG,eAAe;gDAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4CAAA;wCAC9E,aAAY;;;;;;;;;;;;;;;;;;kCAIxB,6LAAC;;0CACG,6LAAC;gCAAM,WAAU;0CAAuD;;;;;;0CACxE,6LAAC;gCACG,WAAU;gCACV,OAAO,gBAAgB,OAAO;gCAC9B,UAAU,CAAC,IAAM,mBAAmB;wCAAC,GAAG,eAAe;wCAAE,SAAS,EAAE,MAAM,CAAC,KAAK;oCAAA;gCAChF,aAAY;;;;;;;;;;;;;;;;;;;;;;;;AAOpC;KA1Ea"}},
    {"offset": {"line": 1094, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/manual-payment/LineItemsSection.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { FileText, Plus, Trash2 } from 'lucide-react';\r\n\r\nexport interface LineItem {\r\n  id: string;\r\n  description: string;\r\n  quantity: number;\r\n  rate: number;\r\n  amount: number;\r\n  date: string;\r\n}\r\n\r\ninterface LineItemsSectionProps {\r\n  items: LineItem[];\r\n  setItems: React.Dispatch<React.SetStateAction<LineItem[]>>;\r\n}\r\n\r\nexport const LineItemsSection = ({ items, setItems }: LineItemsSectionProps) => {\r\n  \r\n  const handleItemChange = (id: string, field: keyof LineItem, value: string | number) => {\r\n      setItems(prev => prev.map(item => {\r\n          if (item.id !== id) return item;\r\n          const updates: any = { [field]: value };\r\n          if (field === 'quantity' || field === 'rate') {\r\n              const qty = field === 'quantity' ? Number(value) : item.quantity;\r\n              const rate = field === 'rate' ? Number(value) : item.rate;\r\n              updates.amount = qty * rate;\r\n          }\r\n          return { ...item, ...updates };\r\n      }));\r\n  };\r\n\r\n  const addItem = () => {\r\n      setItems(prev => [...prev, { id: Date.now().toString(), description: '', quantity: 1, rate: 0, amount: 0, date: new Date().toISOString().split('T')[0] }]);\r\n  };\r\n\r\n  const removeItem = (id: string) => {\r\n      if (items.length > 1) {\r\n          setItems(prev => prev.filter(i => i.id !== id));\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#13111c] p-5 rounded-xl border border-gray-200 dark:border-white/10 shadow-sm\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n            <h3 className=\"text-sm font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <FileText size={16} className=\"text-jambo-600\" /> Items\r\n            </h3>\r\n            <button onClick={addItem} className=\"text-xs font-bold text-jambo-600 hover:text-jambo-700 flex items-center gap-1\">\r\n                <Plus size={14} /> Add Item\r\n            </button>\r\n        </div>\r\n        \r\n        <div className=\"space-y-3\">\r\n            {/* Header Row */}\r\n            <div className=\"grid grid-cols-12 gap-2 text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2 px-2\">\r\n                <div className=\"col-span-4\">Description</div>\r\n                <div className=\"col-span-2\">Date</div>\r\n                <div className=\"col-span-2\">Qty</div>\r\n                <div className=\"col-span-2\">Rate</div>\r\n                <div className=\"col-span-2 text-right\">Amount</div>\r\n            </div>\r\n\r\n            {items.map((item) => (\r\n                <div key={item.id} className=\"grid grid-cols-12 gap-2 items-center group\">\r\n                    <div className=\"col-span-4 flex items-center gap-2\">\r\n                        <button onClick={() => removeItem(item.id)} className=\"text-gray-300 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\">\r\n                            <Trash2 size={14} />\r\n                        </button>\r\n                        <input \r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-md px-2 py-1.5 text-sm dark:text-white\"\r\n                            value={item.description}\r\n                            onChange={(e) => handleItemChange(item.id, 'description', e.target.value)}\r\n                            placeholder=\"Service Description\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-span-2\">\r\n                        <input \r\n                            type=\"date\"\r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-md px-2 py-1.5 text-xs sm:text-sm dark:text-white\"\r\n                            value={item.date}\r\n                            onChange={(e) => handleItemChange(item.id, 'date', e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-span-2\">\r\n                        <input \r\n                            type=\"number\"\r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-md px-2 py-1.5 text-sm dark:text-white text-center\"\r\n                            value={item.quantity}\r\n                            onChange={(e) => handleItemChange(item.id, 'quantity', e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-span-2\">\r\n                        <input \r\n                            type=\"number\"\r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-md px-2 py-1.5 text-sm dark:text-white text-right\"\r\n                            value={item.rate}\r\n                            onChange={(e) => handleItemChange(item.id, 'rate', e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-span-2 text-right font-mono text-sm font-bold text-gray-700 dark:text-gray-300\">\r\n                        £{item.amount.toFixed(2)}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;;;AAgBO,MAAM,mBAAmB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAyB;IAEzE,MAAM,mBAAmB,CAAC,IAAY,OAAuB;QACzD,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACtB,IAAI,KAAK,EAAE,KAAK,IAAI,OAAO;gBAC3B,MAAM,UAAe;oBAAE,CAAC,MAAM,EAAE;gBAAM;gBACtC,IAAI,UAAU,cAAc,UAAU,QAAQ;oBAC1C,MAAM,MAAM,UAAU,aAAa,OAAO,SAAS,KAAK,QAAQ;oBAChE,MAAM,OAAO,UAAU,SAAS,OAAO,SAAS,KAAK,IAAI;oBACzD,QAAQ,MAAM,GAAG,MAAM;gBAC3B;gBACA,OAAO;oBAAE,GAAG,IAAI;oBAAE,GAAG,OAAO;gBAAC;YACjC;IACJ;IAEA,MAAM,UAAU;QACZ,SAAS,CAAA,OAAQ;mBAAI;gBAAM;oBAAE,IAAI,KAAK,GAAG,GAAG,QAAQ;oBAAI,aAAa;oBAAI,UAAU;oBAAG,MAAM;oBAAG,QAAQ;oBAAG,MAAM,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBAAC;aAAE;IAC7J;IAEA,MAAM,aAAa,CAAC;QAChB,IAAI,MAAM,MAAM,GAAG,GAAG;YAClB,SAAS,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC/C;IACJ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;;0CACV,6LAAC,6NAAQ;gCAAC,MAAM;gCAAI,WAAU;;;;;;4BAAmB;;;;;;;kCAErD,6LAAC;wBAAO,SAAS;wBAAS,WAAU;;0CAChC,6LAAC,6MAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;0BAI1B,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAa;;;;;;0CAC5B,6LAAC;gCAAI,WAAU;0CAAwB;;;;;;;;;;;;oBAG1C,MAAM,GAAG,CAAC,CAAC,qBACR,6LAAC;4BAAkB,WAAU;;8CACzB,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAO,SAAS,IAAM,WAAW,KAAK,EAAE;4CAAG,WAAU;sDAClD,cAAA,6LAAC,uNAAM;gDAAC,MAAM;;;;;;;;;;;sDAElB,6LAAC;4CACG,WAAU;4CACV,OAAO,KAAK,WAAW;4CACvB,UAAU,CAAC,IAAM,iBAAiB,KAAK,EAAE,EAAE,eAAe,EAAE,MAAM,CAAC,KAAK;4CACxE,aAAY;;;;;;;;;;;;8CAGpB,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,OAAO,KAAK,IAAI;wCAChB,UAAU,CAAC,IAAM,iBAAiB,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;8CAGzE,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,OAAO,KAAK,QAAQ;wCACpB,UAAU,CAAC,IAAM,iBAAiB,KAAK,EAAE,EAAE,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;8CAG7E,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,OAAO,KAAK,IAAI;wCAChB,UAAU,CAAC,IAAM,iBAAiB,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;8CAGzE,6LAAC;oCAAI,WAAU;;wCAAqF;wCAC9F,KAAK,MAAM,CAAC,OAAO,CAAC;;;;;;;;2BArCpB,KAAK,EAAE;;;;;;;;;;;;;;;;;AA4CjC;KA3Fa"}},
    {"offset": {"line": 1368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/manual-payment/SummarySection.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Calendar, PoundSterling } from 'lucide-react';\r\n\r\ninterface SummarySectionProps {\r\n  reference: string;\r\n  setReference: (s: string) => void;\r\n  issueDate: string;\r\n  setIssueDate: (s: string) => void;\r\n  dueDate: string;\r\n  setDueDate: (s: string) => void;\r\n  subtotal: number;\r\n  vatEnabled: boolean;\r\n  setVatEnabled: (b: boolean) => void;\r\n  vatRate: number;\r\n  setVatRate: (n: number) => void;\r\n  vatAmount: number;\r\n  total: number;\r\n}\r\n\r\nexport const SummarySection = ({\r\n  reference, setReference, issueDate, setIssueDate, dueDate, setDueDate,\r\n  subtotal, vatEnabled, setVatEnabled, vatRate, setVatRate, vatAmount, total\r\n}: SummarySectionProps) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n        {/* Dates */}\r\n        <div className=\"bg-white dark:bg-[#13111c] p-5 rounded-xl border border-gray-200 dark:border-white/10 shadow-sm\">\r\n            <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\r\n                <Calendar size={14} /> Invoice Dates\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 mb-1 block\">Reference</label>\r\n                    <input \r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2 text-sm font-mono dark:text-white\"\r\n                        value={reference}\r\n                        onChange={(e) => setReference(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 mb-1 block\">Issue Date</label>\r\n                    <input \r\n                        type=\"date\"\r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2 text-sm dark:text-white\"\r\n                        value={issueDate}\r\n                        onChange={(e) => setIssueDate(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 mb-1 block\">Due Date</label>\r\n                    <input \r\n                        type=\"date\"\r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2 text-sm dark:text-white\"\r\n                        value={dueDate}\r\n                        onChange={(e) => setDueDate(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        {/* Totals */}\r\n        <div className=\"bg-white dark:bg-[#13111c] p-5 rounded-xl border border-gray-200 dark:border-white/10 shadow-sm\">\r\n            <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\r\n                <PoundSterling size={14} /> Summary\r\n            </h3>\r\n            \r\n            <div className=\"space-y-3 mb-4\">\r\n                <div className=\"flex justify-between text-sm text-gray-600 dark:text-gray-300\">\r\n                    <span>Subtotal</span>\r\n                    <span>£{subtotal.toFixed(2)}</span>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between\">\r\n                    <label className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300 cursor-pointer\">\r\n                        <input \r\n                            type=\"checkbox\" \r\n                            checked={vatEnabled}\r\n                            onChange={(e) => setVatEnabled(e.target.checked)}\r\n                            className=\"rounded text-jambo-600 focus:ring-jambo-500\"\r\n                        />\r\n                        Add VAT\r\n                    </label>\r\n                    {vatEnabled && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <input \r\n                                type=\"number\" \r\n                                className=\"w-12 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded px-1 py-0.5 text-xs text-right dark:text-white\"\r\n                                value={vatRate}\r\n                                onChange={(e) => setVatRate(Number(e.target.value))}\r\n                            />\r\n                            <span className=\"text-xs\">%</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                \r\n                {vatEnabled && (\r\n                    <div className=\"flex justify-between text-sm text-gray-600 dark:text-gray-300\">\r\n                        <span>VAT Amount</span>\r\n                        <span>£{vatAmount.toFixed(2)}</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"pt-4 border-t border-gray-100 dark:border-white/5 flex justify-between items-end\">\r\n                <span className=\"text-sm font-bold text-gray-900 dark:text-white\">Total Due</span>\r\n                <span className=\"text-2xl font-bold text-jambo-600 dark:text-jambo-400 font-mono\">\r\n                    £{total.toFixed(2)}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;;;AAkBO,MAAM,iBAAiB,CAAC,EAC7B,SAAS,EAAE,YAAY,EAAE,SAAS,EAAE,YAAY,EAAE,OAAO,EAAE,UAAU,EACrE,QAAQ,EAAE,UAAU,EAAE,aAAa,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EACtD;IACpB,qBACE,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;;0CACV,6LAAC,yNAAQ;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAE1B,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA6C;;;;;;kDAC9D,6LAAC;wCACG,WAAU;wCACV,OAAO;wCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAGpD,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA6C;;;;;;kDAC9D,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,OAAO;wCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAGpD,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA6C;;;;;;kDAC9D,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,OAAO;wCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;;0BAO1D,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;;0CACV,6LAAC,4OAAa;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAG/B,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;kDAAK;;;;;;kDACN,6LAAC;;4CAAK;4CAAE,SAAS,OAAO,CAAC;;;;;;;;;;;;;0CAG7B,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAM,WAAU;;0DACb,6LAAC;gDACG,MAAK;gDACL,SAAS;gDACT,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,OAAO;gDAC/C,WAAU;;;;;;4CACZ;;;;;;;oCAGL,4BACG,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDACG,MAAK;gDACL,WAAU;gDACV,OAAO;gDACP,UAAU,CAAC,IAAM,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;0DAErD,6LAAC;gDAAK,WAAU;0DAAU;;;;;;;;;;;;;;;;;;4BAKrC,4BACG,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;kDAAK;;;;;;kDACN,6LAAC;;4CAAK;4CAAE,UAAU,OAAO,CAAC;;;;;;;;;;;;;;;;;;;kCAKtC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAK,WAAU;0CAAkD;;;;;;0CAClE,6LAAC;gCAAK,WAAU;;oCAAkE;oCAC5E,MAAM,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAMpC;KA7Fa"}},
    {"offset": {"line": 1681, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/ManualPaymentModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { X, Plus, Download, Save, AlertTriangle } from 'lucide-react';\r\nimport { mockDb, Invoice } from '@/data/mockDatabase';\r\nimport { generateInvoicePDF } from '../../portal/dashboard/finance/pdfGenerator';\r\nimport { RecipientSection } from './manual-payment/RecipientSection';\r\nimport { LineItemsSection, LineItem } from './manual-payment/LineItemsSection';\r\nimport { SummarySection } from './manual-payment/SummarySection';\r\nimport { Modal } from '../../ui/Modal';\r\n\r\ninterface ManualPaymentModalProps {\r\n  onClose: () => void;\r\n  onInvoiceCreated: () => void;\r\n  invoiceToEdit?: Invoice | null; // Optional prop for editing\r\n}\r\n\r\nexport const ManualPaymentModal = ({ onClose, onInvoiceCreated, invoiceToEdit }: ManualPaymentModalProps) => {\r\n  // Recipient State\r\n  const [recipientType, setRecipientType] = useState<'existing' | 'custom'>('existing');\r\n  const [selectedUserId, setSelectedUserId] = useState<string>('');\r\n  const [customRecipient, setCustomRecipient] = useState({ name: '', email: '', address: '' });\r\n\r\n  // Invoice Details State\r\n  const [reference, setReference] = useState(`INV-MAN-${Date.now().toString().slice(-6)}`);\r\n  const [issueDate, setIssueDate] = useState(new Date().toISOString().split('T')[0]);\r\n  const [dueDate, setDueDate] = useState(new Date(Date.now() + 14 * 86400000).toISOString().split('T')[0]);\r\n  \r\n  // Items State\r\n  const [items, setItems] = useState<LineItem[]>([\r\n      { id: '1', description: '', quantity: 1, rate: 0, amount: 0, date: new Date().toISOString().split('T')[0] }\r\n  ]);\r\n\r\n  // Tax State\r\n  const [vatEnabled, setVatEnabled] = useState(false);\r\n  const [vatRate, setVatRate] = useState(20);\r\n\r\n  // Computed Totals\r\n  const subtotal = useMemo(() => items.reduce((sum, item) => sum + item.amount, 0), [items]);\r\n  const vatAmount = vatEnabled ? (subtotal * vatRate) / 100 : 0;\r\n  const total = subtotal + vatAmount;\r\n\r\n  const allUsers = mockDb.getAllUsers();\r\n\r\n  // Initialize data for Edit Mode\r\n  useEffect(() => {\r\n      if (invoiceToEdit) {\r\n          setReference(invoiceToEdit.reference);\r\n          setIssueDate(invoiceToEdit.date.split('T')[0]);\r\n          setDueDate(invoiceToEdit.dueDate.split('T')[0]);\r\n          \r\n          if (invoiceToEdit.customRecipient) {\r\n              setRecipientType('custom');\r\n              setCustomRecipient({\r\n                  name: invoiceToEdit.customRecipient.name,\r\n                  email: invoiceToEdit.customRecipient.email || '',\r\n                  address: invoiceToEdit.customRecipient.address || ''\r\n              });\r\n          } else {\r\n              setRecipientType('existing');\r\n              setSelectedUserId(invoiceToEdit.userId);\r\n          }\r\n\r\n          setItems(invoiceToEdit.items.map((i, idx) => ({\r\n              id: idx.toString(),\r\n              description: i.description,\r\n              quantity: i.quantity || 1,\r\n              rate: i.rate || i.amount,\r\n              amount: i.amount,\r\n              date: i.date || invoiceToEdit.date.split('T')[0]\r\n          })));\r\n\r\n          if (invoiceToEdit.vatRate) {\r\n              setVatEnabled(true);\r\n              setVatRate(invoiceToEdit.vatRate);\r\n          }\r\n      }\r\n  }, [invoiceToEdit]);\r\n\r\n  const handleSave = async (download: boolean) => {\r\n      if (recipientType === 'existing' && !selectedUserId) {\r\n          alert(\"Please select a user.\");\r\n          return;\r\n      }\r\n      if (recipientType === 'custom' && !customRecipient.name) {\r\n          alert(\"Please enter a recipient name.\");\r\n          return;\r\n      }\r\n\r\n      if (invoiceToEdit && invoiceToEdit.status === 'Paid') {\r\n          if (!confirm(\"Warning: You are editing a PAID invoice. A notification of amendment will be sent to the user. Continue?\")) {\r\n              return;\r\n          }\r\n      }\r\n\r\n      const now = new Date().toISOString();\r\n      const invoiceData: Invoice = {\r\n          id: invoiceToEdit ? invoiceToEdit.id : `inv-${Date.now()}`,\r\n          userId: recipientType === 'existing' ? selectedUserId : 'custom',\r\n          reference,\r\n          date: issueDate,\r\n          dueDate: dueDate,\r\n          amount: total,\r\n          subtotal: subtotal,\r\n          vatRate: vatEnabled ? vatRate : undefined,\r\n          status: invoiceToEdit ? invoiceToEdit.status : 'Pending', // Preserve status if editing\r\n          items: items.map(i => ({\r\n              description: i.description,\r\n              quantity: Number(i.quantity),\r\n              rate: Number(i.rate),\r\n              amount: Number(i.amount),\r\n              date: i.date\r\n          })),\r\n          customRecipient: recipientType === 'custom' ? customRecipient : undefined,\r\n          createdAt: invoiceToEdit ? invoiceToEdit.createdAt : now,\r\n          updatedAt: now,\r\n          deletedAt: null\r\n      };\r\n\r\n      if (invoiceToEdit) {\r\n          mockDb.updateInvoice(invoiceData);\r\n      } else {\r\n          mockDb.createInvoice(invoiceData);\r\n      }\r\n\r\n      if (download) {\r\n          const user = recipientType === 'existing' ? allUsers.find(u => u.id === selectedUserId) || null : null;\r\n          await generateInvoicePDF(invoiceData, user);\r\n      }\r\n\r\n      onInvoiceCreated();\r\n      onClose();\r\n  };\r\n\r\n  const isPaid = invoiceToEdit?.status === 'Paid';\r\n\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} size=\"4xl\">\r\n        {/* Header */}\r\n        <div className=\"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center bg-gray-50/50 dark:bg-white/5\">\r\n            <div>\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                    {invoiceToEdit ? (\r\n                        <><Save className=\"text-jambo-600 dark:text-jambo-400\" size={24} /> Edit Invoice {invoiceToEdit.reference}</>\r\n                    ) : (\r\n                        <><Plus className=\"text-jambo-600 dark:text-jambo-400\" size={24} /> Create Manual Invoice</>\r\n                    )}\r\n                </h2>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                    {invoiceToEdit ? 'Update details for this invoice.' : 'Generate a bespoke invoice for any service.'}\r\n                </p>\r\n            </div>\r\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors\">\r\n                <X size={20} />\r\n            </button>\r\n        </div>\r\n\r\n        {isPaid && (\r\n            <div className=\"bg-orange-50 dark:bg-orange-900/20 px-6 py-3 border-b border-orange-100 dark:border-orange-800 flex items-center gap-2 text-orange-700 dark:text-orange-300 text-sm font-bold\">\r\n                <AlertTriangle size={16} />\r\n                Warning: Editing a paid invoice will trigger an amendment notification.\r\n            </div>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 overflow-y-auto custom-scrollbar flex-1 bg-gray-50 dark:bg-black/10\">\r\n            <div className=\"grid lg:grid-cols-3 gap-6\">\r\n                \r\n                {/* Left Column: Details */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <RecipientSection \r\n                        recipientType={recipientType} \r\n                        setRecipientType={setRecipientType}\r\n                        selectedUserId={selectedUserId}\r\n                        setSelectedUserId={setSelectedUserId}\r\n                        customRecipient={customRecipient}\r\n                        setCustomRecipient={setCustomRecipient}\r\n                        allUsers={allUsers}\r\n                    />\r\n                    \r\n                    <LineItemsSection \r\n                        items={items}\r\n                        setItems={setItems}\r\n                    />\r\n                </div>\r\n\r\n                {/* Right Column: Settings & Summary */}\r\n                <div className=\"lg:col-span-1\">\r\n                    <SummarySection \r\n                        reference={reference} setReference={setReference}\r\n                        issueDate={issueDate} setIssueDate={setIssueDate}\r\n                        dueDate={dueDate} setDueDate={setDueDate}\r\n                        subtotal={subtotal}\r\n                        vatEnabled={vatEnabled} setVatEnabled={setVatEnabled}\r\n                        vatRate={vatRate} setVatRate={setVatRate}\r\n                        vatAmount={vatAmount}\r\n                        total={total}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5 flex justify-end gap-3\">\r\n            <button \r\n                onClick={onClose}\r\n                className=\"px-6 py-2.5 rounded-lg border border-gray-200 dark:border-white/10 text-gray-600 dark:text-gray-300 font-bold text-sm hover:bg-white dark:hover:bg-white/5 transition-colors\"\r\n            >\r\n                Cancel\r\n            </button>\r\n            <button \r\n                onClick={() => handleSave(false)}\r\n                className=\"px-6 py-2.5 rounded-lg bg-white dark:bg-white/10 text-gray-700 dark:text-white border border-gray-200 dark:border-white/20 font-bold text-sm hover:bg-gray-50 dark:hover:bg-white/20 transition-colors flex items-center gap-2\"\r\n            >\r\n                <Save size={16} /> Save Changes\r\n            </button>\r\n            <button \r\n                onClick={() => handleSave(true)}\r\n                className=\"px-6 py-2.5 rounded-lg bg-jambo-600 hover:bg-jambo-700 text-white font-bold text-sm shadow-lg flex items-center gap-2 transition-all\"\r\n            >\r\n                <Download size={16} /> Save & Download\r\n            </button>\r\n        </div>\r\n    </Modal>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAQO,MAAM,qBAAqB,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,aAAa,EAA2B;;IACtG,kBAAkB;IAClB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAwB;IAC1E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAS;IAC7D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;QAAE,MAAM;QAAI,OAAO;QAAI,SAAS;IAAG;IAE1F,wBAAwB;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,IAAI;IACvF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACjF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAEvG,cAAc;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAa;QAC3C;YAAE,IAAI;YAAK,aAAa;YAAI,UAAU;YAAG,MAAM;YAAG,QAAQ;YAAG,MAAM,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAAC;KAC7G;IAED,YAAY;IACZ,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,kBAAkB;IAClB,MAAM,WAAW,IAAA,wKAAO;gDAAC,IAAM,MAAM,MAAM;wDAAC,CAAC,KAAK,OAAS,MAAM,KAAK,MAAM;uDAAE;+CAAI;QAAC;KAAM;IACzF,MAAM,YAAY,aAAa,AAAC,WAAW,UAAW,MAAM;IAC5D,MAAM,QAAQ,WAAW;IAEzB,MAAM,WAAW,iJAAM,CAAC,WAAW;IAEnC,gCAAgC;IAChC,IAAA,0KAAS;wCAAC;YACN,IAAI,eAAe;gBACf,aAAa,cAAc,SAAS;gBACpC,aAAa,cAAc,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBAC7C,WAAW,cAAc,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBAE9C,IAAI,cAAc,eAAe,EAAE;oBAC/B,iBAAiB;oBACjB,mBAAmB;wBACf,MAAM,cAAc,eAAe,CAAC,IAAI;wBACxC,OAAO,cAAc,eAAe,CAAC,KAAK,IAAI;wBAC9C,SAAS,cAAc,eAAe,CAAC,OAAO,IAAI;oBACtD;gBACJ,OAAO;oBACH,iBAAiB;oBACjB,kBAAkB,cAAc,MAAM;gBAC1C;gBAEA,SAAS,cAAc,KAAK,CAAC,GAAG;oDAAC,CAAC,GAAG,MAAQ,CAAC;4BAC1C,IAAI,IAAI,QAAQ;4BAChB,aAAa,EAAE,WAAW;4BAC1B,UAAU,EAAE,QAAQ,IAAI;4BACxB,MAAM,EAAE,IAAI,IAAI,EAAE,MAAM;4BACxB,QAAQ,EAAE,MAAM;4BAChB,MAAM,EAAE,IAAI,IAAI,cAAc,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;wBACpD,CAAC;;gBAED,IAAI,cAAc,OAAO,EAAE;oBACvB,cAAc;oBACd,WAAW,cAAc,OAAO;gBACpC;YACJ;QACJ;uCAAG;QAAC;KAAc;IAElB,MAAM,aAAa,OAAO;QACtB,IAAI,kBAAkB,cAAc,CAAC,gBAAgB;YACjD,MAAM;YACN;QACJ;QACA,IAAI,kBAAkB,YAAY,CAAC,gBAAgB,IAAI,EAAE;YACrD,MAAM;YACN;QACJ;QAEA,IAAI,iBAAiB,cAAc,MAAM,KAAK,QAAQ;YAClD,IAAI,CAAC,QAAQ,6GAA6G;gBACtH;YACJ;QACJ;QAEA,MAAM,MAAM,IAAI,OAAO,WAAW;QAClC,MAAM,cAAuB;YACzB,IAAI,gBAAgB,cAAc,EAAE,GAAG,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;YAC1D,QAAQ,kBAAkB,aAAa,iBAAiB;YACxD;YACA,MAAM;YACN,SAAS;YACT,QAAQ;YACR,UAAU;YACV,SAAS,aAAa,UAAU;YAChC,QAAQ,gBAAgB,cAAc,MAAM,GAAG;YAC/C,OAAO,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;oBACnB,aAAa,EAAE,WAAW;oBAC1B,UAAU,OAAO,EAAE,QAAQ;oBAC3B,MAAM,OAAO,EAAE,IAAI;oBACnB,QAAQ,OAAO,EAAE,MAAM;oBACvB,MAAM,EAAE,IAAI;gBAChB,CAAC;YACD,iBAAiB,kBAAkB,WAAW,kBAAkB;YAChE,WAAW,gBAAgB,cAAc,SAAS,GAAG;YACrD,WAAW;YACX,WAAW;QACf;QAEA,IAAI,eAAe;YACf,iJAAM,CAAC,aAAa,CAAC;QACzB,OAAO;YACH,iJAAM,CAAC,aAAa,CAAC;QACzB;QAEA,IAAI,UAAU;YACV,MAAM,OAAO,kBAAkB,aAAa,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,mBAAmB,OAAO;YAClG,MAAM,IAAA,qLAAkB,EAAC,aAAa;QAC1C;QAEA;QACA;IACJ;IAEA,MAAM,SAAS,eAAe,WAAW;IAEzC,qBACE,6LAAC,sIAAK;QAAC,QAAQ;QAAM,SAAS;QAAS,MAAK;;0BAExC,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;0CACT,8BACG;;sDAAE,6LAAC,6MAAI;4CAAC,WAAU;4CAAqC,MAAM;;;;;;wCAAM;wCAAe,cAAc,SAAS;;iEAEzG;;sDAAE,6LAAC,6MAAI;4CAAC,WAAU;4CAAqC,MAAM;;;;;;wCAAM;;;;;;;;0CAG3E,6LAAC;gCAAE,WAAU;0CACR,gBAAgB,qCAAqC;;;;;;;;;;;;kCAG9D,6LAAC;wBAAO,SAAS;wBAAS,WAAU;kCAChC,cAAA,6LAAC,oMAAC;4BAAC,MAAM;;;;;;;;;;;;;;;;;YAIhB,wBACG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,4OAAa;wBAAC,MAAM;;;;;;oBAAM;;;;;;;0BAMnC,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCAGX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,+LAAgB;oCACb,eAAe;oCACf,kBAAkB;oCAClB,gBAAgB;oCAChB,mBAAmB;oCACnB,iBAAiB;oCACjB,oBAAoB;oCACpB,UAAU;;;;;;8CAGd,6LAAC,+LAAgB;oCACb,OAAO;oCACP,UAAU;;;;;;;;;;;;sCAKlB,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,2LAAc;gCACX,WAAW;gCAAW,cAAc;gCACpC,WAAW;gCAAW,cAAc;gCACpC,SAAS;gCAAS,YAAY;gCAC9B,UAAU;gCACV,YAAY;gCAAY,eAAe;gCACvC,SAAS;gCAAS,YAAY;gCAC9B,WAAW;gCACX,OAAO;;;;;;;;;;;;;;;;;;;;;;0BAOvB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;;kCAGD,6LAAC;wBACG,SAAS,IAAM,WAAW;wBAC1B,WAAU;;0CAEV,6LAAC,6MAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEtB,6LAAC;wBACG,SAAS,IAAM,WAAW;wBAC1B,WAAU;;0CAEV,6LAAC,yNAAQ;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;AAKtC;GAhNa;KAAA"}},
    {"offset": {"line": 2073, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/finance/AdminFinance.tsx"],"sourcesContent":["import React, { useState, useMemo, useRef, useEffect } from 'react';\r\nimport { Search, Filter, Download, Plus, Loader2 } from 'lucide-react';\r\nimport { mockDb, Invoice, Job } from '@/data/mockDatabase';\r\nimport { AdminFinanceStats } from './AdminFinanceStats';\r\nimport { AdminInvoiceTable } from './AdminInvoiceTable';\r\nimport { InvoicePreviewModal } from '../../portal/dashboard/finance/InvoicePreviewModal';\r\nimport { ManualPaymentModal } from './ManualPaymentModal';\r\nimport { UserProfileModal } from '../users/UserProfileModal';\r\nimport { AdminJobModal } from '../jobs/AdminJobModal';\r\nimport { generateStatementPDF } from '../../portal/dashboard/finance/pdfGenerator';\r\n\r\n\r\nexport const AdminFinance = () => {\r\n  const [invoices, setInvoices] = useState(mockDb.getAllInvoices());\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('All');\r\n  const [selectedInvoice, setSelectedInvoice] = useState<Invoice | null>(null);\r\n  \r\n  // Modal states\r\n  const [isManualPaymentOpen, setIsManualPaymentOpen] = useState(false);\r\n  const [invoiceToEdit, setInvoiceToEdit] = useState<Invoice | null>(null);\r\n  const [viewingLinguistId, setViewingLinguistId] = useState<string | null>(null);\r\n  const [jobToView, setJobToView] = useState<Job | null>(null);\r\n\r\n  // Export state\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [isExportMenuOpen, setIsExportMenuOpen] = useState(false);\r\n  const exportMenuRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n        if (exportMenuRef.current && !exportMenuRef.current.contains(event.target as Node)) {\r\n            setIsExportMenuOpen(false);\r\n        }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const refreshData = () => {\r\n      const freshInvoices = mockDb.getAllInvoices();\r\n      setInvoices(freshInvoices);\r\n      \r\n      // Update selected invoice if open to reflect new state immediately\r\n      if (selectedInvoice) {\r\n          const updatedSelected = freshInvoices.find(i => i.id === selectedInvoice.id);\r\n          if (updatedSelected) setSelectedInvoice(updatedSelected);\r\n      }\r\n  };\r\n\r\n  const handleMarkPaid = (id: string, fromModal: boolean = false) => {\r\n      if (!fromModal && !confirm('Are you sure you want to mark this invoice as Paid? This will update the status immediately.')) {\r\n        return;\r\n      }\r\n\r\n      mockDb.updateInvoiceStatus(id, 'Paid');\r\n      refreshData();\r\n  };\r\n\r\n  const handleEditInvoice = (invoice: Invoice) => {\r\n      setSelectedInvoice(null);\r\n      setInvoiceToEdit(invoice);\r\n      setIsManualPaymentOpen(true);\r\n  };\r\n\r\n  const handleJobView = (jobId: string) => {\r\n      const job = mockDb.getAllJobs().find(j => j.id === jobId);\r\n      if (job) {\r\n          setJobToView(job);\r\n      }\r\n  };\r\n\r\n  const handleProfileView = (userId: string) => {\r\n      setViewingLinguistId(userId);\r\n  };\r\n\r\n  const filteredInvoices = useMemo(() => {\r\n      return invoices.filter(inv => {\r\n          // Status Filter\r\n          if (statusFilter !== 'All' && inv.status !== statusFilter) return false;\r\n          \r\n          // Search Filter (Ref, or User Name)\r\n          if (searchTerm) {\r\n              const lowerTerm = searchTerm.toLowerCase();\r\n              const user = mockDb.getAllUsers().find(u => u.id === inv.userId);\r\n              const userName = user ? `${user.firstName} ${user.lastName}`.toLowerCase() : '';\r\n              const customName = inv.customRecipient?.name.toLowerCase() || '';\r\n              \r\n              return (\r\n                  inv.reference.toLowerCase().includes(lowerTerm) ||\r\n                  userName.includes(lowerTerm) ||\r\n                  customName.includes(lowerTerm) ||\r\n                  inv.amount.toString().includes(lowerTerm)\r\n              );\r\n          }\r\n          return true;\r\n      });\r\n  }, [invoices, statusFilter, searchTerm]);\r\n\r\n  const handleExportStatement = async (period: '30d' | '90d' | 'year' | 'all') => {\r\n      if (invoices.length === 0) return;\r\n      \r\n      setIsExporting(true);\r\n      setIsExportMenuOpen(false);\r\n\r\n      const now = new Date();\r\n      const filtered = invoices.filter(inv => {\r\n          const invDate = new Date(inv.date);\r\n          if (period === 'all') return true;\r\n          if (period === 'year') return invDate.getFullYear() === now.getFullYear();\r\n          \r\n          let days = 0;\r\n          if (period === '30d') days = 30;\r\n          if (period === '90d') days = 90;\r\n          \r\n          const cutoff = new Date();\r\n          cutoff.setDate(now.getDate() - days);\r\n          return invDate >= cutoff;\r\n      });\r\n\r\n      if (filtered.length === 0) {\r\n          console.warn(\"No invoices in selected period to export.\");\r\n          setIsExporting(false);\r\n          return;\r\n      }\r\n\r\n      try {\r\n          const periodLabel = {\r\n              '30d': 'Last 30 Days',\r\n              '90d': 'Last 90 Days',\r\n              'year': `Year ${now.getFullYear()}`,\r\n              'all': 'All Time'\r\n          }[period];\r\n          // Pass null for user to generate a company-wide report\r\n          await generateStatementPDF(filtered, null, periodLabel);\r\n      } catch (e) {\r\n          console.error(e);\r\n      } finally {\r\n          setIsExporting(false);\r\n      }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n        <div className=\"flex flex-col md:flex-row justify-between gap-4\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Financial Operations</h2>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Manage payroll, invoices, and payouts.</p>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n                <div className=\"relative\" ref={exportMenuRef}>\r\n                  <button \r\n                    onClick={() => setIsExportMenuOpen(!isExportMenuOpen)}\r\n                    disabled={isExporting || invoices.length === 0}\r\n                    className=\"bg-white dark:bg-white/10 text-gray-700 dark:text-white border border-gray-200 dark:border-white/20 px-4 py-2 rounded-lg font-bold text-sm shadow-sm hover:bg-gray-50 dark:hover:bg-white/20 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {isExporting ? <Loader2 size={16} className=\"animate-spin\" /> : <Download size={16} />} \r\n                    Export Report\r\n                  </button>\r\n                  {isExportMenuOpen && (\r\n                    <div className=\"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-[#1a1625] rounded-lg shadow-lg border border-gray-200 dark:border-white/10 z-10 p-2 animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                        <button onClick={() => handleExportStatement('30d')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">Last 30 Days</button>\r\n                        <button onClick={() => handleExportStatement('90d')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">Last 90 Days</button>\r\n                        <button onClick={() => handleExportStatement('year')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">This Year</button>\r\n                        <button onClick={() => handleExportStatement('all')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">All Time</button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <button \r\n                    onClick={() => { setInvoiceToEdit(null); setIsManualPaymentOpen(true); }}\r\n                    className=\"bg-jambo-600 hover:bg-jambo-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 text-sm shadow-lg shadow-jambo-600/20 transition-all\"\r\n                >\r\n                    <Plus size={18} /> Manual Payment\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n        <AdminFinanceStats invoices={invoices} />\r\n\r\n        {/* Filters */}\r\n        <div className=\"bg-white dark:bg-[#13111c] p-4 rounded-xl shadow-sm border border-gray-200 dark:border-white/5 flex flex-col md:flex-row gap-4\">\r\n            <div className=\"relative flex-1\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                <input \r\n                    type=\"text\" \r\n                    placeholder=\"Search by Reference, Linguist Name, Amount...\" \r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-jambo-600 dark:text-white\"\r\n                />\r\n            </div>\r\n            <div className=\"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 custom-scrollbar\">\r\n                {['All', 'Paid', 'Pending', 'Overdue'].map(status => (\r\n                    <button \r\n                        key={status}\r\n                        onClick={() => setStatusFilter(status)}\r\n                        className={`px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors border ${\r\n                            statusFilter === status \r\n                                ? 'bg-gray-900 text-white border-gray-900 dark:bg-white dark:text-gray-900' \r\n                                : 'bg-white dark:bg-white/5 text-gray-600 dark:text-gray-300 border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10'\r\n                        }`}\r\n                    >\r\n                        {status}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n\r\n        <AdminInvoiceTable \r\n            invoices={filteredInvoices} \r\n            onView={setSelectedInvoice}\r\n            onMarkPaid={(id) => handleMarkPaid(id, false)}\r\n            onUserSelect={setViewingLinguistId}\r\n        />\r\n\r\n        {selectedInvoice && (\r\n            <InvoicePreviewModal\r\n                invoice={selectedInvoice}\r\n                onClose={() => setSelectedInvoice(null)}\r\n                onMarkPaid={() => handleMarkPaid(selectedInvoice.id, true)}\r\n                onEdit={handleEditInvoice}\r\n                onViewJob={handleJobView}\r\n                onViewProfile={handleProfileView}\r\n            />\r\n        )}\r\n\r\n        {isManualPaymentOpen && (\r\n            <ManualPaymentModal \r\n                onClose={() => { setIsManualPaymentOpen(false); setInvoiceToEdit(null); }} \r\n                onInvoiceCreated={refreshData}\r\n                invoiceToEdit={invoiceToEdit}\r\n            />\r\n        )}\r\n\r\n        {viewingLinguistId && (\r\n            <UserProfileModal \r\n                user={mockDb.getAllUsers().find(u => u.id === viewingLinguistId)!} \r\n                onClose={() => setViewingLinguistId(null)} \r\n                onUpdate={() => {}}\r\n                onNavigate={() => {}}\r\n            />\r\n        )}\r\n\r\n        {jobToView && (\r\n            <AdminJobModal \r\n                job={jobToView} \r\n                onClose={() => setJobToView(null)} \r\n                onUpdate={() => setJobToView(null)} \r\n            />\r\n        )}\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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"}}]
}