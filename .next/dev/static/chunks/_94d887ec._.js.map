{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/CustomCursor.tsx"],"sourcesContent":["'use client'\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nexport const CustomCursor = () => {\r\n  const cursorRef = useRef<HTMLDivElement>(null); // The ring\r\n  const dotRef = useRef<HTMLDivElement>(null);    // The dot\r\n  \r\n  // Position State\r\n  const target = useRef({ x: -100, y: -100 });\r\n  const pos = useRef({ x: -100, y: -100 });\r\n  const isFirstMove = useRef(true); // Track first movement to prevent entry animation\r\n  \r\n  // Idle Animation State\r\n  const lastMoveTime = useRef(Date.now());\r\n  const bounceStartTime = useRef<number | null>(null);\r\n  const lastIdleLevel = useRef(0);\r\n  const targetBounceCount = useRef(0);\r\n  \r\n  // Interaction State\r\n  const [isHovering, setIsHovering] = useState(false);\r\n  const [isHidden, setIsHidden] = useState(false); \r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false); // Controls initial render visibility\r\n\r\n  // Ripple State\r\n  const [ripples, setRipples] = useState<{id: number, x: number, y: number}[]>([]);\r\n\r\n  useEffect(() => {\r\n    // --- Global Click/Touch Tracking for Ripples ---\r\n    const handlePointerDown = (e: PointerEvent) => {\r\n      const newRipple = { id: Date.now(), x: e.clientX, y: e.clientY };\r\n      setRipples((prev) => [...prev, newRipple]);\r\n      lastMoveTime.current = Date.now(); // Reset idle timer\r\n      \r\n      // Cleanup ripple after animation\r\n      setTimeout(() => {\r\n        setRipples((prev) => prev.filter((r) => r.id !== newRipple.id));\r\n      }, 600);\r\n    };\r\n\r\n    window.addEventListener('pointerdown', handlePointerDown);\r\n\r\n    // --- Shared Logic for updating cursor state ---\r\n    const updateCursorState = (clientX: number, clientY: number, eventTarget: EventTarget | null) => {\r\n      lastMoveTime.current = Date.now(); // Reset idle timer\r\n\r\n      // Update target position for the lerping animation\r\n      target.current = { x: clientX, y: clientY };\r\n      \r\n      // Update the dot's position instantly for responsiveness (only if not currently animating idle bounce)\r\n      if (dotRef.current && !bounceStartTime.current) {\r\n        dotRef.current.style.transform = `translate3d(${clientX}px, ${clientY}px, 0) translate(-50%, -50%)`;\r\n      }\r\n\r\n      // Check the element under the cursor to update hover/hidden states\r\n      const t = eventTarget as HTMLElement;\r\n      if (!t) return;\r\n      \r\n      const isInput = t.matches('input, textarea, [contenteditable=\"true\"]');\r\n      setIsHidden(isInput);\r\n      \r\n      const isClickable = t.closest('a, button, .cursor-pointer, select, [role=\"button\"]');\r\n      setIsHovering(!!isClickable && !isInput);\r\n    };\r\n\r\n    // --- Event Handlers ---\r\n    const onMouseMove = (e: MouseEvent) => {\r\n      if (isFirstMove.current) {\r\n        isFirstMove.current = false;\r\n        // Snap immediately to position on first move to avoid \"flying in\"\r\n        pos.current = { x: e.clientX, y: e.clientY };\r\n        target.current = { x: e.clientX, y: e.clientY };\r\n        setIsVisible(true);\r\n      }\r\n      updateCursorState(e.clientX, e.clientY, e.target);\r\n    };\r\n\r\n    const onTouchMove = (e: TouchEvent) => {\r\n      if (e.touches.length > 0) {\r\n        if (isFirstMove.current) {\r\n            isFirstMove.current = false;\r\n            setIsVisible(true);\r\n        }\r\n        const touch = e.touches[0];\r\n        // For touch, we find the element at the touch point coordinates\r\n        const targetElement = document.elementFromPoint(touch.clientX, touch.clientY);\r\n        updateCursorState(touch.clientX, touch.clientY, targetElement);\r\n      }\r\n    };\r\n\r\n    const onDown = () => { setIsClicked(true); lastMoveTime.current = Date.now(); };\r\n    const onUp = () => { setIsClicked(false); lastMoveTime.current = Date.now(); };\r\n    \r\n    // --- Add Listeners ---\r\n    window.addEventListener('mousemove', onMouseMove, { passive: true });\r\n    window.addEventListener('mousedown', onDown);\r\n    window.addEventListener('mouseup', onUp);\r\n    \r\n    window.addEventListener('touchmove', onTouchMove, { passive: true });\r\n    window.addEventListener('touchstart', onDown);\r\n    window.addEventListener('touchend', onUp);\r\n\r\n    // --- Animation Loop for the ring ---\r\n    let animationFrameId: number;\r\n    const loop = () => {\r\n      const now = Date.now();\r\n      const timeSinceMove = now - lastMoveTime.current;\r\n      \r\n      // Calculate current \"idle level\" (every 30 seconds is a level)\r\n      // Level 1 = 30s-59s, Level 2 = 60s-89s, Level 3 = 90s+\r\n      const currentIdleLevel = Math.floor(timeSinceMove / 30000);\r\n\r\n      // 1. Idle Logic\r\n      if (currentIdleLevel < lastIdleLevel.current) {\r\n          // User moved (idle level dropped to 0), reset state\r\n          lastIdleLevel.current = currentIdleLevel;\r\n          bounceStartTime.current = null; // Stop any active bounce\r\n      } else if (currentIdleLevel > lastIdleLevel.current && currentIdleLevel > 0) {\r\n          // New threshold reached (30s, 60s, 90s...)\r\n          lastIdleLevel.current = currentIdleLevel;\r\n          \r\n          // Determine bounce count based on level\r\n          let bounces = 3; // Default 30s\r\n          if (currentIdleLevel === 2) bounces = 5; // 60s\r\n          if (currentIdleLevel >= 3) bounces = 6; // 90s+ (capped at 6)\r\n          \r\n          targetBounceCount.current = bounces;\r\n          bounceStartTime.current = now;\r\n      }\r\n\r\n      let bounceOffsetY = 0;\r\n      if (bounceStartTime.current) {\r\n          const elapsed = now - bounceStartTime.current;\r\n          const count = targetBounceCount.current;\r\n          // Duration scales with bounces: approx 500ms per bounce\r\n          const duration = count * 500; \r\n          \r\n          if (elapsed < duration) {\r\n              // Map elapsed time (0 -> duration) to (0 -> count * PI) for sine wave humps\r\n              const t = (elapsed / duration) * count * Math.PI;\r\n              // Negative Y is up. Abs(sin) creates bouncing humps. Amplitude 20px.\r\n              bounceOffsetY = -Math.abs(Math.sin(t)) * 20;\r\n          } else {\r\n              bounceStartTime.current = null; // Animation finished\r\n          }\r\n      }\r\n\r\n      // 2. Physics & Position\r\n      // Smoother ease factor (0.15) creates a \"gliding\" feel. \r\n      const ease = 0.15; \r\n      \r\n      const dx = target.current.x - pos.current.x;\r\n      const dy = target.current.y - pos.current.y;\r\n\r\n      pos.current.x += dx * ease;\r\n      pos.current.y += dy * ease;\r\n\r\n      // Velocity calculation for dynamic scaling (Squash & Stretch effect)\r\n      const velocity = Math.sqrt(dx * dx + dy * dy);\r\n      const scale = Math.min(1.15, 1 + velocity / 800); // Cap max scale at 1.15x\r\n\r\n      if (cursorRef.current) {\r\n        // Apply position AND dynamic scale + Bounce\r\n        cursorRef.current.style.transform = `translate3d(${pos.current.x}px, ${pos.current.y + bounceOffsetY}px, 0) translate(-50%, -50%) scale(${scale})`;\r\n      }\r\n      \r\n      // If bouncing, we must manually update the dot's position to include the bounce\r\n      // because the mouse event listeners aren't firing to update it.\r\n      if (bounceStartTime.current && dotRef.current) {\r\n         dotRef.current.style.transform = `translate3d(${target.current.x}px, ${target.current.y + bounceOffsetY}px, 0) translate(-50%, -50%)`;\r\n      }\r\n      \r\n      animationFrameId = requestAnimationFrame(loop);\r\n    };\r\n    loop();\r\n\r\n    // --- Cleanup ---\r\n    return () => {\r\n      window.removeEventListener('pointerdown', handlePointerDown);\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('mousedown', onDown);\r\n      window.removeEventListener('mouseup', onUp);\r\n      \r\n      window.removeEventListener('touchmove', onTouchMove);\r\n      window.removeEventListener('touchstart', onDown);\r\n      window.removeEventListener('touchend', onUp);\r\n\r\n      cancelAnimationFrame(animationFrameId);\r\n    };\r\n  }, []);\r\n\r\n  // Hide cursor if it hasn't moved yet or if hovering an input\r\n  const opacityClass = (isHidden || !isVisible) ? 'opacity-0' : 'opacity-100';\r\n\r\n  return (\r\n    <>\r\n      {/* THE RING */}\r\n      <div \r\n        ref={cursorRef}\r\n        className={`fixed pointer-events-none z-[10000] rounded-full border border-brand-orange ${opacityClass}`}\r\n        style={{\r\n          width: isHovering ? '60px' : '30px', \r\n          height: isHovering ? '60px' : '30px',\r\n          backgroundColor: isHovering ? 'rgba(234, 141, 53, 0.05)' : 'transparent',\r\n          borderColor: isClicked ? 'transparent' : '#ea8d35',\r\n          borderWidth: isHovering ? '1px' : '1.5px',\r\n          // Bouncy bezier curve for \"Alive\" feel\r\n          transition: 'width 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28), height 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28), background-color 0.3s ease, border-color 0.1s ease', \r\n          willChange: 'transform, width, height'\r\n        }}\r\n      />\r\n      \r\n      {/* THE DOT */}\r\n      <div \r\n        ref={dotRef}\r\n        className={`fixed pointer-events-none z-[10001] ${opacityClass} transition-opacity duration-200`}\r\n        style={{\r\n          width: '8px',\r\n          height: '8px',\r\n          willChange: 'transform'\r\n        }}\r\n      >\r\n        <div \r\n          className=\"w-full h-full rounded-full bg-brand-orange transition-transform duration-100 shadow-[0_0_10px_rgba(234,141,53,0.6)]\"\r\n          style={{\r\n            transform: `scale(${isClicked ? 0.5 : 1})`\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* RIPPLES (Visual feedback for touch/click) */}\r\n      {ripples.map((ripple) => (\r\n        <div\r\n          key={ripple.id}\r\n          className=\"fixed pointer-events-none z-[9999] rounded-full bg-brand-orange/40 animate-ripple\"\r\n          style={{\r\n            left: ripple.x,\r\n            top: ripple.y,\r\n            width: '40px',\r\n            height: '40px',\r\n            marginLeft: '-20px',\r\n            marginTop: '-20px',\r\n          }}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/Theme.tsx"],"sourcesContent":["'use client'\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { Moon, Sun } from 'lucide-react';\r\n\r\nconst ThemeContext = createContext({ isDark: false, toggleTheme: (event?: React.MouseEvent) => {} });\r\n\r\nexport const useTheme = () => useContext(ThemeContext);\r\n\r\nexport const ThemeProvider = ({ children }: { children?: React.ReactNode }) => {\r\n  const [isDark, setIsDark] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check local storage or system preference\r\n    const stored = localStorage.getItem('theme');\r\n    if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {\r\n      setIsDark(true);\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      setIsDark(false);\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n  }, []);\r\n\r\n  const toggleTheme = (event?: React.MouseEvent) => {\r\n    const hasViewTransition = () => 'startViewTransition' in document;\r\n\r\n    if (!hasViewTransition()) {\r\n        // Fallback for older browsers\r\n        setIsDark(prev => {\r\n            const next = !prev;\r\n            if (next) {\r\n                document.documentElement.classList.add('dark');\r\n                localStorage.setItem('theme', 'dark');\r\n            } else {\r\n                document.documentElement.classList.remove('dark');\r\n                localStorage.setItem('theme', 'light');\r\n            }\r\n            return next;\r\n        });\r\n        return;\r\n    }\r\n\r\n    const x = event?.clientX ?? window.innerWidth / 2;\r\n    const y = event?.clientY ?? window.innerHeight / 2;\r\n    \r\n    document.documentElement.style.setProperty('--x', `${x}px`);\r\n    document.documentElement.style.setProperty('--y', `${y}px`);\r\n\r\n    // Using `as any` to avoid TS errors for this new API\r\n    const transition = (document as any).startViewTransition(() => {\r\n        setIsDark(prev => {\r\n            const next = !prev;\r\n            if (next) {\r\n                document.documentElement.classList.add('dark');\r\n                localStorage.setItem('theme', 'dark');\r\n            } else {\r\n                document.documentElement.classList.remove('dark');\r\n                localStorage.setItem('theme', 'light');\r\n            }\r\n            return next;\r\n        });\r\n    });\r\n\r\n    transition.finished.then(() => {\r\n        document.documentElement.style.removeProperty('--x');\r\n        document.documentElement.style.removeProperty('--y');\r\n    });\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ isDark, toggleTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const ThemeToggle = ({ className = '', lightModeClass = 'bg-gray-100 text-gray-600 hover:bg-gray-200' }: { className?: string, lightModeClass?: string }) => {\r\n  const { isDark, toggleTheme } = useTheme();\r\n  return (\r\n    <button \r\n      onClick={(e) => toggleTheme(e)}\r\n      className={`p-2 rounded-full transition-all duration-300 ${isDark ? 'bg-white/10 text-yellow-300 hover:bg-white/20' : lightModeClass} ${className}`}\r\n      aria-label=\"Toggle Dark Mode\"\r\n    >\r\n      {isDark ? <Sun size={18} /> : <Moon size={18} />}\r\n    </button>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;AACA;AACA;AAAA;;;AAFA;;;AAIA,MAAM,6BAAe,IAAA,8KAAa,EAAC;IAAE,QAAQ;IAAO,aAAa,CAAC,SAA8B;AAAE;AAE3F,MAAM,WAAW;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAY;GAAxC;AAEN,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAkC;;IACxE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,IAAA,0KAAS;mCAAC;YACR,2CAA2C;YAC3C,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,WAAW,UAAW,CAAC,UAAU,OAAO,UAAU,CAAC,gCAAgC,OAAO,EAAG;gBAC/F,UAAU;gBACV,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACzC,OAAO;gBACL,UAAU;gBACV,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC5C;QACF;kCAAG,EAAE;IAEL,MAAM,cAAc,CAAC;QACnB,MAAM,oBAAoB,IAAM,yBAAyB;QAEzD,IAAI,CAAC,qBAAqB;YACtB,8BAA8B;YAC9B,UAAU,CAAA;gBACN,MAAM,OAAO,CAAC;gBACd,IAAI,MAAM;oBACN,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;oBACvC,aAAa,OAAO,CAAC,SAAS;gBAClC,OAAO;oBACH,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;oBAC1C,aAAa,OAAO,CAAC,SAAS;gBAClC;gBACA,OAAO;YACX;YACA;QACJ;QAEA,MAAM,IAAI,OAAO,WAAW,OAAO,UAAU,GAAG;QAChD,MAAM,IAAI,OAAO,WAAW,OAAO,WAAW,GAAG;QAEjD,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,GAAG,EAAE,EAAE,CAAC;QAC1D,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,GAAG,EAAE,EAAE,CAAC;QAE1D,qDAAqD;QACrD,MAAM,aAAa,AAAC,SAAiB,mBAAmB,CAAC;YACrD,UAAU,CAAA;gBACN,MAAM,OAAO,CAAC;gBACd,IAAI,MAAM;oBACN,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;oBACvC,aAAa,OAAO,CAAC,SAAS;gBAClC,OAAO;oBACH,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;oBAC1C,aAAa,OAAO,CAAC,SAAS;gBAClC;gBACA,OAAO;YACX;QACJ;QAEA,WAAW,QAAQ,CAAC,IAAI,CAAC;YACrB,SAAS,eAAe,CAAC,KAAK,CAAC,cAAc,CAAC;YAC9C,SAAS,eAAe,CAAC,KAAK,CAAC,cAAc,CAAC;QAClD;IACF;IAEA,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAQ;QAAY;kBACjD;;;;;;AAGP;IAlEa;KAAA;AAoEN,MAAM,cAAc,CAAC,EAAE,YAAY,EAAE,EAAE,iBAAiB,6CAA6C,EAAmD;;IAC7J,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG;IAChC,qBACE,6LAAC;QACC,SAAS,CAAC,IAAM,YAAY;QAC5B,WAAW,CAAC,6CAA6C,EAAE,SAAS,kDAAkD,eAAe,CAAC,EAAE,WAAW;QACnJ,cAAW;kBAEV,uBAAS,6LAAC,0MAAG;YAAC,MAAM;;;;;qEAAS,6LAAC,6MAAI;YAAC,MAAM;;;;;;;;;;;AAGhD;IAXa;;QACqB;;;MADrB"}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/constants.ts"],"sourcesContent":["\r\nexport const COMPANY_INFO = {\r\n  name: \"Jambo Linguists Limited\",\r\n  logoUrl: \"https://jambolinguists.com/wp-content/uploads/2025/03/logo-purple.jpeg\",\r\n  address: [\r\n    \"First Floor, Radley House\",\r\n    \"Richardshaw Rd\",\r\n    \"Pudsey, LS28 6LE\",\r\n    \"United Kingdom\"\r\n  ],\r\n  phone: \"+44 7938 065 717\",\r\n  email: \"jamii@jambolinguists.com\",\r\n  regNumber: \"15333696\"\r\n};\r\n"],"names":[],"mappings":";;;;AACO,MAAM,eAAe;IAC1B,MAAM;IACN,SAAS;IACT,SAAS;QACP;QACA;QACA;QACA;KACD;IACD,OAAO;IACP,OAAO;IACP,WAAW;AACb"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/Navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ChevronDown, Menu, X } from 'lucide-react';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { ThemeToggle } from '@/components/Theme';\r\nimport { COMPANY_INFO } from '@/data/constants';\r\n\r\nexport const Navbar = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const pathname = usePathname() || '/'; // fallback to '/' if null\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => setScrolled(window.scrollY > 20);\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  const handleNav = (page: string) => {\r\n    router.push(page);\r\n    setIsOpen(false);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const isCurrentPage = (page: string) => page === '/' ? pathname === '/' : pathname.startsWith(page);\r\n\r\n  return (\r\n    <nav className={`fixed top-0 left-0 right-0 w-full z-50 transition-all duration-300 transform-gpu ${\r\n      scrolled || isOpen ? 'bg-jambo-600/95 dark:bg-jambo-950/95 backdrop-blur-md shadow-lg py-2' : 'bg-transparent py-4 md:py-6'\r\n    }`}>\r\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6 flex items-center justify-between h-16 md:h-20\">\r\n        {/* Logo */}\r\n        <div className=\"flex items-center gap-3 shrink-0\">\r\n          <div \r\n            onClick={() => handleNav('/')}\r\n            className={`flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-105 origin-left ${\r\n              scrolled ? 'h-10 md:h-12' : 'h-10 md:h-14 lg:h-20'\r\n            }`}\r\n          >\r\n             <img \r\n              src={COMPANY_INFO.logoUrl} \r\n              alt={COMPANY_INFO.name} \r\n              className=\"h-full w-auto object-contain rounded-lg\"\r\n              loading=\"eager\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Desktop Links */}\r\n        <div className=\"hidden md:flex items-center gap-2 lg:gap-8\">\r\n          {['/', '/about', '/services', '/blog'].map((page) => (\r\n            <button\r\n              key={page}\r\n              onClick={() => handleNav(page)}\r\n              className={`text-[11px] lg:text-sm uppercase tracking-wider font-medium transition-colors relative group py-2 ${\r\n                isCurrentPage(page) ? 'text-white' : 'text-jambo-100 hover:text-white'\r\n              }`}\r\n            >\r\n              {page === '/' ? 'Home' : page.replace('/', '').replace(/^\\w/, (c) => c.toUpperCase())}\r\n              {isCurrentPage(page) && <span className=\"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-white rounded-full\"></span>}\r\n            </button>\r\n          ))}\r\n\r\n          {/* Portal Button */}\r\n          <button \r\n            onClick={() => handleNav('/portal')}\r\n            className=\"text-[10px] lg:text-xs uppercase tracking-widest font-bold border border-brand-orange text-brand-orange px-3 lg:px-4 py-1.5 lg:py-2 rounded-full hover:bg-brand-orange hover:text-white transition-all ml-1 lg:ml-4 whitespace-nowrap\"\r\n          >\r\n            Linguist Portal\r\n          </button>\r\n        </div>\r\n\r\n        {/* Right Actions */}\r\n        <div className=\"flex items-center gap-2 md:gap-3 lg:gap-4\">\r\n          <ThemeToggle className=\"hidden md:block\" lightModeClass=\"bg-jambo-700 text-white hover:bg-jambo-800\" />\r\n\r\n          <div className=\"flex items-center gap-1.5 lg:gap-2 bg-white/10 hover:bg-white/20 px-2 lg:px-4 py-1.5 lg:py-2 rounded-full transition-all cursor-pointer border border-white/20 backdrop-blur-sm group\">\r\n            <span className=\"text-sm lg:text-lg shadow-sm group-hover:scale-110 transition-transform\">ðŸ‡¬ðŸ‡§</span>\r\n            <span className=\"text-[10px] lg:text-xs font-bold text-white tracking-widest\">EN</span>\r\n            <ChevronDown size={14} className=\"text-white/80 hidden sm:block\" />\r\n          </div>\r\n\r\n          {/* Mobile Hamburger */}\r\n          <button \r\n            className=\"md:hidden text-white p-2 hover:bg-white/10 rounded-lg transition-colors z-50 relative\"\r\n            onClick={() => setIsOpen(!isOpen)}\r\n            aria-label=\"Toggle menu\"\r\n          >\r\n            {isOpen ? <X size={24} /> : <Menu size={24} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Menu */}\r\n      {isOpen && (\r\n        <div className=\"absolute top-full left-0 right-0 bg-jambo-600 dark:bg-jambo-950 border-t border-white/10 shadow-2xl p-6 md:hidden animate-in slide-in-from-top-4 fade-in duration-200 h-[calc(100vh-64px)] flex flex-col overflow-y-auto\">\r\n          <div className=\"flex flex-col gap-6 text-center pt-8\">\r\n            {['/', '/about', '/services', '/blog'].map((page) => (\r\n              <button\r\n                key={page}\r\n                onClick={() => handleNav(page)}\r\n                className={`uppercase tracking-widest py-2 text-xl font-${page === '/' ? 'medium' : 'light'} ${\r\n                  isCurrentPage(page) ? 'text-white' : 'text-jambo-100 hover:text-white'\r\n                }`}\r\n              >\r\n                {page === '/' ? 'Home' : page.replace('/', '').replace(/^\\w/, (c) => c.toUpperCase())}\r\n              </button>\r\n            ))}\r\n\r\n            <div className=\"flex justify-center py-4\">\r\n              <ThemeToggle lightModeClass=\"bg-jambo-700 text-white w-12 h-12 flex items-center justify-center hover:bg-jambo-800\" />\r\n            </div>\r\n\r\n            <div className=\"w-16 h-px bg-white/20 mx-auto my-2\"></div>\r\n\r\n            <button \r\n              onClick={() => handleNav('/portal')}\r\n              className=\"text-brand-orange text-xl font-bold border-2 border-brand-orange mx-auto px-8 py-3 rounded-full hover:bg-brand-orange hover:text-white uppercase tracking-widest transition-all mt-4\"\r\n            >\r\n               Linguist Portal\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 740, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/Footer.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react';\r\nimport { Facebook, Instagram, Linkedin, Lock } from 'lucide-react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport const Footer = () => {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <footer className=\"bg-jambo-600 dark:bg-black/30 pt-20 pb-10 px-6 text-white border-t border-white/5 backdrop-blur-sm transition-colors duration-300\">\r\n      <div className=\"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16\">\r\n        \r\n        {/* Column 1 */}\r\n        <div>\r\n          <h4 className=\"text-white font-bold mb-6 text-lg border-b border-white/20 pb-2 inline-block\">Visit Us</h4>\r\n          <address className=\"text-jambo-100 not-italic leading-loose font-light text-sm\">\r\n            <strong className=\"text-white font-medium block mb-1\">Jambo Linguists Ltd</strong>\r\n            First Floor, Radley House,<br />\r\n            Richardshaw Rd,<br />\r\n            Pudsey, LS28 6LE\r\n          </address>\r\n        </div>\r\n\r\n        {/* Column 2 */}\r\n        <div>\r\n          <h4 className=\"text-white font-bold mb-6 text-lg border-b border-white/20 pb-2 inline-block\">Contact</h4>\r\n          <div className=\"space-y-3 text-sm\">\r\n            <a href=\"mailto:jamii@jambolinguists.com\" className=\"block text-white font-medium hover:text-jambo-200 transition-colors flex items-center gap-2 cursor-pointer w-fit\">\r\n               jamii@jambolinguists.com\r\n            </a>\r\n            <p className=\"text-jambo-100 font-mono\">+44 7938 065 717</p>\r\n            <p className=\"text-jambo-100 font-mono\">+44 7938 065 718</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Column 3 */}\r\n        <div>\r\n          <h4 className=\"text-white font-bold mb-6 text-lg border-b border-white/20 pb-2 inline-block\">Social</h4>\r\n          <div className=\"flex gap-4\">\r\n            {[Facebook, Instagram, Linkedin].map((Icon, i) => (\r\n              <a key={i} href=\"#\" className=\"w-10 h-10 rounded-full bg-white/10 border border-white/20 flex items-center justify-center text-white hover:bg-white hover:text-jambo-600 transition-all hover:-translate-y-1 cursor-pointer\">\r\n                <Icon size={18} />\r\n              </a>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Column 4 */}\r\n        <div>\r\n          <h4 className=\"text-white font-bold mb-6 text-lg border-b border-white/20 pb-2 inline-block\">Memberships</h4>\r\n          <div className=\"flex gap-4 items-center\">\r\n            {/* Styled Placeholders imitating logos */}\r\n            <div className=\"bg-white p-2 rounded-full h-14 w-14 flex items-center justify-center shadow-lg hover:scale-105 transition-transform\">\r\n                <div className=\"text-[10px] text-jambo-600 font-bold leading-none text-center\">AITI</div>\r\n            </div>\r\n            <div className=\"bg-white px-3 py-1 rounded h-10 flex items-center justify-center shadow-lg hover:scale-105 transition-transform\">\r\n                <div className=\"text-[10px] text-gray-800 font-bold uppercase\">\r\n                    <span className=\"bg-gray-800 text-white px-1 mr-1\">CIOL</span>Associate\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-xs text-jambo-200\">\r\n        <p>Â© {new Date().getFullYear()} Jambo Linguists. Company House No: 15333696</p>\r\n        <div className=\"flex gap-6 mt-4 md:mt-0 items-center\">\r\n          <a href=\"#\" className=\"hover:text-white transition-colors underline decoration-white/30 hover:decoration-white cursor-pointer\">Privacy & Cookie Policy</a>\r\n          <button \r\n            onClick={() => router.push('/admin')} \r\n            className=\"flex items-center gap-1 hover:text-white transition-colors opacity-70 hover:opacity-100\"\r\n          >\r\n            <Lock size={10} /> Staff Login\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AACA;;;AAJA;;;AAMO,MAAM,SAAS;;IACpB,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAI,WAAU;;kCAGb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAC7F,6LAAC;gCAAQ,WAAU;;kDACjB,6LAAC;wCAAO,WAAU;kDAAoC;;;;;;oCAA4B;kDACxD,6LAAC;;;;;oCAAK;kDACjB,6LAAC;;;;;oCAAK;;;;;;;;;;;;;kCAMzB,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAC7F,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,MAAK;wCAAkC,WAAU;kDAAmH;;;;;;kDAGvK,6LAAC;wCAAE,WAAU;kDAA2B;;;;;;kDACxC,6LAAC;wCAAE,WAAU;kDAA2B;;;;;;;;;;;;;;;;;;kCAK5C,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAC7F,6LAAC;gCAAI,WAAU;0CACZ;oCAAC,yNAAQ;oCAAE,4NAAS;oCAAE,yNAAQ;iCAAC,CAAC,GAAG,CAAC,CAAC,MAAM,kBAC1C,6LAAC;wCAAU,MAAK;wCAAI,WAAU;kDAC5B,cAAA,6LAAC;4CAAK,MAAM;;;;;;uCADN;;;;;;;;;;;;;;;;kCAQd,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAC7F,6LAAC;gCAAI,WAAU;;kDAEb,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAI,WAAU;sDAAgE;;;;;;;;;;;kDAEnF,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAK,WAAU;8DAAmC;;;;;;gDAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAO5E,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;4BAAE;4BAAG,IAAI,OAAO,WAAW;4BAAG;;;;;;;kCAC/B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,MAAK;gCAAI,WAAU;0CAAyG;;;;;;0CAC/H,6LAAC;gCACC,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;;kDAEV,6LAAC,6MAAI;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;;;;;;;;;;;;;AAM9B;GAzEa;;QACI,kJAAS;;;KADb"}},
    {"offset": {"line": 1051, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/jobs.ts"],"sourcesContent":["\r\nimport { Job } from '../types';\r\n\r\nconst MOCK_USER_ID = 'u-123456'; // Linah's ID\r\nconst ADMIN_ID = 'u-admin-001';\r\nconst CLIENT_ID = 'u-client-001';\r\n\r\nconst now = new Date().toISOString();\r\n\r\n/**\r\n * SQL Table: jobs\r\n */\r\nexport const initialJobs: Job[] = [\r\n    // --- FUTURE JOBS (REQUESTED) ---\r\n    {\r\n        id: 'JL-FUTURE-01',\r\n        linguistId: MOCK_USER_ID,\r\n        postedBy: ADMIN_ID,\r\n        category: 'Interpreting',\r\n        type: 'Face-to-Face',\r\n        status: 'Scheduled',\r\n        title: 'Christmas Day Emergency Cover',\r\n        description: 'On-call interpreting for emergency A&E admissions. High priority cover required for potential trauma cases.',\r\n        date: '2025-12-25',\r\n        time: '08:00 AM',\r\n        finishTime: '04:00 PM',\r\n        duration: '8h 00m',\r\n        location: 'Leeds General Infirmary, A&E',\r\n        languagePair: 'English <> Swahili',\r\n        rate: 'Â£60/hr (Holiday Rate)',\r\n        isUrgent: true,\r\n        distance: 5,\r\n        hourlyRate: 60,\r\n        mileageRate: 0.45,\r\n        travelHours: 0.5,\r\n        travelRate: 15,\r\n        createdAt: '2025-10-01T09:00:00Z',\r\n        updatedAt: '2025-10-01T10:30:00Z',\r\n        deletedAt: null,\r\n        history: [\r\n            { id: 'h1', type: 'CREATED', date: '2025-10-01T09:00:00Z', actorName: 'Jambo Admin', description: 'Job created in system' },\r\n            { id: 'h1_1', type: 'ASSIGNED', date: '2025-10-01T09:05:00Z', actorName: 'Jambo Admin', description: 'Marked as urgent priority' },\r\n            { id: 'h2', type: 'ASSIGNED', date: '2025-10-01T10:30:00Z', actorName: 'Jambo Admin', description: 'Assigned to Linah Makembu' }\r\n        ]\r\n    },\r\n    {\r\n        id: 'JL-FUTURE-02',\r\n        linguistId: MOCK_USER_ID,\r\n        postedBy: ADMIN_ID,\r\n        category: 'Translation',\r\n        type: 'Document',\r\n        status: 'Scheduled',\r\n        title: 'End of Year Legal Report',\r\n        description: 'Translation of annual summary for corporate client. Requires formatting to match original.',\r\n        date: '2025-12-12',\r\n        deadlineTime: '17:00',\r\n        duration: '5 days',\r\n        wordCount: 5000,\r\n        location: 'Remote',\r\n        languagePair: 'English > Swahili',\r\n        rate: '12p/word',\r\n        isUrgent: false,\r\n        distance: 0,\r\n        wordRate: 0.12,\r\n        createdAt: '2025-10-05T14:00:00Z',\r\n        updatedAt: '2025-10-06T09:15:00Z',\r\n        deletedAt: null,\r\n        attachments: [\r\n            { name: 'Legal_Report_2024_Source.pdf', type: 'file', url: '#' },\r\n            { name: 'Style_Guide_v3.docx', type: 'file', url: '#' }\r\n        ],\r\n        history: [\r\n            { id: 'h3', type: 'CREATED', date: '2025-10-05T14:00:00Z', actorName: 'Jambo Admin' },\r\n            { id: 'h4', type: 'ASSIGNED', date: '2025-10-06T09:15:00Z', actorName: 'Jambo Admin', description: 'Assigned to Linah Makembu' }\r\n        ]\r\n    },\r\n    {\r\n        id: 'JL-FUTURE-03',\r\n        linguistId: null, // Open\r\n        postedBy: ADMIN_ID,\r\n        category: 'Interpreting',\r\n        type: 'Video',\r\n        status: 'Open',\r\n        title: 'International Conference: Health Equity',\r\n        description: 'Simultaneous interpreting for a breakout session on East African public health initiatives.',\r\n        date: '2025-11-15',\r\n        time: '09:00 AM',\r\n        finishTime: '05:00 PM',\r\n        duration: '8h 00m',\r\n        location: 'Remote (Zoom)',\r\n        languagePair: 'English <> Swahili',\r\n        rate: 'Â£350/day',\r\n        isUrgent: false,\r\n        distance: 0,\r\n        fixedRate: 350,\r\n        createdAt: '2025-10-10T11:00:00Z',\r\n        updatedAt: '2025-10-10T11:00:00Z',\r\n        deletedAt: null,\r\n        history: [\r\n            { id: 'h5', type: 'CREATED', date: '2025-10-10T11:00:00Z', actorName: 'Jambo Admin' }\r\n        ]\r\n    },\r\n    \r\n    // --- AVAILABLE JOBS (Open - No Linguist Assigned) ---\r\n    {\r\n      id: 'JL-1001',\r\n      linguistId: null, // Open\r\n      postedBy: CLIENT_ID,\r\n      category: 'Interpreting',\r\n      type: 'Face-to-Face',\r\n      status: 'Open',\r\n      title: 'Medical Consultation Interpreting',\r\n      description: 'Face-to-face interpreting required for a pre-op assessment at Leeds General Infirmary. Patient speaks Swahili. Terminology will focus on cardiology.',\r\n      date: '2025-10-24',\r\n      time: '09:30 AM',\r\n      finishTime: '12:00 PM',\r\n      duration: '2h 30m',\r\n      location: 'Leeds General Infirmary, Clarendon Wing',\r\n      languagePair: 'English <> Swahili',\r\n      rate: 'Â£30/hr',\r\n      isUrgent: true,\r\n      distance: 2.4,\r\n      hourlyRate: 30,\r\n      mileageRate: 0.45,\r\n      travelHours: 1,\r\n      travelRate: 15,\r\n      requiredCourseIds: ['c-102'], // REQUIRES MEDICAL COURSE (which user hasn't finished)\r\n      createdAt: '2025-10-20T09:00:00Z',\r\n      updatedAt: '2025-10-20T09:00:00Z',\r\n      deletedAt: null,\r\n      attachments: [{\r\n          name: 'Patient_Notes_Redacted.pdf',\r\n          type: 'file',\r\n          url: '#'\r\n      }],\r\n      history: [\r\n          { id: 'h8', type: 'CREATED', date: '2025-10-20T09:00:00Z', actorName: 'NHS Trust', description: 'Request received from LGI Portal' }\r\n      ]\r\n    },\r\n    {\r\n      id: 'JL-1002',\r\n      linguistId: null, // Open\r\n      postedBy: ADMIN_ID,\r\n      category: 'Interpreting',\r\n      type: 'Face-to-Face',\r\n      status: 'Open',\r\n      title: 'Magistrates Court Hearing',\r\n      description: 'Court interpreter needed for a plea hearing. Must be familiar with UK legal terminology and court protocols. Smart dress code required.',\r\n      date: '2025-10-25',\r\n      time: '02:00 PM',\r\n      finishTime: '05:00 PM',\r\n      duration: '3h 00m',\r\n      location: 'Bradford Magistrates Court',\r\n      languagePair: 'English <> Swahili',\r\n      rate: 'Â£32/hr',\r\n      isUrgent: false,\r\n      distance: 8.1,\r\n      hourlyRate: 32,\r\n      mileageRate: 0.45,\r\n      travelHours: 1.5,\r\n      travelRate: 15,\r\n      requiredCourseIds: ['c-103'], // REQUIRES GDPR (User HAS done this)\r\n      createdAt: '2025-10-21T10:00:00Z',\r\n      updatedAt: '2025-10-21T10:00:00Z',\r\n      deletedAt: null,\r\n      attachments: [{\r\n          name: 'Case_Listing_Brief.pdf',\r\n          type: 'file',\r\n          url: '#'\r\n      }],\r\n      history: [\r\n          { id: 'h9', type: 'CREATED', date: '2025-10-21T10:00:00Z', actorName: 'Jambo Admin' }\r\n      ]\r\n    },\r\n    {\r\n      id: 'JL-1003',\r\n      linguistId: null, // Open\r\n      postedBy: CLIENT_ID,\r\n      category: 'Translation',\r\n      type: 'Document',\r\n      status: 'Open',\r\n      title: 'Legal Contract Translation',\r\n      description: 'Translate a tenancy agreement document from English to Swahili. Accuracy and legal terminology are critical. Document length is approx 2,500 words.',\r\n      date: '2025-10-28',\r\n      deadlineTime: '17:00',\r\n      duration: 'Est. 6 hours',\r\n      wordCount: 2500,\r\n      location: 'Remote (Document Download)',\r\n      languagePair: 'English > Swahili',\r\n      rate: '10p/word',\r\n      isUrgent: false,\r\n      distance: 0,\r\n      wordRate: 0.10,\r\n      createdAt: '2025-10-22T11:30:00Z',\r\n      updatedAt: '2025-10-22T11:30:00Z',\r\n      deletedAt: null,\r\n      attachments: [{\r\n          name: 'Tenancy_Agreement_Draft.docx',\r\n          type: 'file',\r\n          url: '#'\r\n      }],\r\n      history: [\r\n          { id: 'h10', type: 'CREATED', date: '2025-10-22T11:30:00Z', actorName: 'Client Portal' }\r\n      ]\r\n    },\r\n    \r\n    // --- BOOKED / ACTIVE JOBS (Assigned to Linah) ---\r\n    {\r\n      id: 'JL-2001',\r\n      linguistId: MOCK_USER_ID, // Assigned\r\n      postedBy: ADMIN_ID,\r\n      category: 'Interpreting',\r\n      type: 'Face-to-Face',\r\n      status: 'Scheduled',\r\n      title: 'School Parent Evening',\r\n      description: 'Interpret for parents of a Year 8 student. General academic progress discussion.',\r\n      date: '2025-10-29',\r\n      time: '04:00 PM',\r\n      finishTime: '05:00 PM',\r\n      duration: '1h 00m',\r\n      location: 'Allerton High School, Leeds',\r\n      languagePair: 'English <> Swahili',\r\n      rate: 'Â£28/hr',\r\n      isUrgent: false,\r\n      distance: 4.5,\r\n      hourlyRate: 28,\r\n      mileageRate: 0.45,\r\n      travelHours: 0.5,\r\n      travelRate: 15,\r\n      createdAt: '2025-10-20T10:00:00Z',\r\n      updatedAt: '2025-10-21T09:00:00Z',\r\n      deletedAt: null,\r\n      history: [\r\n          { id: 'h13', type: 'CREATED', date: '2025-10-20T10:00:00Z', actorName: 'Jambo Admin' },\r\n          { id: 'h14', type: 'ASSIGNED', date: '2025-10-21T09:00:00Z', actorName: 'Linah Makembu', description: 'Claimed via portal' }\r\n      ]\r\n    },\r\n    {\r\n      id: 'JL-2002',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: CLIENT_ID,\r\n      category: 'Translation',\r\n      type: 'Document',\r\n      status: 'In Progress',\r\n      title: 'NHS Information Leaflet',\r\n      description: 'Translation of \"Living with Diabetes\" pamphlet. Simple, accessible language required.',\r\n      date: '2025-10-30',\r\n      duration: 'Est. 3 hours',\r\n      wordCount: 1500,\r\n      location: 'Remote',\r\n      languagePair: 'English > Swahili',\r\n      rate: '11p/word',\r\n      wordRate: 0.11,\r\n      isUrgent: false,\r\n      distance: 0,\r\n      createdAt: '2025-10-25T11:00:00Z',\r\n      updatedAt: '2025-10-26T14:30:00Z',\r\n      deletedAt: null,\r\n      attachments: [{\r\n          name: 'Diabetes_Info_Leaflet_EN.pdf',\r\n          type: 'file',\r\n          url: '#'\r\n      }],\r\n      history: [\r\n          { id: 'h15', type: 'CREATED', date: '2025-10-25T11:00:00Z', actorName: 'NHS Trust' },\r\n          { id: 'h16', type: 'ASSIGNED', date: '2025-10-26T14:30:00Z', actorName: 'Linah Makembu' }\r\n      ]\r\n    },\r\n    {\r\n      id: 'JL-2003',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: ADMIN_ID,\r\n      category: 'Translation',\r\n      type: 'Document',\r\n      status: 'Revision',\r\n      title: 'Marketing Flyer Review',\r\n      description: 'Client has requested minor tone adjustments to the \"Summer Campaign\" translation.',\r\n      date: '2025-10-22',\r\n      duration: '30 mins',\r\n      wordCount: 400,\r\n      location: 'Remote',\r\n      languagePair: 'English > Swahili',\r\n      rate: 'Â£25 Fixed',\r\n      fixedRate: 25,\r\n      isUrgent: true,\r\n      distance: 0,\r\n      revisionFeedback: 'Please make the tone more formal in the second paragraph.',\r\n      revisionFile: 'Marked_Flyer.pdf',\r\n      createdAt: '2025-10-18T09:00:00Z',\r\n      updatedAt: '2025-10-21T09:30:00Z',\r\n      deletedAt: null,\r\n      attachments: [{\r\n          name: 'Summer_Campaign_Flyer_v1.pdf',\r\n          type: 'file',\r\n          url: '#'\r\n      }],\r\n      history: [\r\n          { id: 'h17', type: 'CREATED', date: '2025-10-18T09:00:00Z', actorName: 'Jambo Admin' },\r\n          { id: 'h18', type: 'ASSIGNED', date: '2025-10-18T10:00:00Z', actorName: 'Linah Makembu' },\r\n          { id: 'h19', type: 'SUBMITTED', date: '2025-10-20T16:00:00Z', actorName: 'Linah Makembu', description: 'Draft 1 completed', attachment: 'Flyer_Draft_v1.docx' },\r\n          { id: 'h20', type: 'REVISION_REQUESTED', date: '2025-10-21T09:30:00Z', actorName: 'Jambo Admin', description: 'Please make the tone more formal in the second paragraph.', attachment: 'Marked_Flyer.pdf' }\r\n      ]\r\n    },\r\n\r\n    // --- HISTORY (Completed/Cancelled/Pending - Assigned to Linah) ---\r\n    \r\n    // MISSING JOB ADDED: Links to Invoice #INV-2024-001 (Â£850)\r\n    {\r\n      id: 'JL-3006',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: CLIENT_ID,\r\n      category: 'Translation',\r\n      type: 'Document',\r\n      status: 'Completed',\r\n      title: 'Employee Handbook Translation',\r\n      description: 'Full translation of HR handbook for manufacturing staff. 8,500 words.',\r\n      date: '2024-09-25',\r\n      deadlineTime: '17:00',\r\n      duration: '2 weeks',\r\n      wordCount: 8500,\r\n      location: 'Remote',\r\n      languagePair: 'English > Swahili',\r\n      rate: '10p/word',\r\n      wordRate: 0.10,\r\n      isUrgent: false,\r\n      completedAt: '2024-09-29T16:00:00',\r\n      completionNotes: 'Delivered final PDF and DOCX versions via portal.',\r\n      totalPayout: 850.00,\r\n      rating: 5,\r\n      createdAt: '2024-09-10T09:00:00Z',\r\n      updatedAt: '2024-09-30T09:00:00Z',\r\n      deletedAt: null,\r\n      history: [\r\n          { id: 'h_3006_1', type: 'CREATED', date: '2024-09-10T09:00:00Z', actorName: 'NHS Trust' },\r\n          { id: 'h_3006_2', type: 'ASSIGNED', date: '2024-09-11T10:00:00Z', actorName: 'Linah Makembu' },\r\n          { id: 'h_3006_3', type: 'SUBMITTED', date: '2024-09-29T16:00:00Z', actorName: 'Linah Makembu', description: 'Files uploaded.' },\r\n          { id: 'h_3006_4', type: 'APPROVED', date: '2024-09-30T09:00:00Z', actorName: 'Jambo Admin' }\r\n      ]\r\n    },\r\n\r\n    // Links to Invoice #INV-2024-002 (Â£60 part)\r\n    {\r\n      id: 'JL-3001',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: ADMIN_ID,\r\n      category: 'Interpreting',\r\n      type: 'Video',\r\n      status: 'Completed',\r\n      title: 'Asylum Interview Prep',\r\n      description: 'Video session preparing client for substantive interview.',\r\n      date: '2024-10-15',\r\n      time: '10:00 AM',\r\n      finishTime: '12:00 PM',\r\n      duration: '2h 00m',\r\n      location: 'Remote',\r\n      languagePair: 'English <> Swahili',\r\n      rate: 'Â£30/hr',\r\n      isUrgent: false,\r\n      hourlyRate: 30,\r\n      completedAt: '2024-10-15T12:05:00',\r\n      completionNotes: 'Session went smoothly. Connection was stable.',\r\n      totalPayout: 60.00,\r\n      rating: 5,\r\n      createdAt: '2024-10-10T10:00:00Z',\r\n      updatedAt: '2024-10-15T14:00:00Z',\r\n      deletedAt: null,\r\n      history: [\r\n          { id: 'h21', type: 'CREATED', date: '2024-10-10T10:00:00Z', actorName: 'Jambo Admin' },\r\n          { id: 'h22', type: 'ASSIGNED', date: '2024-10-11T09:00:00Z', actorName: 'Linah Makembu' },\r\n          { id: 'h23', type: 'SUBMITTED', date: '2024-10-15T12:05:00Z', actorName: 'Linah Makembu', description: 'Session went smoothly.' },\r\n          { id: 'h24', type: 'APPROVED', date: '2024-10-15T14:00:00Z', actorName: 'Jambo Admin', description: 'Verified duration' }\r\n      ]\r\n    },\r\n\r\n    // Links to Invoice #INV-2024-002 (Â£240 part)\r\n    {\r\n      id: 'JL-3002',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: ADMIN_ID,\r\n      category: 'Transcription',\r\n      type: 'Audio/Video',\r\n      status: 'Completed',\r\n      title: 'Focus Group Recording',\r\n      description: 'Market research focus group transcription.',\r\n      date: '2024-10-10',\r\n      duration: '60 mins audio',\r\n      location: 'Remote',\r\n      languagePair: 'Swahili > English',\r\n      rate: 'Â£4.00/min',\r\n      minuteRate: 4.00,\r\n      isUrgent: false,\r\n      completedAt: '2024-10-11T09:00:00',\r\n      completionNotes: 'Delivered .docx file via portal.',\r\n      totalPayout: 240.00,\r\n      rating: 5,\r\n      createdAt: '2024-10-05T10:00:00Z',\r\n      updatedAt: '2024-10-11T11:00:00Z',\r\n      deletedAt: null,\r\n      history: [\r\n          { id: 'h25', type: 'CREATED', date: '2024-10-05T10:00:00Z', actorName: 'Jambo Admin' },\r\n          { id: 'h26', type: 'ASSIGNED', date: '2024-10-06T09:00:00Z', actorName: 'Linah Makembu' },\r\n          { id: 'h27', type: 'SUBMITTED', date: '2024-10-11T09:00:00Z', actorName: 'Linah Makembu', description: 'File uploaded.', attachment: 'Focus_Group_Transcript.docx' },\r\n          { id: 'h28', type: 'APPROVED', date: '2024-10-11T11:00:00Z', actorName: 'Jambo Admin' }\r\n      ]\r\n    },\r\n\r\n    {\r\n      id: 'JL-3003',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: ADMIN_ID,\r\n      category: 'Interpreting',\r\n      type: 'Face-to-Face',\r\n      status: 'Cancelled',\r\n      title: 'Community Center Visit',\r\n      description: 'Cancelled by client 24h in advance.',\r\n      date: '2024-10-05',\r\n      time: '01:00 PM',\r\n      finishTime: '02:30 PM',\r\n      duration: '1h 30m',\r\n      location: 'Leeds City Center',\r\n      languagePair: 'English <> Swahili',\r\n      rate: 'Â£25/hr',\r\n      isUrgent: false,\r\n      distance: 1.2,\r\n      hourlyRate: 25,\r\n      mileageRate: 0.45,\r\n      travelHours: 0.5,\r\n      travelRate: 15,\r\n      createdAt: '2024-10-01T10:00:00Z',\r\n      updatedAt: '2024-10-04T10:00:00Z',\r\n      deletedAt: null,\r\n      history: [\r\n          { id: 'h29', type: 'CREATED', date: '2024-10-01T10:00:00Z', actorName: 'Jambo Admin' },\r\n          { id: 'h30', type: 'ASSIGNED', date: '2024-10-02T09:00:00Z', actorName: 'Linah Makembu' },\r\n          { id: 'h31', type: 'CANCELLED', date: '2024-10-04T10:00:00Z', actorName: 'Jambo Admin', description: 'Client cancelled meeting.' }\r\n      ]\r\n    },\r\n\r\n    // Links to Invoice #INV-2024-003 (Â£35 part - PENDING)\r\n    {\r\n      id: 'JL-3004',\r\n      linguistId: MOCK_USER_ID,\r\n      postedBy: ADMIN_ID,\r\n      category: 'Translation',\r\n      type: 'Document',\r\n      status: 'Pending Approval',\r\n      title: 'Birth Certificate Translation',\r\n      description: 'Certified translation of a Tanzanian birth certificate.',\r\n      date: '2025-10-20',\r\n      duration: '1 hour',\r\n      wordCount: 200,\r\n      location: 'Remote',\r\n      languagePair: 'Swahili > English',\r\n      rate: 'Â£35 (Fixed)',\r\n      fixedRate: 35,\r\n      isUrgent: false,\r\n      completedAt: '2025-10-20T14:30:00',\r\n      completionNotes: 'Uploaded certified PDF.',\r\n      completionFile: 'Certified_Translation_JL3004.pdf',\r\n      totalPayout: 35.00,\r\n      createdAt: '2025-10-18T10:00:00Z',\r\n      updatedAt: '2025-10-20T14:30:00Z',\r\n      deletedAt: null,\r\n      attachments: [{\r\n          name: 'Birth_Certificate_Tanzania_Scan.pdf',\r\n          type: 'file',\r\n          url: '#'\r\n      }],\r\n      history: [\r\n          { id: 'h32', type: 'CREATED', date: '2025-10-18T10:00:00Z', actorName: 'Jambo Admin' },\r\n          { id: 'h33', type: 'ASSIGNED', date: '2025-10-18T11:00:00Z', actorName: 'Linah Makembu' },\r\n          { id: 'h34', type: 'SUBMITTED', date: '2025-10-20T14:30:00Z', actorName: 'Linah Makembu', description: 'Uploaded certified PDF.', attachment: 'Certified_Translation_JL3004.pdf' }\r\n      ]\r\n    }\r\n];\r\n"],"names":[],"mappings":";;;;AAGA,MAAM,eAAe,YAAY,aAAa;AAC9C,MAAM,WAAW;AACjB,MAAM,YAAY;AAElB,MAAM,MAAM,IAAI,OAAO,WAAW;AAK3B,MAAM,cAAqB;IAC9B,kCAAkC;IAClC;QACI,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAM,MAAM;gBAAW,MAAM;gBAAwB,WAAW;gBAAe,aAAa;YAAwB;YAC1H;gBAAE,IAAI;gBAAQ,MAAM;gBAAY,MAAM;gBAAwB,WAAW;gBAAe,aAAa;YAA4B;YACjI;gBAAE,IAAI;gBAAM,MAAM;gBAAY,MAAM;gBAAwB,WAAW;gBAAe,aAAa;YAA4B;SAClI;IACL;IACA;QACI,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,cAAc;QACd,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,UAAU;QACV,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YACT;gBAAE,MAAM;gBAAgC,MAAM;gBAAQ,KAAK;YAAI;YAC/D;gBAAE,MAAM;gBAAuB,MAAM;gBAAQ,KAAK;YAAI;SACzD;QACD,SAAS;YACL;gBAAE,IAAI;gBAAM,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACpF;gBAAE,IAAI;gBAAM,MAAM;gBAAY,MAAM;gBAAwB,WAAW;gBAAe,aAAa;YAA4B;SAClI;IACL;IACA;QACI,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,WAAW;QACX,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAM,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;SACvF;IACL;IAEA,uDAAuD;IACvD;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,mBAAmB;YAAC;SAAQ;QAC5B,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YAAC;gBACV,MAAM;gBACN,MAAM;gBACN,KAAK;YACT;SAAE;QACF,SAAS;YACL;gBAAE,IAAI;gBAAM,MAAM;gBAAW,MAAM;gBAAwB,WAAW;gBAAa,aAAa;YAAmC;SACtI;IACH;IACA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,mBAAmB;YAAC;SAAQ;QAC5B,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YAAC;gBACV,MAAM;gBACN,MAAM;gBACN,KAAK;YACT;SAAE;QACF,SAAS;YACL;gBAAE,IAAI;gBAAM,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;SACvF;IACH;IACA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,cAAc;QACd,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,UAAU;QACV,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YAAC;gBACV,MAAM;gBACN,MAAM;gBACN,KAAK;YACT;SAAE;QACF,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAgB;SAC1F;IACH;IAEA,mDAAmD;IACnD;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACrF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;gBAAiB,aAAa;YAAqB;SAC9H;IACH;IACA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,UAAU;QACV,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YAAC;gBACV,MAAM;gBACN,MAAM;gBACN,KAAK;YACT;SAAE;QACF,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAY;YACnF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;SAC3F;IACH;IACA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;QACd,MAAM;QACN,WAAW;QACX,UAAU;QACV,UAAU;QACV,kBAAkB;QAClB,cAAc;QACd,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YAAC;gBACV,MAAM;gBACN,MAAM;gBACN,KAAK;YACT;SAAE;QACF,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACrF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;YACxF;gBAAE,IAAI;gBAAO,MAAM;gBAAa,MAAM;gBAAwB,WAAW;gBAAiB,aAAa;gBAAqB,YAAY;YAAsB;YAC9J;gBAAE,IAAI;gBAAO,MAAM;gBAAsB,MAAM;gBAAwB,WAAW;gBAAe,aAAa;gBAA6D,YAAY;YAAmB;SAC7M;IACH;IAEA,oEAAoE;IAEpE,2DAA2D;IAC3D;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,cAAc;QACd,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,aAAa;QACb,iBAAiB;QACjB,aAAa;QACb,QAAQ;QACR,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAY,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAY;YACxF;gBAAE,IAAI;gBAAY,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;YAC7F;gBAAE,IAAI;gBAAY,MAAM;gBAAa,MAAM;gBAAwB,WAAW;gBAAiB,aAAa;YAAkB;YAC9H;gBAAE,IAAI;gBAAY,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAc;SAC9F;IACH;IAEA,4CAA4C;IAC5C;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,iBAAiB;QACjB,aAAa;QACb,QAAQ;QACR,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACrF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;YACxF;gBAAE,IAAI;gBAAO,MAAM;gBAAa,MAAM;gBAAwB,WAAW;gBAAiB,aAAa;YAAyB;YAChI;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;gBAAe,aAAa;YAAoB;SAC3H;IACH;IAEA,6CAA6C;IAC7C;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,YAAY;QACZ,UAAU;QACV,aAAa;QACb,iBAAiB;QACjB,aAAa;QACb,QAAQ;QACR,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACrF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;YACxF;gBAAE,IAAI;gBAAO,MAAM;gBAAa,MAAM;gBAAwB,WAAW;gBAAiB,aAAa;gBAAkB,YAAY;YAA8B;YACnK;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAc;SACzF;IACH;IAEA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,MAAM;QACN,YAAY;QACZ,UAAU;QACV,UAAU;QACV,cAAc;QACd,MAAM;QACN,UAAU;QACV,UAAU;QACV,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;QACX,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACrF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;YACxF;gBAAE,IAAI;gBAAO,MAAM;gBAAa,MAAM;gBAAwB,WAAW;gBAAe,aAAa;YAA4B;SACpI;IACH;IAEA,sDAAsD;IACtD;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ;QACR,OAAO;QACP,aAAa;QACb,MAAM;QACN,UAAU;QACV,WAAW;QACX,UAAU;QACV,cAAc;QACd,MAAM;QACN,WAAW;QACX,UAAU;QACV,aAAa;QACb,iBAAiB;QACjB,gBAAgB;QAChB,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;QACX,aAAa;YAAC;gBACV,MAAM;gBACN,MAAM;gBACN,KAAK;YACT;SAAE;QACF,SAAS;YACL;gBAAE,IAAI;gBAAO,MAAM;gBAAW,MAAM;gBAAwB,WAAW;YAAc;YACrF;gBAAE,IAAI;gBAAO,MAAM;gBAAY,MAAM;gBAAwB,WAAW;YAAgB;YACxF;gBAAE,IAAI;gBAAO,MAAM;gBAAa,MAAM;gBAAwB,WAAW;gBAAiB,aAAa;gBAA2B,YAAY;YAAmC;SACpL;IACH;CACH"}},
    {"offset": {"line": 1738, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/users.ts"],"sourcesContent":["\r\nimport { User } from '../types';\r\n\r\n/**\r\n * SQL Table: users\r\n */\r\nexport const initialUsers: User[] = [\r\n    {\r\n        id: 'u-123456',\r\n        email: 'linah@jambolinguists.com',\r\n        password: 'password', // Demo password\r\n        firstName: 'Linah',\r\n        lastName: 'Makembu',\r\n        phone: '+44 7938 065 717',\r\n        location: 'Leeds, UK',\r\n        headline: 'Professional Swahili Interpreter & Translator',\r\n        role: 'linguist',\r\n        avatarUrl: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?auto=format&fit=crop&q=80&w=400',\r\n        headerUrl: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&q=80&w=1200', \r\n        isVerified: true,\r\n        isSuspended: false,\r\n        qualifications: ['DPSI', 'CIOL Member'],\r\n        languages: ['English', 'Swahili'],\r\n        bankDetails: {\r\n            bankName: 'Barclays',\r\n            accountNumber: 'â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 4289',\r\n            sortCode: '20-00-00'\r\n        },\r\n        createdAt: '2024-01-15T09:00:00Z',\r\n        updatedAt: '2024-10-20T14:30:00Z',\r\n        deletedAt: null,\r\n        notificationPreferences: {\r\n            emailUpdates: true,\r\n            jobAlerts: true,\r\n            courseReminders: true,\r\n            marketing: false\r\n        }\r\n    },\r\n    {\r\n        id: 'u-admin-001',\r\n        email: 'admin@jambolinguists.com',\r\n        password: 'admin', // Demo password\r\n        firstName: 'Jambo',\r\n        lastName: 'Admin',\r\n        location: 'HQ, Pudsey',\r\n        headline: 'System Administrator',\r\n        role: 'admin',\r\n        avatarUrl: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&q=80&w=400',\r\n        headerUrl: 'https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&q=80&w=1200', \r\n        isVerified: true,\r\n        isSuspended: false,\r\n        createdAt: '2023-11-01T09:00:00Z',\r\n        updatedAt: '2023-11-01T09:00:00Z',\r\n        deletedAt: null,\r\n        notificationPreferences: {\r\n            emailUpdates: true,\r\n            jobAlerts: false,\r\n            courseReminders: false,\r\n            marketing: false\r\n        }\r\n    },\r\n    {\r\n        id: 'u-suspended-001',\r\n        email: 'blocked@example.com',\r\n        password: 'password',\r\n        firstName: 'Sarah',\r\n        lastName: 'Connor',\r\n        location: 'London, UK',\r\n        headline: 'Swahili Translator',\r\n        role: 'linguist',\r\n        avatarUrl: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?auto=format&fit=crop&q=80&w=400',\r\n        headerUrl: 'https://images.unsplash.com/photo-1557683316-973673baf926?auto=format&fit=crop&q=80&w=1200', \r\n        isVerified: true,\r\n        isSuspended: true, \r\n        languages: ['English', 'Swahili'],\r\n        createdAt: '2024-05-10T12:00:00Z',\r\n        updatedAt: '2024-09-15T10:00:00Z',\r\n        deletedAt: null,\r\n        notificationPreferences: {\r\n            emailUpdates: false,\r\n            jobAlerts: false,\r\n            courseReminders: false,\r\n            marketing: false\r\n        }\r\n    },\r\n    {\r\n        id: 'u-pending-001',\r\n        email: 'newbie@example.com',\r\n        password: 'password',\r\n        firstName: 'John',\r\n        lastName: 'Doe',\r\n        location: 'Manchester, UK',\r\n        headline: 'Aspiring Interpreter',\r\n        role: 'linguist',\r\n        avatarUrl: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80&w=400',\r\n        headerUrl: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80&w=1200', \r\n        isVerified: false, \r\n        isSuspended: false,\r\n        languages: ['English', 'French'],\r\n        createdAt: '2025-10-25T09:00:00Z',\r\n        updatedAt: '2025-10-25T09:00:00Z',\r\n        deletedAt: null,\r\n        notificationPreferences: {\r\n            emailUpdates: true,\r\n            jobAlerts: true,\r\n            courseReminders: true,\r\n            marketing: true\r\n        }\r\n    },\r\n    {\r\n        id: 'u-client-001',\r\n        email: 'contact@nhs.uk',\r\n        password: 'password',\r\n        firstName: 'NHS',\r\n        lastName: 'Trust',\r\n        location: 'Leeds Teaching Hospitals',\r\n        headline: 'Booking Coordinator',\r\n        role: 'client',\r\n        avatarUrl: 'https://images.unsplash.com/photo-1559839734-2b71ea197ec2?auto=format&fit=crop&q=80&w=400',\r\n        headerUrl: 'https://images.unsplash.com/photo-1538108149393-fbbd8189718c?auto=format&fit=crop&q=80&w=1200', \r\n        isVerified: true,\r\n        isSuspended: false,\r\n        createdAt: '2024-03-15T09:00:00Z',\r\n        updatedAt: '2024-03-15T09:00:00Z',\r\n        deletedAt: null,\r\n        notificationPreferences: {\r\n            emailUpdates: true,\r\n            jobAlerts: true,\r\n            courseReminders: false,\r\n            marketing: false\r\n        }\r\n    }\r\n];"],"names":[],"mappings":";;;;AAMO,MAAM,eAAuB;IAChC;QACI,IAAI;QACJ,OAAO;QACP,UAAU;QACV,WAAW;QACX,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,MAAM;QACN,WAAW;QACX,WAAW;QACX,YAAY;QACZ,aAAa;QACb,gBAAgB;YAAC;YAAQ;SAAc;QACvC,WAAW;YAAC;YAAW;SAAU;QACjC,aAAa;YACT,UAAU;YACV,eAAe;YACf,UAAU;QACd;QACA,WAAW;QACX,WAAW;QACX,WAAW;QACX,yBAAyB;YACrB,cAAc;YACd,WAAW;YACX,iBAAiB;YACjB,WAAW;QACf;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,UAAU;QACV,WAAW;QACX,UAAU;QACV,UAAU;QACV,UAAU;QACV,MAAM;QACN,WAAW;QACX,WAAW;QACX,YAAY;QACZ,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;QACX,yBAAyB;YACrB,cAAc;YACd,WAAW;YACX,iBAAiB;YACjB,WAAW;QACf;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,UAAU;QACV,WAAW;QACX,UAAU;QACV,UAAU;QACV,UAAU;QACV,MAAM;QACN,WAAW;QACX,WAAW;QACX,YAAY;QACZ,aAAa;QACb,WAAW;YAAC;YAAW;SAAU;QACjC,WAAW;QACX,WAAW;QACX,WAAW;QACX,yBAAyB;YACrB,cAAc;YACd,WAAW;YACX,iBAAiB;YACjB,WAAW;QACf;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,UAAU;QACV,WAAW;QACX,UAAU;QACV,UAAU;QACV,UAAU;QACV,MAAM;QACN,WAAW;QACX,WAAW;QACX,YAAY;QACZ,aAAa;QACb,WAAW;YAAC;YAAW;SAAS;QAChC,WAAW;QACX,WAAW;QACX,WAAW;QACX,yBAAyB;YACrB,cAAc;YACd,WAAW;YACX,iBAAiB;YACjB,WAAW;QACf;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,UAAU;QACV,WAAW;QACX,UAAU;QACV,UAAU;QACV,UAAU;QACV,MAAM;QACN,WAAW;QACX,WAAW;QACX,YAAY;QACZ,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;QACX,yBAAyB;YACrB,cAAc;YACd,WAAW;YACX,iBAAiB;YACjB,WAAW;QACf;IACJ;CACH"}},
    {"offset": {"line": 1888, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/notifications.ts"],"sourcesContent":["\r\nimport { Notification } from '../types';\r\n\r\nconst MOCK_USER_ID = 'u-123456';\r\n\r\n/**\r\n * SQL Table: notifications\r\n */\r\nexport const initialNotifications: Notification[] = [\r\n    { \r\n        id: 'n1', \r\n        userId: MOCK_USER_ID,\r\n        title: \"Invoice #INV-2024-09 Paid\", \r\n        time: \"2 hours ago\", \r\n        isRead: false,\r\n        iconType: 'check', \r\n        color: \"text-green-500\", \r\n        bg: \"bg-green-50\", \r\n        linkTo: 'jobs-history',\r\n        createdAt: new Date(Date.now() - 7200000).toISOString(),\r\n        updatedAt: new Date(Date.now() - 7200000).toISOString(),\r\n        deletedAt: null\r\n    },\r\n    { \r\n        id: 'n2', \r\n        userId: MOCK_USER_ID,\r\n        title: \"New Job Available: Legal Interpreting\", \r\n        time: \"5 hours ago\", \r\n        isRead: false,\r\n        iconType: 'briefcase', \r\n        color: \"text-brand-orange\", \r\n        bg: \"bg-orange-50\", \r\n        linkTo: 'jobs-available',\r\n        createdAt: new Date(Date.now() - 18000000).toISOString(),\r\n        updatedAt: new Date(Date.now() - 18000000).toISOString(),\r\n        deletedAt: null\r\n    },\r\n    { \r\n        id: 'n3', \r\n        userId: MOCK_USER_ID,\r\n        title: \"DBS Check Verified\", \r\n        time: \"1 day ago\", \r\n        isRead: true,\r\n        iconType: 'shield', \r\n        color: \"text-blue-500\", \r\n        bg: \"bg-blue-50\", \r\n        linkTo: 'profile',\r\n        createdAt: new Date(Date.now() - 86400000).toISOString(),\r\n        updatedAt: new Date(Date.now() - 86400000).toISOString(),\r\n        deletedAt: null\r\n    },\r\n    { \r\n        id: 'n4', \r\n        userId: MOCK_USER_ID,\r\n        title: \"New Training Module: GDPR Update\", \r\n        time: \"2 days ago\", \r\n        isRead: true,\r\n        iconType: 'grad', \r\n        color: \"text-purple-500\", \r\n        bg: \"bg-purple-50\", \r\n        linkTo: 'training',\r\n        createdAt: new Date(Date.now() - 172800000).toISOString(),\r\n        updatedAt: new Date(Date.now() - 172800000).toISOString(),\r\n        deletedAt: null\r\n    },\r\n];\r\n"],"names":[],"mappings":";;;;AAGA,MAAM,eAAe;AAKd,MAAM,uBAAuC;IAChD;QACI,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,MAAM;QACN,QAAQ;QACR,UAAU;QACV,OAAO;QACP,IAAI;QACJ,QAAQ;QACR,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,SAAS,WAAW;QACrD,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,SAAS,WAAW;QACrD,WAAW;IACf;IACA;QACI,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,MAAM;QACN,QAAQ;QACR,UAAU;QACV,OAAO;QACP,IAAI;QACJ,QAAQ;QACR,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,UAAU,WAAW;QACtD,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,UAAU,WAAW;QACtD,WAAW;IACf;IACA;QACI,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,MAAM;QACN,QAAQ;QACR,UAAU;QACV,OAAO;QACP,IAAI;QACJ,QAAQ;QACR,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,UAAU,WAAW;QACtD,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,UAAU,WAAW;QACtD,WAAW;IACf;IACA;QACI,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,MAAM;QACN,QAAQ;QACR,UAAU;QACV,OAAO;QACP,IAAI;QACJ,QAAQ;QACR,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,WAAW,WAAW;QACvD,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,WAAW,WAAW;QACvD,WAAW;IACf;CACH"}},
    {"offset": {"line": 1958, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/courses.ts"],"sourcesContent":["\r\nimport { Course, CourseProgress } from '../types';\r\n\r\nexport const initialCourses: Course[] = [\r\n  {\r\n    id: 'c-101',\r\n    title: 'Translation Software Essentials',\r\n    description: 'Master the industry-standard CAT tools. Learn how to manage translation memories, glossaries, and quality assurance checks effectively to boost your productivity and consistency.',\r\n    category: 'Technical',\r\n    duration: '4h 15m',\r\n    lessonsCount: 4,\r\n    thumbnailUrl: 'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?auto=format&fit=crop&q=80&w=600',\r\n    instructor: 'Sarah Jenkins',\r\n    instructorRole: 'Senior CAT Tool Trainer',\r\n    allowSelfEnrollment: true,\r\n    learningGoals: [\r\n        'Understand the architecture of Translation Memories',\r\n        'Create and maintain client-specific glossaries',\r\n        'Perform automated QA checks for errors',\r\n        'Export projects for final delivery'\r\n    ],\r\n    status: 'Published',\r\n    settings: {\r\n        visibility: 'Public',\r\n        allowReenrollment: true,\r\n        passingScore: 80,\r\n        autoIssueCertificate: true,\r\n        requirePrerequisites: false,\r\n        prerequisites: [],\r\n        notifications: { onEnroll: true, onComplete: true }\r\n    },\r\n    compliance: { requiredForJobTypes: [], isMandatory: false },\r\n    createdAt: '2024-01-01T00:00:00Z',\r\n    updatedAt: '2024-01-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'c-102',\r\n    title: 'Medical Interpreting Basics',\r\n    description: 'A comprehensive guide to interpreting in healthcare settings. Covers common terminology, ethical dilemmas, NHS protocols, and emotional resilience for interpreters.',\r\n    category: 'Language',\r\n    duration: '6h 00m',\r\n    lessonsCount: 3,\r\n    thumbnailUrl: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=600',\r\n    instructor: 'Dr. Amina Abdi',\r\n    instructorRole: 'NHS Consultant & Linguist',\r\n    allowSelfEnrollment: true,\r\n    learningGoals: [\r\n        'Master core cardiology and respiratory terminology',\r\n        'Understand NHS safeguarding protocols',\r\n        'Navigate ethical dilemmas in patient consultations',\r\n        'Techniques for breaking bad news sensitively'\r\n    ],\r\n    status: 'Published',\r\n    settings: {\r\n        visibility: 'Public',\r\n        allowReenrollment: true,\r\n        passingScore: 85,\r\n        autoIssueCertificate: true,\r\n        requirePrerequisites: false,\r\n        prerequisites: [],\r\n        notifications: { onEnroll: true, onComplete: true }\r\n    },\r\n    compliance: { requiredForJobTypes: ['Interpreting'], isMandatory: false },\r\n    createdAt: '2024-01-05T00:00:00Z',\r\n    updatedAt: '2024-01-05T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'c-103',\r\n    title: 'GDPR & Data Compliance',\r\n    description: 'Essential training on data protection for freelance linguists. Understand your responsibilities under UK law and how to handle sensitive client data securely.',\r\n    category: 'Compliance',\r\n    duration: '1h 30m',\r\n    lessonsCount: 3,\r\n    thumbnailUrl: 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=600',\r\n    instructor: 'Jambo Compliance Team',\r\n    instructorRole: 'Legal Department',\r\n    allowSelfEnrollment: false,\r\n    learningGoals: [\r\n        'Identify the 7 key principles of GDPR',\r\n        'Securely store and dispose of physical notes',\r\n        'Recognize and report data breaches',\r\n        'Understand your liability as a freelancer'\r\n    ],\r\n    status: 'Published',\r\n    settings: {\r\n        visibility: 'Invite-Only',\r\n        allowReenrollment: false,\r\n        passingScore: 100,\r\n        autoIssueCertificate: true,\r\n        requirePrerequisites: false,\r\n        prerequisites: [],\r\n        notifications: { onEnroll: true, onComplete: false }\r\n    },\r\n    compliance: { requiredForJobTypes: [], mandatoryRefreshMonths: 12, isMandatory: true },\r\n    createdAt: '2023-12-01T00:00:00Z',\r\n    updatedAt: '2023-12-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'c-restricted',\r\n    title: 'Advanced Legal Interpreting (Restricted)',\r\n    description: 'Specialized module for DPSI holders only. Requires manual approval from the admin team.',\r\n    category: 'Technical',\r\n    duration: '10h 00m',\r\n    lessonsCount: 5,\r\n    thumbnailUrl: 'https://images.unsplash.com/photo-1589829085413-56de8ae18c73?auto=format&fit=crop&q=80&w=600',\r\n    instructor: 'Legal Dept',\r\n    instructorRole: 'Head of Compliance',\r\n    allowSelfEnrollment: false,\r\n    learningGoals: ['Courtroom etiquette', 'Legal terminology', 'Impartiality in high-stakes cases'],\r\n    status: 'Published',\r\n    settings: {\r\n        visibility: 'Public',\r\n        allowReenrollment: false,\r\n        passingScore: 90,\r\n        autoIssueCertificate: false,\r\n        requirePrerequisites: true,\r\n        prerequisites: ['c-103'],\r\n        notifications: { onEnroll: true, onComplete: true }\r\n    },\r\n    compliance: { requiredForJobTypes: ['Interpreting'], isMandatory: false },\r\n    createdAt: '2024-02-01T00:00:00Z',\r\n    updatedAt: '2024-02-01T00:00:00Z',\r\n    deletedAt: null\r\n  }\r\n];\r\n\r\nexport const initialProgress: CourseProgress[] = [\r\n    {\r\n        userId: 'u-123456',\r\n        courseId: 'c-103', // GDPR\r\n        status: 'Completed',\r\n        progressPercent: 100,\r\n        lessonsCompletedIds: ['l-103-1', 'l-103-2', 'l-103-3'],\r\n        lastAccessedAt: '2024-09-15T10:00:00Z',\r\n        enrollmentDate: '2024-09-01T09:00:00Z',\r\n        completedAt: '2024-09-15T11:30:00Z',\r\n        certificateId: 'cert-initial-1',\r\n        history: [\r\n            { date: '2024-09-01T09:00:00Z', action: 'Enrolled' },\r\n            { date: '2024-09-15T11:30:00Z', action: 'Course Completed' }\r\n        ]\r\n    }\r\n];"],"names":[],"mappings":";;;;;;AAGO,MAAM,iBAA2B;IACtC;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,UAAU;QACV,cAAc;QACd,cAAc;QACd,YAAY;QACZ,gBAAgB;QAChB,qBAAqB;QACrB,eAAe;YACX;YACA;YACA;YACA;SACH;QACD,QAAQ;QACR,UAAU;YACN,YAAY;YACZ,mBAAmB;YACnB,cAAc;YACd,sBAAsB;YACtB,sBAAsB;YACtB,eAAe,EAAE;YACjB,eAAe;gBAAE,UAAU;gBAAM,YAAY;YAAK;QACtD;QACA,YAAY;YAAE,qBAAqB,EAAE;YAAE,aAAa;QAAM;QAC1D,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,UAAU;QACV,cAAc;QACd,cAAc;QACd,YAAY;QACZ,gBAAgB;QAChB,qBAAqB;QACrB,eAAe;YACX;YACA;YACA;YACA;SACH;QACD,QAAQ;QACR,UAAU;YACN,YAAY;YACZ,mBAAmB;YACnB,cAAc;YACd,sBAAsB;YACtB,sBAAsB;YACtB,eAAe,EAAE;YACjB,eAAe;gBAAE,UAAU;gBAAM,YAAY;YAAK;QACtD;QACA,YAAY;YAAE,qBAAqB;gBAAC;aAAe;YAAE,aAAa;QAAM;QACxE,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,UAAU;QACV,cAAc;QACd,cAAc;QACd,YAAY;QACZ,gBAAgB;QAChB,qBAAqB;QACrB,eAAe;YACX;YACA;YACA;YACA;SACH;QACD,QAAQ;QACR,UAAU;YACN,YAAY;YACZ,mBAAmB;YACnB,cAAc;YACd,sBAAsB;YACtB,sBAAsB;YACtB,eAAe,EAAE;YACjB,eAAe;gBAAE,UAAU;gBAAM,YAAY;YAAM;QACvD;QACA,YAAY;YAAE,qBAAqB,EAAE;YAAE,wBAAwB;YAAI,aAAa;QAAK;QACrF,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,UAAU;QACV,cAAc;QACd,cAAc;QACd,YAAY;QACZ,gBAAgB;QAChB,qBAAqB;QACrB,eAAe;YAAC;YAAuB;YAAqB;SAAoC;QAChG,QAAQ;QACR,UAAU;YACN,YAAY;YACZ,mBAAmB;YACnB,cAAc;YACd,sBAAsB;YACtB,sBAAsB;YACtB,eAAe;gBAAC;aAAQ;YACxB,eAAe;gBAAE,UAAU;gBAAM,YAAY;YAAK;QACtD;QACA,YAAY;YAAE,qBAAqB;gBAAC;aAAe;YAAE,aAAa;QAAM;QACxE,WAAW;QACX,WAAW;QACX,WAAW;IACb;CACD;AAEM,MAAM,kBAAoC;IAC7C;QACI,QAAQ;QACR,UAAU;QACV,QAAQ;QACR,iBAAiB;QACjB,qBAAqB;YAAC;YAAW;YAAW;SAAU;QACtD,gBAAgB;QAChB,gBAAgB;QAChB,aAAa;QACb,eAAe;QACf,SAAS;YACL;gBAAE,MAAM;gBAAwB,QAAQ;YAAW;YACnD;gBAAE,MAAM;gBAAwB,QAAQ;YAAmB;SAC9D;IACL;CACH"}},
    {"offset": {"line": 2158, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/lessons.ts"],"sourcesContent":["\r\nimport { Lesson } from '../types';\r\n\r\nexport const initialLessons: Lesson[] = [\r\n  // C-101 Lessons (Translation Software)\r\n  {\r\n    id: 'l-101-1',\r\n    courseId: 'c-101',\r\n    module: 'Getting Started',\r\n    title: 'Introduction to CAT Tools',\r\n    type: 'Video',\r\n    duration: '15 min',\r\n    orderIndex: 0,\r\n    contentUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', // Mock Video\r\n    description: 'Understanding what Computer-Assisted Translation tools are and why they are essential for modern linguists.',\r\n    transcript: \"Welcome to this introductory module on CAT tools. In this lesson, we will explore the fundamental difference between machine translation and computer-assisted translation. Many linguists fear that technology will replace them, but in reality, CAT tools are designed to empower you...\",\r\n    createdAt: '2024-01-01T00:00:00Z',\r\n    updatedAt: '2024-01-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'l-101-2',\r\n    courseId: 'c-101',\r\n    module: 'Getting Started',\r\n    title: 'Setting up Translation Memories',\r\n    type: 'Slide',\r\n    duration: '30 min',\r\n    orderIndex: 1,\r\n    description: 'A step-by-step visual guide on creating and maintaining TMs to ensure consistency across projects.',\r\n    contentUrl: 'https://bungoma.go.ke/wp-content/uploads/2021/04/StaffPerformanceAppraisal-JG-Hbelow.pdf',\r\n    createdAt: '2024-01-01T00:00:00Z',\r\n    updatedAt: '2024-01-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'l-101-3',\r\n    courseId: 'c-101',\r\n    module: 'Core Skills',\r\n    title: 'Terminology Management',\r\n    type: 'Document',\r\n    duration: '45 min',\r\n    orderIndex: 2,\r\n    description: 'Read the best practices guide for building client-specific glossaries.',\r\n    contentUrl: 'https://bungoma.go.ke/wp-content/uploads/2021/04/StaffPerformanceAppraisal-JG-Hbelow.pdf',\r\n    createdAt: '2024-01-01T00:00:00Z',\r\n    updatedAt: '2024-01-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'l-101-4',\r\n    courseId: 'c-101',\r\n    module: 'Assessment',\r\n    title: 'Final Assessment: Software',\r\n    type: 'Quiz',\r\n    duration: '20 min',\r\n    orderIndex: 3,\r\n    description: 'Test your knowledge on CAT tools and file management.',\r\n    quizData: [\r\n      {\r\n        question: \"What does 'CAT' stand for in 'CAT tool'?\",\r\n        options: [\r\n          \"Computer-Assisted Translation\",\r\n          \"Computer-Aided Technology\",\r\n          \"Creative Authoring Tool\",\r\n          \"Contextual Analysis Template\"\r\n        ],\r\n        correctAnswer: 0,\r\n        explanation: \"'CAT' stands for Computer-Assisted Translation. These tools help linguists by leveraging translation memories and glossaries.\"\r\n      },\r\n      {\r\n        question: \"What is the primary purpose of a Translation Memory (TM)?\",\r\n        options: [\r\n          \"To automatically translate the entire document.\",\r\n          \"To store previously translated segments for reuse.\",\r\n          \"To check for spelling and grammar errors.\",\r\n          \"To format the final document.\"\r\n        ],\r\n        correctAnswer: 1,\r\n        explanation: \"A Translation Memory (TM) stores source and target language pairs, allowing translators to reuse previous work for consistency and speed.\"\r\n      }\r\n    ],\r\n    createdAt: '2024-01-01T00:00:00Z',\r\n    updatedAt: '2024-01-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n\r\n  // C-102 Lessons (Medical)\r\n  {\r\n    id: 'l-102-1',\r\n    courseId: 'c-102',\r\n    module: 'Foundations',\r\n    title: 'Anatomy & Physiology 101',\r\n    type: 'Video',\r\n    duration: '45 min',\r\n    orderIndex: 0,\r\n    contentUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',\r\n    description: 'Overview of major body systems relevant to interpreting.',\r\n    transcript: \"In medical interpreting, accuracy is a matter of life and death. Today we start with the Cardiovascular system. The heart is a muscular organ...\",\r\n    createdAt: '2024-01-05T00:00:00Z',\r\n    updatedAt: '2024-01-05T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'l-102-2',\r\n    courseId: 'c-102',\r\n    module: 'Foundations',\r\n    title: 'NHS Protocols for Interpreters',\r\n    type: 'Document',\r\n    duration: '30 min',\r\n    orderIndex: 1,\r\n    description: 'Standard Operating Procedures for working within NHS Trusts.',\r\n    contentUrl: 'https://bungoma.go.ke/wp-content/uploads/2021/04/StaffPerformanceAppraisal-JG-Hbelow.pdf',\r\n    createdAt: '2024-01-05T00:00:00Z',\r\n    updatedAt: '2024-01-05T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n     id: 'l-102-3',\r\n     courseId: 'c-102',\r\n     module: 'Advanced Scenarios',\r\n     title: 'Ethics: Breaking Bad News',\r\n     type: 'Video',\r\n     duration: '20 min',\r\n     orderIndex: 2,\r\n     description: 'How to maintain professional boundaries and emotional stability during difficult consultations.',\r\n     contentUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4',\r\n     transcript: \"Delivering bad news is never easy, but as an interpreter, your role is to convey the clinician's words exactly, including the tone and empathy...\",\r\n     createdAt: '2024-01-05T00:00:00Z',\r\n     updatedAt: '2024-01-05T00:00:00Z',\r\n     deletedAt: null\r\n  },\r\n\r\n  // C-103 Lessons (GDPR)\r\n  {\r\n    id: 'l-103-1',\r\n    courseId: 'c-103',\r\n    module: 'Core Principles',\r\n    title: 'Principles of Data Protection',\r\n    type: 'Video',\r\n    duration: '20 min',\r\n    orderIndex: 0,\r\n    description: 'The 7 key principles of GDPR.',\r\n    contentUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4',\r\n    createdAt: '2023-12-01T00:00:00Z',\r\n    updatedAt: '2023-12-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'l-103-2',\r\n    courseId: 'c-103',\r\n    module: 'Core Principles',\r\n    title: 'Handling Printed Documents',\r\n    type: 'Slide',\r\n    duration: '15 min',\r\n    orderIndex: 1,\r\n    description: 'Secure disposal and storage of physical notes.',\r\n    contentUrl: 'https://bungoma.go.ke/wp-content/uploads/2021/04/StaffPerformanceAppraisal-JG-Hbelow.pdf',\r\n    createdAt: '2023-12-01T00:00:00Z',\r\n    updatedAt: '2023-12-01T00:00:00Z',\r\n    deletedAt: null\r\n  },\r\n  {\r\n    id: 'l-103-3',\r\n    courseId: 'c-103',\r\n    module: 'Final Quiz',\r\n    title: 'GDPR Certification Quiz',\r\n    type: 'Quiz',\r\n    duration: '15 min',\r\n    orderIndex: 2,\r\n    description: 'Pass score: 80%.',\r\n    quizData: [\r\n      {\r\n        question: \"What does GDPR stand for?\",\r\n        options: [\r\n          \"General Data Protection Regulation\",\r\n          \"Global Data Privacy Regulation\",\r\n          \"General Document Processing Rules\",\r\n          \"Government Data Protection Registry\"\r\n        ],\r\n        correctAnswer: 0,\r\n        explanation: \"GDPR stands for General Data Protection Regulation, a key data privacy regulation in the EU and UK.\"\r\n      },\r\n      {\r\n        question: \"Under GDPR, when must you report a data breach to the supervisory authority?\",\r\n        options: [\r\n          \"Within one week\",\r\n          \"Within 72 hours\",\r\n          \"Within one month\",\r\n          \"Immediately, without any delay\"\r\n        ],\r\n        correctAnswer: 1,\r\n        explanation: \"A notifiable breach has to be reported to the relevant supervisory authority within 72 hours of the organisation becoming aware of it.\"\r\n      },\r\n      {\r\n        question: \"Which of the following is considered 'personal data' under GDPR?\",\r\n        options: [\r\n          \"A person's name\",\r\n          \"An email address\",\r\n          \"An IP address\",\r\n          \"All of the above\"\r\n        ],\r\n        correctAnswer: 3,\r\n        explanation: \"Personal data is any information that relates to an identified or identifiable individual, which includes names, email addresses, and even technical data like IP addresses.\"\r\n      }\r\n    ],\r\n    createdAt: '2023-12-01T00:00:00Z',\r\n    updatedAt: '2023-12-01T00:00:00Z',\r\n    deletedAt: null\r\n  }\r\n];\r\n"],"names":[],"mappings":";;;;AAGO,MAAM,iBAA2B;IACtC,uCAAuC;IACvC;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,UAAU;YACR;gBACE,UAAU;gBACV,SAAS;oBACP;oBACA;oBACA;oBACA;iBACD;gBACD,eAAe;gBACf,aAAa;YACf;YACA;gBACE,UAAU;gBACV,SAAS;oBACP;oBACA;oBACA;oBACA;iBACD;gBACD,eAAe;gBACf,aAAa;YACf;SACD;QACD,WAAW;QACX,WAAW;QACX,WAAW;IACb;IAEA,0BAA0B;IAC1B;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACG,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACd;IAEA,uBAAuB;IACvB;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,WAAW;QACX,WAAW;QACX,WAAW;IACb;IACA;QACE,IAAI;QACJ,UAAU;QACV,QAAQ;QACR,OAAO;QACP,MAAM;QACN,UAAU;QACV,YAAY;QACZ,aAAa;QACb,UAAU;YACR;gBACE,UAAU;gBACV,SAAS;oBACP;oBACA;oBACA;oBACA;iBACD;gBACD,eAAe;gBACf,aAAa;YACf;YACA;gBACE,UAAU;gBACV,SAAS;oBACP;oBACA;oBACA;oBACA;iBACD;gBACD,eAAe;gBACf,aAAa;YACf;YACA;gBACE,UAAU;gBACV,SAAS;oBACP;oBACA;oBACA;oBACA;iBACD;gBACD,eAAe;gBACf,aAAa;YACf;SACD;QACD,WAAW;QACX,WAAW;QACX,WAAW;IACb;CACD"}},
    {"offset": {"line": 2374, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/resources.ts"],"sourcesContent":["\r\nimport { Resource } from '../types';\r\n\r\nexport const initialResources: Resource[] = [\r\n    {\r\n        id: 'res-001',\r\n        title: 'NHS Interpreting Guidelines 2024',\r\n        description: 'Official code of practice for interpreters working within NHS Trusts. Essential reading for medical assignments.',\r\n        category: 'Medical',\r\n        type: 'pdf',\r\n        url: '#',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'res-002',\r\n        title: 'Swahili Legal Glossary (Criminal)',\r\n        description: 'Comprehensive glossary of UK criminal law terminology translated into standard Swahili.',\r\n        category: 'Legal',\r\n        type: 'pdf',\r\n        url: '#',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'res-003',\r\n        title: 'Jambo Linguist Handbook',\r\n        description: 'Everything you need to know about working with us: payments, dress code, and cancellation policies.',\r\n        category: 'General',\r\n        type: 'pdf',\r\n        url: '#',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'res-004',\r\n        title: 'Safeguarding Adults Pocket Guide',\r\n        description: 'Quick reference guide for identifying and reporting safeguarding concerns during assignments.',\r\n        category: 'Compliance',\r\n        type: 'pdf',\r\n        url: '#',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'res-005',\r\n        title: 'Asylum Process Overview',\r\n        description: 'External link to the Home Office guide on the asylum interview process.',\r\n        category: 'Legal',\r\n        type: 'link',\r\n        url: '#',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'res-006',\r\n        title: 'Video Interpreting Best Practices',\r\n        description: 'Technical setup and etiquette guide for remote video interpreting sessions.',\r\n        category: 'General',\r\n        type: 'pdf',\r\n        url: '#',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        deletedAt: null\r\n    }\r\n];\r\n"],"names":[],"mappings":";;;;AAGO,MAAM,mBAA+B;IACxC;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,KAAK;QACL,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,KAAK;QACL,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,KAAK;QACL,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,KAAK;QACL,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,KAAK;QACL,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,KAAK;QACL,WAAW;QACX,WAAW;QACX,WAAW;IACf;CACH"}},
    {"offset": {"line": 2453, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/invoices.ts"],"sourcesContent":["\r\nimport { Invoice } from '../types';\r\n\r\nexport const initialInvoices: Invoice[] = [\r\n    {\r\n        id: 'inv-001',\r\n        userId: 'u-123456',\r\n        reference: 'INV-2024-001',\r\n        date: '2024-09-30',\r\n        dueDate: '2024-10-14',\r\n        amount: 850.00,\r\n        status: 'Paid',\r\n        items: [\r\n            { description: 'Translation: Employee Handbook', amount: 850.00, jobId: 'JL-3006' }\r\n        ],\r\n        createdAt: '2024-09-30T09:00:00Z',\r\n        updatedAt: '2024-10-02T10:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'inv-002',\r\n        userId: 'u-123456',\r\n        reference: 'INV-2024-002',\r\n        date: '2024-10-16', // Date after jobs JL-3001 and JL-3002 completed (Oct 10-15)\r\n        dueDate: '2024-10-30',\r\n        amount: 300.00,\r\n        status: 'Paid',\r\n        items: [\r\n            { description: 'Interpreting: Asylum Interview Prep', amount: 60.00, jobId: 'JL-3001' },\r\n            { description: 'Transcription: Focus Group', amount: 240.00, jobId: 'JL-3002' }\r\n        ],\r\n        createdAt: '2024-10-16T09:00:00Z',\r\n        updatedAt: '2024-10-18T11:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'inv-003',\r\n        userId: 'u-123456',\r\n        reference: 'INV-2024-003',\r\n        date: '2025-10-21', // Future invoice for the Pending job\r\n        dueDate: '2025-11-04',\r\n        amount: 35.00,\r\n        status: 'Pending',\r\n        items: [\r\n             { description: 'Translation: Birth Certificate', amount: 35.00, jobId: 'JL-3004' }\r\n        ],\r\n        createdAt: '2025-10-21T09:00:00Z',\r\n        updatedAt: '2025-10-21T09:00:00Z',\r\n        deletedAt: null\r\n    }\r\n];\r\n"],"names":[],"mappings":";;;;AAGO,MAAM,kBAA6B;IACtC;QACI,IAAI;QACJ,QAAQ;QACR,WAAW;QACX,MAAM;QACN,SAAS;QACT,QAAQ;QACR,QAAQ;QACR,OAAO;YACH;gBAAE,aAAa;gBAAkC,QAAQ;gBAAQ,OAAO;YAAU;SACrF;QACD,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,QAAQ;QACR,WAAW;QACX,MAAM;QACN,SAAS;QACT,QAAQ;QACR,QAAQ;QACR,OAAO;YACH;gBAAE,aAAa;gBAAuC,QAAQ;gBAAO,OAAO;YAAU;YACtF;gBAAE,aAAa;gBAA8B,QAAQ;gBAAQ,OAAO;YAAU;SACjF;QACD,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,QAAQ;QACR,WAAW;QACX,MAAM;QACN,SAAS;QACT,QAAQ;QACR,QAAQ;QACR,OAAO;YACF;gBAAE,aAAa;gBAAkC,QAAQ;gBAAO,OAAO;YAAU;SACrF;QACD,WAAW;QACX,WAAW;QACX,WAAW;IACf;CACH"}},
    {"offset": {"line": 2528, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/loginHistory.ts"],"sourcesContent":["import { LoginHistoryEntry } from '../types';\r\n\r\nexport const initialLoginHistory: LoginHistoryEntry[] = [\r\n    {\r\n        id: 'lh-1',\r\n        userId: 'u-123456',\r\n        timestamp: '2025-10-24T09:00:00Z',\r\n        ipAddress: '81.2.69.142',\r\n        source: 'direct',\r\n    },\r\n    {\r\n        id: 'lh-2',\r\n        userId: 'u-123456',\r\n        timestamp: '2025-10-22T14:30:00Z',\r\n        ipAddress: '192.168.1.10',\r\n        source: 'impersonation',\r\n        impersonatorId: 'u-admin-001'\r\n    }\r\n];"],"names":[],"mappings":";;;;AAEO,MAAM,sBAA2C;IACpD;QACI,IAAI;QACJ,QAAQ;QACR,WAAW;QACX,WAAW;QACX,QAAQ;IACZ;IACA;QACI,IAAI;QACJ,QAAQ;QACR,WAAW;QACX,WAAW;QACX,QAAQ;QACR,gBAAgB;IACpB;CACH"}},
    {"offset": {"line": 2556, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/compliance.ts"],"sourcesContent":["\r\nimport { ComplianceDocument } from '../types';\r\n\r\nconst INITIAL_CONDUCT_HTML = `\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">1. Professionalism & Integrity</h4>\r\n<p class=\"mb-4\">\r\n  Freelancers must maintain the highest standards of professionalism. This includes punctuality, appropriate dress codes for face-to-face assignments, and polite communication. You represent Jambo Linguists in every interaction.\r\n</p>\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">2. Confidentiality (GDPR)</h4>\r\n<p class=\"mb-4\">\r\n  Strict adherence to GDPR is mandatory. No client data may be stored on personal devices after an assignment is complete. Any notes taken during interpretation must be shredded immediately.\r\n</p>\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">3. Accuracy & Neutrality</h4>\r\n<p class=\"mb-4\">\r\n  Interpreters must translate precisely what is said, without adding, omitting, or changing meaning. You must remain neutral and unbiased, regardless of the sensitive nature of the assignment (e.g., Court, NHS, Police).\r\n</p>\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">4. Quality Assurance</h4>\r\n<p class=\"mb-4\">\r\n  We conduct random spot checks and client feedback reviews. Falling below our quality threshold may result in removal from the portal.\r\n</p>\r\n\r\n<div class=\"my-8 p-4 bg-jambo-50 rounded-lg border border-jambo-100 text-jambo-800 text-sm\">\r\n   <strong>Important Note:</strong> Failure to adhere to these standards may result in immediate suspension from the platform.\r\n</div>\r\n`;\r\n\r\nconst INITIAL_PRIVACY_HTML = `\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">1. Data Collection</h4>\r\n<p class=\"mb-4\">We collect personal data required for your assignment and payment processing. This includes name, contact details, and bank information.</p>\r\n\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">2. Data Usage</h4>\r\n<p class=\"mb-4\">Your data is used solely for the purpose of matching you with assignments and ensuring compliance with UK employment laws.</p>\r\n\r\n<h4 class=\"text-jambo-600 font-bold mb-2 text-lg font-serif\">3. Your Rights</h4>\r\n<p class=\"mb-4\">You have the right to request access to your data or request deletion, subject to legal retention requirements.</p>\r\n`;\r\n\r\nexport const initialComplianceDocs: ComplianceDocument[] = [\r\n    {\r\n        id: 'doc-conduct',\r\n        title: 'Code of Conduct',\r\n        type: 'conduct',\r\n        content: INITIAL_CONDUCT_HTML,\r\n        lastUpdated: '2024-10-01T09:00:00Z',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-10-01T09:00:00Z',\r\n        deletedAt: null\r\n    },\r\n    {\r\n        id: 'doc-privacy',\r\n        title: 'Privacy Policy & GDPR',\r\n        type: 'privacy',\r\n        content: INITIAL_PRIVACY_HTML,\r\n        lastUpdated: '2023-11-15T10:00:00Z',\r\n        createdAt: '2023-01-01T00:00:00Z',\r\n        updatedAt: '2023-11-15T10:00:00Z',\r\n        deletedAt: null\r\n    }\r\n];\r\n"],"names":[],"mappings":";;;;AAGA,MAAM,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;AAqB9B,CAAC;AAED,MAAM,uBAAuB,CAAC;;;;;;;;;AAS9B,CAAC;AAEM,MAAM,wBAA8C;IACvD;QACI,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;QACT,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;IACf;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;QACT,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;IACf;CACH"}},
    {"offset": {"line": 2621, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/certificates.ts"],"sourcesContent":["\r\nimport { Certificate } from '../types';\r\n\r\nexport const initialCertificates: Certificate[] = [\r\n    {\r\n        id: 'cert-initial-1',\r\n        userId: 'u-123456', // Linah\r\n        courseId: 'c-103',  // GDPR\r\n        issueDate: '2024-09-15T11:30:00Z',\r\n        status: 'Active',\r\n        verificationCode: 'a1b2-c3d4-e5f6-g7h8',\r\n        createdAt: '2024-09-15T11:30:00Z',\r\n        updatedAt: '2024-09-15T11:30:00Z',\r\n        deletedAt: null\r\n    }\r\n];\r\n"],"names":[],"mappings":";;;;AAGO,MAAM,sBAAqC;IAC9C;QACI,IAAI;QACJ,QAAQ;QACR,UAAU;QACV,WAAW;QACX,QAAQ;QACR,kBAAkB;QAClB,WAAW;QACX,WAAW;QACX,WAAW;IACf;CACH"}},
    {"offset": {"line": 2645, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/messages.ts"],"sourcesContent":["\r\nimport { Message } from '../types';\r\n\r\nconst LINGUIST_ID = 'u-123456';\r\nconst ADMIN_ID = 'u-admin-001';\r\nconst CLIENT_ID = 'u-client-001';\r\n\r\nconst createMsg = (id: string, senderId: string, recipientId: string, content: string, timeOffsetMinutes: number, jobId?: string, isRead = true): Message => ({\r\n    id,\r\n    senderId,\r\n    recipientId,\r\n    content,\r\n    jobId,\r\n    isRead,\r\n    readAt: isRead ? new Date(Date.now() - (timeOffsetMinutes - 5) * 60000).toISOString() : null,\r\n    createdAt: new Date(Date.now() - timeOffsetMinutes * 60000).toISOString(),\r\n    updatedAt: new Date(Date.now() - timeOffsetMinutes * 60000).toISOString(),\r\n    deletedAt: null\r\n});\r\n\r\nexport const initialMessages: Message[] = [\r\n    // Thread 1: Job JL-2003 (Revision) - Admin <-> Linguist\r\n    createMsg('m1', ADMIN_ID, LINGUIST_ID, \"Hi Linah, could you please review the feedback on the marketing flyer?\", 1440, 'JL-2003'),\r\n    createMsg('m2', LINGUIST_ID, ADMIN_ID, \"Sure, I see the notes about tone. Working on it now.\", 1400, 'JL-2003'),\r\n    createMsg('m3', ADMIN_ID, LINGUIST_ID, \"Great, thanks. Client needs it by EOD tomorrow.\", 1390, 'JL-2003'),\r\n    createMsg('m4', LINGUIST_ID, ADMIN_ID, \"Understood. I will upload the revised version shortly.\", 60, 'JL-2003', false), // Unread by admin\r\n\r\n    // Thread 2: Job JL-1001 (Open) - Client <-> Linguist\r\n    createMsg('m5', CLIENT_ID, LINGUIST_ID, \"Hello, regarding the medical appointment next week, is there parking on site?\", 300, 'JL-1001'),\r\n    createMsg('m6', LINGUIST_ID, CLIENT_ID, \"Hi, yes there is a multi-story car park at the Clarendon Wing entrance.\", 280, 'JL-1001'),\r\n    createMsg('m7', CLIENT_ID, LINGUIST_ID, \"Perfect, thank you. See you then.\", 10, 'JL-1001', false), // Unread by linguist\r\n\r\n    // Thread 3: DM - Admin <-> Linguist\r\n    createMsg('m8', ADMIN_ID, LINGUIST_ID, \"Just a reminder to upload your renewed DBS certificate.\", 2880),\r\n    createMsg('m9', LINGUIST_ID, ADMIN_ID, \"Uploaded it yesterday! Can you check?\", 2800),\r\n    createMsg('m10', ADMIN_ID, LINGUIST_ID, \"Got it. Verified and approved. Thanks!\", 2750),\r\n];\r\n"],"names":[],"mappings":";;;;AAGA,MAAM,cAAc;AACpB,MAAM,WAAW;AACjB,MAAM,YAAY;AAElB,MAAM,YAAY,CAAC,IAAY,UAAkB,aAAqB,SAAiB,mBAA2B,OAAgB,SAAS,IAAI,GAAc,CAAC;QAC1J;QACA;QACA;QACA;QACA;QACA;QACA,QAAQ,SAAS,IAAI,KAAK,KAAK,GAAG,KAAK,CAAC,oBAAoB,CAAC,IAAI,OAAO,WAAW,KAAK;QACxF,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,oBAAoB,OAAO,WAAW;QACvE,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,oBAAoB,OAAO,WAAW;QACvE,WAAW;IACf,CAAC;AAEM,MAAM,kBAA6B;IACtC,wDAAwD;IACxD,UAAU,MAAM,UAAU,aAAa,0EAA0E,MAAM;IACvH,UAAU,MAAM,aAAa,UAAU,wDAAwD,MAAM;IACrG,UAAU,MAAM,UAAU,aAAa,mDAAmD,MAAM;IAChG,UAAU,MAAM,aAAa,UAAU,0DAA0D,IAAI,WAAW;IAEhH,qDAAqD;IACrD,UAAU,MAAM,WAAW,aAAa,iFAAiF,KAAK;IAC9H,UAAU,MAAM,aAAa,WAAW,2EAA2E,KAAK;IACxH,UAAU,MAAM,WAAW,aAAa,qCAAqC,IAAI,WAAW;IAE5F,oCAAoC;IACpC,UAAU,MAAM,UAAU,aAAa,2DAA2D;IAClG,UAAU,MAAM,aAAa,UAAU,yCAAyC;IAChF,UAAU,OAAO,UAAU,aAAa,0CAA0C;CACrF"}},
    {"offset": {"line": 2686, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/source/blogPosts.ts"],"sourcesContent":["\r\nimport { BlogPost } from '../types';\r\n\r\nexport const initialBlogPosts: BlogPost[] = [\r\n    {\r\n        id: 'blog-1',\r\n        title: 'The Importance of Cultural Competence in Medical Interpreting',\r\n        slug: 'cultural-competence-medical-interpreting',\r\n        excerpt: 'Why understanding cultural nuances is just as critical as language fluency when navigating healthcare scenarios.',\r\n        content: `\r\nMedical interpreting is more than just swapping words from one language to another. It requires a deep understanding of cultural contexts, especially when dealing with sensitive health issues.\r\n\r\n### The Bridge Between Cultures\r\n\r\nIn many East African cultures, discussing terminal illness directly with a patient can be seen as taboo. An interpreter must navigate these cultural waters carefully, ensuring the doctor's message is conveyed accurately while respecting the patient's cultural framework.\r\n\r\n### Building Trust\r\n\r\nTrust is the foundation of any doctor-patient relationship. When a patient feels that their interpreter understands not just their language but their background, they are more likely to be open about their symptoms and concerns.\r\n\r\n**Key Takeaways:**\r\n*   Learn the cultural background of your target demographic.\r\n*   Understand that body language varies significantly across cultures.\r\n*   Always maintain professional boundaries while being empathetic.\r\n        `,\r\n        coverImage: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=1200',\r\n        tags: ['Medical', 'Interpreting', 'Culture'],\r\n        authorId: 'u-admin-001',\r\n        status: 'published',\r\n        publishedAt: '2024-10-15T09:00:00Z',\r\n        createdAt: '2024-10-15T09:00:00Z',\r\n        updatedAt: '2024-10-15T09:00:00Z',\r\n        deletedAt: null,\r\n        seo: {\r\n            metaTitle: 'Cultural Competence in Medical Interpreting | Jambo Linguists',\r\n            metaDescription: 'Learn why cultural competence is critical for medical interpreters. Explore the impact of cultural nuances in healthcare settings for Swahili speakers.',\r\n            keywords: ['medical interpreting', 'cultural competence', 'Swahili medical interpreter', 'healthcare translation'],\r\n            canonicalUrl: 'https://jambolinguists.com/blog/cultural-competence-medical-interpreting',\r\n            noIndex: false\r\n        }\r\n    },\r\n    {\r\n        id: 'blog-2',\r\n        title: '5 Tips for Working with a Telephone Interpreter',\r\n        slug: 'tips-working-telephone-interpreter',\r\n        excerpt: 'Maximize the efficiency of your remote interpreting sessions with these essential guidelines for professionals.',\r\n        content: `\r\nRemote interpreting is becoming the standard for quick consultations. Here is how to make the most of it.\r\n\r\n1.  **Brief the Interpreter:** Before the client gets on the line, give the interpreter a 30-second summary of the situation.\r\n2.  **Speak Clearly:** Phone lines can distort audio. Enunciate your words.\r\n3.  **One Concept at a Time:** Don't monologue. Pause frequently to allow for interpretation.\r\n4.  **Check for Understanding:** Ask the client to repeat back key instructions.\r\n5.  **Avoid Jargon:** Unless you know the interpreter is a specialist, keep technical terms to a minimum or explain them.\r\n        `,\r\n        coverImage: 'https://images.unsplash.com/photo-1516387938699-a93567ec168e?auto=format&fit=crop&q=80&w=1200',\r\n        tags: ['Tips', 'Telephone', 'Best Practices'],\r\n        authorId: 'u-admin-001',\r\n        status: 'published',\r\n        publishedAt: '2024-10-20T14:30:00Z',\r\n        createdAt: '2024-10-20T14:30:00Z',\r\n        updatedAt: '2024-10-20T14:30:00Z',\r\n        deletedAt: null,\r\n        seo: {\r\n            metaTitle: '5 Tips for Telephone Interpreting Success | Jambo Linguists',\r\n            metaDescription: 'Maximize efficiency in remote interpreting sessions. 5 essential tips for professionals working with telephone interpreters.',\r\n            keywords: ['telephone interpreting', 'remote interpreting', 'interpreter tips', 'over the phone interpretation'],\r\n            noIndex: false\r\n        }\r\n    },\r\n    {\r\n        id: 'blog-3',\r\n        title: 'Understanding Swahili Dialects: A Guide',\r\n        slug: 'understanding-swahili-dialects',\r\n        excerpt: 'Swahili is not a monolith. Explore the variations between coastal, inland, and Congolese Swahili.',\r\n        content: `\r\nSwahili (Kiswahili) is the lingua franca of East Africa, but it varies significantly by region.\r\n\r\n### Standard Swahili (Kiswahili Sanifu)\r\nBased on the dialect of Zanzibar, this is what is taught in schools and used in official government business in Tanzania and Kenya.\r\n\r\n### Congolese Swahili\r\nSpoken in the DRC, this variation borrows heavily from French and Lingala. An interpreter from Mombasa might struggle with the specific vocabulary used in Goma.\r\n\r\n### Sheng\r\nA slang-heavy creole of Swahili and English spoken in Nairobi. While not formal, understanding it is crucial for community work with youth.\r\n        `,\r\n        coverImage: 'https://images.unsplash.com/photo-1523805009345-7448845a9e53?auto=format&fit=crop&q=80&w=1200',\r\n        tags: ['Language', 'Swahili', 'Education'],\r\n        authorId: 'u-admin-001',\r\n        status: 'published',\r\n        publishedAt: '2024-10-25T10:00:00Z',\r\n        createdAt: '2024-10-25T10:00:00Z',\r\n        updatedAt: '2024-10-25T10:00:00Z',\r\n        deletedAt: null,\r\n        seo: {\r\n            metaTitle: 'Swahili Dialects Explained: Sanifu vs Congolese vs Sheng',\r\n            metaDescription: 'Not all Swahili is the same. Discover the key differences between Standard Swahili, Congolese variations, and Sheng slang.',\r\n            keywords: ['Swahili dialects', 'Kiswahili Sanifu', 'Congolese Swahili', 'Sheng', 'African languages'],\r\n            noIndex: false\r\n        }\r\n    }\r\n];\r\n"],"names":[],"mappings":";;;;AAGO,MAAM,mBAA+B;IACxC;QACI,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;QACT,SAAS,CAAC;;;;;;;;;;;;;;;QAeV,CAAC;QACD,YAAY;QACZ,MAAM;YAAC;YAAW;YAAgB;SAAU;QAC5C,UAAU;QACV,QAAQ;QACR,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;QACX,KAAK;YACD,WAAW;YACX,iBAAiB;YACjB,UAAU;gBAAC;gBAAwB;gBAAuB;gBAA+B;aAAyB;YAClH,cAAc;YACd,SAAS;QACb;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;QACT,SAAS,CAAC;;;;;;;;QAQV,CAAC;QACD,YAAY;QACZ,MAAM;YAAC;YAAQ;YAAa;SAAiB;QAC7C,UAAU;QACV,QAAQ;QACR,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;QACX,KAAK;YACD,WAAW;YACX,iBAAiB;YACjB,UAAU;gBAAC;gBAA0B;gBAAuB;gBAAoB;aAAgC;YAChH,SAAS;QACb;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM;QACN,SAAS;QACT,SAAS,CAAC;;;;;;;;;;;QAWV,CAAC;QACD,YAAY;QACZ,MAAM;YAAC;YAAY;YAAW;SAAY;QAC1C,UAAU;QACV,QAAQ;QACR,aAAa;QACb,WAAW;QACX,WAAW;QACX,WAAW;QACX,KAAK;YACD,WAAW;YACX,iBAAiB;YACjB,UAAU;gBAAC;gBAAoB;gBAAoB;gBAAqB;gBAAS;aAAoB;YACrG,SAAS;QACb;IACJ;CACH"}},
    {"offset": {"line": 2825, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/store.ts"],"sourcesContent":["\r\nimport { Job, User, Notification, Course, CourseProgress, Lesson, Resource, Invoice, LoginHistoryEntry, ComplianceDocument, SystemSettings, Certificate, Message, BlogPost, EmailTemplate, EmailLog } from './types';\r\nimport { initialJobs } from './source/jobs';\r\nimport { initialUsers } from './source/users';\r\nimport { initialNotifications } from './source/notifications';\r\nimport { initialCourses, initialProgress } from './source/courses';\r\nimport { initialLessons } from './source/lessons';\r\nimport { initialResources } from './source/resources';\r\nimport { initialInvoices } from './source/invoices';\r\nimport { initialLoginHistory } from './source/loginHistory';\r\nimport { initialComplianceDocs } from './source/compliance';\r\nimport { initialCertificates } from './source/certificates';\r\nimport { initialMessages } from './source/messages';\r\nimport { initialBlogPosts } from './source/blogPosts';\r\nimport { COMPANY_INFO } from './constants';\r\n\r\nexport class DataStore {\r\n    public jobs: Job[] = [...initialJobs];\r\n    public users: User[] = [...initialUsers];\r\n    public notifications: Notification[] = [...initialNotifications];\r\n    public courses: Course[] = [...initialCourses];\r\n    public courseProgress: CourseProgress[] = [...initialProgress];\r\n    public lessons: Lesson[] = [...initialLessons];\r\n    public certificates: Certificate[] = [...initialCertificates];\r\n    public resources: Resource[] = [...initialResources];\r\n    public invoices: Invoice[] = [...initialInvoices];\r\n    public loginHistory: LoginHistoryEntry[] = [...initialLoginHistory];\r\n    public complianceDocs: ComplianceDocument[] = [...initialComplianceDocs];\r\n    public messages: Message[] = [...initialMessages];\r\n    public blogPosts: BlogPost[] = [...initialBlogPosts];\r\n    \r\n    // New: Email Storage\r\n    public emailTemplates: EmailTemplate[] = [\r\n        {\r\n            id: 'JOB_ASSIGNED',\r\n            name: 'Job Assigned',\r\n            subject: 'New Assignment: {{jobTitle}}',\r\n            body: 'Dear {{firstName}},\\n\\nYou have been assigned a new job:\\n\\nTitle: {{jobTitle}}\\nDate: {{date}}\\nLocation: {{location}}\\n\\nPlease log in to the portal to view full details.\\n\\nBest regards,\\nJambo Linguists',\r\n            variables: ['firstName', 'jobTitle', 'date', 'location', 'jobId']\r\n        },\r\n        {\r\n            id: 'JOB_COMPLETED_PENDING',\r\n            name: 'Job Pending Approval',\r\n            subject: 'Job Completed: {{jobTitle}}',\r\n            body: 'Admin,\\n\\n{{firstName}} {{lastName}} has submitted completion details for Job #{{jobId}}.\\n\\nStatus: Pending Approval\\n\\nCheck the admin portal to review.',\r\n            variables: ['firstName', 'lastName', 'jobTitle', 'jobId']\r\n        },\r\n        {\r\n            id: 'JOB_APPROVED',\r\n            name: 'Job Approved',\r\n            subject: 'Work Approved: {{jobTitle}}',\r\n            body: 'Dear {{firstName}},\\n\\nYour submission for \"{{jobTitle}}\" has been approved. An invoice has been generated automatically.\\n\\nRef: {{jobId}}\\n\\nBest,\\nJambo Team',\r\n            variables: ['firstName', 'jobTitle', 'jobId']\r\n        },\r\n        {\r\n            id: 'COURSE_COMPLETED',\r\n            name: 'Course Completed',\r\n            subject: 'Course Completed: {{courseTitle}}',\r\n            body: 'Congratulations {{firstName}}!\\n\\nYou have successfully completed the training module \"{{courseTitle}}\".\\n\\nVisit your dashboard to view your progress.',\r\n            variables: ['firstName', 'courseTitle']\r\n        },\r\n        {\r\n            id: 'CERTIFICATE_ISSUED',\r\n            name: 'Certificate Issued',\r\n            subject: 'Certificate Issued: {{courseTitle}}',\r\n            body: 'Dear {{firstName}},\\n\\nA new certificate for \"{{courseTitle}}\" has been issued to your profile.\\n\\nCertificate ID: {{certId}}\\n\\nYou can download it from the Training section.',\r\n            variables: ['firstName', 'courseTitle', 'certId']\r\n        },\r\n        {\r\n            id: 'INVOICE_PAID',\r\n            name: 'Invoice Paid',\r\n            subject: 'Payment Confirmation: {{invoiceRef}}',\r\n            body: 'Dear {{firstName}},\\n\\nThis email confirms that payment for Invoice #{{invoiceRef}} has been processed.\\n\\nAmount: Â£{{amount}}\\n\\nThank you for your hard work.',\r\n            variables: ['firstName', 'invoiceRef', 'amount']\r\n        },\r\n        {\r\n            id: 'MESSAGE_RECEIVED',\r\n            name: 'New Message',\r\n            subject: 'New Message from {{senderName}}',\r\n            body: 'Hello {{firstName}},\\n\\nYou have received a new message from {{senderName}} regarding {{context}}.\\n\\n\"{{preview}}...\"\\n\\nLog in to reply.',\r\n            variables: ['firstName', 'senderName', 'context', 'preview']\r\n        }\r\n    ];\r\n    public emailLogs: EmailLog[] = [];\r\n\r\n    // System Settings Default State\r\n    public settings: SystemSettings = {\r\n        // General\r\n        registrationsOpen: true,\r\n        requireManualVerification: true,\r\n        maintenanceMode: false,\r\n        \r\n        // Operations\r\n        marketplaceEnabled: true,\r\n        autoAssignment: 'none',\r\n        allowLinguistCancellation: true,\r\n        jobAccessRequiresTraining: false,\r\n\r\n        // LMS\r\n        globalSelfEnrollment: true,\r\n        allowInstructorCourseCreation: false,\r\n        requirePrerequisites: true,\r\n        \r\n        // Finance\r\n        defaultVatRate: 20,\r\n        autoInvoiceGeneration: true,\r\n        minPayoutThreshold: 50,\r\n        paymentReleaseDelay: 14,\r\n        platformFeePercent: 0,\r\n\r\n        // SEO Defaults\r\n        seo: {\r\n            siteTitle: COMPANY_INFO.name,\r\n            siteDescription: \"Leading provider of Swahili interpretation and translation services in the UK.\",\r\n            defaultKeywords: [\"Swahili Interpreter\", \"Translation Services\", \"UK\", \"Medical Interpreting\", \"Legal Translation\"],\r\n            structuredData: JSON.stringify({\r\n                \"@context\": \"https://schema.org\",\r\n                \"@type\": \"Organization\",\r\n                \"name\": COMPANY_INFO.name,\r\n                \"url\": \"https://jambolinguists.com\",\r\n                \"logo\": COMPANY_INFO.logoUrl,\r\n                \"contactPoint\": {\r\n                    \"@type\": \"ContactPoint\",\r\n                    \"telephone\": COMPANY_INFO.phone,\r\n                    \"contactType\": \"customer service\",\r\n                    \"email\": COMPANY_INFO.email\r\n                },\r\n                \"address\": {\r\n                    \"@type\": \"PostalAddress\",\r\n                    \"streetAddress\": \"First Floor, Radley House, Richardshaw Rd\",\r\n                    \"addressLocality\": \"Pudsey\",\r\n                    \"postalCode\": \"LS28 6LE\",\r\n                    \"addressCountry\": \"UK\"\r\n                }\r\n            }, null, 2)\r\n        },\r\n\r\n        // Email Defaults\r\n        email: {\r\n            enabled: true,\r\n            smtpHost: 'smtp.example.com',\r\n            smtpPort: 587,\r\n            smtpUser: 'notifications@jambolinguists.com',\r\n            smtpPass: '',\r\n            security: 'STARTTLS',\r\n            fromName: 'Jambo Linguists',\r\n            fromEmail: 'noreply@jambolinguists.com'\r\n        }\r\n    };\r\n    \r\n    public currentUserId: string | null = null;\r\n\r\n    public generateId(prefix: string): string {\r\n        return `${prefix}-${Date.now()}`;\r\n    }\r\n}\r\n\r\nexport const db = new DataStore();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3059, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/AuthService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { User } from '../types';\r\n\r\nexport class AuthService {\r\n    \r\n    // Check if session exists in storage\r\n    init() {\r\n        const storedId = localStorage.getItem('jambo_auth_user');\r\n        if (storedId) {\r\n            const user = db.users.find(u => u.id === storedId && !u.deletedAt && !u.isSuspended);\r\n            if (user) {\r\n                db.currentUserId = user.id;\r\n            } else {\r\n                // Invalid or deleted user in storage\r\n                localStorage.removeItem('jambo_auth_user');\r\n                db.currentUserId = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    login(email: string, password?: string): { success: boolean; user?: User; error?: string } {\r\n        const user = db.users.find(u => u.email.toLowerCase() === email.toLowerCase() && !u.deletedAt);\r\n        \r\n        if (!user) {\r\n            return { success: false, error: 'Account not found.' };\r\n        }\r\n\r\n        // Check Password (Simulated security - In production use proper hashing like bcrypt)\r\n        if (user.password && user.password !== password) {\r\n            return { success: false, error: 'Invalid credentials.' };\r\n        }\r\n\r\n        if (user.isSuspended) {\r\n            return { success: false, error: 'Account has been suspended. Contact support.' };\r\n        }\r\n\r\n        // Set Session\r\n        db.currentUserId = user.id;\r\n        localStorage.setItem('jambo_auth_user', user.id);\r\n        \r\n        // Log basic login activity\r\n        db.loginHistory.unshift({\r\n            id: db.generateId('lh'),\r\n            userId: user.id,\r\n            timestamp: new Date().toISOString(),\r\n            ipAddress: '127.0.0.1',\r\n            source: 'direct'\r\n        });\r\n\r\n        return { success: true, user };\r\n    }\r\n\r\n    register(data: { firstName: string; lastName: string; email: string; phone?: string; password?: string }): { success: boolean; user?: User; error?: string } {\r\n        // Validate inputs\r\n        if (!data.email || !data.password || !data.firstName || !data.lastName) {\r\n            return { success: false, error: 'All fields are required.' };\r\n        }\r\n\r\n        // Check if exists\r\n        if (db.users.some(u => u.email.toLowerCase() === data.email.toLowerCase())) {\r\n            return { success: false, error: 'Email already registered.' };\r\n        }\r\n\r\n        const now = new Date().toISOString();\r\n        const newUser: User = {\r\n            id: db.generateId('u'),\r\n            email: data.email,\r\n            password: data.password, \r\n            firstName: data.firstName,\r\n            lastName: data.lastName,\r\n            phone: data.phone,\r\n            location: 'United Kingdom', // Default\r\n            role: 'linguist',\r\n            isVerified: false, // New users need verification\r\n            qualifications: [],\r\n            languages: [], // To be filled in profile\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n\r\n        db.users.push(newUser);\r\n        \r\n        // Auto-login after register\r\n        db.currentUserId = newUser.id;\r\n        localStorage.setItem('jambo_auth_user', newUser.id);\r\n        \r\n        // Add a welcome notification\r\n        db.notifications.push({\r\n            id: db.generateId('n'),\r\n            userId: newUser.id,\r\n            title: \"Welcome to Jambo Portal\",\r\n            message: \"Please complete your profile to start receiving job offers.\",\r\n            time: \"Just now\",\r\n            isRead: false,\r\n            iconType: 'check',\r\n            bg: 'bg-green-50',\r\n            color: 'text-green-600',\r\n            linkTo: 'profile',\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        });\r\n\r\n        return { success: true, user: newUser };\r\n    }\r\n\r\n    logout() {\r\n        db.currentUserId = null;\r\n        localStorage.removeItem('jambo_auth_user');\r\n    }\r\n\r\n    getCurrentUser(): User | null {\r\n        if (!db.currentUserId) return null;\r\n        return db.users.find(u => u.id === db.currentUserId) || null;\r\n    }\r\n\r\n    updateProfile(data: Partial<User>) {\r\n        if (!db.currentUserId) return;\r\n        const idx = db.users.findIndex(u => u.id === db.currentUserId);\r\n        if (idx !== -1) {\r\n            db.users[idx] = { \r\n                ...db.users[idx], \r\n                ...data,\r\n                updatedAt: new Date().toISOString()\r\n            };\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/job-helpers.ts"],"sourcesContent":["import { Job } from '@/data/mockDatabase';\r\n\r\n/**\r\n * Calculates the total estimated payout for an interpreting job based on its detailed rates.\r\n * @param job The job object.\r\n * @returns The total payout as a number, or null if it's not a calculable interpreting job.\r\n */\r\nexport const getInterpretingJobPayout = (job: Job): number | null => {\r\n    const details = getInterpretingJobPayoutDetails(job);\r\n    return details ? details.total : null;\r\n};\r\n\r\n\r\n/**\r\n * Returns a detailed breakdown of an interpreting job's payout.\r\n * @param job The job object.\r\n * @returns An object with detailed pay components, or null.\r\n */\r\nexport const getInterpretingJobPayoutDetails = (job: Job) => {\r\n    if (job.category !== 'Interpreting' || typeof job.hourlyRate !== 'number') {\r\n        return null;\r\n    }\r\n\r\n    let hours = 0;\r\n    if (job.duration) {\r\n        const hoursMatch = job.duration.match(/(\\d+(?:\\.\\d+)?)\\s*h/);\r\n        const minutesMatch = job.duration.match(/(\\d+)\\s*m/);\r\n        if (hoursMatch) hours += parseFloat(hoursMatch[1]);\r\n        if (minutesMatch) hours += parseInt(minutesMatch[1]) / 60;\r\n    }\r\n\r\n    const sessionPay = hours * job.hourlyRate;\r\n    const mileagePay = (job.distance || 0) * (job.mileageRate || 0);\r\n    const travelPay = (job.travelHours || 0) * (job.travelRate || 0);\r\n    \r\n    // Remote jobs should not have mileage or travel pay\r\n    const isRemote = job.type === 'Video' || job.type === 'Telephone';\r\n    const total = isRemote ? sessionPay : sessionPay + mileagePay + travelPay;\r\n\r\n    return {\r\n        hours,\r\n        sessionPay,\r\n        mileagePay: isRemote ? 0 : mileagePay,\r\n        travelPay: isRemote ? 0 : travelPay,\r\n        total,\r\n    };\r\n};\r\n\r\n/**\r\n * Calculates the definitive payout for any job type from its base attributes.\r\n * This function does not rely on a pre-calculated `totalPayout` field, making it reliable for on-the-fly calculations.\r\n * @param job The job object.\r\n * @returns The calculated total payout as a number.\r\n */\r\nexport const calculateJobPayout = (job: Job): number => {\r\n    switch (job.category) {\r\n        case 'Interpreting': {\r\n            const payoutDetails = getInterpretingJobPayoutDetails(job);\r\n            const total = payoutDetails ? payoutDetails.total : 0;\r\n            return parseFloat(total.toFixed(2));\r\n        }\r\n\r\n        case 'Translation': {\r\n            if (typeof job.fixedRate === 'number' && job.fixedRate > 0) {\r\n                return parseFloat(job.fixedRate.toFixed(2));\r\n            }\r\n            const wordCount = job.wordCount || 0;\r\n            const wordRate = job.wordRate || 0;\r\n            const total = wordCount * wordRate;\r\n            return parseFloat(total.toFixed(2));\r\n        }\r\n\r\n        case 'Transcription': {\r\n            // The duration string can be \"45 mins audio\", \"45m\", or just \"45\" from an input\r\n            const durationMatch = job.duration?.match(/(\\d+)/);\r\n            const minutes = durationMatch ? parseInt(durationMatch[1], 10) : 0;\r\n            const minuteRate = job.minuteRate || 0;\r\n            const total = minutes * minuteRate;\r\n            return parseFloat(total.toFixed(2));\r\n        }\r\n\r\n        default: {\r\n            // Fallback for simple fixed rates from the summary string\r\n            if (job.rate) {\r\n                const rateNum = parseFloat(job.rate.replace(/[^0-9.]/g, ''));\r\n                if (!isNaN(rateNum)) {\r\n                    return rateNum;\r\n                }\r\n            }\r\n            return 0;\r\n        }\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAOO,MAAM,2BAA2B,CAAC;IACrC,MAAM,UAAU,gCAAgC;IAChD,OAAO,UAAU,QAAQ,KAAK,GAAG;AACrC;AAQO,MAAM,kCAAkC,CAAC;IAC5C,IAAI,IAAI,QAAQ,KAAK,kBAAkB,OAAO,IAAI,UAAU,KAAK,UAAU;QACvE,OAAO;IACX;IAEA,IAAI,QAAQ;IACZ,IAAI,IAAI,QAAQ,EAAE;QACd,MAAM,aAAa,IAAI,QAAQ,CAAC,KAAK,CAAC;QACtC,MAAM,eAAe,IAAI,QAAQ,CAAC,KAAK,CAAC;QACxC,IAAI,YAAY,SAAS,WAAW,UAAU,CAAC,EAAE;QACjD,IAAI,cAAc,SAAS,SAAS,YAAY,CAAC,EAAE,IAAI;IAC3D;IAEA,MAAM,aAAa,QAAQ,IAAI,UAAU;IACzC,MAAM,aAAa,CAAC,IAAI,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,WAAW,IAAI,CAAC;IAC9D,MAAM,YAAY,CAAC,IAAI,WAAW,IAAI,CAAC,IAAI,CAAC,IAAI,UAAU,IAAI,CAAC;IAE/D,oDAAoD;IACpD,MAAM,WAAW,IAAI,IAAI,KAAK,WAAW,IAAI,IAAI,KAAK;IACtD,MAAM,QAAQ,WAAW,aAAa,aAAa,aAAa;IAEhE,OAAO;QACH;QACA;QACA,YAAY,WAAW,IAAI;QAC3B,WAAW,WAAW,IAAI;QAC1B;IACJ;AACJ;AAQO,MAAM,qBAAqB,CAAC;IAC/B,OAAQ,IAAI,QAAQ;QAChB,KAAK;YAAgB;gBACjB,MAAM,gBAAgB,gCAAgC;gBACtD,MAAM,QAAQ,gBAAgB,cAAc,KAAK,GAAG;gBACpD,OAAO,WAAW,MAAM,OAAO,CAAC;YACpC;QAEA,KAAK;YAAe;gBAChB,IAAI,OAAO,IAAI,SAAS,KAAK,YAAY,IAAI,SAAS,GAAG,GAAG;oBACxD,OAAO,WAAW,IAAI,SAAS,CAAC,OAAO,CAAC;gBAC5C;gBACA,MAAM,YAAY,IAAI,SAAS,IAAI;gBACnC,MAAM,WAAW,IAAI,QAAQ,IAAI;gBACjC,MAAM,QAAQ,YAAY;gBAC1B,OAAO,WAAW,MAAM,OAAO,CAAC;YACpC;QAEA,KAAK;YAAiB;gBAClB,gFAAgF;gBAChF,MAAM,gBAAgB,IAAI,QAAQ,EAAE,MAAM;gBAC1C,MAAM,UAAU,gBAAgB,SAAS,aAAa,CAAC,EAAE,EAAE,MAAM;gBACjE,MAAM,aAAa,IAAI,UAAU,IAAI;gBACrC,MAAM,QAAQ,UAAU;gBACxB,OAAO,WAAW,MAAM,OAAO,CAAC;YACpC;QAEA;YAAS;gBACL,0DAA0D;gBAC1D,IAAI,IAAI,IAAI,EAAE;oBACV,MAAM,UAAU,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY;oBACxD,IAAI,CAAC,MAAM,UAAU;wBACjB,OAAO;oBACX;gBACJ;gBACA,OAAO;YACX;IACJ;AACJ"}},
    {"offset": {"line": 3285, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/JobService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { Job, JobStatus, RevisionRecord, JobHistoryEvent } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\nimport { calculateJobPayout } from '../../components/portal/dashboard/jobs/job-helpers';\r\n\r\nexport class JobService {\r\n    private notifications: NotificationService;\r\n\r\n    constructor(notificationService: NotificationService) {\r\n        this.notifications = notificationService;\r\n    }\r\n    \r\n    getAvailableJobs(): Job[] {\r\n        return db.jobs.filter(j => j.status === 'Open' && !j.deletedAt);\r\n    }\r\n    \r\n    getBookedJobs(): Job[] {\r\n        if (!db.currentUserId) return [];\r\n        return db.jobs.filter(j => \r\n            j.linguistId === db.currentUserId && \r\n            ['Scheduled', 'In Progress', 'Revision'].includes(j.status) &&\r\n            !j.deletedAt\r\n        );\r\n    }\r\n    \r\n    getJobHistory(): Job[] {\r\n        if (!db.currentUserId) return [];\r\n        return db.jobs.filter(j => \r\n            j.linguistId === db.currentUserId && \r\n            ['Completed', 'Cancelled', 'Pending Approval'].includes(j.status) &&\r\n            !j.deletedAt\r\n        );\r\n    }\r\n\r\n    getNextAssignment(): Job | null {\r\n        if (!db.currentUserId) return null;\r\n        const booked = db.jobs\r\n            .filter(j => \r\n                j.linguistId === db.currentUserId && \r\n                ['Scheduled', 'In Progress'].includes(j.status) &&\r\n                !j.deletedAt\r\n            )\r\n            .sort((a, b) => new Date(a.date + ' ' + (a.time || '00:00')).getTime() - new Date(b.date + ' ' + (b.time || '00:00')).getTime());\r\n        \r\n        return booked.length > 0 ? booked[0] : null;\r\n    }\r\n\r\n    // New method to handle self-unassignment\r\n    unassignJob(jobId: string, userId: string): boolean {\r\n        const index = db.jobs.findIndex(j => j.id === jobId);\r\n        if (index !== -1) {\r\n            const job = db.jobs[index];\r\n            \r\n            // Security check: Must be the assigned linguist\r\n            if (job.linguistId !== userId) return false;\r\n            \r\n            // Only allow unassigning if not completed or cancelled\r\n            // Stricter check: Only 'Scheduled' usually implies before work starts\r\n            if (['Completed', 'Cancelled'].includes(job.status)) return false;\r\n\r\n            const currentUser = db.users.find(u => u.id === userId);\r\n            const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Linguist';\r\n            const now = new Date().toISOString();\r\n\r\n            // Add history event\r\n            const newHistory = [...(job.history || []), {\r\n                id: db.generateId('h'),\r\n                type: 'ASSIGNED' as any, // Reusing ASSIGNED type\r\n                date: now,\r\n                actorName: actorName,\r\n                description: 'Linguist unassigned themselves. Job returned to marketplace.'\r\n            }];\r\n\r\n            // Reset job\r\n            db.jobs[index] = {\r\n                ...job,\r\n                linguistId: null, // null implies Unassigned/Open\r\n                status: 'Open',\r\n                history: newHistory,\r\n                updatedAt: now\r\n            };\r\n            \r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    updateJobStatus(id: string, status: JobStatus, extraData?: Partial<Job> & { notes?: string, file?: string }) {\r\n        const index = db.jobs.findIndex(j => j.id === id);\r\n        if (index !== -1 && !db.jobs[index].deletedAt) {\r\n            const job = db.jobs[index];\r\n            const oldStatus = job.status;\r\n            const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n            const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'System Admin';\r\n            \r\n            // --- SECURITY CHECK ---\r\n            // If user is a linguist, prevent them from Cancelling a job directly or changing details they shouldn't.\r\n            // They should use \"Unassign\" instead of \"Cancel\".\r\n            if (currentUser?.role === 'linguist' && status === 'Cancelled') {\r\n                console.warn(\"Linguists cannot cancel jobs directly. Use unassign.\");\r\n                return; \r\n            }\r\n\r\n            // --- HISTORY EVENT GENERATION ---\r\n            const newHistory: JobHistoryEvent[] = [...(job.history || [])];\r\n            const now = new Date().toISOString();\r\n\r\n            // 1. Cancellation (High Priority Check)\r\n            if (status === 'Cancelled') {\r\n                newHistory.push({\r\n                    id: db.generateId('h'),\r\n                    type: 'CANCELLED',\r\n                    date: now,\r\n                    actorName: actorName,\r\n                    description: 'Job was cancelled.'\r\n                });\r\n            }\r\n            // 2. User Completes / Re-submits Work\r\n            else if (status === 'Pending Approval') {\r\n                const isResubmission = oldStatus === 'Revision';\r\n                newHistory.push({\r\n                    id: db.generateId('h'),\r\n                    type: isResubmission ? 'RESUBMITTED' : 'SUBMITTED',\r\n                    date: now,\r\n                    actorName: actorName,\r\n                    description: extraData?.notes || (isResubmission ? 'Revised work submitted.' : 'Work submitted for review.'),\r\n                    attachment: extraData?.file\r\n                });\r\n            } \r\n            // 3. Admin Requests Revision\r\n            else if (status === 'Revision') {\r\n                newHistory.push({\r\n                    id: db.generateId('h'),\r\n                    type: 'REVISION_REQUESTED',\r\n                    date: now,\r\n                    actorName: actorName,\r\n                    description: extraData?.revisionFeedback,\r\n                    attachment: extraData?.revisionFile\r\n                });\r\n            } \r\n            // 4. Admin Approves (Enters Payment Process)\r\n            else if (status === 'Completed' && oldStatus !== 'Completed') {\r\n                newHistory.push({\r\n                    id: db.generateId('h'),\r\n                    type: 'APPROVED',\r\n                    date: now,\r\n                    actorName: actorName,\r\n                    description: 'Work approved. Payment queued.'\r\n                });\r\n            } \r\n            // 5. Job Assignment / Marketplace Claim\r\n            else if (status === 'Scheduled' && oldStatus === 'Open') {\r\n                newHistory.push({\r\n                    id: db.generateId('h'),\r\n                    type: 'ASSIGNED',\r\n                    date: now,\r\n                    actorName: actorName,\r\n                    description: currentUser?.role === 'linguist' ? 'Job claimed from marketplace.' : 'Job assigned by admin.'\r\n                });\r\n            } \r\n\r\n            // Handle legacy Revision History for compatibility\r\n            let revisionHistory = job.revisionHistory || [];\r\n            if (status === 'Revision' && extraData?.revisionFeedback) {\r\n                const newRecord: RevisionRecord = {\r\n                    date: now,\r\n                    feedback: extraData.revisionFeedback,\r\n                    file: extraData.revisionFile\r\n                };\r\n                revisionHistory = [newRecord, ...revisionHistory];\r\n            }\r\n\r\n            const updates: Partial<Job> = { \r\n                status,\r\n                updatedAt: now,\r\n                // Handle linguist submission data\r\n                ...(extraData?.notes && { completionNotes: extraData.notes }),\r\n                ...(extraData?.file && { completionFile: extraData.file }),\r\n                \r\n                // Handle Admin Revision/Approval fields passed in extraData\r\n                ...extraData,\r\n                revisionHistory,\r\n                history: newHistory,\r\n\r\n                // Set completion timestamp if moving to Pending Approval or Completed\r\n                ...(status === 'Pending Approval' || status === 'Completed' ? { completedAt: now } : {})\r\n            };\r\n\r\n            // Assign to current user if accepting Open job\r\n            if (status === 'Scheduled' && job.status === 'Open' && currentUser && currentUser.role === 'linguist') {\r\n                updates.linguistId = currentUser.id;\r\n            }\r\n\r\n            // Apply updates\r\n            const updatedJob = { ...job, ...updates };\r\n            \r\n            // Auto-calculate total payout if approving/completing and not set\r\n            if (status === 'Completed' && !updatedJob.totalPayout) {\r\n                updatedJob.totalPayout = calculateJobPayout(updatedJob);\r\n            }\r\n\r\n            db.jobs[index] = updatedJob;\r\n            \r\n            // --- Notification Triggers ---\r\n            if (updatedJob.linguistId) {\r\n                // Notify Linguist: Job Approved (Payment Pending)\r\n                if (oldStatus === 'Pending Approval' && status === 'Completed') {\r\n                    this.notifications.notifyJobApproved(updatedJob.linguistId, updatedJob.title, updatedJob.id);\r\n                }\r\n                // Notify Linguist: Revision Requested\r\n                if (status === 'Revision') {\r\n                    this.notifications.notifyJobRevision(updatedJob.linguistId, updatedJob.title, updates.revisionFeedback || \"Action required.\");\r\n                }\r\n                // Notify Linguist: Job Assigned (Self Claim)\r\n                if (status === 'Scheduled' && oldStatus === 'Open' && currentUser?.role === 'linguist') {\r\n                    this.notifications.notifyJobAssigned(updatedJob.linguistId, updatedJob);\r\n                }\r\n            }\r\n\r\n            // Notify Admins: Job Pending Approval\r\n            if (status === 'Pending Approval') {\r\n                // Fixed: Now calling dedicated method which sends emails\r\n                if (updatedJob.linguistId) {\r\n                    this.notifications.notifyJobCompletedPending({\r\n                        id: updatedJob.id,\r\n                        title: updatedJob.title,\r\n                        linguistId: updatedJob.linguistId\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3510, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/AdminService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { Job, User, Invoice, LoginHistoryEntry, JobHistoryEvent, ComplianceDocument, SystemSettings, Resource, EmailTemplate, EmailSettings } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\nimport { calculateJobPayout } from '../../components/portal/dashboard/jobs/job-helpers';\r\n\r\nexport class AdminService {\r\n    private notifications: NotificationService;\r\n\r\n    constructor(notificationService: NotificationService) {\r\n        this.notifications = notificationService;\r\n    }\r\n    \r\n    getAllJobs(): Job[] {\r\n        // Filter out soft-deleted jobs unless explicitly requested (for now, hiding them)\r\n        return [...db.jobs].filter(j => !j.deletedAt).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    }\r\n\r\n    getAllUsers(): User[] {\r\n        return [...db.users].filter(u => !u.deletedAt).sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\r\n    }\r\n\r\n    getAllInvoices(): Invoice[] {\r\n        return [...db.invoices].filter(i => !i.deletedAt);\r\n    }\r\n\r\n    getJobsByUser(userId: string): Job[] {\r\n        return db.jobs.filter(j => j.linguistId === userId && !j.deletedAt).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    }\r\n\r\n    getInvoicesByUser(userId: string): Invoice[] {\r\n        return db.invoices.filter(i => i.userId === userId && !i.deletedAt).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    }\r\n\r\n    // --- SYSTEM SETTINGS ---\r\n    getSettings(): SystemSettings {\r\n        return { ...db.settings };\r\n    }\r\n\r\n    updateSettings(newSettings: Partial<SystemSettings>): SystemSettings {\r\n        db.settings = { ...db.settings, ...newSettings };\r\n        return db.settings;\r\n    }\r\n\r\n    // --- COMPLIANCE ---\r\n    getComplianceDocs(): ComplianceDocument[] {\r\n        return [...db.complianceDocs].filter(d => !d.deletedAt);\r\n    }\r\n\r\n    updateComplianceDoc(id: string, content: string, title?: string) {\r\n        const idx = db.complianceDocs.findIndex(d => d.id === id);\r\n        if (idx !== -1) {\r\n            db.complianceDocs[idx] = {\r\n                ...db.complianceDocs[idx],\r\n                content,\r\n                title: title || db.complianceDocs[idx].title,\r\n                lastUpdated: new Date().toISOString(),\r\n                updatedAt: new Date().toISOString()\r\n            };\r\n        }\r\n    }\r\n\r\n    // --- RESOURCES ---\r\n    createResource(resource: Partial<Resource>): Resource {\r\n        const newResource: Resource = {\r\n            id: db.generateId('res'),\r\n            title: resource.title || 'New Resource',\r\n            description: resource.description || '',\r\n            category: resource.category || 'General',\r\n            type: resource.type || 'link',\r\n            url: resource.url || '#',\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString(),\r\n            deletedAt: null\r\n        };\r\n        db.resources.unshift(newResource);\r\n        return newResource;\r\n    }\r\n\r\n    updateResource(id: string, updates: Partial<Resource>) {\r\n        const idx = db.resources.findIndex(r => r.id === id);\r\n        if(idx !== -1) {\r\n            db.resources[idx] = { ...db.resources[idx], ...updates, updatedAt: new Date().toISOString() };\r\n        }\r\n    }\r\n\r\n    deleteResource(id: string) {\r\n        const idx = db.resources.findIndex(r => r.id === id);\r\n        if (idx !== -1) {\r\n            db.resources[idx].deletedAt = new Date().toISOString();\r\n        }\r\n    }\r\n\r\n    // --- EMAIL ---\r\n    updateEmailTemplate(id: string, updates: Partial<EmailTemplate>) {\r\n        const idx = db.emailTemplates.findIndex(t => t.id === id);\r\n        if (idx !== -1) {\r\n            db.emailTemplates[idx] = { ...db.emailTemplates[idx], ...updates };\r\n        }\r\n    }\r\n\r\n    getEmailLogs() {\r\n        return [...db.emailLogs].sort((a, b) => new Date(b.sentAt).getTime() - new Date(a.sentAt).getTime());\r\n    }\r\n\r\n    // --- JOBS & FINANCE ---\r\n\r\n    approveJobSubmission(jobId: string): Invoice {\r\n        const jobIndex = db.jobs.findIndex(j => j.id === jobId);\r\n        if (jobIndex === -1) throw new Error('Job not found');\r\n        const job = db.jobs[jobIndex];\r\n    \r\n        const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n    \r\n        const now = new Date().toISOString();\r\n        const newInvoice: Invoice = {\r\n            id: `inv-${Date.now()}`,\r\n            userId: job.linguistId || 'unknown',\r\n            reference: `INV-${job.id}`,\r\n            date: now,\r\n            dueDate: new Date(Date.now() + 14 * 86400000).toISOString(),\r\n            amount: job.totalPayout || calculateJobPayout(job) || 0,\r\n            status: 'Pending',\r\n            items: [ { description: `${job.category}: ${job.title}`, amount: job.totalPayout || calculateJobPayout(job) || 0, jobId: job.id } ],\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n        db.invoices.unshift(newInvoice);\r\n        if (newInvoice.userId && newInvoice.userId !== 'custom') {\r\n            this.notifications.notifyInvoiceCreated(newInvoice.userId, newInvoice.reference);\r\n        }\r\n        \r\n        const newHistory = [...(job.history || [])];\r\n        const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'System Admin';\r\n        newHistory.push({ id: db.generateId('h'), type: 'APPROVED', date: now, actorName, description: 'Work approved by admin.' });\r\n        newHistory.push({ id: db.generateId('h'), type: 'INVOICE_PENDING', date: now, actorName, description: `Invoice #${newInvoice.reference} generated.` });\r\n    \r\n        db.jobs[jobIndex] = {\r\n            ...job,\r\n            status: 'Completed',\r\n            history: newHistory,\r\n            completedAt: now,\r\n            updatedAt: now\r\n        };\r\n        \r\n        // Notify Linguist\r\n        if (job.linguistId) {\r\n            this.notifications.notifyJobApproved(job.linguistId, job.title, job.id);\r\n        }\r\n\r\n        return newInvoice;\r\n    }\r\n\r\n    adminForceCompleteJob(jobId: string, notes: string): Job {\r\n        const jobIndex = db.jobs.findIndex(j => j.id === jobId);\r\n        if (jobIndex === -1) throw new Error('Job not found');\r\n        const job = db.jobs[jobIndex];\r\n\r\n        const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n        const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'System Admin';\r\n        const now = new Date().toISOString();\r\n\r\n        const newHistory = [...(job.history || [])];\r\n        \r\n        // Log the takeover\r\n        newHistory.push({ \r\n            id: db.generateId('h'), \r\n            type: 'APPROVED', \r\n            date: now, \r\n            actorName, \r\n            description: `Admin Override: Job completed internally. Reassigned from ${job.linguistId} to Admin (${currentUser?.id}).` \r\n        });\r\n\r\n        const updatedJob: Job = {\r\n            ...job,\r\n            status: 'Completed',\r\n            linguistId: currentUser?.id || 'u-admin-001', // Reassign to admin\r\n            completionNotes: notes,\r\n            completedAt: now,\r\n            updatedAt: now,\r\n            history: newHistory,\r\n            // Calculate payout but it won't be invoiced to the original linguist\r\n            totalPayout: job.totalPayout || calculateJobPayout(job)\r\n        };\r\n\r\n        db.jobs[jobIndex] = updatedJob;\r\n        return updatedJob;\r\n    }\r\n\r\n    createUser(userData: Partial<User>): User {\r\n        const now = new Date().toISOString();\r\n        const newUser: User = {\r\n            id: db.generateId('u'),\r\n            email: userData.email || '',\r\n            firstName: userData.firstName || '',\r\n            lastName: userData.lastName || '',\r\n            role: userData.role || 'linguist',\r\n            isVerified: true, \r\n            isSuspended: false,\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null,\r\n            location: userData.location || '',\r\n            headline: userData.headline || 'New Member',\r\n            languages: userData.languages || [],\r\n            qualifications: [],\r\n            ...userData\r\n        };\r\n        db.users.unshift(newUser);\r\n        return newUser;\r\n    }\r\n\r\n    updateUser(userId: string, data: Partial<User>): User | null {\r\n        const idx = db.users.findIndex(u => u.id === userId);\r\n        if (idx !== -1) {\r\n            db.users[idx] = { ...db.users[idx], ...data, updatedAt: new Date().toISOString() };\r\n            return db.users[idx];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    updateUserVerification(userId: string, isVerified: boolean) {\r\n        const idx = db.users.findIndex(u => u.id === userId);\r\n        if (idx !== -1) {\r\n            db.users[idx].isVerified = isVerified;\r\n            if (isVerified) db.users[idx].isSuspended = false;\r\n            db.users[idx].updatedAt = new Date().toISOString();\r\n        }\r\n    }\r\n\r\n    suspendUser(userId: string, isSuspended: boolean) {\r\n        const idx = db.users.findIndex(u => u.id === userId);\r\n        if (idx !== -1) {\r\n            db.users[idx].isSuspended = isSuspended;\r\n            db.users[idx].updatedAt = new Date().toISOString();\r\n        }\r\n    }\r\n\r\n    createJob(jobData: Partial<Job>): Job {\r\n        const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n        const creatorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'System Admin';\r\n        const now = new Date().toISOString();\r\n\r\n        const initialHistory: JobHistoryEvent[] = [\r\n            {\r\n                id: db.generateId('h'),\r\n                type: 'CREATED',\r\n                date: now,\r\n                actorName: creatorName,\r\n                description: 'Job created via Admin Portal'\r\n            }\r\n        ];\r\n\r\n        if (jobData.linguistId) {\r\n            const linguist = db.users.find(u => u.id === jobData.linguistId);\r\n            const name = linguist ? `${linguist.firstName} ${linguist.lastName}` : 'Linguist';\r\n            initialHistory.push({\r\n                id: db.generateId('h'),\r\n                type: 'ASSIGNED',\r\n                date: now,\r\n                actorName: creatorName,\r\n                description: `Directly assigned to ${name}`\r\n            });\r\n        }\r\n\r\n        const newJob: Job = {\r\n            id: `JL-${Date.now()}`,\r\n            category: 'Interpreting',\r\n            type: 'Video',\r\n            status: 'Open',\r\n            title: 'New Job',\r\n            description: '',\r\n            date: new Date().toISOString().split('T')[0],\r\n            location: 'Remote',\r\n            languagePair: '',\r\n            rate: '',\r\n            isUrgent: false,\r\n            attachments: [],\r\n            history: initialHistory,\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null,\r\n            ...jobData\r\n        };\r\n\r\n        if (newJob.linguistId) {\r\n            newJob.status = 'Scheduled';\r\n            // Notify Assigned\r\n            this.notifications.notifyJobAssigned(newJob.linguistId, newJob);\r\n        }\r\n\r\n        db.jobs.unshift(newJob);\r\n        return newJob;\r\n    }\r\n\r\n    updateJobDetails(\r\n        jobId: string, \r\n        updates: Partial<Job>, \r\n        newFiles: {name: string, type: 'file' | 'link', url: string}[],\r\n        keptAttachments?: {name: string, type: 'file' | 'link', url: string}[]\r\n    ) {\r\n        const index = db.jobs.findIndex(j => j.id === jobId);\r\n        if (index !== -1) {\r\n            const oldJob = db.jobs[index];\r\n            const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n            const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Admin';\r\n            const now = new Date().toISOString();\r\n            \r\n            const changes: string[] = [];\r\n            \r\n            // Compare significant fields\r\n            if (updates.title && updates.title !== oldJob.title) changes.push('Title');\r\n            if (updates.date && updates.date !== oldJob.date) changes.push(`Date (${oldJob.date} -> ${updates.date})`);\r\n            if (updates.time && updates.time !== oldJob.time) changes.push('Time');\r\n            if (updates.location && updates.location !== oldJob.location) changes.push('Location');\r\n            if (updates.rate && updates.rate !== oldJob.rate) changes.push('Financials');\r\n            if (updates.description && updates.description !== oldJob.description) changes.push('Description');\r\n\r\n            // Handle Attachments\r\n            let finalAttachments = oldJob.attachments || [];\r\n            \r\n            if (keptAttachments !== undefined) {\r\n                const removedCount = (oldJob.attachments?.length || 0) - keptAttachments.length;\r\n                if (removedCount > 0) {\r\n                    changes.push(`${removedCount} file(s) removed`);\r\n                }\r\n                finalAttachments = [...keptAttachments];\r\n            }\r\n\r\n            if (newFiles.length > 0) {\r\n                changes.push(`${newFiles.length} file(s) added`);\r\n                finalAttachments = [...finalAttachments, ...newFiles];\r\n            }\r\n\r\n            const newHistory = [...oldJob.history];\r\n            \r\n            if (changes.length > 0) {\r\n                newHistory.push({\r\n                    id: db.generateId('h'),\r\n                    type: 'CREATED', // Using CREATED as generic 'System/Admin Update' type\r\n                    date: now,\r\n                    actorName: actorName,\r\n                    description: `Job Updated: ${changes.join(', ')}`\r\n                });\r\n            }\r\n\r\n            db.jobs[index] = {\r\n                ...oldJob,\r\n                ...updates,\r\n                attachments: finalAttachments,\r\n                history: newHistory,\r\n                updatedAt: now\r\n            };\r\n            \r\n            return db.jobs[index];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    assignJob(jobId: string, linguistId: string | null) {\r\n        const index = db.jobs.findIndex(j => j.id === jobId);\r\n        if (index !== -1) {\r\n            const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n            const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Admin';\r\n            const oldLinguistId = db.jobs[index].linguistId;\r\n            const now = new Date().toISOString();\r\n\r\n            // Only add history if changing assignment\r\n            if (oldLinguistId !== linguistId) {\r\n                const newHistory = [...(db.jobs[index].history || [])];\r\n                \r\n                if (linguistId) {\r\n                    const linguist = db.users.find(u => u.id === linguistId);\r\n                    const name = linguist ? `${linguist.firstName} ${linguist.lastName}` : 'Linguist';\r\n                    newHistory.push({\r\n                        id: db.generateId('h'),\r\n                        type: 'ASSIGNED',\r\n                        date: now,\r\n                        actorName: actorName,\r\n                        description: `Assigned to ${name}`\r\n                    });\r\n                } else {\r\n                    newHistory.push({\r\n                        id: db.generateId('h'),\r\n                        type: 'ASSIGNED',\r\n                        date: now,\r\n                        actorName: actorName,\r\n                        description: `Unassigned (Moved to Open Marketplace)`\r\n                    });\r\n                }\r\n\r\n                db.jobs[index] = { \r\n                    ...db.jobs[index], \r\n                    linguistId, \r\n                    status: linguistId ? 'Scheduled' : 'Open', // Auto update status\r\n                    history: newHistory,\r\n                    updatedAt: now\r\n                };\r\n\r\n                // Notify Assigned\r\n                if (linguistId) {\r\n                    this.notifications.notifyJobAssigned(linguistId, db.jobs[index]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getLoginHistoryForUser(userId: string): LoginHistoryEntry[] {\r\n        return db.loginHistory\r\n            .filter(entry => entry.userId === userId)\r\n            .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n    }\r\n\r\n    logImpersonation(adminId: string, targetUserId: string) {\r\n        const newEntry: LoginHistoryEntry = {\r\n            id: db.generateId('lh'),\r\n            userId: targetUserId,\r\n            timestamp: new Date().toISOString(),\r\n            ipAddress: '127.0.0.1', \r\n            source: 'impersonation',\r\n            impersonatorId: adminId\r\n        };\r\n        db.loginHistory.unshift(newEntry);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3939, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/TrainingService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { EnrichedCourse, Lesson, CourseProgress } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\n\r\nexport class TrainingService {\r\n    private notifications: NotificationService;\r\n\r\n    constructor(notificationService: NotificationService) {\r\n        this.notifications = notificationService;\r\n    }\r\n    \r\n    getCourses(): EnrichedCourse[] {\r\n        return db.courses\r\n            .filter(c => !c.deletedAt)\r\n            .map(course => {\r\n                const progress = db.currentUserId \r\n                    ? db.courseProgress.find(p => p.userId === db.currentUserId && p.courseId === course.id)\r\n                    : undefined;\r\n                return { ...course, progress };\r\n            });\r\n    }\r\n\r\n    getCourse(courseId: string): EnrichedCourse | undefined {\r\n        const course = db.courses.find(c => c.id === courseId && !c.deletedAt);\r\n        if (!course) return undefined;\r\n        \r\n        const progress = db.currentUserId\r\n            ? db.courseProgress.find(p => p.userId === db.currentUserId && p.courseId === courseId)\r\n            : undefined;\r\n        \r\n        return { ...course, progress };\r\n    }\r\n\r\n    getLessons(courseId: string): Lesson[] {\r\n        return db.lessons\r\n            .filter(l => l.courseId === courseId && !l.deletedAt)\r\n            .sort((a, b) => a.orderIndex - b.orderIndex);\r\n    }\r\n\r\n    getCourseProgress(courseId: string): CourseProgress[] {\r\n        return db.courseProgress.filter(p => p.courseId === courseId);\r\n    }\r\n\r\n    enrollCourse(courseId: string): { success: boolean, message?: string } {\r\n        if (!db.currentUserId) return { success: false, message: 'User not logged in' };\r\n        \r\n        // 1. Check Global Settings\r\n        if (!db.settings.globalSelfEnrollment) {\r\n            return { success: false, message: 'Self-enrollment is currently disabled by administrators.' };\r\n        }\r\n\r\n        const course = db.courses.find(c => c.id === courseId && !c.deletedAt);\r\n        if (!course) return { success: false, message: 'Course not found' };\r\n\r\n        // 2. Check Course Settings\r\n        if (!course.allowSelfEnrollment) {\r\n            return { success: false, message: 'This course requires manual approval to enroll.' };\r\n        }\r\n\r\n        // 3. Check Prerequisites\r\n        if (db.settings.requirePrerequisites && course.settings.prerequisites && course.settings.prerequisites.length > 0) {\r\n            const userCompletedIds = db.courseProgress\r\n                .filter(p => p.userId === db.currentUserId && p.status === 'Completed')\r\n                .map(p => p.courseId);\r\n            \r\n            const missingPrereqs = course.settings.prerequisites.filter(id => !userCompletedIds.includes(id));\r\n            if (missingPrereqs.length > 0) {\r\n                return { success: false, message: 'You have not completed the required prerequisites for this course.' };\r\n            }\r\n        }\r\n        \r\n        // Check if already exists to prevent dupes\r\n        const exists = db.courseProgress.find(p => p.userId === db.currentUserId && p.courseId === courseId);\r\n        if (exists) return { success: true, message: 'Already enrolled.' };\r\n\r\n        // Create initial progress record\r\n        db.courseProgress.push({\r\n            userId: db.currentUserId,\r\n            courseId: courseId,\r\n            status: 'In Progress',\r\n            progressPercent: 0,\r\n            lessonsCompletedIds: [],\r\n            lastAccessedAt: new Date().toISOString(),\r\n            enrollmentDate: new Date().toISOString(),\r\n            history: [{ date: new Date().toISOString(), action: 'Enrolled in course' }]\r\n        });\r\n\r\n        return { success: true, message: 'Enrolled successfully.' };\r\n    }\r\n\r\n    completeLesson(courseId: string, lessonId: string) {\r\n        if (!db.currentUserId) return;\r\n        \r\n        // Find or create progress record\r\n        let progress = db.courseProgress.find(p => p.userId === db.currentUserId && p.courseId === courseId);\r\n        \r\n        if (!progress) {\r\n            progress = {\r\n                userId: db.currentUserId,\r\n                courseId: courseId,\r\n                status: 'In Progress',\r\n                progressPercent: 0,\r\n                lessonsCompletedIds: [],\r\n                lastAccessedAt: new Date().toISOString(),\r\n                enrollmentDate: new Date().toISOString(),\r\n                history: [{ date: new Date().toISOString(), action: 'Started course via lesson access' }]\r\n            };\r\n            db.courseProgress.push(progress);\r\n        }\r\n\r\n        // Update last accessed\r\n        progress.lastAccessedLessonId = lessonId;\r\n        progress.lastAccessedAt = new Date().toISOString();\r\n\r\n        // Mark lesson complete if not already\r\n        if (!progress.lessonsCompletedIds.includes(lessonId)) {\r\n            progress.lessonsCompletedIds.push(lessonId);\r\n            const lessonTitle = db.lessons.find(l => l.id === lessonId)?.title || 'Lesson';\r\n            progress.history = [...(progress.history || []), { date: new Date().toISOString(), action: `Completed ${lessonTitle}` }];\r\n        }\r\n\r\n        // Calculate percent\r\n        const totalLessons = db.lessons.filter(l => l.courseId === courseId && !l.deletedAt).length;\r\n        if (totalLessons > 0) {\r\n            progress.progressPercent = Math.round((progress.lessonsCompletedIds.length / totalLessons) * 100);\r\n        }\r\n\r\n        // Check if course complete\r\n        if (progress.progressPercent === 100 && progress.status !== 'Completed') {\r\n            progress.status = 'Completed';\r\n            progress.completedAt = new Date().toISOString();\r\n            progress.history = [...(progress.history || []), { date: new Date().toISOString(), action: 'Course Completed' }];\r\n            \r\n            const course = db.courses.find(c => c.id === courseId);\r\n            \r\n            // Notification System\r\n            const hasNotif = db.notifications.some(n => n.title.includes(`Course Completed: ${course?.title}`));\r\n            if(!hasNotif) {\r\n                const now = new Date().toISOString();\r\n                db.notifications.unshift({\r\n                    id: db.generateId('n'),\r\n                    userId: db.currentUserId,\r\n                    title: `Course Completed: ${course?.title}`,\r\n                    time: \"Just now\",\r\n                    isRead: false,\r\n                    iconType: 'grad',\r\n                    bg: 'bg-yellow-50',\r\n                    color: 'text-yellow-600',\r\n                    linkTo: 'training-certificates',\r\n                    createdAt: now,\r\n                    updatedAt: now,\r\n                    deletedAt: null\r\n                });\r\n                \r\n                // --- NEW: Send Email ---\r\n                if (course) {\r\n                    this.notifications.notifyCourseCompleted(db.currentUserId, course.title);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    checkCompliance(requiredCourseIds?: string[]): { compliant: boolean; missingCourses: string[] } {\r\n        if (!requiredCourseIds || requiredCourseIds.length === 0) return { compliant: true, missingCourses: [] };\r\n        if (!db.currentUserId) return { compliant: false, missingCourses: requiredCourseIds };\r\n\r\n        const userProgress = db.courseProgress.filter(p => p.userId === db.currentUserId && p.status === 'Completed');\r\n        const completedIds = userProgress.map(p => p.courseId);\r\n        \r\n        const missing = requiredCourseIds.filter(id => !completedIds.includes(id));\r\n        const missingTitles = missing.map(id => db.courses.find(c => c.id === id)?.title || id);\r\n\r\n        return {\r\n            compliant: missing.length === 0,\r\n            missingCourses: missingTitles\r\n        };\r\n    }\r\n\r\n    getCertificates(): EnrichedCourse[] {\r\n        if (!db.currentUserId) return [];\r\n        \r\n        // Find certificates belonging to current user that are Active\r\n        const userCertificates = db.certificates.filter(cert => \r\n            cert.userId === db.currentUserId && cert.status === 'Active' && !cert.deletedAt\r\n        );\r\n        \r\n        // Map these certificates back to their courses\r\n        return userCertificates.map(cert => {\r\n            const course = db.courses.find(c => c.id === cert.courseId && !c.deletedAt);\r\n            if (!course) return null;\r\n            \r\n            const progress = db.courseProgress.find(p => p.userId === db.currentUserId && p.courseId === cert.courseId);\r\n            \r\n            return {\r\n                ...course,\r\n                progress: progress ? { ...progress, certificateId: cert.id } : undefined\r\n            };\r\n        }).filter(c => c !== null) as EnrichedCourse[];\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/FinanceService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { FinanceStats, Invoice, InvoiceStatus, UserStats } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\n\r\nexport class FinanceService {\r\n    private notifications: NotificationService;\r\n\r\n    constructor(notificationService: NotificationService) {\r\n        this.notifications = notificationService;\r\n    }\r\n    \r\n    getInvoices(): Invoice[] {\r\n        if (!db.currentUserId) return [];\r\n        return db.invoices\r\n            .filter(inv => inv.userId === db.currentUserId && !inv.deletedAt)\r\n            .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    }\r\n\r\n    createInvoice(invoice: Invoice) {\r\n        db.invoices.unshift(invoice);\r\n        // Notify if it's a real user\r\n        if (invoice.userId && invoice.userId !== 'custom') {\r\n            this.notifications.notifyInvoiceCreated(invoice.userId, invoice.reference);\r\n        }\r\n    }\r\n\r\n    // New Method for Editing\r\n    updateInvoice(invoice: Invoice) {\r\n        const idx = db.invoices.findIndex(i => i.id === invoice.id);\r\n        if (idx !== -1) {\r\n            const oldInvoice = db.invoices[idx];\r\n            db.invoices[idx] = { \r\n                ...invoice, \r\n                updatedAt: new Date().toISOString() \r\n            };\r\n\r\n            // If updating a paid invoice, notify amendment\r\n            if (oldInvoice.status === 'Paid' && invoice.userId && invoice.userId !== 'custom') {\r\n                this.notifications.notifyInvoiceAmended(invoice.userId, invoice.reference);\r\n            }\r\n        }\r\n    }\r\n\r\n    updateInvoiceStatus(id: string, status: InvoiceStatus) {\r\n        const idx = db.invoices.findIndex(i => i.id === id);\r\n        if (idx !== -1) {\r\n            const invoice = db.invoices[idx];\r\n            const now = new Date().toISOString();\r\n            // Create new object reference to trigger React updates\r\n            db.invoices[idx] = { \r\n                ...invoice, \r\n                status,\r\n                updatedAt: now\r\n            };\r\n\r\n            // Notify on Payment\r\n            if (status === 'Paid' && invoice.userId && invoice.userId !== 'custom') {\r\n                this.notifications.notifyInvoicePaid(invoice.userId, invoice.reference, invoice.amount);\r\n            }\r\n\r\n            // Add INVOICE_PAID event to job history\r\n            if (status === 'Paid') {\r\n                const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n                const actorName = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'System';\r\n\r\n                for (const item of invoice.items) {\r\n                    if (item.jobId) {\r\n                        const jobIndex = db.jobs.findIndex(j => j.id === item.jobId);\r\n                        if (jobIndex !== -1) {\r\n                            const job = db.jobs[jobIndex];\r\n                            const newHistory = [...(job.history || [])];\r\n                            newHistory.push({\r\n                                id: db.generateId('h'),\r\n                                type: 'INVOICE_PAID',\r\n                                date: now,\r\n                                actorName: actorName,\r\n                                description: `Payment confirmed for Invoice #${invoice.reference}.`\r\n                            });\r\n                            db.jobs[jobIndex] = { \r\n                                ...job, \r\n                                history: newHistory,\r\n                                updatedAt: now\r\n                            };\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getFinanceStats(): FinanceStats {\r\n        if (!db.currentUserId) return { totalPaid: 0, pendingPayout: 0, nextPayoutDate: 'N/A', invoicesCount: 0 };\r\n        \r\n        const userInvoices = db.invoices.filter(inv => inv.userId === db.currentUserId && !inv.deletedAt);\r\n        \r\n        const totalPaid = userInvoices\r\n            .filter(i => i.status === 'Paid')\r\n            .reduce((sum, i) => sum + i.amount, 0);\r\n            \r\n        const pendingPayout = userInvoices\r\n            .filter(i => i.status === 'Pending')\r\n            .reduce((sum, i) => sum + i.amount, 0);\r\n            \r\n        const nextPayoutDate = pendingPayout > 0 ? '14 Nov 2025' : 'N/A';\r\n        \r\n        return {\r\n            totalPaid,\r\n            pendingPayout,\r\n            nextPayoutDate,\r\n            invoicesCount: userInvoices.length\r\n        };\r\n    }\r\n\r\n    getStats(): UserStats {\r\n        if (!db.currentUserId) {\r\n            return {\r\n                earnings: \"Â£0\", earningsLabel: \"Earnings\", earningsTrend: \"0%\",\r\n                completedJobs: 0, completedJobsSubtext: \"No history\",\r\n                qualityScore: \"0.0/5\", qualityScoreSubtext: \"No reviews\"\r\n            };\r\n        }\r\n\r\n        const completed = db.jobs.filter(j => \r\n            j.linguistId === db.currentUserId && \r\n            j.status === 'Completed' &&\r\n            !j.deletedAt\r\n        );\r\n        \r\n        // --- KEY UPDATE: Calculate Earnings from PAID INVOICES, not Job Payouts ---\r\n        const userInvoices = db.invoices.filter(inv => inv.userId === db.currentUserId && !inv.deletedAt);\r\n        const totalEarnings = userInvoices\r\n            .filter(inv => inv.status === 'Paid')\r\n            .reduce((sum, inv) => sum + inv.amount, 0);\r\n        \r\n        const ratedJobs = completed.filter(j => j.rating !== undefined);\r\n        const avgRating = ratedJobs.length > 0 \r\n            ? (ratedJobs.reduce((sum, j) => sum + (j.rating || 0), 0) / ratedJobs.length).toFixed(1)\r\n            : \"5.0\"; \r\n        \r\n        let lastJobText = \"No jobs yet\";\r\n        if (completed.length > 0) {\r\n            const sortedCompleted = [...completed].sort((a, b) => \r\n                new Date(b.completedAt || b.date).getTime() - new Date(a.completedAt || a.date).getTime()\r\n            );\r\n            const lastDate = new Date(sortedCompleted[0].completedAt || sortedCompleted[0].date);\r\n            const diffTime = Math.abs(new Date().getTime() - lastDate.getTime());\r\n            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); \r\n            lastJobText = `Last job: ${diffDays} day${diffDays === 1 ? '' : 's'} ago`;\r\n        }\r\n\r\n        return {\r\n            earnings: `Â£${totalEarnings.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0})}`,\r\n            earningsLabel: \"Earnings (Paid)\",\r\n            earningsTrend: \"+12% this month\", \r\n            completedJobs: completed.length,\r\n            completedJobsSubtext: lastJobText,\r\n            qualityScore: `${avgRating}/5`,\r\n            qualityScoreSubtext: ratedJobs.length > 0 ? `Based on ${ratedJobs.length} reviews` : \"New Linguist\"\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/NotificationService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { UserRole, EmailLog } from '../types';\r\n\r\nexport class NotificationService {\r\n    \r\n    private create(userId: string, title: string, message: string, type: 'check' | 'briefcase' | 'shield' | 'grad', link?: string) {\r\n        const now = new Date().toISOString();\r\n        const newNotification = {\r\n            id: db.generateId('n'),\r\n            userId,\r\n            title,\r\n            message,\r\n            time: now, // Using ISO for sorting, UI converts to relative\r\n            isRead: false,\r\n            iconType: type,\r\n            bg: this.getBgColor(type),\r\n            color: this.getColor(type),\r\n            linkTo: link,\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n        db.notifications.unshift(newNotification);\r\n    }\r\n\r\n    // Helper for colors\r\n    private getBgColor(type: string) {\r\n        switch(type) {\r\n            case 'check': return 'bg-green-50';\r\n            case 'briefcase': return 'bg-blue-50';\r\n            case 'shield': return 'bg-orange-50';\r\n            case 'grad': return 'bg-purple-50';\r\n            default: return 'bg-gray-50';\r\n        }\r\n    }\r\n\r\n    private getColor(type: string) {\r\n        switch(type) {\r\n            case 'check': return 'text-green-600';\r\n            case 'briefcase': return 'text-blue-600';\r\n            case 'shield': return 'text-orange-600';\r\n            case 'grad': return 'text-purple-600';\r\n            default: return 'text-gray-600';\r\n        }\r\n    }\r\n\r\n    // --- EMAIL SYSTEM ---\r\n\r\n    public sendEmail(userId: string, templateId: string, data: Record<string, any>) {\r\n        if (!db.settings.email.enabled) {\r\n            console.log(`[Email] Skipped (Disabled): ${templateId} to ${userId}`);\r\n            return;\r\n        }\r\n\r\n        const user = db.users.find(u => u.id === userId);\r\n        if (!user || !user.email) {\r\n            console.warn(`[Email] Failed: User not found or no email for ID ${userId}`);\r\n            return;\r\n        }\r\n\r\n        // Check user preferences\r\n        if (user.notificationPreferences && !user.notificationPreferences.emailUpdates) {\r\n             console.log(`[Email] Skipped (User Pref): ${templateId} to ${userId}`);\r\n             return;\r\n        }\r\n\r\n        const template = db.emailTemplates.find(t => t.id === templateId);\r\n        if (!template) {\r\n            console.error(`[Email] Template not found: ${templateId}`);\r\n            return;\r\n        }\r\n\r\n        // Parse Template\r\n        let subject = template.subject;\r\n        let body = template.body;\r\n\r\n        Object.keys(data).forEach(key => {\r\n            const regex = new RegExp(`{{${key}}}`, 'g');\r\n            const value = data[key] !== undefined ? String(data[key]) : '';\r\n            subject = subject.replace(regex, value);\r\n            body = body.replace(regex, value);\r\n        });\r\n\r\n        // Add User Context\r\n        subject = subject.replace(/{{firstName}}/g, user.firstName);\r\n        subject = subject.replace(/{{lastName}}/g, user.lastName);\r\n        body = body.replace(/{{firstName}}/g, user.firstName);\r\n        body = body.replace(/{{lastName}}/g, user.lastName);\r\n\r\n        // \"Send\" (Log it)\r\n        const log: EmailLog = {\r\n            id: db.generateId('mail'),\r\n            recipientEmail: user.email,\r\n            templateId: templateId,\r\n            subject: subject,\r\n            status: 'Sent',\r\n            sentAt: new Date().toISOString()\r\n        };\r\n\r\n        db.emailLogs.unshift(log);\r\n        console.log(`[Email SENT] To: ${user.email} | Subject: ${subject}`);\r\n    }\r\n\r\n    // --- Public Triggers ---\r\n\r\n    notifyJobApproved(userId: string, jobTitle: string, jobId: string) {\r\n        this.create(userId, 'Job Approved', `Your submission for \"${jobTitle}\" has been approved. Payment is pending.`, 'check', `jobs-history`);\r\n        \r\n        this.sendEmail(userId, 'JOB_APPROVED', {\r\n            jobTitle,\r\n            jobId\r\n        });\r\n    }\r\n\r\n    notifyJobRevision(userId: string, jobTitle: string, note: string) {\r\n        this.create(userId, 'Revision Requested', `Action required for \"${jobTitle}\": ${note}`, 'shield', `jobs-bookings`);\r\n        // No specific email template for revision in requirements, but good to have. \r\n        // Skipping email for strict adherence to requested list, or fallback to generic if needed.\r\n    }\r\n\r\n    notifyJobAssigned(userId: string, job: { title: string, date: string, location: string, id: string }) {\r\n        this.create(userId, 'New Assignment', `You have been assigned to \"${job.title}\".`, 'briefcase', 'jobs-bookings');\r\n        this.sendEmail(userId, 'JOB_ASSIGNED', {\r\n            jobTitle: job.title,\r\n            date: new Date(job.date).toLocaleDateString(),\r\n            location: job.location,\r\n            jobId: job.id\r\n        });\r\n    }\r\n\r\n    notifyJobCompletedPending(job: { id: string, title: string, linguistId: string }) {\r\n        // Notify Admins\r\n        const admins = db.users.filter(u => u.role === 'admin' && !u.deletedAt);\r\n        const linguist = db.users.find(u => u.id === job.linguistId);\r\n        \r\n        admins.forEach(admin => {\r\n            this.create(admin.id, 'Approval Required', `Job #${job.id} submitted by ${linguist?.firstName} ${linguist?.lastName}.`, 'briefcase', 'jobs:Pending Approval');\r\n            \r\n            // Send email to admin\r\n            this.sendEmail(admin.id, 'JOB_COMPLETED_PENDING', {\r\n                jobTitle: job.title,\r\n                jobId: job.id,\r\n                firstName: linguist?.firstName || 'Linguist',\r\n                lastName: linguist?.lastName || ''\r\n            });\r\n        });\r\n    }\r\n\r\n    notifyInvoicePaid(userId: string, reference: string, amount: number) {\r\n        this.create(userId, 'Payment Received', `Invoice #${reference} has been marked as Paid.`, 'briefcase', 'finance');\r\n        this.sendEmail(userId, 'INVOICE_PAID', {\r\n            invoiceRef: reference,\r\n            amount: amount.toFixed(2)\r\n        });\r\n    }\r\n\r\n    notifyInvoiceCreated(userId: string, reference: string) {\r\n        this.create(userId, 'New Invoice', `Invoice #${reference} has been generated.`, 'briefcase', 'finance');\r\n    }\r\n\r\n    notifyInvoiceAmended(userId: string, reference: string) {\r\n        this.create(userId, 'Invoice Amended', `Details for invoice #${reference} have been updated by admin.`, 'shield', 'finance');\r\n    }\r\n\r\n    notifyAdminAction(userId: string, title: string, message: string, link: string) {\r\n        this.create(userId, title, message, 'briefcase', link);\r\n    }\r\n\r\n    notifyCertificateIssued(userId: string, courseTitle: string, certId: string) {\r\n        this.create(userId, 'Certificate Issued', `Congratulations! You earned a certificate for \"${courseTitle}\".`, 'grad', 'training-certificates');\r\n        this.sendEmail(userId, 'CERTIFICATE_ISSUED', {\r\n            courseTitle,\r\n            certId\r\n        });\r\n    }\r\n\r\n    notifyCourseCompleted(userId: string, courseTitle: string) {\r\n        // In-app notification handled in TrainingService usually, adding email here\r\n        this.sendEmail(userId, 'COURSE_COMPLETED', {\r\n            courseTitle\r\n        });\r\n    }\r\n\r\n    notifyMessageReceived(userId: string, senderName: string, content: string, jobId?: string) {\r\n        // In-app is handled by real-time hook usually, but we can log notification if offline\r\n        this.sendEmail(userId, 'MESSAGE_RECEIVED', {\r\n            senderName,\r\n            context: jobId ? `Job #${jobId}` : 'Direct Message',\r\n            preview: content.substring(0, 50)\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4492, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/CertificateService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { Certificate, Course, User } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\n\r\nexport class CertificateService {\r\n    private notifications: NotificationService;\r\n\r\n    constructor(notificationService: NotificationService) {\r\n        this.notifications = notificationService;\r\n    }\r\n\r\n    issueCertificate(userId: string, courseId: string, templateId?: string): Certificate {\r\n        const now = new Date().toISOString();\r\n        \r\n        // 1. Create Certificate Record\r\n        const newCert: Certificate = {\r\n            id: db.generateId('cert'),\r\n            userId,\r\n            courseId,\r\n            issueDate: now,\r\n            status: 'Active',\r\n            verificationCode: crypto.randomUUID(),\r\n            templateId,\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n        db.certificates.push(newCert);\r\n\r\n        // 2. Link to Course Progress\r\n        const progressIdx = db.courseProgress.findIndex(p => p.userId === userId && p.courseId === courseId);\r\n        if (progressIdx !== -1) {\r\n            db.courseProgress[progressIdx] = {\r\n                ...db.courseProgress[progressIdx],\r\n                certificateId: newCert.id,\r\n                status: 'Completed',\r\n                completedAt: newCert.issueDate\r\n            };\r\n        }\r\n\r\n        // 3. Notify User\r\n        const course = db.courses.find(c => c.id === courseId);\r\n        if (course) {\r\n            this.notifications.notifyCertificateIssued(userId, course.title, newCert.id);\r\n        }\r\n\r\n        return newCert;\r\n    }\r\n\r\n    revokeCertificate(certificateId: string): void {\r\n        const idx = db.certificates.findIndex(c => c.id === certificateId);\r\n        if (idx !== -1) {\r\n            db.certificates[idx].status = 'Revoked';\r\n            db.certificates[idx].updatedAt = new Date().toISOString();\r\n            \r\n            // Unlink from progress but keep completion status? \r\n            // Often revocation means they are no longer certified, but they *did* finish the course.\r\n            // We'll leave the progress as is, but the certificate is invalid.\r\n        }\r\n    }\r\n\r\n    reissueCertificate(certificateId: string): Certificate | null {\r\n        const oldCert = db.certificates.find(c => c.id === certificateId);\r\n        if (!oldCert) return null;\r\n\r\n        // Revoke old\r\n        this.revokeCertificate(certificateId);\r\n\r\n        // Issue new\r\n        return this.issueCertificate(oldCert.userId, oldCert.courseId, oldCert.templateId);\r\n    }\r\n\r\n    getCertificate(id: string): Certificate | undefined {\r\n        return db.certificates.find(c => c.id === id && !c.deletedAt);\r\n    }\r\n\r\n    getUserCertificates(userId: string): Certificate[] {\r\n        return db.certificates.filter(c => c.userId === userId && !c.deletedAt);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AAIO,MAAM;IACD,cAAmC;IAE3C,YAAY,mBAAwC,CAAE;QAClD,IAAI,CAAC,aAAa,GAAG;IACzB;IAEA,iBAAiB,MAAc,EAAE,QAAgB,EAAE,UAAmB,EAAe;QACjF,MAAM,MAAM,IAAI,OAAO,WAAW;QAElC,+BAA+B;QAC/B,MAAM,UAAuB;YACzB,IAAI,sHAAE,CAAC,UAAU,CAAC;YAClB;YACA;YACA,WAAW;YACX,QAAQ;YACR,kBAAkB,OAAO,UAAU;YACnC;YACA,WAAW;YACX,WAAW;YACX,WAAW;QACf;QACA,sHAAE,CAAC,YAAY,CAAC,IAAI,CAAC;QAErB,6BAA6B;QAC7B,MAAM,cAAc,sHAAE,CAAC,cAAc,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,UAAU,EAAE,QAAQ,KAAK;QAC3F,IAAI,gBAAgB,CAAC,GAAG;YACpB,sHAAE,CAAC,cAAc,CAAC,YAAY,GAAG;gBAC7B,GAAG,sHAAE,CAAC,cAAc,CAAC,YAAY;gBACjC,eAAe,QAAQ,EAAE;gBACzB,QAAQ;gBACR,aAAa,QAAQ,SAAS;YAClC;QACJ;QAEA,iBAAiB;QACjB,MAAM,SAAS,sHAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC7C,IAAI,QAAQ;YACR,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,QAAQ,OAAO,KAAK,EAAE,QAAQ,EAAE;QAC/E;QAEA,OAAO;IACX;IAEA,kBAAkB,aAAqB,EAAQ;QAC3C,MAAM,MAAM,sHAAE,CAAC,YAAY,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACpD,IAAI,QAAQ,CAAC,GAAG;YACZ,sHAAE,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,GAAG;YAC9B,sHAAE,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,OAAO,WAAW;QAEvD,oDAAoD;QACpD,yFAAyF;QACzF,kEAAkE;QACtE;IACJ;IAEA,mBAAmB,aAAqB,EAAsB;QAC1D,MAAM,UAAU,sHAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACnD,IAAI,CAAC,SAAS,OAAO;QAErB,aAAa;QACb,IAAI,CAAC,iBAAiB,CAAC;QAEvB,YAAY;QACZ,OAAO,IAAI,CAAC,gBAAgB,CAAC,QAAQ,MAAM,EAAE,QAAQ,QAAQ,EAAE,QAAQ,UAAU;IACrF;IAEA,eAAe,EAAU,EAA2B;QAChD,OAAO,sHAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,CAAC,EAAE,SAAS;IAChE;IAEA,oBAAoB,MAAc,EAAiB;QAC/C,OAAO,sHAAE,CAAC,YAAY,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,UAAU,CAAC,EAAE,SAAS;IAC1E;AACJ"}},
    {"offset": {"line": 4568, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/LmsAdminService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { Course, Lesson, CourseProgress } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\nimport { CertificateService } from './CertificateService';\r\n\r\nexport class LmsAdminService {\r\n    private notifications: NotificationService;\r\n    private certificateService: CertificateService;\r\n\r\n    constructor(notificationService: NotificationService, certificateService: CertificateService) {\r\n        this.notifications = notificationService;\r\n        this.certificateService = certificateService;\r\n    }\r\n\r\n    saveCourse(courseData: Partial<Course>, lessons: Lesson[]): Course {\r\n        const isNew = !courseData.id;\r\n        const courseId = courseData.id || db.generateId('c');\r\n        const now = new Date().toISOString();\r\n        \r\n        const newCourse: Course = {\r\n            id: courseId,\r\n            title: courseData.title || 'Untitled Course',\r\n            description: courseData.description || '',\r\n            category: courseData.category || 'General',\r\n            duration: courseData.duration || '0m',\r\n            lessonsCount: lessons.length,\r\n            thumbnailUrl: courseData.thumbnailUrl || 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80&w=600',\r\n            instructor: courseData.instructor || 'Jambo Training',\r\n            instructorRole: courseData.instructorRole || 'Instructor',\r\n            learningGoals: courseData.learningGoals || [],\r\n            allowSelfEnrollment: courseData.allowSelfEnrollment ?? true,\r\n            status: courseData.status || 'Draft',\r\n            settings: courseData.settings || {\r\n                visibility: 'Hidden',\r\n                allowReenrollment: true,\r\n                requirePrerequisites: false,\r\n                prerequisites: [],\r\n                passingScore: 80,\r\n                autoIssueCertificate: true,\r\n                notifications: { onEnroll: true, onComplete: true }\r\n            },\r\n            compliance: courseData.compliance || {\r\n                requiredForJobTypes: [],\r\n                isMandatory: false\r\n            },\r\n            createdAt: courseData.createdAt || now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n\r\n        if (isNew) {\r\n            db.courses.push(newCourse);\r\n        } else {\r\n            const idx = db.courses.findIndex(c => c.id === courseId);\r\n            if (idx !== -1) {\r\n                db.courses[idx] = newCourse;\r\n            }\r\n        }\r\n\r\n        // Hard delete existing lessons for simplicity in this mock DB scenario when replacing structure\r\n        // In a real DB, you'd soft delete orphans.\r\n        db.lessons = db.lessons.filter(l => l.courseId !== courseId);\r\n        \r\n        const newLessons = lessons.map((l, index) => ({\r\n            ...l,\r\n            id: l.id.startsWith('temp-') ? db.generateId('l') + index : l.id,\r\n            courseId: courseId,\r\n            orderIndex: index,\r\n            createdAt: l.createdAt || now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        }));\r\n        \r\n        db.lessons.push(...newLessons);\r\n\r\n        return newCourse;\r\n    }\r\n\r\n    deleteCourse(courseId: string) {\r\n        const idx = db.courses.findIndex(c => c.id === courseId);\r\n        if (idx !== -1) {\r\n            // Soft delete the course\r\n            db.courses[idx].deletedAt = new Date().toISOString();\r\n            \r\n            // Soft delete related lessons\r\n            db.lessons.forEach(l => {\r\n                if (l.courseId === courseId) l.deletedAt = new Date().toISOString();\r\n            });\r\n        }\r\n    }\r\n\r\n    enrollUser(courseId: string, userId: string) {\r\n        if (db.courseProgress.some(p => p.courseId === courseId && p.userId === userId)) return;\r\n\r\n        db.courseProgress.push({\r\n            userId,\r\n            courseId,\r\n            status: 'In Progress',\r\n            progressPercent: 0,\r\n            lessonsCompletedIds: [],\r\n            enrollmentDate: new Date().toISOString(),\r\n            lastAccessedAt: new Date().toISOString(),\r\n            timeSpent: '0m',\r\n            history: [{ date: new Date().toISOString(), action: 'Enrolled by Admin' }]\r\n        });\r\n        \r\n        const course = db.courses.find(c => c.id === courseId);\r\n        this.notifications.notifyAdminAction(\r\n            userId, \r\n            \"Course Enrollment\", \r\n            `You have been enrolled in \"${course?.title}\" by an administrator.`, \r\n            \"training\"\r\n        );\r\n    }\r\n\r\n    removeUser(courseId: string, userId: string) {\r\n        db.courseProgress = db.courseProgress.filter(p => !(p.courseId === courseId && p.userId === userId));\r\n    }\r\n\r\n    updateLearnerProgress(courseId: string, userId: string, updates: Partial<CourseProgress>) {\r\n        const idx = db.courseProgress.findIndex(p => p.courseId === courseId && p.userId === userId);\r\n        if (idx !== -1) {\r\n            const current = db.courseProgress[idx];\r\n            const newHistory = [...(current.history || [])];\r\n            \r\n            if (updates.status && updates.status !== current.status) {\r\n                newHistory.push({ \r\n                    date: new Date().toISOString(), \r\n                    action: `Status changed to ${updates.status} by Admin` \r\n                });\r\n            }\r\n            \r\n            if (updates.instructorNotes) {\r\n                 newHistory.push({ \r\n                    date: new Date().toISOString(), \r\n                    action: `Instructor note added` \r\n                });\r\n            }\r\n\r\n            db.courseProgress[idx] = {\r\n                ...current,\r\n                ...updates,\r\n                history: newHistory,\r\n                completedAt: updates.status === 'Completed' && !current.completedAt ? new Date().toISOString() : current.completedAt\r\n            };\r\n\r\n            // Auto-issue certificate if marked completed by admin and course has auto-issue enabled\r\n            if (updates.status === 'Completed' && !current.certificateId) {\r\n                const course = db.courses.find(c => c.id === courseId);\r\n                if (course?.settings.autoIssueCertificate) {\r\n                    this.certificateService.issueCertificate(userId, courseId);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updateCourseSettings(courseId: string, updates: Partial<Course>) {\r\n        const idx = db.courses.findIndex(c => c.id === courseId);\r\n        if (idx !== -1) {\r\n            db.courses[idx] = { ...db.courses[idx], ...updates, updatedAt: new Date().toISOString() };\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4728, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/MessageService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { Message, Conversation } from '../types';\r\nimport { NotificationService } from './NotificationService';\r\n\r\nexport class MessageService {\r\n    private notifications: NotificationService;\r\n\r\n    constructor(notificationService: NotificationService) {\r\n        this.notifications = notificationService;\r\n    }\r\n\r\n    getAllMessages(): Message[] {\r\n        return db.messages;\r\n    }\r\n\r\n    getConversations(userId: string): Conversation[] {\r\n        const userMessages = db.messages.filter(m => m.senderId === userId || m.recipientId === userId && !m.deletedAt);\r\n        \r\n        // Group by Peer + Job Context\r\n        const groups: Record<string, Message[]> = {};\r\n        \r\n        userMessages.forEach(msg => {\r\n            const peerId = msg.senderId === userId ? msg.recipientId : msg.senderId;\r\n            const jobIdKey = msg.jobId || 'dm'; // Group null jobIds together as 'dm'\r\n            const key = `${peerId}_${jobIdKey}`;\r\n            \r\n            if (!groups[key]) groups[key] = [];\r\n            groups[key].push(msg);\r\n        });\r\n\r\n        // Convert groups to Conversation objects\r\n        const conversations: Conversation[] = Object.keys(groups).map(key => {\r\n            const msgs = groups[key].sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()); // Newest first\r\n            const lastMessage = msgs[0];\r\n            const peerId = lastMessage.senderId === userId ? lastMessage.recipientId : lastMessage.senderId;\r\n            const unreadCount = msgs.filter(m => m.recipientId === userId && !m.isRead).length;\r\n            \r\n            const peer = db.users.find(u => u.id === peerId);\r\n            const job = lastMessage.jobId ? db.jobs.find(j => j.id === lastMessage.jobId) : undefined;\r\n\r\n            return {\r\n                peerId,\r\n                jobId: lastMessage.jobId,\r\n                lastMessage,\r\n                unreadCount,\r\n                peer,\r\n                job\r\n            };\r\n        });\r\n\r\n        return conversations.sort((a, b) => new Date(b.lastMessage.createdAt).getTime() - new Date(a.lastMessage.createdAt).getTime());\r\n    }\r\n\r\n    getThread(userId: string, peerId: string, jobId?: string): Message[] {\r\n        return db.messages\r\n            .filter(m => \r\n                (m.senderId === userId && m.recipientId === peerId || m.senderId === peerId && m.recipientId === userId) &&\r\n                m.jobId === (jobId || undefined) &&\r\n                !m.deletedAt\r\n            )\r\n            .sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()); // Oldest first for chat view\r\n    }\r\n\r\n    sendMessage(senderId: string, recipientId: string, content: string, jobId?: string): Message {\r\n        const now = new Date().toISOString();\r\n        const newMessage: Message = {\r\n            id: db.generateId('m'),\r\n            senderId,\r\n            recipientId,\r\n            content,\r\n            jobId,\r\n            isRead: false,\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n        db.messages.push(newMessage);\r\n        \r\n        // Notify Recipient (Email)\r\n        const sender = db.users.find(u => u.id === senderId);\r\n        const senderName = sender ? `${sender.firstName} ${sender.lastName}` : 'System';\r\n        \r\n        this.notifications.notifyMessageReceived(recipientId, senderName, content, jobId);\r\n        \r\n        return newMessage;\r\n    }\r\n\r\n    markAsRead(userId: string, peerId: string, jobId?: string) {\r\n        let updated = false;\r\n        db.messages.forEach(m => {\r\n            if (m.recipientId === userId && m.senderId === peerId && m.jobId === (jobId || undefined) && !m.isRead) {\r\n                m.isRead = true;\r\n                m.readAt = new Date().toISOString();\r\n                updated = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    getGlobalUnreadCount(userId: string): number {\r\n        return db.messages.filter(m => m.recipientId === userId && !m.isRead && !m.deletedAt).length;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4816, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/BlogService.ts"],"sourcesContent":["\r\nimport { db } from '../store';\r\nimport { BlogPost } from '../types';\r\n\r\nexport class BlogService {\r\n    \r\n    getAllBlogs(includeDrafts = false): BlogPost[] {\r\n        let posts = db.blogPosts.filter(p => !p.deletedAt);\r\n        if (!includeDrafts) {\r\n            posts = posts.filter(p => p.status === 'published');\r\n        }\r\n        // Sort by published date descending\r\n        return posts.sort((a, b) => {\r\n            const dateA = a.publishedAt ? new Date(a.publishedAt).getTime() : new Date(a.createdAt).getTime();\r\n            const dateB = b.publishedAt ? new Date(b.publishedAt).getTime() : new Date(b.createdAt).getTime();\r\n            return dateB - dateA;\r\n        });\r\n    }\r\n\r\n    getBlogBySlug(slug: string): BlogPost | undefined {\r\n        return db.blogPosts.find(p => p.slug === slug && !p.deletedAt);\r\n    }\r\n\r\n    createBlog(data: Partial<BlogPost>): BlogPost {\r\n        const now = new Date().toISOString();\r\n        const currentUser = db.users.find(u => u.id === db.currentUserId);\r\n        \r\n        const newPost: BlogPost = {\r\n            id: db.generateId('blog'),\r\n            title: data.title || 'Untitled Post',\r\n            slug: data.slug || `post-${Date.now()}`,\r\n            excerpt: data.excerpt || '',\r\n            content: data.content || '',\r\n            coverImage: data.coverImage || 'https://images.unsplash.com/photo-1499750310159-525446b095ef?auto=format&fit=crop&q=80&w=1200',\r\n            tags: data.tags || [],\r\n            authorId: currentUser?.id || 'unknown',\r\n            status: data.status || 'draft',\r\n            publishedAt: data.status === 'published' ? now : undefined,\r\n            createdAt: now,\r\n            updatedAt: now,\r\n            deletedAt: null\r\n        };\r\n\r\n        db.blogPosts.unshift(newPost);\r\n        return newPost;\r\n    }\r\n\r\n    updateBlog(id: string, updates: Partial<BlogPost>): BlogPost | null {\r\n        const idx = db.blogPosts.findIndex(p => p.id === id);\r\n        if (idx !== -1) {\r\n            const current = db.blogPosts[idx];\r\n            const now = new Date().toISOString();\r\n            \r\n            // Handle publishing logic\r\n            let publishedAt = current.publishedAt;\r\n            if (updates.status === 'published' && !current.publishedAt) {\r\n                publishedAt = now;\r\n            }\r\n\r\n            db.blogPosts[idx] = {\r\n                ...current,\r\n                ...updates,\r\n                publishedAt,\r\n                updatedAt: now\r\n            };\r\n            return db.blogPosts[idx];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    deleteBlog(id: string) {\r\n        const idx = db.blogPosts.findIndex(p => p.id === id);\r\n        if (idx !== -1) {\r\n            db.blogPosts[idx].deletedAt = new Date().toISOString();\r\n        }\r\n    }\r\n\r\n    searchBlogs(query: string): BlogPost[] {\r\n        const term = query.toLowerCase();\r\n        return this.getAllBlogs(false).filter(p => \r\n            p.title.toLowerCase().includes(term) || \r\n            p.excerpt.toLowerCase().includes(term) ||\r\n            p.tags.some(t => t.toLowerCase().includes(term))\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AAGO,MAAM;IAET,YAAY,gBAAgB,KAAK,EAAc;QAC3C,IAAI,QAAQ,sHAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,SAAS;QACjD,IAAI,CAAC,eAAe;YAChB,QAAQ,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;QAC3C;QACA,oCAAoC;QACpC,OAAO,MAAM,IAAI,CAAC,CAAC,GAAG;YAClB,MAAM,QAAQ,EAAE,WAAW,GAAG,IAAI,KAAK,EAAE,WAAW,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;YAC/F,MAAM,QAAQ,EAAE,WAAW,GAAG,IAAI,KAAK,EAAE,WAAW,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;YAC/F,OAAO,QAAQ;QACnB;IACJ;IAEA,cAAc,IAAY,EAAwB;QAC9C,OAAO,sHAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,QAAQ,CAAC,EAAE,SAAS;IACjE;IAEA,WAAW,IAAuB,EAAY;QAC1C,MAAM,MAAM,IAAI,OAAO,WAAW;QAClC,MAAM,cAAc,sHAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,sHAAE,CAAC,aAAa;QAEhE,MAAM,UAAoB;YACtB,IAAI,sHAAE,CAAC,UAAU,CAAC;YAClB,OAAO,KAAK,KAAK,IAAI;YACrB,MAAM,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACvC,SAAS,KAAK,OAAO,IAAI;YACzB,SAAS,KAAK,OAAO,IAAI;YACzB,YAAY,KAAK,UAAU,IAAI;YAC/B,MAAM,KAAK,IAAI,IAAI,EAAE;YACrB,UAAU,aAAa,MAAM;YAC7B,QAAQ,KAAK,MAAM,IAAI;YACvB,aAAa,KAAK,MAAM,KAAK,cAAc,MAAM;YACjD,WAAW;YACX,WAAW;YACX,WAAW;QACf;QAEA,sHAAE,CAAC,SAAS,CAAC,OAAO,CAAC;QACrB,OAAO;IACX;IAEA,WAAW,EAAU,EAAE,OAA0B,EAAmB;QAChE,MAAM,MAAM,sHAAE,CAAC,SAAS,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACjD,IAAI,QAAQ,CAAC,GAAG;YACZ,MAAM,UAAU,sHAAE,CAAC,SAAS,CAAC,IAAI;YACjC,MAAM,MAAM,IAAI,OAAO,WAAW;YAElC,0BAA0B;YAC1B,IAAI,cAAc,QAAQ,WAAW;YACrC,IAAI,QAAQ,MAAM,KAAK,eAAe,CAAC,QAAQ,WAAW,EAAE;gBACxD,cAAc;YAClB;YAEA,sHAAE,CAAC,SAAS,CAAC,IAAI,GAAG;gBAChB,GAAG,OAAO;gBACV,GAAG,OAAO;gBACV;gBACA,WAAW;YACf;YACA,OAAO,sHAAE,CAAC,SAAS,CAAC,IAAI;QAC5B;QACA,OAAO;IACX;IAEA,WAAW,EAAU,EAAE;QACnB,MAAM,MAAM,sHAAE,CAAC,SAAS,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACjD,IAAI,QAAQ,CAAC,GAAG;YACZ,sHAAE,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,OAAO,WAAW;QACxD;IACJ;IAEA,YAAY,KAAa,EAAc;QACnC,MAAM,OAAO,MAAM,WAAW;QAC9B,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,MAAM,CAAC,CAAA,IAClC,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,SAC/B,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,SACjC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,GAAG,QAAQ,CAAC;IAElD;AACJ"}},
    {"offset": {"line": 4897, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/services/AiWritingService.ts"],"sourcesContent":["import { GoogleGenAI } from \"@google/genai\";\r\nimport { SeoConfig, GlobalSeoSettings } from \"../types\";\r\n\r\nexport interface ContentAnalysis {\r\n    score: number;\r\n    readabilityLevel: string;\r\n    suggestions: string[];\r\n    tone: string;\r\n}\r\n\r\nexport class AiWritingService {\r\n    private ai: GoogleGenAI | null = null;\r\n    private model = 'gemini-2.5-flash';\r\n    private isEnabled: boolean = false;\r\n\r\n    constructor() {\r\n        // Only initialize if API key is available\r\n        const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.GEMINI_API_KEY;\r\n        \r\n        if (apiKey) {\r\n            try {\r\n                this.ai = new GoogleGenAI({ apiKey });\r\n                this.isEnabled = true;\r\n                console.log('âœ… AI Service enabled');\r\n            } catch (error) {\r\n                console.warn('âš ï¸ AI Service initialization failed:', error);\r\n                this.isEnabled = false;\r\n            }\r\n        } else {\r\n            console.log('â„¹ï¸ AI Service disabled: No API key found (this is OK for development)');\r\n            this.isEnabled = false;\r\n        }\r\n    }\r\n\r\n    async generateSeoData(content: string, title: string): Promise<Partial<SeoConfig>> {\r\n        // Return mock data if AI is not enabled\r\n        if (!this.isEnabled || !this.ai) {\r\n            return {\r\n                metaTitle: title.substring(0, 60),\r\n                metaDescription: content.substring(0, 160),\r\n                keywords: ['jambo', 'linguists', 'swahili', 'translation', 'interpretation']\r\n            };\r\n        }\r\n\r\n        const prompt = `\r\n            Act as an SEO expert for \"Jambo Linguists\", a premium Swahili interpretation agency.\r\n            Analyze the following blog content and title.\r\n            Generate a JSON object with:\r\n            1. \"metaTitle\": SEO-optimized title (max 60 chars).\r\n            2. \"metaDescription\": Compelling description (150-160 chars).\r\n            3. \"keywords\": Array of 5-8 focus keywords.\r\n            \r\n            Maintain a professional, authoritative, yet accessible tone.\r\n            \r\n            Title: ${title}\r\n            Content: ${content.substring(0, 3000)}...\r\n        `;\r\n\r\n        try {\r\n            const response = await this.ai.models.generateContent({\r\n                model: this.model,\r\n                contents: prompt,\r\n                config: { responseMimeType: 'application/json' }\r\n            });\r\n            \r\n            if (response.text) {\r\n                return JSON.parse(response.text);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"AI SEO Generation Failed:\", error);\r\n        }\r\n        \r\n        // Fallback to mock data\r\n        return {\r\n            metaTitle: title.substring(0, 60),\r\n            metaDescription: content.substring(0, 160),\r\n            keywords: ['jambo', 'linguists', 'swahili', 'translation', 'interpretation']\r\n        };\r\n    }\r\n\r\n    async generateSiteSeo(companyInfo: any): Promise<Partial<GlobalSeoSettings>> {\r\n        // Return mock data if AI is not enabled\r\n        if (!this.isEnabled || !this.ai) {\r\n            return {\r\n                siteTitle: 'Jambo Linguists | Professional Swahili Translation Services',\r\n                siteDescription: 'Expert Swahili interpretation and translation services in the UK. Professional, certified linguists for all your language needs.',\r\n                defaultKeywords: ['swahili translation', 'interpretation services', 'jambo linguists', 'uk translation', 'certified translators', 'swahili interpreters', 'professional translation', 'language services'],\r\n                structuredData: JSON.stringify({\r\n                    \"@context\": \"https://schema.org\",\r\n                    \"@type\": \"LocalBusiness\",\r\n                    \"name\": \"Jambo Linguists\",\r\n                    \"description\": \"Professional Swahili translation and interpretation services\"\r\n                }, null, 2)\r\n            };\r\n        }\r\n\r\n        const prompt = `\r\n            Act as a technical SEO expert for \"Jambo Linguists Limited\".\r\n            Using the company details below, generate a global SEO strategy JSON object.\r\n            \r\n            Company Info:\r\n            ${JSON.stringify(companyInfo)}\r\n            \r\n            Return JSON with:\r\n            1. \"siteTitle\": A catchy, SEO-friendly global title suffix (e.g. \"Jambo Linguists | Swahili Experts\").\r\n            2. \"siteDescription\": A powerful meta description (160 chars) highlighting services and location.\r\n            3. \"defaultKeywords\": Array of 10 high-value keywords for Swahili interpretation in UK.\r\n            4. \"structuredData\": A valid JSON-LD string for Schema.org \"LocalBusiness\" or \"Organization\", including contact points, address, and logo. Ensure it is stringified JSON.\r\n        `;\r\n\r\n        try {\r\n            const response = await this.ai.models.generateContent({\r\n                model: this.model,\r\n                contents: prompt,\r\n                config: { responseMimeType: 'application/json' }\r\n            });\r\n\r\n            if (response.text) {\r\n                const data = JSON.parse(response.text);\r\n                // Ensure structuredData is a string if the AI returned an object\r\n                if (typeof data.structuredData === 'object') {\r\n                    data.structuredData = JSON.stringify(data.structuredData, null, 2);\r\n                }\r\n                return data;\r\n            }\r\n        } catch (error) {\r\n            console.error(\"AI Site SEO Generation Failed:\", error);\r\n        }\r\n        \r\n        // Fallback to mock data\r\n        return {\r\n            siteTitle: 'Jambo Linguists | Professional Swahili Translation Services',\r\n            siteDescription: 'Expert Swahili interpretation and translation services in the UK. Professional, certified linguists for all your language needs.',\r\n            defaultKeywords: ['swahili translation', 'interpretation services', 'jambo linguists', 'uk translation', 'certified translators', 'swahili interpreters', 'professional translation', 'language services'],\r\n            structuredData: JSON.stringify({\r\n                \"@context\": \"https://schema.org\",\r\n                \"@type\": \"LocalBusiness\",\r\n                \"name\": \"Jambo Linguists\",\r\n                \"description\": \"Professional Swahili translation and interpretation services\"\r\n            }, null, 2)\r\n        };\r\n    }\r\n\r\n    async analyzeContent(content: string): Promise<ContentAnalysis> {\r\n        // Return mock data if AI is not enabled\r\n        if (!this.isEnabled || !this.ai) {\r\n            return {\r\n                score: 75,\r\n                readabilityLevel: 'Grade 10',\r\n                tone: 'Professional',\r\n                suggestions: [\r\n                    'AI analysis unavailable - using mock data',\r\n                    'Add an API key to enable AI-powered content analysis'\r\n                ]\r\n            };\r\n        }\r\n\r\n        const prompt = `\r\n            Analyze this blog post draft for \"Jambo Linguists\".\r\n            Evaluate based on:\r\n            1. Clarity & Readability\r\n            2. Professional Tone (Must be authoritative but welcoming)\r\n            3. Structure\r\n            \r\n            Return JSON:\r\n            {\r\n                \"score\": number (0-100),\r\n                \"readabilityLevel\": string (e.g. \"Grade 8\", \"University\"),\r\n                \"tone\": string,\r\n                \"suggestions\": array of strings (specific improvements)\r\n            }\r\n\r\n            Content: ${content.substring(0, 3000)}...\r\n        `;\r\n\r\n        try {\r\n            const response = await this.ai.models.generateContent({\r\n                model: this.model,\r\n                contents: prompt,\r\n                config: { responseMimeType: 'application/json' }\r\n            });\r\n\r\n            if (response.text) {\r\n                return JSON.parse(response.text);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"AI Content Analysis Failed:\", error);\r\n        }\r\n        \r\n        return { \r\n            score: 0, \r\n            readabilityLevel: 'Unknown', \r\n            tone: 'Unknown', \r\n            suggestions: ['AI Analysis Unavailable'] \r\n        };\r\n    }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/types.ts"],"sourcesContent":["\r\n// ==========================================\r\n// ENUMS & CONSTANTS (Postgres ENUM types)\r\n// ==========================================\r\n\r\nexport type JobCategory = 'Interpreting' | 'Translation' | 'Transcription';\r\nexport type JobType = 'Face-to-Face' | 'Video' | 'Telephone' | 'Document' | 'Audio/Video';\r\nexport type JobStatus = 'Open' | 'Scheduled' | 'In Progress' | 'Completed' | 'Cancelled' | 'Pending Approval' | 'Revision';\r\nexport type UserRole = 'linguist' | 'admin' | 'client';\r\nexport type InvoiceStatus = 'Paid' | 'Pending' | 'Overdue' | 'Draft';\r\nexport type CourseStatus = 'Not Started' | 'In Progress' | 'Completed' | 'Failed';\r\nexport type LessonType = 'Video' | 'Document' | 'Slide' | 'Quiz';\r\nexport type JobEventType = 'CREATED' | 'ASSIGNED' | 'SUBMITTED' | 'REVISION_REQUESTED' | 'RESUBMITTED' | 'APPROVED' | 'CANCELLED' | 'INVOICE_PENDING' | 'INVOICE_PAID';\r\n\r\n// ==========================================\r\n// BASE ENTITY (Audit Trail)\r\n// ==========================================\r\n\r\nexport interface BaseEntity {\r\n    id: string;\r\n    createdAt: string; // ISO 8601\r\n    updatedAt: string; // ISO 8601\r\n    deletedAt?: string | null; // ISO 8601 (Soft Delete)\r\n}\r\n\r\n// ==========================================\r\n// SEO & CONTENT\r\n// ==========================================\r\n\r\nexport interface SeoConfig {\r\n    metaTitle?: string;\r\n    metaDescription?: string;\r\n    keywords?: string[];\r\n    canonicalUrl?: string;\r\n    ogImage?: string;\r\n    noIndex?: boolean;\r\n    structuredData?: string; // JSON-LD string\r\n    readabilityScore?: number;\r\n}\r\n\r\nexport interface GlobalSeoSettings {\r\n    siteTitle: string;\r\n    siteDescription: string;\r\n    defaultKeywords: string[];\r\n    structuredData: string; // Global JSON-LD (Organization, ContactPoint)\r\n}\r\n\r\n// ==========================================\r\n// EMAIL & NOTIFICATIONS\r\n// ==========================================\r\n\r\nexport interface EmailSettings {\r\n    enabled: boolean;\r\n    smtpHost: string;\r\n    smtpPort: number;\r\n    smtpUser: string;\r\n    smtpPass: string; \r\n    security: 'STARTTLS' | 'SSL/TLS' | 'NONE';\r\n    fromName: string;\r\n    fromEmail: string;\r\n}\r\n\r\nexport interface EmailTemplate {\r\n    id: string; // e.g. 'JOB_ASSIGNED'\r\n    name: string;\r\n    subject: string;\r\n    body: string; // HTML support\r\n    variables: string[]; // List of available placeholders for UI hints\r\n}\r\n\r\nexport interface EmailLog {\r\n    id: string;\r\n    recipientEmail: string;\r\n    templateId: string;\r\n    subject: string;\r\n    status: 'Sent' | 'Failed';\r\n    sentAt: string;\r\n    error?: string;\r\n}\r\n\r\n// ==========================================\r\n// SYSTEM SETTINGS\r\n// ==========================================\r\n\r\nexport interface SystemSettings {\r\n    // User Management\r\n    registrationsOpen: boolean;\r\n    requireManualVerification: boolean;\r\n    \r\n    // Operations\r\n    marketplaceEnabled: boolean;\r\n    maintenanceMode: boolean;\r\n    \r\n    // LMS Settings\r\n    globalSelfEnrollment: boolean; // Master switch\r\n    allowInstructorCourseCreation: boolean;\r\n    requirePrerequisites: boolean;\r\n    \r\n    // Job Marketplace Settings\r\n    jobAccessRequiresTraining: boolean;\r\n    autoAssignment: 'none' | 'rating' | 'first-come';\r\n    allowLinguistCancellation: boolean;\r\n    \r\n    // Finance Settings\r\n    defaultVatRate: number;\r\n    autoInvoiceGeneration: boolean;\r\n    minPayoutThreshold: number;\r\n    paymentReleaseDelay: number; // Days\r\n    platformFeePercent: number;\r\n\r\n    // SEO Settings\r\n    seo: GlobalSeoSettings;\r\n\r\n    // Email Settings\r\n    email: EmailSettings;\r\n}\r\n\r\n// ==========================================\r\n// TABLE SCHEMAS\r\n// ==========================================\r\n\r\nexport interface NotificationPreferences {\r\n    emailUpdates: boolean;\r\n    jobAlerts: boolean;\r\n    courseReminders: boolean;\r\n    marketing: boolean;\r\n}\r\n\r\n/**\r\n * Table: users\r\n */\r\nexport interface User extends BaseEntity {\r\n  email: string;\r\n  password?: string; // Simulated Hash       \r\n  firstName: string;       \r\n  lastName: string;        \r\n  phone?: string;          \r\n  location?: string;       \r\n  headline?: string;       \r\n  role: UserRole;          \r\n  avatarUrl?: string;      \r\n  headerUrl?: string;      \r\n  \r\n  qualifications?: string[]; \r\n  languages?: string[];      \r\n  isVerified: boolean;       \r\n  isSuspended?: boolean;     \r\n\r\n  bankDetails?: {\r\n    bankName: string;\r\n    accountNumber: string; \r\n    sortCode?: string;\r\n  };\r\n\r\n  notificationPreferences?: NotificationPreferences;\r\n}\r\n\r\nexport interface JobHistoryEvent {\r\n  id: string;\r\n  type: JobEventType;\r\n  date: string;\r\n  actorName: string; \r\n  description?: string; \r\n  attachment?: string; \r\n}\r\n\r\nexport interface RevisionRecord {\r\n  date: string;\r\n  feedback: string;\r\n  file?: string;\r\n}\r\n\r\nexport interface Job extends BaseEntity {\r\n  linguistId?: string | null; \r\n  clientId?: string;       \r\n  postedBy?: string;       \r\n  \r\n  category: JobCategory;   \r\n  type: JobType;           \r\n  status: JobStatus;       \r\n  title: string;           \r\n  description: string;     \r\n  \r\n  date: string;            \r\n  time?: string;           \r\n  deadlineTime?: string;   \r\n  finishTime?: string;     \r\n  duration?: string;       \r\n  wordCount?: number;      \r\n  location: string;        \r\n  distance?: number;       \r\n  \r\n  languagePair: string;    \r\n  rate: string;            \r\n  isUrgent: boolean;       \r\n  \r\n  hourlyRate?: number;\r\n  mileageRate?: number;\r\n  travelHours?: number;\r\n  travelRate?: number;\r\n  wordRate?: number;\r\n  minuteRate?: number;\r\n  fixedRate?: number;\r\n\r\n  requiredCourseIds?: string[]; \r\n\r\n  attachments?: {\r\n    name: string;\r\n    type: 'file' | 'link';\r\n    url: string;\r\n  }[];\r\n\r\n  completionNotes?: string; \r\n  completionFile?: string;  \r\n  completedAt?: string;     \r\n  \r\n  revisionFeedback?: string; \r\n  revisionFile?: string;     \r\n  revisionHistory?: RevisionRecord[]; \r\n  \r\n  history: JobHistoryEvent[];\r\n\r\n  adminNotes?: string;       \r\n  \r\n  totalPayout?: number;     \r\n  rating?: number;          \r\n}\r\n\r\nexport interface Invoice extends BaseEntity {\r\n  userId: string;          \r\n  reference: string;       \r\n  date: string;            \r\n  dueDate: string;         \r\n  amount: number;          \r\n  subtotal?: number;       \r\n  vatRate?: number;        \r\n  status: InvoiceStatus;   \r\n  items: {                 \r\n    description: string;\r\n    amount: number;\r\n    quantity?: number;     \r\n    rate?: number;         \r\n    jobId?: string;\r\n    date?: string;         \r\n  }[];\r\n  customRecipient?: {      \r\n    name: string;\r\n    email?: string;\r\n    address?: string;\r\n  };\r\n  notes?: string;\r\n  downloadUrl?: string;\r\n}\r\n\r\nexport interface Notification extends BaseEntity {\r\n  userId: string;          \r\n  title: string;           \r\n  message?: string;        \r\n  time: string;            \r\n  isRead: boolean;         \r\n  \r\n  iconType: 'check' | 'briefcase' | 'shield' | 'grad' | 'message'; \r\n  color: string;           \r\n  bg: string;              \r\n  linkTo?: string;         \r\n}\r\n\r\nexport interface CourseSettings {\r\n    visibility: 'Public' | 'Invite-Only' | 'Hidden';\r\n    maxEnrollment?: number;\r\n    allowReenrollment: boolean;\r\n    requirePrerequisites?: boolean;\r\n    prerequisites?: string[]; \r\n    passingScore: number;\r\n    autoIssueCertificate: boolean;\r\n    certificateTemplateId?: string; \r\n    notifications?: {\r\n        onEnroll?: boolean;\r\n        onComplete?: boolean;\r\n        onLessonPublish?: boolean;\r\n        onAssignmentGraded?: boolean;\r\n    };\r\n}\r\n\r\nexport interface CourseCompliance {\r\n    requiredForJobTypes: string[]; \r\n    mandatoryRefreshMonths?: number;\r\n    isMandatory: boolean;\r\n}\r\n\r\nexport interface Course extends BaseEntity {\r\n  title: string;\r\n  description: string;\r\n  category: 'Technical' | 'Soft Skills' | 'Compliance' | 'Language' | 'General';\r\n  duration: string; \r\n  lessonsCount: number;\r\n  thumbnailUrl?: string;\r\n  allowSelfEnrollment: boolean; \r\n  \r\n  status: 'Draft' | 'Published' | 'Archived';\r\n  settings: CourseSettings;\r\n  compliance: CourseCompliance;\r\n\r\n  instructor: string;\r\n  instructorRole?: string;\r\n  learningGoals: string[];\r\n}\r\n\r\nexport interface QuizQuestion {\r\n    question: string;\r\n    options: string[];\r\n    correctAnswer: number; \r\n    explanation: string;\r\n}\r\n\r\nexport interface QuizResult {\r\n  lessonId: string;\r\n  score: number;\r\n  totalQuestions: number;\r\n  date: string;\r\n  passed: boolean;\r\n}\r\n\r\nexport interface Lesson extends BaseEntity {\r\n  courseId: string;\r\n  module: string; \r\n  title: string;\r\n  type: LessonType;\r\n  duration: string; \r\n  orderIndex: number;\r\n  contentUrl?: string; \r\n  description?: string;\r\n  transcript?: string; \r\n  quizData?: QuizQuestion[];\r\n}\r\n\r\nexport interface CourseProgress {\r\n  userId: string;\r\n  courseId: string;\r\n  status: CourseStatus;\r\n  progressPercent: number; \r\n  lessonsCompletedIds: string[]; \r\n  lastAccessedLessonId?: string;\r\n  lastAccessedAt?: string;\r\n  completedAt?: string;\r\n  enrollmentDate: string; \r\n  history?: {\r\n      date: string;\r\n      action: string; \r\n  }[];\r\n  instructorNotes?: string;\r\n  grade?: number;\r\n  timeSpent?: string; \r\n  certificateId?: string; \r\n  quizResults?: QuizResult[]; \r\n}\r\n\r\nexport interface Certificate extends BaseEntity {\r\n  userId: string;\r\n  courseId: string;\r\n  issueDate: string;\r\n  expiryDate?: string;\r\n  status: 'Active' | 'Revoked' | 'Expired';\r\n  verificationCode: string; \r\n  templateId?: string; \r\n}\r\n\r\nexport interface EnrichedCourse extends Course {\r\n  progress?: CourseProgress; \r\n}\r\n\r\nexport interface Resource extends BaseEntity {\r\n    title: string;\r\n    description: string;\r\n    category: 'Legal' | 'Medical' | 'General' | 'Compliance';\r\n    type: 'pdf' | 'link';\r\n    url: string;\r\n}\r\n\r\nexport interface ComplianceDocument extends BaseEntity {\r\n    title: string;\r\n    type: 'terms' | 'conduct' | 'privacy';\r\n    content: string; \r\n    lastUpdated: string;\r\n}\r\n\r\n/**\r\n * Table: blog_posts\r\n */\r\nexport interface BlogPost extends BaseEntity {\r\n    title: string;\r\n    slug: string;\r\n    excerpt: string;\r\n    content: string; // Markdown\r\n    coverImage: string;\r\n    tags: string[];\r\n    authorId: string;\r\n    status: 'draft' | 'published';\r\n    publishedAt?: string;\r\n    seo?: SeoConfig; // NEW: SEO configuration\r\n}\r\n\r\nexport interface UserStats {\r\n  earnings: string;\r\n  earningsLabel: string;\r\n  earningsTrend: string;\r\n  completedJobs: number;\r\n  completedJobsSubtext: string;\r\n  qualityScore: string;\r\n  qualityScoreSubtext: string;\r\n}\r\n\r\nexport interface FinanceStats {\r\n  totalPaid: number;\r\n  pendingPayout: number;\r\n  nextPayoutDate: string;\r\n  invoicesCount: number;\r\n}\r\n\r\nexport interface LoginHistoryEntry {\r\n  id: string;              \r\n  userId: string;          \r\n  timestamp: string;       \r\n  ipAddress: string;       \r\n  source: 'direct' | 'impersonation'; \r\n  impersonatorId?: string; \r\n}\r\n\r\nexport interface Message extends BaseEntity {\r\n    senderId: string;\r\n    recipientId: string;\r\n    jobId?: string; \r\n    content: string;\r\n    isRead: boolean;\r\n    readAt?: string | null;\r\n}\r\n\r\nexport interface Conversation {\r\n    peerId: string; \r\n    jobId?: string; \r\n    lastMessage: Message;\r\n    unreadCount: number;\r\n    peer?: User; \r\n    job?: Job; \r\n}"],"names":[],"mappings":"AACA,6CAA6C;AAC7C,0CAA0C;AAC1C,6CAA6C"}},
    {"offset": {"line": 5131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/data/mockDatabase.ts"],"sourcesContent":["\r\nimport { AuthService } from './services/AuthService';\r\nimport { JobService } from './services/JobService';\r\nimport { AdminService } from './services/AdminService';\r\nimport { TrainingService } from './services/TrainingService';\r\nimport { FinanceService } from './services/FinanceService';\r\nimport { NotificationService } from './services/NotificationService'; \r\nimport { CertificateService } from './services/CertificateService';\r\nimport { LmsAdminService } from './services/LmsAdminService';\r\nimport { MessageService } from './services/MessageService';\r\nimport { BlogService } from './services/BlogService';\r\nimport { AiWritingService } from './services/AiWritingService';\r\nimport { db } from './store';\r\nimport { JobStatus, BlogPost, Resource } from './types';\r\n\r\n// Re-export types\r\nexport * from './types';\r\n\r\n// Initialize Core Services\r\nconst notificationService = new NotificationService();\r\nconst authService = new AuthService();\r\nconst jobService = new JobService(notificationService);\r\nconst adminService = new AdminService(notificationService);\r\nconst certificateService = new CertificateService(notificationService);\r\nconst lmsAdminService = new LmsAdminService(notificationService, certificateService);\r\nconst trainingService = new TrainingService(notificationService);\r\nconst financeService = new FinanceService(notificationService);\r\nconst messageService = new MessageService(notificationService);\r\nconst blogService = new BlogService();\r\nconst aiWritingService = new AiWritingService();\r\n\r\n// --- OBSERVER PATTERN FOR DATA REFRESH ---\r\nconst listeners: (() => void)[] = [];\r\n\r\nconst notifyListeners = () => {\r\n    listeners.forEach(l => l());\r\n};\r\n\r\nconst subscribe = (listener: () => void) => {\r\n    listeners.push(listener);\r\n    return () => {\r\n        const index = listeners.indexOf(listener);\r\n        if (index > -1) listeners.splice(index, 1);\r\n    };\r\n};\r\n\r\n/**\r\n * DATABASE SERVICE LAYER\r\n * Acts as the ORM / API Interface.\r\n */\r\nexport const mockDb = {\r\n  subscribe,\r\n\r\n  auth: {\r\n      init: () => authService.init(),\r\n      getCurrentUser: () => authService.getCurrentUser(),\r\n      login: (email: string, password?: string) => {\r\n          const res = authService.login(email, password);\r\n          notifyListeners();\r\n          return res;\r\n      },\r\n      register: (data: any) => {\r\n          const res = authService.register(data);\r\n          notifyListeners();\r\n          return res;\r\n      },\r\n      logout: () => {\r\n          authService.logout();\r\n          notifyListeners();\r\n      },\r\n      updateProfile: (data: any) => {\r\n          authService.updateProfile(data);\r\n          notifyListeners();\r\n      }\r\n  },\r\n\r\n  // Job Service\r\n  getAvailableJobs: () => jobService.getAvailableJobs(),\r\n  getBookedJobs: () => jobService.getBookedJobs(),\r\n  getJobHistory: () => jobService.getJobHistory(),\r\n  getNextAssignment: () => jobService.getNextAssignment(),\r\n  updateJobStatus: (id: string, status: JobStatus, extraData?: any) => { \r\n      jobService.updateJobStatus(id, status, extraData); \r\n      notifyListeners(); \r\n  },\r\n  unassignJob: (jobId: string) => {\r\n      const user = authService.getCurrentUser();\r\n      if (!user) return false;\r\n      const res = jobService.unassignJob(jobId, user.id);\r\n      if (res) notifyListeners();\r\n      return res;\r\n  },\r\n\r\n  // Admin Service\r\n  getAllJobs: () => adminService.getAllJobs(),\r\n  getAllUsers: () => adminService.getAllUsers(),\r\n  getAllInvoices: () => adminService.getAllInvoices(),\r\n  getJobsByUser: (userId: string) => adminService.getJobsByUser(userId),\r\n  getInvoicesByUser: (userId: string) => adminService.getInvoicesByUser(userId),\r\n  getSettings: () => adminService.getSettings(),\r\n  updateSettings: (s: any) => { adminService.updateSettings(s); notifyListeners(); },\r\n  getComplianceDocs: () => adminService.getComplianceDocs(),\r\n  adminUpdateComplianceDoc: (id: string, content: string, title?: string) => { adminService.updateComplianceDoc(id, content, title); notifyListeners(); },\r\n  \r\n  // Admin Resources\r\n  adminCreateResource: (res: Partial<Resource>) => { const r = adminService.createResource(res); notifyListeners(); return r; },\r\n  adminUpdateResource: (id: string, updates: Partial<Resource>) => { adminService.updateResource(id, updates); notifyListeners(); },\r\n  adminDeleteResource: (id: string) => { adminService.deleteResource(id); notifyListeners(); },\r\n\r\n  // Admin Email Settings\r\n  get emailTemplates() { return db.emailTemplates; },\r\n  get emailLogs() { return db.emailLogs; },\r\n  adminUpdateEmailTemplate: (id: string, updates: any) => { \r\n      adminService.updateEmailTemplate(id, updates); \r\n      notifyListeners(); \r\n  },\r\n  sendTestEmail: (userId: string) => {\r\n      notificationService.sendEmail(userId, 'MESSAGE_RECEIVED', {\r\n          senderName: 'System Test',\r\n          context: 'SMTP Check',\r\n          preview: 'This is a test email to verify configuration.'\r\n      });\r\n  },\r\n\r\n  // LMS Admin (Delegated)\r\n  adminSaveCourse: (c: any, l: any) => { const r = lmsAdminService.saveCourse(c, l); notifyListeners(); return r; },\r\n  adminDeleteCourse: (id: string) => { lmsAdminService.deleteCourse(id); notifyListeners(); },\r\n  adminEnrollUser: (cid: string, uid: string) => { lmsAdminService.enrollUser(cid, uid); notifyListeners(); },\r\n  adminRemoveUser: (cid: string, uid: string) => { lmsAdminService.removeUser(cid, uid); notifyListeners(); },\r\n  adminUpdateLearnerProgress: (cid: string, uid: string, u: any) => { lmsAdminService.updateLearnerProgress(cid, uid, u); notifyListeners(); },\r\n  adminUpdateCourseSettings: (cid: string, u: any) => { lmsAdminService.updateCourseSettings(cid, u); notifyListeners(); },\r\n  \r\n  // Admin User/Job Ops\r\n  adminApproveJobSubmission: (jid: string) => { const r = adminService.approveJobSubmission(jid); notifyListeners(); return r; },\r\n  adminForceCompleteJob: (jid: string, notes: string) => { const r = adminService.adminForceCompleteJob(jid, notes); notifyListeners(); return r; },\r\n  adminCreateUser: (u: any) => { const r = adminService.createUser(u); notifyListeners(); return r; },\r\n  adminUpdateUser: (uid: string, d: any) => { const r = adminService.updateUser(uid, d); notifyListeners(); return r; },\r\n  adminUpdateUserVerification: (uid: string, v: boolean) => { adminService.updateUserVerification(uid, v); notifyListeners(); },\r\n  adminSuspendUser: (uid: string, s: boolean) => { adminService.suspendUser(uid, s); notifyListeners(); },\r\n  adminCreateJob: (j: any) => { const r = adminService.createJob(j); notifyListeners(); return r; },\r\n  adminUpdateJobDetails: (jid: string, u: any, nf: any, ka: any) => { const r = adminService.updateJobDetails(jid, u, nf, ka); notifyListeners(); return r; },\r\n  adminAssignJob: (jid: string, uid: string | null) => { adminService.assignJob(jid, uid); notifyListeners(); },\r\n  getLoginHistoryForUser: (uid: string) => adminService.getLoginHistoryForUser(uid),\r\n  adminLogImpersonation: (aid: string, uid: string) => { adminService.logImpersonation(aid, uid); notifyListeners(); },\r\n\r\n  // Training Service\r\n  getCourses: () => trainingService.getCourses(),\r\n  getCourse: (id: string) => trainingService.getCourse(id),\r\n  getLessons: (id: string) => trainingService.getLessons(id),\r\n  getCourseProgress: (id: string) => trainingService.getCourseProgress(id),\r\n  enrollCourse: (id: string) => { const res = trainingService.enrollCourse(id); notifyListeners(); return res; },\r\n  completeLesson: (cid: string, lid: string) => { trainingService.completeLesson(cid, lid); notifyListeners(); },\r\n  checkCompliance: (ids?: string[]) => trainingService.checkCompliance(ids),\r\n  getCertificates: () => trainingService.getCertificates(),\r\n\r\n  // Certificate Service (Admin Access)\r\n  adminIssueCertificate: (uid: string, cid: string) => { certificateService.issueCertificate(uid, cid); notifyListeners(); },\r\n  adminRevokeCertificate: (certId: string) => { certificateService.revokeCertificate(certId); notifyListeners(); },\r\n  getCertificate: (id: string) => certificateService.getCertificate(id),\r\n\r\n  // Finance Service\r\n  getInvoices: () => financeService.getInvoices(),\r\n  createInvoice: (i: any) => { financeService.createInvoice(i); notifyListeners(); },\r\n  updateInvoice: (i: any) => { financeService.updateInvoice(i); notifyListeners(); },\r\n  updateInvoiceStatus: (id: string, s: any) => { financeService.updateInvoiceStatus(id, s); notifyListeners(); },\r\n  getFinanceStats: () => financeService.getFinanceStats(),\r\n  getStats: () => financeService.getStats(),\r\n\r\n  // Message Service\r\n  getConversations: (uid: string) => messageService.getConversations(uid),\r\n  getThread: (uid: string, pid: string, jid?: string) => messageService.getThread(uid, pid, jid),\r\n  sendMessage: (sid: string, rid: string, content: string, jid?: string) => { const m = messageService.sendMessage(sid, rid, content, jid); notifyListeners(); return m; },\r\n  markAsRead: (uid: string, pid: string, jid?: string) => { messageService.markAsRead(uid, pid, jid); notifyListeners(); },\r\n  getGlobalUnreadCount: (uid: string) => messageService.getGlobalUnreadCount(uid),\r\n\r\n  // Blog Service\r\n  getAllBlogs: (includeDrafts?: boolean) => blogService.getAllBlogs(includeDrafts),\r\n  getBlogBySlug: (slug: string) => blogService.getBlogBySlug(slug),\r\n  createBlog: (data: Partial<BlogPost>) => { const b = blogService.createBlog(data); notifyListeners(); return b; },\r\n  updateBlog: (id: string, data: Partial<BlogPost>) => { const b = blogService.updateBlog(id, data); notifyListeners(); return b; },\r\n  deleteBlog: (id: string) => { blogService.deleteBlog(id); notifyListeners(); },\r\n  searchBlogs: (query: string) => blogService.searchBlogs(query),\r\n\r\n  // AI Services\r\n  ai: aiWritingService,\r\n\r\n  // Notification Service / Direct DB Access\r\n  getNotifications: () => db.notifications.filter(n => n.userId === db.currentUserId).sort((a, b) => new Date(b.time).getTime() - new Date(a.time).getTime()),\r\n  markNotificationRead: (id: string) => {\r\n      const n = db.notifications.find(item => item.id === id);\r\n      if (n) { \r\n          n.isRead = true; \r\n          n.updatedAt = new Date().toISOString(); \r\n          notifyListeners(); \r\n      }\r\n  },\r\n  markAllNotificationsRead: () => {\r\n      let updated = false;\r\n      db.notifications.forEach(n => {\r\n          if (n.userId === db.currentUserId && !n.isRead) {\r\n              n.isRead = true;\r\n              n.updatedAt = new Date().toISOString();\r\n              updated = true;\r\n          }\r\n      });\r\n      if (updated) notifyListeners();\r\n  },\r\n  getResources: () => db.resources.filter(r => !r.deletedAt),\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5453, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/ClientLayout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { usePathname } from 'next/navigation'\r\nimport { useEffect } from 'react'\r\nimport { Navbar } from './Navbar'\r\nimport { Footer } from './Footer'\r\nimport { mockDb } from '@/data/mockDatabase'\r\n\r\nexport function ClientLayout({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname()\r\n  const hideNavFooter = pathname === '/portal' || pathname === '/admin'\r\n\r\n  // Initialize auth\r\n  useEffect(() => {\r\n    mockDb.auth.init()\r\n  }, [])\r\n\r\n  // Mobile keyboard handling\r\n  useEffect(() => {\r\n    const handleFocus = (event: FocusEvent) => {\r\n      const target = event.target as HTMLElement\r\n      if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\r\n        setTimeout(() => {\r\n          target.scrollIntoView({ behavior: 'smooth', block: 'center' })\r\n        }, 300)\r\n      }\r\n    }\r\n    document.addEventListener('focus', handleFocus, true)\r\n    return () => document.removeEventListener('focus', handleFocus, true)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col relative selection:bg-brand-orange selection:text-white\">\r\n      {!hideNavFooter && <Navbar />}\r\n      <main className=\"flex-grow relative z-10\">{children}</main>\r\n      {!hideNavFooter && <Footer />}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,gBAAgB,aAAa,aAAa,aAAa;IAE7D,kBAAkB;IAClB,IAAA,0KAAS;kCAAC;YACR,iJAAM,CAAC,IAAI,CAAC,IAAI;QAClB;iCAAG,EAAE;IAEL,2BAA2B;IAC3B,IAAA,0KAAS;kCAAC;YACR,MAAM;sDAAc,CAAC;oBACnB,MAAM,SAAS,MAAM,MAAM;oBAC3B,IAAI,OAAO,OAAO,KAAK,WAAW,OAAO,OAAO,KAAK,YAAY;wBAC/D;kEAAW;gCACT,OAAO,cAAc,CAAC;oCAAE,UAAU;oCAAU,OAAO;gCAAS;4BAC9D;iEAAG;oBACL;gBACF;;YACA,SAAS,gBAAgB,CAAC,SAAS,aAAa;YAChD;0CAAO,IAAM,SAAS,mBAAmB,CAAC,SAAS,aAAa;;QAClE;iCAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAU;;YACZ,CAAC,+BAAiB,6LAAC,kIAAM;;;;;0BAC1B,6LAAC;gBAAK,WAAU;0BAA2B;;;;;;YAC1C,CAAC,+BAAiB,6LAAC,kIAAM;;;;;;;;;;;AAGhC;GA9BgB;;QACG,oJAAW;;;KADd"}}]
}