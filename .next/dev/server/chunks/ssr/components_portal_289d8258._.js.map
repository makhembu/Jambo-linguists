{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFConfig.ts"],"sourcesContent":["\r\nexport const COLORS = {\r\n  PRIMARY: { r: 132, g: 27, b: 160 },\r\n  ORANGE: { r: 234, g: 141, b: 53 },\r\n  SLATE_900: { r: 15, g: 23, b: 42 },\r\n  SLATE_700: { r: 51, g: 65, b: 85 },\r\n  SLATE_500: { r: 100, g: 116, b: 139 },\r\n  SLATE_400: { r: 148, g: 163, b: 184 },\r\n  SLATE_50: { r: 248, g: 250, b: 252 },\r\n};\r\n\r\nexport const CONSTANTS = {\r\n  MARGIN: 15,\r\n  LOGO_SOURCES: [] \r\n};\r\n\r\n// Base64 Purple Logo Fallback (Simple Purple Square) to prevent \"corrupt PNG\" errors\r\nconst BASE64_LOGO_FALLBACK = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGP8x4APjIqPio+KAd64AfrWp52fAAAAAElFTkSuQmCC\";\r\n\r\nexport const formatCurrency = (amount: number) => `£${amount.toFixed(2)}`;\r\n\r\nexport const formatDateUK = (dateStr: string) => {\r\n  if (!dateStr) return '';\r\n  return new Date(dateStr).toLocaleDateString('en-GB');\r\n};\r\n\r\nconst fetchImageAsBase64 = async (url: string): Promise<string | null> => {\r\n    try {\r\n        // Timeout to prevent hanging\r\n        const controller = new AbortController();\r\n        const id = setTimeout(() => controller.abort(), 2000);\r\n        \r\n        const response = await fetch(url, { signal: controller.signal });\r\n        clearTimeout(id);\r\n        \r\n        if (!response.ok) {\r\n            return null;\r\n        }\r\n        const blob = await response.blob();\r\n        return new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                const result = reader.result as string;\r\n                if (result) {\r\n                    resolve(result);\r\n                } else {\r\n                    resolve(null);\r\n                }\r\n            };\r\n            reader.onerror = () => resolve(null);\r\n            reader.readAsDataURL(blob);\r\n        });\r\n    } catch (e) {\r\n        return null; \r\n    }\r\n};\r\n\r\nexport const getCompanyLogo = async (): Promise<string | null> => {\r\n    // Disabled to prevent application hang during PDF generation\r\n    return null;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;AACO,MAAM,SAAS;IACpB,SAAS;QAAE,GAAG;QAAK,GAAG;QAAI,GAAG;IAAI;IACjC,QAAQ;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAG;IAChC,WAAW;QAAE,GAAG;QAAI,GAAG;QAAI,GAAG;IAAG;IACjC,WAAW;QAAE,GAAG;QAAI,GAAG;QAAI,GAAG;IAAG;IACjC,WAAW;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;IACpC,WAAW;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;IACpC,UAAU;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;AACrC;AAEO,MAAM,YAAY;IACvB,QAAQ;IACR,cAAc,EAAE;AAClB;AAEA,qFAAqF;AACrF,MAAM,uBAAuB;AAEtB,MAAM,iBAAiB,CAAC,SAAmB,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC,IAAI;AAElE,MAAM,eAAe,CAAC;IAC3B,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,IAAI,KAAK,SAAS,kBAAkB,CAAC;AAC9C;AAEA,MAAM,qBAAqB,OAAO;IAC9B,IAAI;QACA,6BAA6B;QAC7B,MAAM,aAAa,IAAI;QACvB,MAAM,KAAK,WAAW,IAAM,WAAW,KAAK,IAAI;QAEhD,MAAM,WAAW,MAAM,MAAM,KAAK;YAAE,QAAQ,WAAW,MAAM;QAAC;QAC9D,aAAa;QAEb,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,OAAO;QACX;QACA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,IAAI,QAAQ,CAAC;YAChB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACf,MAAM,SAAS,OAAO,MAAM;gBAC5B,IAAI,QAAQ;oBACR,QAAQ;gBACZ,OAAO;oBACH,QAAQ;gBACZ;YACJ;YACA,OAAO,OAAO,GAAG,IAAM,QAAQ;YAC/B,OAAO,aAAa,CAAC;QACzB;IACJ,EAAE,OAAO,GAAG;QACR,OAAO;IACX;AACJ;AAEO,MAAM,iBAAiB;IAC1B,6DAA6D;IAC7D,OAAO;AACX"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFHeader.ts"],"sourcesContent":["\r\nimport { jsPDF } from \"jspdf\";\r\nimport { User } from \"@/data/types\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport interface HeaderMeta {\r\n  label: string;\r\n  value: string;\r\n}\r\n\r\nexport class PDFHeader {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private margin: number;\r\n\r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = doc.internal.pageSize.getWidth();\r\n    this.margin = CONSTANTS.MARGIN;\r\n  }\r\n\r\n  render(title: string, user: User | null, meta: HeaderMeta[], logoDataUrl: string | null, startY: number): number {\r\n    let y = startY;\r\n\r\n    // 1. Logo (Disabled per request)\r\n    /*\r\n    if (logoDataUrl) {\r\n      try {\r\n        const isPng = logoDataUrl.toLowerCase().includes('image/png') || logoDataUrl.toLowerCase().includes('.png');\r\n        const format = isPng ? 'PNG' : 'JPEG';\r\n        this.doc.addImage(logoDataUrl, format, this.margin, y, 15, 15, undefined, 'FAST');\r\n      } catch (e) {\r\n        console.warn('PDF Logo Error (Ignored):', e);\r\n      }\r\n    }\r\n    */\r\n\r\n    // 2. Company Address (Fixed for Jambo)\r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(8);\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n    \r\n    const address = [\r\n        \"Jambo Linguists Ltd\",\r\n        \"First Floor, Radley House\",\r\n        \"Richardshaw Rd\",\r\n        \"Pudsey, LS28 6LE\",\r\n        \"United Kingdom\"\r\n    ];\r\n    let ay = y + 20;\r\n    address.forEach(l => { this.doc.text(l, this.margin, ay); ay += 3.5; });\r\n    this.doc.text(`Tel: +44 7938 065 717 • jamii@jambolinguists.com`, this.margin, ay);\r\n\r\n    // 3. Document Title (INVOICE or STATEMENT)\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(24);\r\n    this.doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.text(title, this.width - this.margin, y + 10, { align: 'right' });\r\n\r\n    y = Math.max(ay + 10, y + 30);\r\n    const contentStartY = y;\r\n\r\n    // 4. Recipient Info (Billed To)\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(9);\r\n    this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    this.doc.text('PREPARED FOR', this.margin, contentStartY);\r\n    \r\n    let billY = contentStartY + 5;\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(11);\r\n    this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n\r\n    if (user) {\r\n        this.doc.text(`${user.firstName} ${user.lastName}`, this.margin, billY); \r\n        billY += 5;\r\n        this.doc.setFont('helvetica', 'normal');\r\n        this.doc.setFontSize(10);\r\n        this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n        if (user.location) { this.doc.text(user.location, this.margin, billY); billY += 5; }\r\n        this.doc.text(user.email, this.margin, billY); \r\n        billY += 5;\r\n    } else {\r\n        this.doc.text('Unknown Recipient', this.margin, billY);\r\n    }\r\n\r\n    // 5. Meta Data (Right Side)\r\n    let metaY = contentStartY;\r\n    const metaX = this.width - this.margin;\r\n    const labelX = metaX - 40;\r\n\r\n    meta.forEach(item => {\r\n        if (!item.value) return;\r\n        this.doc.setFont('helvetica', 'bold');\r\n        this.doc.setFontSize(9);\r\n        this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n        this.doc.text(item.label, labelX, metaY, { align: 'right' });\r\n        this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n        this.doc.text(item.value, metaX, metaY, { align: 'right' });\r\n        metaY += 5;\r\n    });\r\n\r\n    return Math.max(billY, metaY) + 12;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFTable.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport interface PDFTableColumn {\r\n  header: string;\r\n  weight: number;\r\n  align: 'left' | 'right' | 'center';\r\n}\r\n\r\nexport class PDFTable {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private height: number;\r\n  private margin: number;\r\n  \r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = doc.internal.pageSize.getWidth();\r\n    this.height = doc.internal.pageSize.getHeight();\r\n    this.margin = CONSTANTS.MARGIN;\r\n  }\r\n\r\n  render(columns: PDFTableColumn[], rows: string[][], startY: number): number {\r\n    let y = startY;\r\n    const availW = this.width - this.margin * 2;\r\n    \r\n    // Calculate Column Widths\r\n    const totalWeight = columns.reduce((sum, c) => sum + c.weight, 0);\r\n    const colWidths = columns.map(c => (c.weight / totalWeight) * availW);\r\n    const colX = columns.reduce<number[]>((acc, _, i) => {\r\n        acc.push(i === 0 ? this.margin : acc[i-1] + colWidths[i-1]);\r\n        return acc;\r\n    }, []);\r\n\r\n    const headerH = 10;\r\n    const rowPadding = 3;\r\n\r\n    // Helper: Draw Header\r\n    const drawHeader = (currY: number) => {\r\n        this.doc.setFillColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n        this.doc.rect(this.margin, currY, availW, headerH, 'F'); \r\n        this.doc.setTextColor(255, 255, 255);\r\n        this.doc.setFont('helvetica', 'bold');\r\n        this.doc.setFontSize(9);\r\n        columns.forEach((col, i) => {\r\n            let px = colX[i] + 3; // Default left\r\n            if (col.align === 'right') px = colX[i] + colWidths[i] - 3;\r\n            if (col.align === 'center') px = colX[i] + (colWidths[i] / 2);\r\n            \r\n            this.doc.text(col.header, px, currY + 6.5, { align: col.align });\r\n        });\r\n        return currY + headerH;\r\n    };\r\n\r\n    y = drawHeader(y);\r\n\r\n    // Draw Rows\r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(9);\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n        const rowData = rows[i];\r\n        \r\n        let maxLines = 1;\r\n        columns.forEach((_, cIdx) => {\r\n            const text = rowData[cIdx] ? String(rowData[cIdx]) : '';\r\n            const lines = this.doc.splitTextToSize(text, colWidths[cIdx] - 6);\r\n            if(lines.length > maxLines) {\r\n                maxLines = lines.length;\r\n            }\r\n        });\r\n\r\n        const rowH = (maxLines * 4) + (rowPadding * 2) + 2;\r\n\r\n        // Page Break Logic - Check if row fits on page (with buffer for footer)\r\n        if (y + rowH > this.height - this.margin - 20) {\r\n            this.doc.addPage();\r\n            y = this.margin;\r\n            y = drawHeader(y);\r\n        }\r\n        \r\n        // Zebra Stripe\r\n        if (i % 2 === 0) {\r\n            this.doc.setFillColor(COLORS.SLATE_50.r, COLORS.SLATE_50.g, COLORS.SLATE_50.b);\r\n            this.doc.rect(this.margin, y, availW, rowH, 'F');\r\n        }\r\n\r\n        this.doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n        const cy = y + rowPadding + 3.5;\r\n\r\n        // Render Cells\r\n        columns.forEach((col, cIdx) => {\r\n            const text = rowData[cIdx] ? String(rowData[cIdx]) : '';\r\n            const cellLines = this.doc.splitTextToSize(text, colWidths[cIdx] - 6);\r\n            \r\n            let px = colX[cIdx] + 3; \r\n            if (col.align === 'right') px = colX[cIdx] + colWidths[cIdx] - 3;\r\n            if (col.align === 'center') px = colX[cIdx] + (colWidths[cIdx] / 2);\r\n\r\n            if (cIdx === columns.length - 1) this.doc.setFont('helvetica', 'bold');\r\n            else this.doc.setFont('helvetica', 'normal');\r\n\r\n            this.doc.text(cellLines, px, cy, { align: col.align });\r\n        });\r\n\r\n        // Bottom Line\r\n        this.doc.setDrawColor(226, 232, 240);\r\n        this.doc.setLineWidth(0.1);\r\n        this.doc.line(this.margin, y + rowH, this.width - this.margin, y + rowH);\r\n        \r\n        y += rowH;\r\n    }\r\n\r\n    return y;\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFFooter.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { User } from \"@/data/types\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport interface SummaryRow {\r\n  label: string;\r\n  value: string;\r\n  isTotal?: boolean;\r\n}\r\n\r\nexport class PDFFooter {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private height: number;\r\n  private margin: number;\r\n\r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = doc.internal.pageSize.getWidth();\r\n    this.height = doc.internal.pageSize.getHeight();\r\n    this.margin = CONSTANTS.MARGIN;\r\n  }\r\n\r\n  renderSummaryBox(rows: SummaryRow[], startY: number): number {\r\n    let y = startY + 5;\r\n    const boxW = 80;\r\n    const boxX = this.width - this.margin - boxW;\r\n\r\n    rows.forEach(row => {\r\n        const h = row.isTotal ? 10 : 7;\r\n        \r\n        if (y + h > this.height - this.margin - 40) { // Keep space for bottom info\r\n            this.doc.addPage();\r\n            y = this.margin;\r\n        }\r\n\r\n        if (row.isTotal) {\r\n             this.doc.setFillColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n             this.doc.roundedRect(boxX, y, boxW, h, 1, 1, 'F');\r\n             this.doc.setTextColor(255, 255, 255);\r\n             this.doc.setFont('helvetica', 'bold');\r\n             this.doc.setFontSize(11);\r\n             this.doc.text(row.label, boxX + 4, y + 6.5);\r\n             this.doc.text(row.value, boxX + boxW - 4, y + 6.5, { align: 'right' });\r\n        } else {\r\n             this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n             this.doc.setFont('helvetica', 'bold');\r\n             this.doc.setFontSize(9);\r\n             this.doc.text(row.label, boxX + 4, y + 5);\r\n             this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n             this.doc.text(row.value, boxX + boxW - 4, y + 5, { align: 'right' });\r\n        }\r\n        y += h;\r\n    });\r\n\r\n    return y;\r\n  }\r\n\r\n  renderBottomInfo(user: User | null, refText: string, startY: number): number {\r\n    let y = startY;\r\n    const neededHeight = 25;\r\n    if (y + neededHeight > this.height - this.margin - 15) { // Keep space for page footer\r\n        this.doc.addPage();\r\n        y = this.margin;\r\n    }\r\n    y += 5;\r\n    \r\n    this.doc.setDrawColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    this.doc.setLineWidth(0.1);\r\n    this.doc.line(this.margin, y, this.width - this.margin, y);\r\n    y += 5;\r\n    \r\n    const contentY = y;\r\n    \r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(8);\r\n    this.doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n    this.doc.text('PAYMENT DETAILS', this.margin, contentY + 3);\r\n    \r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n\r\n    if (user && user.bankDetails) {\r\n        this.doc.text(`${user.bankDetails.bankName} • Sort: ${user.bankDetails.sortCode} • Acc: ${user.bankDetails.accountNumber}`, this.margin, contentY + 8);\r\n        this.doc.text(`Beneficiary: ${user.firstName} ${user.lastName}`, this.margin, contentY + 12);\r\n    } else {\r\n        this.doc.text('Bank Details: Not provided in profile', this.margin, contentY + 8);\r\n    }\r\n\r\n    this.doc.text(`Ref: ${refText}`, this.margin, contentY + 16);\r\n\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(10);\r\n    this.doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.text('Thank you for your business', this.width - this.margin, contentY + 8, { align: 'right' });\r\n    \r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(8);\r\n    this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    this.doc.text(`Jambo Linguists Ltd • Reg: 15333696`, this.width - this.margin, contentY + 13, { align: 'right' });\r\n    \r\n    return y + neededHeight;\r\n  }\r\n\r\n  renderPageFooter(pageNumber: number, totalPages: number) {\r\n    const footerY = this.height - (this.margin / 2);\r\n    this.doc.setFont('helvetica', 'italic');\r\n    this.doc.setFontSize(7);\r\n    this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    \r\n    const disclaimer = \"This is a computer-generated document and does not require a signature.\";\r\n    this.doc.text(disclaimer, this.width / 2, footerY, { align: 'center' });\r\n\r\n    const pageStr = `Page ${pageNumber} of ${totalPages}`;\r\n    const textWidth = this.doc.getStringUnitWidth(pageStr) * this.doc.getFontSize() / this.doc.internal.scaleFactor;\r\n    this.doc.text(pageStr, this.width - this.margin, footerY);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/InvoicePDF.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { Invoice, User, mockDb } from \"@/data/mockDatabase\";\r\nimport { CONSTANTS, COLORS, formatCurrency, formatDateUK, getCompanyLogo } from \"./PDFConfig\";\r\nimport { HeaderMeta, PDFHeader } from \"./PDFHeader\";\r\nimport { PDFTable, PDFTableColumn } from \"./PDFTable\";\r\nimport { PDFFooter, SummaryRow } from \"./PDFFooter\";\r\nimport { getInterpretingJobPayoutDetails } from \"../../jobs/job-helpers\";\r\n\r\nexport class InvoicePDF {\r\n  \r\n  static async generate(invoice: Invoice, user: User | null) {\r\n    // 1. Data Preparation\r\n    const { columns, tableRows } = this.getTableData(invoice);\r\n    \r\n    // 2. Document Initialization\r\n    const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });\r\n    const logoUrl = await getCompanyLogo();\r\n    const width = doc.internal.pageSize.getWidth();\r\n    const height = doc.internal.pageSize.getHeight();\r\n    const margin = CONSTANTS.MARGIN;\r\n\r\n    // 3. Header\r\n    const header = new PDFHeader(doc);\r\n    const meta: HeaderMeta[] = [\r\n        { label: 'Invoice No.', value: invoice.reference },\r\n        { label: 'Issue Date', value: formatDateUK(invoice.date) },\r\n        { label: 'Due Date', value: formatDateUK(invoice.dueDate) },\r\n        { label: 'Status', value: invoice.status },\r\n    ];\r\n    \r\n    let recipientUser = user;\r\n    if (!user && invoice.customRecipient) {\r\n        recipientUser = {\r\n            id: 'custom',\r\n            firstName: invoice.customRecipient.name,\r\n            lastName: '',\r\n            email: invoice.customRecipient.email || '',\r\n            location: invoice.customRecipient.address || '',\r\n            role: 'client',\r\n            isVerified: true,\r\n            createdAt: ''\r\n        } as User;\r\n    }\r\n\r\n    let currentY = header.render('INVOICE', recipientUser, meta, logoUrl, margin);\r\n\r\n    // 4. Table\r\n    const table = new PDFTable(doc);\r\n    currentY = table.render(columns, tableRows, currentY);\r\n\r\n    // 5. Summary and Footer\r\n    const footer = new PDFFooter(doc);\r\n    const summary = this.getSummaryData(invoice);\r\n\r\n    // Determine position for summary box and footer info\r\n    let summaryY = currentY + 5;\r\n    const summaryHeight = 24; // approx for subtotal, vat, total\r\n    const bottomInfoHeight = 40; // approx for payment details, thank you, line\r\n\r\n    if (summaryY + summaryHeight + bottomInfoHeight > height - margin) {\r\n        doc.addPage();\r\n        summaryY = margin;\r\n    }\r\n    \r\n    const summaryBottomY = footer.renderSummaryBox(summary, summaryY);\r\n    \r\n    // The footer info starts after the summary box. This will draw the line, then payment details and thank you.\r\n    footer.renderBottomInfo(recipientUser, invoice.reference, summaryBottomY + 5);\r\n\r\n\r\n    // 6. Add Page Footers to all pages\r\n    const totalPages = doc.getNumberOfPages();\r\n    for (let i = 1; i <= totalPages; i++) {\r\n        doc.setPage(i);\r\n        footer.renderPageFooter(i, totalPages);\r\n    }\r\n\r\n    doc.save(`invoice-${invoice.reference}.pdf`);\r\n  }\r\n\r\n  private static getTableData(invoice: Invoice) {\r\n    const allJobs = mockDb.getAllJobs();\r\n    \r\n    const columns: PDFTableColumn[] = [\r\n        { header: 'Description', weight: 4, align: 'left' },\r\n        { header: 'Qty/Ref', weight: 2.5, align: 'left' },\r\n        { header: 'Date', weight: 2, align: 'left' },\r\n        { header: 'Rate', weight: 2.5, align: 'left' },\r\n        { header: 'Amount', weight: 2, align: 'right' }\r\n    ];\r\n\r\n    const tableRows: string[][] = [];\r\n\r\n    for (const item of invoice.items) {\r\n      const job = item.jobId ? allJobs.find(j => j.id === item.jobId) : undefined;\r\n      \r\n      if (!job) {\r\n          // Manual Item\r\n          tableRows.push([\r\n              item.description, \r\n              item.quantity ? String(item.quantity) : '—', \r\n              item.date ? formatDateUK(item.date) : '—', \r\n              item.rate ? formatCurrency(item.rate) : '—', \r\n              formatCurrency(item.amount)\r\n          ]);\r\n          continue;\r\n      }\r\n\r\n      // Job Linked Item Logic\r\n      if (job.category === 'Interpreting') {\r\n          const details = getInterpretingJobPayoutDetails(job);\r\n          if (details) {\r\n              if (details.sessionPay > 0) {\r\n                  tableRows.push([\r\n                      `Interpreting Session: ${job.title}`,\r\n                      job.id,\r\n                      formatDateUK(job.date),\r\n                      `${details.hours.toFixed(2)} hrs @ ${formatCurrency(job.hourlyRate || 0)}/hr`,\r\n                      formatCurrency(details.sessionPay)\r\n                  ]);\r\n              }\r\n              if (details.mileagePay > 0) {\r\n                  tableRows.push([\r\n                      'Travel - Mileage',\r\n                      job.id,\r\n                      formatDateUK(job.date),\r\n                      `${job.distance} mi @ ${formatCurrency(job.mileageRate || 0)}/mi`,\r\n                      formatCurrency(details.mileagePay)\r\n                  ]);\r\n              }\r\n              if (details.travelPay > 0) {\r\n                  tableRows.push([\r\n                      'Travel - Time',\r\n                      job.id,\r\n                      formatDateUK(job.date),\r\n                      `${job.travelHours || 0} hrs @ ${formatCurrency(job.travelRate || 0)}/hr`,\r\n                      formatCurrency(details.travelPay)\r\n                  ]);\r\n              }\r\n          } else {\r\n               tableRows.push([\r\n                  `${job.category}: ${job.title}`,\r\n                  job.id, formatDateUK(job.date), job.duration || 'N/A', formatCurrency(item.amount)\r\n              ]);\r\n          }\r\n      } else if (job.category === 'Translation') {\r\n          const wordCount = job.wordCount || 0;\r\n          const rateDetail = job.fixedRate \r\n              ? 'Fixed Rate' \r\n              : `${wordCount.toLocaleString()} words @ ${formatCurrency(job.wordRate || 0)}/word`;\r\n\r\n          tableRows.push([\r\n              `Translation: ${job.title}`,\r\n              job.id,\r\n              formatDateUK(job.date),\r\n              rateDetail,\r\n              formatCurrency(item.amount)\r\n          ]);\r\n      } else if (job.category === 'Transcription') {\r\n          const duration = job.duration || 'N/A';\r\n          const rateDetail = `${duration} @ ${formatCurrency(job.minuteRate || 0)}/min`;\r\n           tableRows.push([\r\n              `Transcription: ${job.title}`,\r\n              job.id,\r\n              formatDateUK(job.date),\r\n              rateDetail,\r\n              formatCurrency(item.amount)\r\n          ]);\r\n      } else {\r\n          tableRows.push([\r\n              `${job.category}: ${job.title}`,\r\n              job.id, formatDateUK(job.date), job.duration || 'N/A', formatCurrency(item.amount)\r\n          ]);\r\n      }\r\n    }\r\n\r\n    return { columns, tableRows };\r\n  }\r\n\r\n  private static getSummaryData(invoice: Invoice): SummaryRow[] {\r\n    const summary: SummaryRow[] = [];\r\n    if (invoice.vatRate && invoice.vatRate > 0) {\r\n        const subtotal = invoice.subtotal || (invoice.amount / (1 + invoice.vatRate / 100));\r\n        const vatAmount = invoice.amount - subtotal;\r\n        \r\n        summary.push({ label: 'Subtotal', value: formatCurrency(subtotal) });\r\n        summary.push({ label: `VAT (${invoice.vatRate}%)`, value: formatCurrency(vatAmount) });\r\n    } else {\r\n        summary.push({ label: 'Subtotal', value: formatCurrency(invoice.amount) });\r\n    }\r\n    summary.push({ label: 'Total Due', value: formatCurrency(invoice.amount), isTotal: true });\r\n    return summary;\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 654, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/StatementPDF.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { Invoice, User } from \"@/data/mockDatabase\";\r\nimport { CONSTANTS, formatCurrency, formatDateUK, getCompanyLogo } from \"./PDFConfig\";\r\nimport { HeaderMeta, PDFHeader } from \"./PDFHeader\";\r\nimport { PDFTable, PDFTableColumn } from \"./PDFTable\";\r\nimport { PDFFooter, SummaryRow } from \"./PDFFooter\";\r\n\r\nexport class StatementPDF {\r\n  \r\n  static async generate(invoices: Invoice[], user: User | null, periodLabel: string) {\r\n    const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });\r\n    const logoUrl = await getCompanyLogo();\r\n    \r\n    // Stats Calc\r\n    const totalBilled = invoices.reduce((sum, i) => sum + i.amount, 0);\r\n    const totalPaid = invoices.filter(i => i.status === 'Paid').reduce((sum, i) => sum + i.amount, 0);\r\n    const balanceDue = totalBilled - totalPaid;\r\n\r\n    // 1. Header\r\n    const header = new PDFHeader(doc);\r\n    const meta: HeaderMeta[] = [\r\n        { label: 'Statement Date', value: formatDateUK(new Date().toISOString()) },\r\n        { label: 'Period', value: periodLabel },\r\n        { label: 'Total Invoices', value: invoices.length.toString() },\r\n    ];\r\n    let currentY = header.render('STATEMENT OF ACCOUNT', user, meta, logoUrl, CONSTANTS.MARGIN);\r\n  \r\n    // 2. Table\r\n    const table = new PDFTable(doc);\r\n    const columns: PDFTableColumn[] = [\r\n        { header: 'Date', weight: 2, align: 'left' },\r\n        { header: 'Invoice No.', weight: 3, align: 'left' },\r\n        { header: 'Status', weight: 2, align: 'center' },\r\n        { header: 'Billed', weight: 2, align: 'right' },\r\n        { header: 'Paid', weight: 2, align: 'right' },\r\n    ];\r\n  \r\n    const rows = invoices.map(inv => {\r\n        const isPaid = inv.status === 'Paid';\r\n        return [\r\n            formatDateUK(inv.date),\r\n            inv.reference,\r\n            inv.status.toUpperCase(),\r\n            formatCurrency(inv.amount),\r\n            isPaid ? formatCurrency(inv.amount) : '£0.00'\r\n        ];\r\n    });\r\n  \r\n    currentY = table.render(columns, rows, currentY);\r\n  \r\n    // 3. Footer & Summary\r\n    const footer = new PDFFooter(doc);\r\n    const summary: SummaryRow[] = [\r\n        { label: 'Total Billed', value: formatCurrency(totalBilled) },\r\n        { label: 'Total Paid', value: formatCurrency(totalPaid) },\r\n        { label: 'Balance Due', value: formatCurrency(balanceDue), isTotal: true },\r\n    ];\r\n    \r\n    const summaryHeight = 40; // Estimate for summary box\r\n    if (currentY + summaryHeight > doc.internal.pageSize.getHeight() - CONSTANTS.MARGIN - 20) {\r\n        doc.addPage();\r\n        currentY = CONSTANTS.MARGIN;\r\n    }\r\n\r\n    currentY = footer.renderSummaryBox(summary, currentY);\r\n\r\n    // 4. Add Page Footers to all pages\r\n    const totalPages = doc.getNumberOfPages();\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      doc.setPage(i);\r\n      footer.renderPageFooter(i, totalPages);\r\n    }\r\n  \r\n    doc.save(`statement-${user ? `${user.lastName}-` : ''}${new Date().toISOString().split('T')[0]}.pdf`);\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;AAEO,MAAM;IAEX,aAAa,SAAS,QAAmB,EAAE,IAAiB,EAAE,WAAmB,EAAE;QACjF,MAAM,MAAM,IAAI,8JAAK,CAAC;YAAE,aAAa;YAAY,MAAM;YAAM,QAAQ;QAAK;QAC1E,MAAM,UAAU,MAAM,IAAA,kLAAc;QAEpC,aAAa;QACb,MAAM,cAAc,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;QAChE,MAAM,YAAY,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;QAC/F,MAAM,aAAa,cAAc;QAEjC,YAAY;QACZ,MAAM,SAAS,IAAI,6KAAS,CAAC;QAC7B,MAAM,OAAqB;YACvB;gBAAE,OAAO;gBAAkB,OAAO,IAAA,gLAAY,EAAC,IAAI,OAAO,WAAW;YAAI;YACzE;gBAAE,OAAO;gBAAU,OAAO;YAAY;YACtC;gBAAE,OAAO;gBAAkB,OAAO,SAAS,MAAM,CAAC,QAAQ;YAAG;SAChE;QACD,IAAI,WAAW,OAAO,MAAM,CAAC,wBAAwB,MAAM,MAAM,SAAS,6KAAS,CAAC,MAAM;QAE1F,WAAW;QACX,MAAM,QAAQ,IAAI,2KAAQ,CAAC;QAC3B,MAAM,UAA4B;YAC9B;gBAAE,QAAQ;gBAAQ,QAAQ;gBAAG,OAAO;YAAO;YAC3C;gBAAE,QAAQ;gBAAe,QAAQ;gBAAG,OAAO;YAAO;YAClD;gBAAE,QAAQ;gBAAU,QAAQ;gBAAG,OAAO;YAAS;YAC/C;gBAAE,QAAQ;gBAAU,QAAQ;gBAAG,OAAO;YAAQ;YAC9C;gBAAE,QAAQ;gBAAQ,QAAQ;gBAAG,OAAO;YAAQ;SAC/C;QAED,MAAM,OAAO,SAAS,GAAG,CAAC,CAAA;YACtB,MAAM,SAAS,IAAI,MAAM,KAAK;YAC9B,OAAO;gBACH,IAAA,gLAAY,EAAC,IAAI,IAAI;gBACrB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,WAAW;gBACtB,IAAA,kLAAc,EAAC,IAAI,MAAM;gBACzB,SAAS,IAAA,kLAAc,EAAC,IAAI,MAAM,IAAI;aACzC;QACL;QAEA,WAAW,MAAM,MAAM,CAAC,SAAS,MAAM;QAEvC,sBAAsB;QACtB,MAAM,SAAS,IAAI,6KAAS,CAAC;QAC7B,MAAM,UAAwB;YAC1B;gBAAE,OAAO;gBAAgB,OAAO,IAAA,kLAAc,EAAC;YAAa;YAC5D;gBAAE,OAAO;gBAAc,OAAO,IAAA,kLAAc,EAAC;YAAW;YACxD;gBAAE,OAAO;gBAAe,OAAO,IAAA,kLAAc,EAAC;gBAAa,SAAS;YAAK;SAC5E;QAED,MAAM,gBAAgB,IAAI,2BAA2B;QACrD,IAAI,WAAW,gBAAgB,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS,KAAK,6KAAS,CAAC,MAAM,GAAG,IAAI;YACtF,IAAI,OAAO;YACX,WAAW,6KAAS,CAAC,MAAM;QAC/B;QAEA,WAAW,OAAO,gBAAgB,CAAC,SAAS;QAE5C,mCAAmC;QACnC,MAAM,aAAa,IAAI,gBAAgB;QACvC,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,IAAK;YACpC,IAAI,OAAO,CAAC;YACZ,OAAO,gBAAgB,CAAC,GAAG;QAC7B;QAEA,IAAI,IAAI,CAAC,CAAC,UAAU,EAAE,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC;IACtG;AACF"}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdfGenerator.ts"],"sourcesContent":["\r\nimport { Invoice, User } from \"@/data/mockDatabase\";\r\nimport { InvoicePDF } from \"./pdf/InvoicePDF\";\r\nimport { StatementPDF } from \"./pdf/StatementPDF\";\r\n\r\n// Facade for backward compatibility\r\nexport const generateInvoicePDF = async (invoice: Invoice, user: User | null) => {\r\n    await InvoicePDF.generate(invoice, user);\r\n};\r\n\r\nexport const generateStatementPDF = async (invoices: Invoice[], user: User | null, periodLabel: string) => {\r\n    await StatementPDF.generate(invoices, user, periodLabel);\r\n};\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;;;AAGO,MAAM,qBAAqB,OAAO,SAAkB;IACvD,MAAM,+KAAU,CAAC,QAAQ,CAAC,SAAS;AACvC;AAEO,MAAM,uBAAuB,OAAO,UAAqB,MAAmB;IAC/E,MAAM,mLAAY,CAAC,QAAQ,CAAC,UAAU,MAAM;AAChD"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/preview/PreviewHeader.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface PreviewHeaderProps {\r\n  reference: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const PreviewHeader = ({ reference, onClose }: PreviewHeaderProps) => (\r\n  <header className=\"p-4 sm:p-6 flex items-center justify-between border-b border-gray-100 dark:border-white/5 shrink-0\">\r\n    <div>\r\n      <h2 className=\"text-xl font-serif font-bold text-gray-900 dark:text-white\">Invoice Preview</h2>\r\n      <p className=\"text-sm text-gray-500 dark:text-gray-400\">Reference: {reference}</p>\r\n    </div>\r\n    <button \r\n      onClick={onClose}\r\n      className=\"p-2 bg-gray-100 dark:bg-white/5 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400 transition-colors\"\r\n      aria-label=\"Close modal\"\r\n    >\r\n      <X size={20} />\r\n    </button>\r\n  </header>\r\n);\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAOO,MAAM,gBAAgB,CAAC,EAAE,SAAS,EAAE,OAAO,EAAsB,iBACtE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAA6D;;;;;;kCAC3E,8OAAC;wBAAE,WAAU;;4BAA2C;4BAAY;;;;;;;;;;;;;0BAEtE,8OAAC;gBACC,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,8OAAC,iMAAC;oBAAC,MAAM"}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/preview/PreviewItems.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Invoice } from '@/data/types';\r\nimport { ArrowRightCircle } from 'lucide-react';\r\n\r\nexport const PreviewItems = ({ items, onViewJob }: { items: Invoice['items'], onViewJob?: (jobId: string) => void }) => (\r\n  <div className=\"overflow-x-auto\">\r\n    <table className=\"w-full text-left\">\r\n      <thead>\r\n        <tr className=\"border-b border-gray-200 dark:border-white/10\">\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400\">Description</th>\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400 text-center\">Qty</th>\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400 text-right\">Rate</th>\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400 text-right\">Amount</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {items.map((item, index) => (\r\n          <tr key={index} className=\"border-b border-gray-100 dark:border-white/5\">\r\n            <td className=\"p-3\">\r\n                <p className=\"font-medium text-gray-800 dark:text-gray-200\">{item.description}</p>\r\n                {item.jobId && (\r\n                  <p \r\n                    onClick={() => onViewJob && item.jobId && onViewJob(item.jobId)}\r\n                    className={`text-xs mt-0.5 flex items-center gap-1 ${onViewJob ? 'text-jambo-600 dark:text-jambo-400 cursor-pointer hover:underline' : 'text-gray-500 dark:text-gray-400'}`}\r\n                  >\r\n                    Job Ref: {item.jobId} {onViewJob && <ArrowRightCircle size={10} />}\r\n                  </p>\r\n                )}\r\n            </td>\r\n            <td className=\"p-3 text-center text-gray-600 dark:text-gray-400\">{item.quantity || '-'}</td>\r\n            <td className=\"p-3 text-right text-gray-600 dark:text-gray-400\">{item.rate ? `£${item.rate.toFixed(2)}` : '-'}</td>\r\n            <td className=\"p-3 font-mono text-right text-gray-700 dark:text-gray-300\">£{item.amount.toFixed(2)}</td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n);"],"names":[],"mappings":";;;;;AAEA;;;AAEO,MAAM,eAAe,CAAC,EAAE,KAAK,EAAE,SAAS,EAAoE,iBACjH,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;;8BACf,8OAAC;8BACC,cAAA,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC;gCAAG,WAAU;0CAAmE;;;;;;0CACjF,8OAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAC7F,8OAAC;gCAAG,WAAU;0CAA8E;;;;;;0CAC5F,8OAAC;gCAAG,WAAU;0CAA8E;;;;;;;;;;;;;;;;;8BAGhG,8OAAC;8BACE,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,8OAAC;4BAAe,WAAU;;8CACxB,8OAAC;oCAAG,WAAU;;sDACV,8OAAC;4CAAE,WAAU;sDAAgD,KAAK,WAAW;;;;;;wCAC5E,KAAK,KAAK,kBACT,8OAAC;4CACC,SAAS,IAAM,aAAa,KAAK,KAAK,IAAI,UAAU,KAAK,KAAK;4CAC9D,WAAW,CAAC,uCAAuC,EAAE,YAAY,sEAAsE,oCAAoC;;gDAC5K;gDACW,KAAK,KAAK;gDAAC;gDAAE,2BAAa,8OAAC,sPAAgB;oDAAC,MAAM;;;;;;;;;;;;;;;;;;8CAIpE,8OAAC;oCAAG,WAAU;8CAAoD,KAAK,QAAQ,IAAI;;;;;;8CACnF,8OAAC;oCAAG,WAAU;8CAAmD,KAAK,IAAI,GAAG,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG;;;;;;8CAC1G,8OAAC;oCAAG,WAAU;;wCAA4D;wCAAE,KAAK,MAAM,CAAC,OAAO,CAAC;;;;;;;;2BAdzF"}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/preview/PreviewSummary.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Invoice } from '@/data/types';\r\n\r\nexport const PreviewSummary = ({ invoice }: { invoice: Invoice }) => {\r\n  const hasVat = invoice.vatRate && invoice.vatRate > 0;\r\n  const subtotal = invoice.subtotal || (hasVat ? invoice.amount / (1 + (invoice.vatRate! / 100)) : invoice.amount);\r\n  const vatAmount = invoice.amount - subtotal;\r\n\r\n  return (\r\n    <div className=\"mt-8 flex justify-end\">\r\n        <div className=\"w-full max-w-xs space-y-2\">\r\n            <div className=\"flex justify-between text-gray-600 dark:text-gray-300\">\r\n                <span>Subtotal</span>\r\n                <span>£{subtotal.toFixed(2)}</span>\r\n            </div>\r\n            {hasVat && (\r\n                <div className=\"flex justify-between text-gray-600 dark:text-gray-300\">\r\n                    <span>VAT ({invoice.vatRate}%)</span>\r\n                    <span>£{vatAmount.toFixed(2)}</span>\r\n                </div>\r\n            )}\r\n            <div className=\"h-px bg-gray-200 dark:bg-white/10\"></div>\r\n            <div className=\"flex justify-between font-bold text-xl text-gray-900 dark:text-white\">\r\n                <span>Total Due</span>\r\n                <span>£{invoice.amount.toFixed(2)}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;AAIO,MAAM,iBAAiB,CAAC,EAAE,OAAO,EAAwB;IAC9D,MAAM,SAAS,QAAQ,OAAO,IAAI,QAAQ,OAAO,GAAG;IACpD,MAAM,WAAW,QAAQ,QAAQ,IAAI,CAAC,SAAS,QAAQ,MAAM,GAAG,CAAC,IAAK,QAAQ,OAAO,GAAI,GAAI,IAAI,QAAQ,MAAM;IAC/G,MAAM,YAAY,QAAQ,MAAM,GAAG;IAEnC,qBACE,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;sCAAK;;;;;;sCACN,8OAAC;;gCAAK;gCAAE,SAAS,OAAO,CAAC;;;;;;;;;;;;;gBAE5B,wBACG,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;;gCAAK;gCAAM,QAAQ,OAAO;gCAAC;;;;;;;sCAC5B,8OAAC;;gCAAK;gCAAE,UAAU,OAAO,CAAC;;;;;;;;;;;;;8BAGlC,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;sCAAK;;;;;;sCACN,8OAAC;;gCAAK;gCAAE,QAAQ,MAAM,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAK/C"}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/components/StatusBadge.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\nexport const StatusBadge = ({ status }: { status: string }) => {\r\n    const statusColors: Record<string, string> = {\r\n      'Paid': 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-800',\r\n      'Pending': 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200 dark:border-orange-800',\r\n      'Overdue': 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800',\r\n      'Draft': 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700',\r\n  };\r\n  \r\n  // Default to Draft if status unknown\r\n  const colorClass = statusColors[status] || statusColors['Draft'];\r\n\r\n  return (\r\n    <span className={`px-3 py-1 rounded-full text-xs font-bold border ${colorClass}`}>\r\n      {status}\r\n    </span>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,cAAc,CAAC,EAAE,MAAM,EAAsB;IACtD,MAAM,eAAuC;QAC3C,QAAQ;QACR,WAAW;QACX,WAAW;QACX,SAAS;IACb;IAEA,qCAAqC;IACrC,MAAM,aAAa,YAAY,CAAC,OAAO,IAAI,YAAY,CAAC,QAAQ;IAEhE,qBACE,8OAAC;QAAK,WAAW,CAAC,gDAAgD,EAAE,YAAY;kBAC7E;;;;;;AAGP"}},
    {"offset": {"line": 1159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/InvoicePreviewModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Download, Loader2, CheckCircle, Edit, User as UserIcon } from 'lucide-react';\r\nimport { Invoice, User } from '@/data/types';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { generateInvoicePDF } from './pdfGenerator';\r\nimport { PreviewHeader } from './preview/PreviewHeader';\r\nimport { PreviewItems } from './preview/PreviewItems';\r\nimport { PreviewSummary } from './preview/PreviewSummary';\r\nimport { StatusBadge } from './components/StatusBadge';\r\nimport { Modal } from '../../../ui/Modal';\r\n\r\ninterface InvoicePreviewModalProps {\r\n  invoice: Invoice;\r\n  onClose: () => void;\r\n  onMarkPaid?: () => void;\r\n  onEdit?: (invoice: Invoice) => void;\r\n  onViewJob?: (jobId: string) => void;\r\n  onViewProfile?: (userId: string) => void;\r\n}\r\n\r\nexport const InvoicePreviewModal = ({ invoice, onClose, onMarkPaid, onEdit, onViewJob, onViewProfile }: InvoicePreviewModalProps) => {\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [isPaying, setIsPaying] = useState(false);\r\n  const currentUser = mockDb.auth.getCurrentUser();\r\n  const isAdmin = currentUser?.role === 'admin';\r\n  \r\n  // ROBUST USER RESOLUTION\r\n  let user: User | undefined | null = null;\r\n\r\n  if (invoice.customRecipient) {\r\n      user = {\r\n          id: 'custom',\r\n          firstName: invoice.customRecipient.name || 'Unknown',\r\n          lastName: '',\r\n          email: invoice.customRecipient.email || '',\r\n          location: invoice.customRecipient.address || '',\r\n          role: 'client',\r\n          isVerified: true,\r\n          createdAt: ''\r\n      } as any;\r\n  } else if (invoice.userId) {\r\n      user = mockDb.getAllUsers().find(u => u.id === invoice.userId);\r\n      if (!user) {\r\n           user = {\r\n              id: invoice.userId,\r\n              firstName: 'Unknown',\r\n              lastName: 'User',\r\n              email: '',\r\n              role: 'client',\r\n              isVerified: false,\r\n              createdAt: ''\r\n           } as any;\r\n      }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = 'hidden';\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const handleDownload = async () => {\r\n    setIsGenerating(true);\r\n    try {\r\n      await generateInvoicePDF(invoice, user || null);\r\n    } catch (error) {\r\n      console.error(\"Failed to generate PDF\", error);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handlePay = () => {\r\n      if (!onMarkPaid) return;\r\n      setIsPaying(true);\r\n      setTimeout(() => {\r\n          onMarkPaid();\r\n          setIsPaying(false);\r\n      }, 1000);\r\n  }\r\n\r\n  // Handle profile click\r\n  const handleProfileClick = () => {\r\n      if (onViewProfile && user && user.id !== 'custom') {\r\n          onViewProfile(user.id);\r\n      }\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} size=\"4xl\">\r\n        <PreviewHeader reference={invoice.reference} onClose={onClose} />\r\n\r\n        {/* Scrollable Content */}\r\n        <main className=\"flex-1 overflow-y-auto custom-scrollbar p-4 sm:p-8\">\r\n          <div className=\"flex flex-col md:flex-row gap-6 md:gap-8 mb-8\">\r\n            {/* From */}\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-xs font-bold uppercase tracking-wider text-gray-400 mb-2\">From</p>\r\n              <p className=\"font-bold text-gray-900 dark:text-white\">Jambo Linguists Ltd</p>\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-300\">\r\n                First Floor, Radley House,<br />\r\n                Richardshaw Rd, Pudsey, LS28 6LE\r\n              </p>\r\n            </div>\r\n            \r\n            {/* To */}\r\n            <div className=\"flex-1 md:text-right\">\r\n              <p className=\"text-xs font-bold uppercase tracking-wider text-gray-400 mb-2\">Billed To</p>\r\n              <div \r\n                className={`inline-block text-left md:text-right ${onViewProfile && user?.id !== 'custom' ? 'cursor-pointer group' : ''}`}\r\n                onClick={handleProfileClick}\r\n              >\r\n                  <p className={`font-bold text-gray-900 dark:text-white flex items-center md:justify-end gap-2 ${onViewProfile && user?.id !== 'custom' ? 'group-hover:text-jambo-600 dark:group-hover:text-jambo-400 transition-colors' : ''}`}>\r\n                    {user?.firstName} {user?.lastName}\r\n                    {onViewProfile && user?.id !== 'custom' && <UserIcon size={14} className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n                  </p>\r\n                  {user?.email && <p className=\"text-sm text-gray-600 dark:text-gray-300\">{user.email}</p>}\r\n                  {user?.location && <p className=\"text-sm text-gray-600 dark:text-gray-300\">{user.location}</p>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/10 mb-8\">\r\n            <div>\r\n              <p className=\"text-xs font-bold uppercase text-gray-400\">Issue Date</p>\r\n              <p className=\"font-medium text-gray-800 dark:text-gray-200 text-sm md:text-base\">{new Date(invoice.date).toLocaleDateString('en-GB')}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs font-bold uppercase text-gray-400\">Due Date</p>\r\n              <p className=\"font-medium text-gray-800 dark:text-gray-200 text-sm md:text-base\">{new Date(invoice.dueDate).toLocaleDateString('en-GB')}</p>\r\n            </div>\r\n            <div className=\"col-span-2 md:col-span-1 md:text-right flex md:block justify-between items-center\">\r\n              <p className=\"text-xs font-bold uppercase text-gray-400 mb-1\">Status</p>\r\n              <StatusBadge status={invoice.status} />\r\n            </div>\r\n          </div>\r\n          \r\n          <PreviewItems items={invoice.items} onViewJob={onViewJob} />\r\n          <PreviewSummary invoice={invoice} />\r\n          \r\n          {invoice.notes && (\r\n              <div className=\"mt-8 p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5\">\r\n                  <p className=\"text-xs font-bold uppercase text-gray-400 mb-1\">Notes</p>\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-300\">{invoice.notes}</p>\r\n              </div>\r\n          )}\r\n\r\n        </main>\r\n        \r\n        {/* Footer */}\r\n        <footer className=\"p-4 sm:p-6 bg-gray-50 dark:bg-white/5 border-t border-gray-100 dark:border-white/5 flex flex-col sm:flex-row justify-between gap-3 shrink-0\">\r\n          <div className=\"flex gap-3 w-full sm:w-auto\">\r\n             <button\r\n                onClick={handleDownload}\r\n                disabled={isGenerating}\r\n                className=\"flex-1 sm:flex-none bg-white dark:bg-white/10 hover:bg-gray-50 dark:hover:bg-white/20 border border-gray-200 dark:border-white/10 text-gray-700 dark:text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all disabled:opacity-60 text-sm\"\r\n            >\r\n                {isGenerating ? <Loader2 size={18} className=\"animate-spin\" /> : <Download size={18} />}\r\n                {isGenerating ? 'Generating...' : 'PDF'}\r\n            </button>\r\n            \r\n            {isAdmin && onEdit && (\r\n                <button\r\n                    onClick={() => onEdit(invoice)}\r\n                    className=\"flex-1 sm:flex-none bg-white dark:bg-white/10 hover:bg-gray-50 dark:hover:bg-white/20 border border-gray-200 dark:border-white/10 text-gray-700 dark:text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all text-sm\"\r\n                >\r\n                    <Edit size={18} /> Edit\r\n                </button>\r\n            )}\r\n          </div>\r\n          \r\n          {onMarkPaid && invoice.status !== 'Paid' && (\r\n              <button \r\n                onClick={handlePay}\r\n                disabled={isPaying}\r\n                className=\"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg flex items-center justify-center gap-2 transition-all disabled:opacity-60 text-sm\"\r\n              >\r\n                  {isPaying ? <Loader2 size={18} className=\"animate-spin\" /> : <CheckCircle size={18} />}\r\n                  Mark as Paid\r\n              </button>\r\n          )}\r\n        </footer>\r\n    </Modal>\r\n  );\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1611, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/Toast.tsx"],"sourcesContent":["\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CheckCircle, AlertCircle, X, Info } from 'lucide-react';\r\n\r\nexport type ToastType = 'success' | 'error' | 'info';\r\n\r\ninterface ToastProps {\r\n  message: string;\r\n  type: ToastType;\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const Toast = ({ message, type, isVisible, onClose }: ToastProps) => {\r\n  useEffect(() => {\r\n    if (isVisible) {\r\n      const timer = setTimeout(() => {\r\n        onClose();\r\n      }, 4000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isVisible, onClose]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const styles = {\r\n    success: 'bg-green-600 text-white',\r\n    error: 'bg-red-600 text-white',\r\n    info: 'bg-blue-600 text-white',\r\n  };\r\n\r\n  const icons = {\r\n    success: CheckCircle,\r\n    error: AlertCircle,\r\n    info: Info,\r\n  };\r\n\r\n  const Icon = icons[type];\r\n\r\n  return (\r\n    <div className={`fixed top-6 left-1/2 -translate-x-1/2 z-[10000] flex items-center gap-3 px-6 py-3 rounded-full shadow-xl animate-in fade-in slide-in-from-top-4 duration-300 ${styles[type]}`}>\r\n      <Icon size={20} className=\"shrink-0\" />\r\n      <span className=\"font-bold text-sm md:text-base\">{message}</span>\r\n      <button onClick={onClose} className=\"bg-white/20 hover:bg-white/30 rounded-full p-1 transition-colors\">\r\n        <X size={14} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;;;;AAWO,MAAM,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAc;IACrE,IAAA,kNAAS,EAAC;QACR,IAAI,WAAW;YACb,MAAM,QAAQ,WAAW;gBACvB;YACF,GAAG;YACH,OAAO,IAAM,aAAa;QAC5B;IACF,GAAG;QAAC;QAAW;KAAQ;IAEvB,IAAI,CAAC,WAAW,OAAO;IAEvB,MAAM,SAAS;QACb,SAAS;QACT,OAAO;QACP,MAAM;IACR;IAEA,MAAM,QAAQ;QACZ,SAAS,0OAAW;QACpB,OAAO,mOAAW;QAClB,MAAM,0MAAI;IACZ;IAEA,MAAM,OAAO,KAAK,CAAC,KAAK;IAExB,qBACE,8OAAC;QAAI,WAAW,CAAC,6JAA6J,EAAE,MAAM,CAAC,KAAK,EAAE;;0BAC5L,8OAAC;gBAAK,MAAM;gBAAI,WAAU;;;;;;0BAC1B,8OAAC;gBAAK,WAAU;0BAAkC;;;;;;0BAClD,8OAAC;gBAAO,SAAS;gBAAS,WAAU;0BAClC,cAAA,8OAAC,iMAAC;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAIjB"}},
    {"offset": {"line": 1693, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/training/pdf/PDFConfig.ts"],"sourcesContent":["\r\nexport const COLORS = {\r\n  PRIMARY: { r: 132, g: 27, b: 160 }, // Jambo Purple\r\n  ORANGE: { r: 234, g: 141, b: 53 }, // Brand Orange\r\n  GOLD: { r: 196, g: 161, b: 109 },\r\n  SLATE_900: { r: 15, g: 23, b: 42 },\r\n  SLATE_700: { r: 51, g: 65, b: 85 },\r\n  SLATE_500: { r: 100, g: 116, b: 139 },\r\n};\r\n\r\nexport const CONSTANTS = {\r\n  A4_LANDSCAPE_WIDTH: 297,\r\n  A4_LANDSCAPE_HEIGHT: 210,\r\n  MARGIN: 15,\r\n  // Empty source list to force fallback usage and prevent CORS errors if needed\r\n  LOGO_SOURCES: []\r\n};\r\n\r\nconst BASE64_LOGO_FALLBACK = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJJSURBVHgB7Zq9TsMwFIVPU6U8AEtL34AlEm9A4gVY2BjbE2DhBViQeAISL8ASqR9QpUoIEU0VO3aT2CFt05TzS6rU9vxz7Hsd20mCIIgWwzAc0jT9pG1F0+Q4jufW1t+Y5/mO9s60L2g/0f6kvXp+fka9Xg/9fX2j6eXlBQ36/T61Wi1qNpvUaDTQ/uHhAU2+v7+p3W5Tq9WiVqtFrVaLut0udTodajab1Gw2qdVq0fPzM02+vLygwWq1onq9jnZ4VqvV0O73+zQYDIg2kwk1Gg1qNpvUarWo1WpRp9OhbreLdjidTtFgMKDpdEpN2k+0X2lf0D6Z9g3tJ9p3tG9oP9G+o31D+4n2He0b2k+072jf0H6ifUf7hvYT7TvaN7SfaN/RvqH9RPuO9g3tJ9p3tG9oP9G+o31D+4n2He0b2k+072jf0H6ifUf7hvYT7TvaN7SfaN/R/g/t/wF/fH6iQRAE0S7/AE/pb7u1F+XJAAAAAElFTkSuQmCC\";\r\n\r\nexport const formatDateUK = (dateStr: string) => {\r\n  if (!dateStr) return 'N/A';\r\n  return new Date(dateStr).toLocaleDateString('en-GB', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\nconst fetchImageAsBase64 = async (url: string): Promise<string | null> => {\r\n    console.log(`[PDF Config] Attempting to fetch image from: ${url}`);\r\n    try {\r\n        // Add timeout to prevent hanging\r\n        const controller = new AbortController();\r\n        const id = setTimeout(() => controller.abort(), 3000); // 3s timeout\r\n\r\n        const response = await fetch(url, { signal: controller.signal });\r\n        clearTimeout(id);\r\n\r\n        if (!response.ok) {\r\n            console.warn(`[PDF Config] Failed to fetch image. Status: ${response.status}`);\r\n            return null;\r\n        }\r\n        const blob = await response.blob();\r\n        return new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                console.log(`[PDF Config] Successfully converted image to base64 (length: ${reader.result?.toString().length})`);\r\n                resolve(reader.result as string);\r\n            };\r\n            reader.onerror = (e) => {\r\n                console.error(\"[PDF Config] FileReader error:\", e);\r\n                resolve(null);\r\n            };\r\n            reader.readAsDataURL(blob);\r\n        });\r\n    } catch (e: any) {\r\n        console.error(`[PDF Config] Error fetching image from ${url}:`, e.message);\r\n        return null; \r\n    }\r\n};\r\n\r\nexport const getCompanyLogo = async (): Promise<string | null> => {\r\n    console.log(\"[PDF Config] Getting company logo...\");\r\n    // 1. Try fetching external URLs\r\n    for (const source of CONSTANTS.LOGO_SOURCES) {\r\n        const logoData = await fetchImageAsBase64(source);\r\n        if (logoData) return logoData;\r\n    }\r\n    // 2. Fallback\r\n    console.log(\"[PDF Config] Using fallback logo.\");\r\n    return BASE64_LOGO_FALLBACK;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AACO,MAAM,SAAS;IACpB,SAAS;QAAE,GAAG;QAAK,GAAG;QAAI,GAAG;IAAI;IACjC,QAAQ;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAG;IAChC,MAAM;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;IAC/B,WAAW;QAAE,GAAG;QAAI,GAAG;QAAI,GAAG;IAAG;IACjC,WAAW;QAAE,GAAG;QAAI,GAAG;QAAI,GAAG;IAAG;IACjC,WAAW;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;AACtC;AAEO,MAAM,YAAY;IACvB,oBAAoB;IACpB,qBAAqB;IACrB,QAAQ;IACR,8EAA8E;IAC9E,cAAc,EAAE;AAClB;AAEA,MAAM,uBAAuB;AAEtB,MAAM,eAAe,CAAC;IAC3B,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,IAAI,KAAK,SAAS,kBAAkB,CAAC,SAAS;QACnD,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF;AAEA,MAAM,qBAAqB,OAAO;IAC9B,QAAQ,GAAG,CAAC,CAAC,6CAA6C,EAAE,KAAK;IACjE,IAAI;QACA,iCAAiC;QACjC,MAAM,aAAa,IAAI;QACvB,MAAM,KAAK,WAAW,IAAM,WAAW,KAAK,IAAI,OAAO,aAAa;QAEpE,MAAM,WAAW,MAAM,MAAM,KAAK;YAAE,QAAQ,WAAW,MAAM;QAAC;QAC9D,aAAa;QAEb,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,QAAQ,IAAI,CAAC,CAAC,4CAA4C,EAAE,SAAS,MAAM,EAAE;YAC7E,OAAO;QACX;QACA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,IAAI,QAAQ,CAAC;YAChB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACf,QAAQ,GAAG,CAAC,CAAC,6DAA6D,EAAE,OAAO,MAAM,EAAE,WAAW,OAAO,CAAC,CAAC;gBAC/G,QAAQ,OAAO,MAAM;YACzB;YACA,OAAO,OAAO,GAAG,CAAC;gBACd,QAAQ,KAAK,CAAC,kCAAkC;gBAChD,QAAQ;YACZ;YACA,OAAO,aAAa,CAAC;QACzB;IACJ,EAAE,OAAO,GAAQ;QACb,QAAQ,KAAK,CAAC,CAAC,uCAAuC,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,OAAO;QACzE,OAAO;IACX;AACJ;AAEO,MAAM,iBAAiB;IAC1B,QAAQ,GAAG,CAAC;IACZ,gCAAgC;IAChC,KAAK,MAAM,UAAU,UAAU,YAAY,CAAE;QACzC,MAAM,WAAW,MAAM,mBAAmB;QAC1C,IAAI,UAAU,OAAO;IACzB;IACA,cAAc;IACd,QAAQ,GAAG,CAAC;IACZ,OAAO;AACX"}},
    {"offset": {"line": 1798, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/training/pdf/CertificateTemplate.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport class CertificateTemplate {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private height: number;\r\n\r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = CONSTANTS.A4_LANDSCAPE_WIDTH;\r\n    this.height = CONSTANTS.A4_LANDSCAPE_HEIGHT;\r\n  }\r\n\r\n  drawBackground(logoUrl: string | null) {\r\n    // --- TOP LEFT DECORATION ---\r\n    // Large Purple Triangle\r\n    this.doc.setFillColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    // Draw triangle: (x1,y1, x2,y2, x3,y3)\r\n    this.doc.triangle(0, 0, 100, 0, 0, 100, 'F');\r\n\r\n    // Smaller Orange Triangle overlay\r\n    this.doc.setFillColor(COLORS.ORANGE.r, COLORS.ORANGE.g, COLORS.ORANGE.b);\r\n    this.doc.triangle(0, 0, 80, 0, 0, 80, 'F');\r\n\r\n    // --- LOGO RENDERING ---\r\n    if (logoUrl && typeof logoUrl === 'string' && logoUrl.length > 20) {\r\n      try {\r\n        let format = 'JPEG';\r\n        if (logoUrl.includes('image/png')) {\r\n            format = 'PNG';\r\n        }\r\n        // Add Logo on top of decoration\r\n        this.doc.addImage(logoUrl, format, 15, 15, 40, 15);\r\n      } catch (e: any) {\r\n        console.warn(\"[PDF] Failed to add logo image to certificate:\", e);\r\n      }\r\n    }\r\n\r\n    // --- BOTTOM RIGHT DECORATION ---\r\n    // Large Gold Triangle\r\n    this.doc.setFillColor(COLORS.GOLD.r, COLORS.GOLD.g, COLORS.GOLD.b);\r\n    this.doc.triangle(\r\n        this.width, this.height, \r\n        this.width - 80, this.height, \r\n        this.width, this.height - 80, \r\n        'F'\r\n    );\r\n\r\n    // Medium Purple Triangle\r\n    this.doc.setFillColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.triangle(\r\n        this.width, this.height, \r\n        this.width - 60, this.height, \r\n        this.width, this.height - 60, \r\n        'F'\r\n    );\r\n\r\n    // --- FRAME BORDER ---\r\n    this.doc.setDrawColor(COLORS.GOLD.r, COLORS.GOLD.g, COLORS.GOLD.b);\r\n    this.doc.setLineWidth(1.5);\r\n    this.doc.rect(8, 8, this.width - 16, this.height - 16);\r\n  }\r\n}"],"names":[],"mappings":";;;;AACA;;AAEO,MAAM;IACH,IAAW;IACX,MAAc;IACd,OAAe;IAEvB,YAAY,GAAU,CAAE;QACtB,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,KAAK,GAAG,8KAAS,CAAC,kBAAkB;QACzC,IAAI,CAAC,MAAM,GAAG,8KAAS,CAAC,mBAAmB;IAC7C;IAEA,eAAe,OAAsB,EAAE;QACrC,8BAA8B;QAC9B,wBAAwB;QACxB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,2KAAM,CAAC,OAAO,CAAC,CAAC,EAAE,2KAAM,CAAC,OAAO,CAAC,CAAC,EAAE,2KAAM,CAAC,OAAO,CAAC,CAAC;QAC1E,uCAAuC;QACvC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,GAAG,KAAK,GAAG,GAAG,KAAK;QAExC,kCAAkC;QAClC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,2KAAM,CAAC,MAAM,CAAC,CAAC,EAAE,2KAAM,CAAC,MAAM,CAAC,CAAC,EAAE,2KAAM,CAAC,MAAM,CAAC,CAAC;QACvE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI;QAEtC,yBAAyB;QACzB,IAAI,WAAW,OAAO,YAAY,YAAY,QAAQ,MAAM,GAAG,IAAI;YACjE,IAAI;gBACF,IAAI,SAAS;gBACb,IAAI,QAAQ,QAAQ,CAAC,cAAc;oBAC/B,SAAS;gBACb;gBACA,gCAAgC;gBAChC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,QAAQ,IAAI,IAAI,IAAI;YACjD,EAAE,OAAO,GAAQ;gBACf,QAAQ,IAAI,CAAC,kDAAkD;YACjE;QACF;QAEA,kCAAkC;QAClC,sBAAsB;QACtB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,2KAAM,CAAC,IAAI,CAAC,CAAC,EAAE,2KAAM,CAAC,IAAI,CAAC,CAAC,EAAE,2KAAM,CAAC,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,GAAG,CAAC,QAAQ,CACb,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EACvB,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,MAAM,EAC5B,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,GAAG,IAC1B;QAGJ,yBAAyB;QACzB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,2KAAM,CAAC,OAAO,CAAC,CAAC,EAAE,2KAAM,CAAC,OAAO,CAAC,CAAC,EAAE,2KAAM,CAAC,OAAO,CAAC,CAAC;QAC1E,IAAI,CAAC,GAAG,CAAC,QAAQ,CACb,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EACvB,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,MAAM,EAC5B,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,GAAG,IAC1B;QAGJ,uBAAuB;QACvB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,2KAAM,CAAC,IAAI,CAAC,CAAC,EAAE,2KAAM,CAAC,IAAI,CAAC,CAAC,EAAE,2KAAM,CAAC,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC;QACtB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,MAAM,GAAG;IACrD;AACF"}},
    {"offset": {"line": 1852, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/training/pdf/CertificateContent.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { EnrichedCourse, User } from \"@/data/types\";\r\nimport { COLORS, CONSTANTS, formatDateUK } from \"./PDFConfig\";\r\n\r\nexport class CertificateContent {\r\n  private doc: jsPDF;\r\n  private centerX: number;\r\n\r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.centerX = CONSTANTS.A4_LANDSCAPE_WIDTH / 2;\r\n  }\r\n\r\n  drawText(user: User, course: EnrichedCourse) {\r\n    // --- MAIN TITLES ---\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(50);\r\n    this.doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.text('Certificate', this.centerX, 60, { align: 'center' });\r\n\r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(20);\r\n    this.doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n    this.doc.text('OF ACHIEVEMENT', this.centerX, 72, { align: 'center' });\r\n    \r\n    // --- RECIPIENT ---\r\n    this.doc.setFontSize(14);\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n    this.doc.text('This is to certify that', this.centerX, 90, { align: 'center' });\r\n    \r\n    this.doc.setFont('times', 'bold');\r\n    this.doc.setFontSize(36);\r\n    this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n    this.doc.text(`${user.firstName} ${user.lastName}`, this.centerX, 105, { align: 'center' });\r\n\r\n    // --- COURSE DETAILS ---\r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(14);\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n    this.doc.text('has successfully completed the course', this.centerX, 120, { align: 'center' });\r\n\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(18);\r\n    this.doc.setTextColor(COLORS.ORANGE.r, COLORS.ORANGE.g, COLORS.ORANGE.b);\r\n    this.doc.text(course.title, this.centerX, 130, { align: 'center' });\r\n    \r\n    // --- SIGNATURES & DATE ---\r\n    const lineY = 165;\r\n    const sigWidth = 60;\r\n    const dateX = this.centerX - 80;\r\n    const sigX = this.centerX + 80;\r\n\r\n    // Date Line\r\n    this.doc.setDrawColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n    this.doc.setLineWidth(0.5);\r\n    this.doc.line(dateX - sigWidth/2, lineY, dateX + sigWidth/2, lineY);\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(10);\r\n    this.doc.text('Date', dateX, lineY + 7, { align: 'center' });\r\n    const completionDate = course.progress?.completedAt ? formatDateUK(course.progress.completedAt) : '';\r\n    this.doc.setFont('times', 'italic');\r\n    this.doc.setFontSize(14);\r\n    this.doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n    this.doc.text(completionDate, dateX, lineY - 2, { align: 'center' });\r\n\r\n    // Signature Line\r\n    this.doc.line(sigX - sigWidth/2, lineY, sigX + sigWidth/2, lineY);\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(10);\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n    this.doc.text('Signature', sigX, lineY + 7, { align: 'center' });\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(11);\r\n    this.doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.text('Jambo Linguists Limited', sigX, lineY - 2, { align: 'center' });\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1945, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/training/pdf/CertificateGenerator.ts"],"sourcesContent":["\r\nimport { jsPDF } from 'jspdf';\r\nimport { EnrichedCourse, User } from '@/data/types';\r\nimport { CertificateTemplate } from './CertificateTemplate';\r\nimport { CertificateContent } from './CertificateContent';\r\nimport { getCompanyLogo } from './PDFConfig';\r\n\r\nexport const generateCertificatePDF = async (course: EnrichedCourse, user: User | null) => {\r\n    if (!user) {\r\n        console.error(\"[PDF Gen] User not found, cannot generate certificate.\");\r\n        return;\r\n    }\r\n\r\n    try {\r\n        console.log(`[PDF Gen] Starting generation for course \"${course.title}\" and user \"${user.firstName}\".`);\r\n        \r\n        console.log(\"[PDF Gen] Initializing jsPDF...\");\r\n        const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n        \r\n        const template = new CertificateTemplate(doc);\r\n        const content = new CertificateContent(doc);\r\n        \r\n        console.log(\"[PDF Gen] Fetching logo...\");\r\n        let logoUrl: string | null = null;\r\n        try {\r\n            logoUrl = await getCompanyLogo();\r\n        } catch (logoErr: any) {\r\n            console.warn(`[PDF Gen] Error getting logo: ${logoErr.message}`);\r\n        }\r\n\r\n        console.log(\"[PDF Gen] Drawing background...\");\r\n        template.drawBackground(logoUrl);\r\n\r\n        console.log(\"[PDF Gen] Drawing content...\");\r\n        content.drawText(user, course);\r\n\r\n        const filename = `Jambo_Certificate_${course.title.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`;\r\n        console.log(`[PDF Gen] Saving file: ${filename}`);\r\n        doc.save(filename);\r\n        \r\n        console.log(`[PDF Gen] Complete.`);\r\n    } catch (err: any) {\r\n        console.error(\"[PDF Gen] CRITICAL FAILURE:\", err);\r\n        throw err; \r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AACA;;;;;AAEO,MAAM,yBAAyB,OAAO,QAAwB;IACjE,IAAI,CAAC,MAAM;QACP,QAAQ,KAAK,CAAC;QACd;IACJ;IAEA,IAAI;QACA,QAAQ,GAAG,CAAC,CAAC,0CAA0C,EAAE,OAAO,KAAK,CAAC,YAAY,EAAE,KAAK,SAAS,CAAC,EAAE,CAAC;QAEtG,QAAQ,GAAG,CAAC;QACZ,MAAM,MAAM,IAAI,8JAAK,CAAC;YAAE,aAAa;YAAa,MAAM;YAAM,QAAQ;QAAK;QAE3E,MAAM,WAAW,IAAI,kMAAmB,CAAC;QACzC,MAAM,UAAU,IAAI,gMAAkB,CAAC;QAEvC,QAAQ,GAAG,CAAC;QACZ,IAAI,UAAyB;QAC7B,IAAI;YACA,UAAU,MAAM,IAAA,mLAAc;QAClC,EAAE,OAAO,SAAc;YACnB,QAAQ,IAAI,CAAC,CAAC,8BAA8B,EAAE,QAAQ,OAAO,EAAE;QACnE;QAEA,QAAQ,GAAG,CAAC;QACZ,SAAS,cAAc,CAAC;QAExB,QAAQ,GAAG,CAAC;QACZ,QAAQ,QAAQ,CAAC,MAAM;QAEvB,MAAM,WAAW,CAAC,kBAAkB,EAAE,OAAO,KAAK,CAAC,OAAO,CAAC,iBAAiB,KAAK,IAAI,CAAC;QACtF,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,UAAU;QAChD,IAAI,IAAI,CAAC;QAET,QAAQ,GAAG,CAAC,CAAC,mBAAmB,CAAC;IACrC,EAAE,OAAO,KAAU;QACf,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM;IACV;AACJ"}},
    {"offset": {"line": 1996, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/auth/AuthForm.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { ArrowRight, User, Mail, Phone, Lock, CheckCircle, FileText, AlertCircle, Loader2, Key, Eye, EyeOff } from 'lucide-react';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { COMPANY_INFO } from '@/data/constants';\r\n\r\ninterface AuthFormProps {\r\n  onStartOnboarding?: () => void;\r\n  onLogin: () => void;\r\n  title?: string;\r\n  subtitle?: string;\r\n  allowRegister?: boolean;\r\n  defaultEmail?: string;\r\n  demoConfig?: {\r\n    email: string;\r\n    password?: string;\r\n    label: string;\r\n  };\r\n}\r\n\r\nexport const AuthForm = ({ \r\n  onStartOnboarding, \r\n  onLogin, \r\n  title = \"Jambo Linguist Portal\",\r\n  subtitle = \"Freelancer Partner Network\",\r\n  allowRegister = true,\r\n  defaultEmail = '',\r\n  demoConfig\r\n}: AuthFormProps) => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  // Form State\r\n  const [email, setEmail] = useState(defaultEmail || (demoConfig?.email || '')); \r\n  const [password, setPassword] = useState(''); \r\n  const [firstName, setFirstName] = useState('');\r\n  const [lastName, setLastName] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    \r\n    // Basic validation\r\n    if (!email || !password) {\r\n        setError(\"Please enter both email and password.\");\r\n        return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    // Simulate network delay\r\n    setTimeout(() => {\r\n        if (isLogin) {\r\n            const result = mockDb.auth.login(email, password);\r\n            if (result.success) {\r\n                onLogin();\r\n            } else {\r\n                setError(result.error || 'Login failed. Please check your credentials.');\r\n                setIsLoading(false);\r\n            }\r\n        } else {\r\n            // Register\r\n            if (!allowRegister) return;\r\n            \r\n            if (password.length < 6) {\r\n                setError('Password must be at least 6 characters long.');\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n            \r\n            if (!firstName || !lastName) {\r\n                setError('Please fill in all required fields.');\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n            const result = mockDb.auth.register({\r\n                email,\r\n                firstName,\r\n                lastName,\r\n                phone,\r\n                password\r\n            });\r\n            \r\n            if (result.success) {\r\n                if (onStartOnboarding) onStartOnboarding();\r\n            } else {\r\n                setError(result.error || 'Registration failed');\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n    }, 1200);\r\n  };\r\n\r\n  const fillDemo = () => {\r\n      if (demoConfig) {\r\n          setEmail(demoConfig.email);\r\n          setPassword(demoConfig.password || '');\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-grow lg:flex-grow-0 lg:w-7/12 bg-gray-50 dark:bg-[#0f0a15] flex items-center justify-center p-6 md:p-12 relative transition-colors duration-300\">\r\n         <div className=\"w-full max-w-md bg-white dark:bg-[#1a1625] rounded-2xl shadow-xl p-8 md:p-10 border border-gray-100 dark:border-white/5 transition-colors duration-300\">\r\n            {/* Header (Mobile & Desktop for simple layout) */}\r\n            <div className=\"mb-8 text-center\">\r\n              {/* Logo for mobile view */}\r\n              <div className=\"flex lg:hidden justify-center mb-6\">\r\n                 <img \r\n                    src={COMPANY_INFO.logoUrl} \r\n                    alt={COMPANY_INFO.name} \r\n                    className=\"h-16 w-auto object-contain rounded-md\" \r\n                 />\r\n              </div>\r\n\r\n              <div className=\"inline-block px-3 py-1 bg-jambo-50 dark:bg-white/5 text-jambo-600 dark:text-jambo-400 text-xs font-bold uppercase tracking-widest rounded-full mb-4 border border-jambo-100 dark:border-white/10\">\r\n                {subtitle}\r\n              </div>\r\n              <h1 className=\"text-2xl font-serif font-bold text-gray-900 dark:text-white\">\r\n                {title}\r\n              </h1>\r\n            </div>\r\n\r\n            {/* Tabs (Only show if registration is allowed) */}\r\n            {allowRegister && (\r\n                <div className=\"flex mb-8 border-b border-gray-100 dark:border-white/10\">\r\n                <button \r\n                    onClick={() => { setIsLogin(true); setError(''); }}\r\n                    className={`flex-1 pb-4 text-sm font-bold uppercase tracking-wider transition-all border-b-2 ${isLogin ? 'text-jambo-600 dark:text-jambo-400 border-jambo-600 dark:border-jambo-400' : 'text-gray-400 dark:text-gray-500 border-transparent hover:text-gray-600 dark:hover:text-gray-300'}`}\r\n                >\r\n                    Login\r\n                </button>\r\n                <button \r\n                    onClick={() => { setIsLogin(false); setError(''); }}\r\n                    className={`flex-1 pb-4 text-sm font-bold uppercase tracking-wider transition-all border-b-2 ${!isLogin ? 'text-jambo-600 dark:text-jambo-400 border-jambo-600 dark:border-jambo-400' : 'text-gray-400 dark:text-gray-500 border-transparent hover:text-gray-600 dark:hover:text-gray-300'}`}\r\n                >\r\n                    Register\r\n                </button>\r\n                </div>\r\n            )}\r\n\r\n            {error && (\r\n                <div className=\"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm p-3 rounded-lg mb-6 flex items-center gap-2 border border-red-100 dark:border-red-900/50 animate-in fade-in slide-in-from-top-2\">\r\n                    <AlertCircle size={16} className=\"shrink-0\" />\r\n                    <span>{error}</span>\r\n                </div>\r\n            )}\r\n\r\n            <form className=\"space-y-5\" onSubmit={handleSubmit}>\r\n               {!isLogin && allowRegister && (\r\n                 <div className=\"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-bottom-2\">\r\n                    <div className=\"space-y-1\">\r\n                      <label className=\"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">First Name</label>\r\n                      <div className=\"relative\">\r\n                        <User className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500\" size={16} />\r\n                        <input \r\n                            type=\"text\" \r\n                            required \r\n                            value={firstName}\r\n                            onChange={(e) => setFirstName(e.target.value)}\r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:border-jambo-600 dark:focus:border-jambo-500 focus:bg-white dark:focus:bg-white/10 transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600\" \r\n                            placeholder=\"Jane\" \r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"space-y-1\">\r\n                      <label className=\"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Last Name</label>\r\n                      <div className=\"relative\">\r\n                        <input \r\n                            type=\"text\" \r\n                            required\r\n                            value={lastName}\r\n                            onChange={(e) => setLastName(e.target.value)}\r\n                            className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:border-jambo-600 dark:focus:border-jambo-500 focus:bg-white dark:focus:bg-white/10 transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600\" \r\n                            placeholder=\"Doe\" \r\n                        />\r\n                      </div>\r\n                    </div>\r\n                 </div>\r\n               )}\r\n\r\n               <div className=\"space-y-1\">\r\n                  <label className=\"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Email Address</label>\r\n                  <div className=\"relative\">\r\n                    <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500\" size={16} />\r\n                    <input \r\n                        type=\"email\" \r\n                        required\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:border-jambo-600 dark:focus:border-jambo-500 focus:bg-white dark:focus:bg-white/10 transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600\" \r\n                        placeholder=\"linguist@example.com\"\r\n                    />\r\n                  </div>\r\n               </div>\r\n               \r\n               {!isLogin && allowRegister && (\r\n                  <div className=\"space-y-1 animate-in fade-in slide-in-from-bottom-2\">\r\n                    <label className=\"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Phone Number</label>\r\n                    <div className=\"relative\">\r\n                      <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500\" size={16} />\r\n                      <input \r\n                        type=\"tel\" \r\n                        value={phone}\r\n                        onChange={(e) => setPhone(e.target.value)}\r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:border-jambo-600 dark:focus:border-jambo-500 focus:bg-white dark:focus:bg-white/10 transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600\" \r\n                        placeholder=\"+44 7...\" \r\n                      />\r\n                    </div>\r\n                  </div>\r\n               )}\r\n\r\n               <div className=\"space-y-1\">\r\n                  <div className=\"flex justify-between\">\r\n                     <label className=\"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">Password</label>\r\n                     {isLogin && <a href=\"#\" className=\"text-xs text-jambo-600 dark:text-jambo-400 hover:underline\">Forgot?</a>}\r\n                  </div>\r\n                  <div className=\"relative\">\r\n                    <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500\" size={16} />\r\n                    <input \r\n                        type={showPassword ? \"text\" : \"password\"}\r\n                        required\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg pl-10 pr-10 py-2.5 text-gray-800 dark:text-white focus:outline-none focus:border-jambo-600 dark:focus:border-jambo-500 focus:bg-white dark:focus:bg-white/10 transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600\" \r\n                        placeholder={isLogin ? \"••••••••\" : \"Min 6 chars\"} \r\n                    />\r\n                    <button \r\n                        type=\"button\" \r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors\"\r\n                    >\r\n                        {showPassword ? <EyeOff size={16} /> : <Eye size={16} />}\r\n                    </button>\r\n                  </div>\r\n               </div>\r\n\r\n               {!isLogin && allowRegister && (\r\n                 <div className=\"pt-2\">\r\n                   <label className=\"flex items-start gap-3 cursor-pointer group\">\r\n                      <div className=\"relative flex items-center mt-0.5\">\r\n                        <input type=\"checkbox\" required className=\"peer h-4 w-4 opacity-0 absolute\" />\r\n                        <div className=\"w-4 h-4 border-2 border-gray-300 dark:border-gray-600 rounded peer-checked:bg-jambo-600 dark:peer-checked:bg-jambo-500 peer-checked:border-jambo-600 dark:peer-checked:border-jambo-500 transition-colors\"></div>\r\n                        <CheckCircle className=\"absolute w-4 h-4 text-white opacity-0 peer-checked:opacity-100 pointer-events-none\" size={12} />\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 leading-snug\">\r\n                        I agree to the <span className=\"text-jambo-600 dark:text-jambo-400 font-bold hover:underline\">Code of Conduct</span>, <span className=\"text-jambo-600 dark:text-jambo-400 font-bold hover:underline\">Privacy Policy</span>, and <span className=\"text-jambo-600 dark:text-jambo-400 font-bold hover:underline\">Freelancer Terms</span>.\r\n                      </p>\r\n                   </label>\r\n                 </div>\r\n               )}\r\n\r\n               <button \r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"w-full bg-jambo-600 dark:bg-jambo-500 hover:bg-jambo-700 dark:hover:bg-jambo-600 text-white font-bold py-3 rounded-lg shadow-lg hover:shadow-jambo-600/30 transition-all flex items-center justify-center gap-2 group mt-6 cursor-pointer disabled:opacity-70 disabled:shadow-none\"\r\n               >\r\n                 {isLoading ? (\r\n                    <Loader2 className=\"animate-spin\" size={20} />\r\n                 ) : (\r\n                    <>\r\n                        {isLogin ? 'Access Portal' : 'Start Onboarding'}\r\n                        <ArrowRight size={18} className=\"group-hover:translate-x-1 transition-transform\" />\r\n                    </>\r\n                 )}\r\n               </button>\r\n            </form>\r\n\r\n            {/* Demo Credentials Box */}\r\n            {demoConfig && isLogin && (\r\n                <div \r\n                    onClick={fillDemo}\r\n                    className=\"mt-6 bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl p-3 flex items-center gap-3 cursor-pointer hover:border-jambo-300 dark:hover:border-jambo-600 transition-colors group\"\r\n                >\r\n                    <div className=\"bg-white dark:bg-white/10 p-2 rounded-lg text-jambo-600 dark:text-jambo-400 border border-gray-100 dark:border-white/5 shadow-sm group-hover:scale-105 transition-transform\">\r\n                        <Key size={16} />\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-600 dark:text-gray-300 font-mono flex-1\">\r\n                        <p className=\"text-[10px] text-gray-400 dark:text-gray-500 uppercase tracking-widest font-bold mb-0.5\">{demoConfig.label} (Tap to Fill)</p>\r\n                        <p className=\"truncate\">User: <span className=\"font-bold text-gray-900 dark:text-white select-all\">{demoConfig.email}</span></p>\r\n                        <p>Pass: <span className=\"font-bold text-gray-900 dark:text-white select-all\">{demoConfig.password || '******'}</span></p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {allowRegister && (\r\n                <div className=\"mt-8 pt-6 border-t border-gray-100 dark:border-white/10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"bg-brand-orange/10 dark:bg-brand-orange/20 p-2 rounded-full\">\r\n                        <FileText className=\"text-brand-orange\" size={16} />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-xs font-bold text-gray-800 dark:text-gray-200 uppercase tracking-wide\">Compliance Reminder</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Ensure your DBS certificate and Indemnity Insurance are up to date before logging in.</p>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            )}\r\n         </div>\r\n         \r\n         <div className=\"absolute bottom-6 text-center text-xs text-gray-400 dark:text-gray-600\">\r\n            Need help? <a href=\"mailto:support@jambolinguists.com\" className=\"text-jambo-600 dark:text-jambo-400 hover:underline\">Contact Support</a>\r\n         </div>\r\n      </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/modal/ModalHeader.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { X, ChevronLeft, AlertCircle, Clock } from 'lucide-react';\r\nimport { Job } from '@/data/mockDatabase';\r\nimport { JobStatusBadge } from '../../../../ui/JobStatusBadge';\r\n\r\ninterface ModalHeaderProps {\r\n  job: Job;\r\n  viewMode: 'details' | 'completionForm';\r\n  setViewMode: (mode: 'details' | 'completionForm') => void;\r\n  onClose: () => void;\r\n  theme: { bg: string; text: string; border: string; icon: any };\r\n  currentStatus: string;\r\n}\r\n\r\nexport const ModalHeader = ({ job, viewMode, setViewMode, onClose, theme, currentStatus }: ModalHeaderProps) => {\r\n  const Icon = theme.icon;\r\n  const isAvailable = currentStatus === 'Open';\r\n  \r\n  // Expiration Logic\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const jobDate = new Date(job.date);\r\n  const isExpired = isAvailable && jobDate < today;\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-5 md:p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-start sticky top-0 bg-white dark:bg-[#1a1625] z-20 shadow-sm shrink-0 transition-all\">\r\n      <div className=\"flex gap-3 sm:gap-4 overflow-hidden items-start w-full\">\r\n        {viewMode === 'completionForm' ? (\r\n          <button \r\n            onClick={() => setViewMode('details')} \r\n            className=\"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-xl bg-gray-100 dark:bg-white/5 flex items-center justify-center shrink-0 hover:bg-gray-200 dark:hover:bg-white/10 transition-colors mt-1\"\r\n          >\r\n            <ChevronLeft size={24} className=\"text-gray-600 dark:text-gray-300\" />\r\n          </button>\r\n        ) : (\r\n          <div className={`w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-xl ${isExpired ? 'bg-gray-100 text-gray-500' : `${theme.bg} ${theme.text}`} flex items-center justify-center shrink-0 mt-1 transition-all`}>\r\n            <Icon size={20} className=\"sm:w-6 sm:h-6 md:w-7 md:h-7 transition-all\" />\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"min-w-0 flex-1\">\r\n          {viewMode === 'completionForm' ? (\r\n            <>\r\n              <h2 className=\"text-xl sm:text-2xl md:text-3xl font-serif font-bold text-gray-900 dark:text-white leading-tight truncate\">\r\n                Submit Completion\r\n              </h2>\r\n              <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium mt-0.5\">Finalizing Job #{job.id}</p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"flex flex-wrap items-center gap-2 mb-1.5\">\r\n                <span className={`text-[10px] sm:text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border ${isExpired ? 'bg-gray-100 text-gray-500 border-gray-200' : `${theme.bg} ${theme.text} ${theme.border}`}`}>\r\n                  {job.category}\r\n                </span>\r\n                \r\n                <JobStatusBadge status={currentStatus} className=\"text-[10px] sm:text-xs\" />\r\n\r\n                {isExpired && (\r\n                    <span className=\"text-[10px] sm:text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 border border-gray-200 flex items-center gap-1\">\r\n                        <Clock size={10} /> Expired\r\n                    </span>\r\n                )}\r\n\r\n                {!isExpired && job.isUrgent && isAvailable && (\r\n                  <span className=\"text-[10px] sm:text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded-full bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-300 flex items-center gap-1\">\r\n                    <AlertCircle size={10} /> <span className=\"hidden sm:inline\">Urgent</span>\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <h2 className=\"text-lg sm:text-xl md:text-2xl lg:text-3xl font-serif font-bold text-gray-900 dark:text-white leading-tight break-words\">\r\n                {job.title}\r\n              </h2>\r\n              <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium mt-1\">Ref ID: #{job.id}</p>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <button \r\n        onClick={onClose}\r\n        className=\"p-2 bg-gray-100 dark:bg-white/5 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400 transition-colors shrink-0 ml-2 sm:ml-4 mt-1\"\r\n        aria-label=\"Close Modal\"\r\n      >\r\n        <X size={20} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAEA;;;;AAWO,MAAM,cAAc,CAAC,EAAE,GAAG,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,aAAa,EAAoB;IACzG,MAAM,OAAO,MAAM,IAAI;IACvB,MAAM,cAAc,kBAAkB;IAEtC,mBAAmB;IACnB,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IACxB,MAAM,UAAU,IAAI,KAAK,IAAI,IAAI;IACjC,MAAM,YAAY,eAAe,UAAU;IAE3C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;oBACZ,aAAa,iCACZ,8OAAC;wBACC,SAAS,IAAM,YAAY;wBAC3B,WAAU;kCAEV,cAAA,8OAAC,mOAAW;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;iFAGnC,8OAAC;wBAAI,WAAW,CAAC,qDAAqD,EAAE,YAAY,8BAA8B,GAAG,MAAM,EAAE,CAAC,CAAC,EAAE,MAAM,IAAI,EAAE,CAAC,8DAA8D,CAAC;kCAC3M,cAAA,8OAAC;4BAAK,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAI9B,8OAAC;wBAAI,WAAU;kCACZ,aAAa,iCACZ;;8CACE,8OAAC;oCAAG,WAAU;8CAA4G;;;;;;8CAG1H,8OAAC;oCAAE,WAAU;;wCAAyE;wCAAiB,IAAI,EAAE;;;;;;;;yDAG/G;;8CACE,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAW,CAAC,2FAA2F,EAAE,YAAY,8CAA8C,GAAG,MAAM,EAAE,CAAC,CAAC,EAAE,MAAM,IAAI,CAAC,CAAC,EAAE,MAAM,MAAM,EAAE,EAAE;sDACnN,IAAI,QAAQ;;;;;;sDAGf,8OAAC,qJAAc;4CAAC,QAAQ;4CAAe,WAAU;;;;;;wCAEhD,2BACG,8OAAC;4CAAK,WAAU;;8DACZ,8OAAC,6MAAK;oDAAC,MAAM;;;;;;gDAAM;;;;;;;wCAI1B,CAAC,aAAa,IAAI,QAAQ,IAAI,6BAC7B,8OAAC;4CAAK,WAAU;;8DACd,8OAAC,mOAAW;oDAAC,MAAM;;;;;;gDAAM;8DAAC,8OAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;;;;;;;8CAInE,8OAAC;oCAAG,WAAU;8CACX,IAAI,KAAK;;;;;;8CAEZ,8OAAC;oCAAE,WAAU;;wCAAuE;wCAAU,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;0BAK5G,8OAAC;gBACC,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,8OAAC,iMAAC;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAIjB"}},
    {"offset": {"line": 2962, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/modal/JobResources.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { CheckCircle, Lock, Link, File, Download, UploadCloud, LucideIcon } from 'lucide-react';\r\n\r\ninterface FileItem {\r\n    name: string;\r\n    type: 'file' | 'link';\r\n    url: string;\r\n    source: string; // 'Instruction', 'Delivery', 'Revision Markup', 'History'\r\n    date: string;\r\n}\r\n\r\ninterface JobResourcesProps {\r\n  files: FileItem[];\r\n  isLocked: boolean;\r\n  title?: string;\r\n  icon?: LucideIcon;\r\n}\r\n\r\nexport const JobResources = ({ files, isLocked, title = \"Files & Resources\", icon: Icon = CheckCircle }: JobResourcesProps) => {\r\n  if (!files || files.length === 0) return null;\r\n\r\n  return (\r\n    <div className={`rounded-xl border-2 transition-all overflow-hidden mt-6 ${\r\n      !isLocked \r\n        ? 'border-gray-200 bg-white dark:bg-white/5 dark:border-white/10' \r\n        : 'border-gray-200 bg-gray-50 dark:bg-white/5 dark:border-white/10'\r\n    }`}>\r\n      <div className={`p-4 flex items-center justify-between border-b ${\r\n        !isLocked \r\n          ? 'border-gray-100 bg-gray-50/50 dark:bg-white/5 dark:border-white/5' \r\n          : 'border-gray-100 bg-white/50 dark:bg-white/5 dark:border-white/5'\r\n      }`}>\r\n        <h4 className=\"font-bold text-gray-800 dark:text-gray-200 flex items-center gap-2 text-sm md:text-base\">\r\n          {!isLocked ? <Icon size={18} className=\"text-jambo-600 dark:text-jambo-400\"/> : <Lock size={18} className=\"text-gray-400 dark:text-gray-500\"/>}\r\n          {title} ({files.length})\r\n        </h4>\r\n        {isLocked && <span className=\"text-[10px] md:text-xs font-bold uppercase tracking-wider text-gray-400 dark:text-gray-400 bg-gray-200 dark:bg-white/10 px-2 py-1 rounded\">Locked</span>}\r\n      </div>\r\n      \r\n      <div className=\"p-4 md:p-6 space-y-4\">\r\n        {files.map((file, index) => {\r\n            const isDelivery = file.source === 'Delivery';\r\n            const isInstruction = file.source === 'Instruction';\r\n            const isRevision = file.source === 'Revision Markup';\r\n\r\n            let iconBg = 'bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-400';\r\n            if (!isLocked) {\r\n                if (isDelivery) iconBg = 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400';\r\n                else if (isRevision) iconBg = 'bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400';\r\n                else if (isInstruction) iconBg = 'bg-jambo-50 text-jambo-600 dark:bg-jambo-900/30 dark:text-jambo-400';\r\n            }\r\n\r\n            return (\r\n                <div key={index} className=\"flex flex-col sm:flex-row items-center gap-4 border-b border-gray-100 dark:border-white/5 last:border-0 pb-4 last:pb-0\">\r\n                    <div className={`w-12 h-12 rounded-lg flex items-center justify-center shrink-0 ${iconBg}`}>\r\n                        {file.type === 'link' ? <Link size={20} /> : (isDelivery ? <UploadCloud size={20}/> : <File size={20} />)}\r\n                    </div>\r\n                    \r\n                    <div className=\"flex-grow text-center sm:text-left\">\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 mb-1\">\r\n                            <span className={`text-[10px] font-bold uppercase tracking-wide px-2 py-0.5 rounded w-fit mx-auto sm:mx-0 ${\r\n                                isDelivery ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300' :\r\n                                isRevision ? 'bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300' :\r\n                                'bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-400'\r\n                            }`}>\r\n                                {file.source}\r\n                            </span>\r\n                            <span className=\"text-[10px] text-gray-400\">{new Date(file.date).toLocaleDateString()}</span>\r\n                        </div>\r\n                        <p className={`font-bold text-sm md:text-base ${!isLocked ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                            {!isLocked ? file.name : 'Resource Hidden'}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {!isLocked ? (\r\n                        <button className=\"bg-white border border-gray-200 dark:bg-white/5 dark:border-white/10 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/10 px-4 py-2 rounded-lg font-bold text-xs md:text-sm flex items-center gap-2 transition-all w-full sm:w-auto justify-center shadow-sm\">\r\n                            {file.type === 'file' ? <Download size={14} /> : <Link size={14} />}\r\n                            {file.type === 'file' ? 'Download' : 'Open'}\r\n                        </button>\r\n                    ) : (\r\n                        <div className=\"px-4 py-2 bg-gray-100 dark:bg-white/5 text-gray-400 dark:text-gray-500 rounded-lg text-xs md:text-sm font-bold border border-gray-200 dark:border-white/10 cursor-not-allowed w-full sm:w-auto text-center\">\r\n                            Locked\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAiBO,MAAM,eAAe,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,mBAAmB,EAAE,MAAM,OAAO,0OAAW,EAAqB;IACxH,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG,OAAO;IAEzC,qBACE,8OAAC;QAAI,WAAW,CAAC,wDAAwD,EACvE,CAAC,WACG,kEACA,mEACJ;;0BACA,8OAAC;gBAAI,WAAW,CAAC,+CAA+C,EAC9D,CAAC,WACG,sEACA,mEACJ;;kCACA,8OAAC;wBAAG,WAAU;;4BACX,CAAC,yBAAW,8OAAC;gCAAK,MAAM;gCAAI,WAAU;;;;;yFAAyC,8OAAC,0MAAI;gCAAC,MAAM;gCAAI,WAAU;;;;;;4BACzG;4BAAM;4BAAG,MAAM,MAAM;4BAAC;;;;;;;oBAExB,0BAAY,8OAAC;wBAAK,WAAU;kCAA4I;;;;;;;;;;;;0BAG3K,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,MAAM;oBACd,MAAM,aAAa,KAAK,MAAM,KAAK;oBACnC,MAAM,gBAAgB,KAAK,MAAM,KAAK;oBACtC,MAAM,aAAa,KAAK,MAAM,KAAK;oBAEnC,IAAI,SAAS;oBACb,IAAI,CAAC,UAAU;wBACX,IAAI,YAAY,SAAS;6BACpB,IAAI,YAAY,SAAS;6BACzB,IAAI,eAAe,SAAS;oBACrC;oBAEA,qBACI,8OAAC;wBAAgB,WAAU;;0CACvB,8OAAC;gCAAI,WAAW,CAAC,+DAA+D,EAAE,QAAQ;0CACrF,KAAK,IAAI,KAAK,uBAAS,8OAAC,0MAAI;oCAAC,MAAM;;;;;+EAAU,2BAAa,8OAAC,mOAAW;oCAAC,MAAM;;;;;6FAAQ,8OAAC,0MAAI;oCAAC,MAAM;;;;;;;;;;;0CAGtG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAW,CAAC,wFAAwF,EACtG,aAAa,qEACb,aAAa,yEACb,iEACF;0DACG,KAAK,MAAM;;;;;;0DAEhB,8OAAC;gDAAK,WAAU;0DAA6B,IAAI,KAAK,KAAK,IAAI,EAAE,kBAAkB;;;;;;;;;;;;kDAEvF,8OAAC;wCAAE,WAAW,CAAC,+BAA+B,EAAE,CAAC,WAAW,kCAAkC,oCAAoC;kDAC7H,CAAC,WAAW,KAAK,IAAI,GAAG;;;;;;;;;;;;4BAIhC,CAAC,yBACE,8OAAC;gCAAO,WAAU;;oCACb,KAAK,IAAI,KAAK,uBAAS,8OAAC,sNAAQ;wCAAC,MAAM;;;;;iGAAS,8OAAC,0MAAI;wCAAC,MAAM;;;;;;oCAC5D,KAAK,IAAI,KAAK,SAAS,aAAa;;;;;;yFAGzC,8OAAC;gCAAI,WAAU;0CAA6M;;;;;;;uBA3B1N;;;;;gBAiClB;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 3161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/modal/JobInfo.tsx"],"sourcesContent":["\r\nimport React, { useMemo } from 'react';\r\nimport { Calendar, PoundSterling, Globe, Clock, FileText, MapPin, CheckCircle, Briefcase, AlertTriangle, Download, Loader2, UploadCloud } from 'lucide-react';\r\nimport { Job } from '@/data/mockDatabase';\r\nimport { JobResources } from './JobResources';\r\nimport { getInterpretingJobPayoutDetails } from '../job-helpers';\r\n\r\n\r\nconst RateBreakdown = ({ job }: { job: Job }) => {\r\n    const details = getInterpretingJobPayoutDetails(job);\r\n    if (!details) return null;\r\n\r\n    return (\r\n      <div className=\"mt-6\">\r\n        <h3 className=\"text-sm md:text-lg font-bold text-gray-900 dark:text-white mb-3 font-serif\">Rate Breakdown</h3>\r\n        <div className=\"space-y-3 bg-gray-50 dark:bg-white/5 p-4 rounded-xl border border-gray-100 dark:border-white/5\">\r\n          {details.sessionPay > 0 && (\r\n              <div className=\"flex justify-between items-center text-xs md:text-sm\">\r\n                <span className=\"text-gray-600 dark:text-gray-300\">Session ({details.hours.toFixed(2)} hrs @ £{job.hourlyRate?.toFixed(2)}/hr)</span>\r\n                <span className=\"font-mono font-medium text-gray-800 dark:text-gray-200\">£{details.sessionPay.toFixed(2)}</span>\r\n              </div>\r\n          )}\r\n          {details.mileagePay > 0 && (\r\n              <div className=\"flex justify-between items-center text-xs md:text-sm\">\r\n                <span className=\"text-gray-600 dark:text-gray-300\">Mileage ({job.distance} mi @ £{job.mileageRate?.toFixed(2)}/mi)</span>\r\n                <span className=\"font-mono font-medium text-gray-800 dark:text-gray-200\">£{details.mileagePay.toFixed(2)}</span>\r\n              </div>\r\n          )}\r\n          {details.travelPay > 0 && (\r\n              <div className=\"flex justify-between items-center text-xs md:text-sm\">\r\n                <span className=\"text-gray-600 dark:text-gray-300\">Travel ({job.travelHours} hrs @ £{job.travelRate?.toFixed(2)}/hr)</span>\r\n                <span className=\"font-mono font-medium text-gray-800 dark:text-gray-200\">£{details.travelPay.toFixed(2)}</span>\r\n              </div>\r\n          )}\r\n          <div className=\"pt-2 border-t border-gray-200 dark:border-white/10 mt-2 flex justify-between items-center\">\r\n             <span className=\"font-bold text-gray-800 dark:text-white text-sm md:text-base\">Estimated Total</span>\r\n             <span className=\"font-bold font-mono text-jambo-600 dark:text-jambo-400 text-base md:text-lg\">£{details.total.toFixed(2)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n};\r\n\r\ninterface JobInfoProps {\r\n  job: Job;\r\n  isHistory: boolean;\r\n  isAvailable: boolean;\r\n}\r\n\r\nexport const JobInfo = ({ job, isHistory, isAvailable }: JobInfoProps) => {\r\n  const payoutDetails = getInterpretingJobPayoutDetails(job);\r\n  \r\n  const rateDisplay = (job.category === 'Translation' && job.wordRate) \r\n    ? `${(job.wordRate * 100).toFixed(0)}p/word` \r\n    : job.rate;\r\n\r\n  // Split files logic into distinct groups\r\n  const { originalFiles, submittedFiles, revisionFiles } = useMemo(() => {\r\n      const originals = (job.attachments || []).map(f => ({\r\n          name: f.name,\r\n          type: f.type,\r\n          url: f.url,\r\n          source: 'Instruction',\r\n          date: job.date\r\n      }));\r\n\r\n      // Add any CREATED history attachments to originals\r\n      (job.history || []).forEach(h => {\r\n          if (h.type === 'CREATED' && h.attachment) {\r\n              originals.push({\r\n                  name: h.attachment,\r\n                  type: 'file',\r\n                  url: '#',\r\n                  source: 'Instruction',\r\n                  date: h.date\r\n              });\r\n          }\r\n      });\r\n\r\n      const submitted: any[] = [];\r\n      const revisions: any[] = [];\r\n\r\n      (job.history || []).forEach(h => {\r\n          if (h.attachment) {\r\n              const fileItem = {\r\n                  name: h.attachment,\r\n                  type: 'file' as const,\r\n                  url: '#',\r\n                  source: '',\r\n                  date: h.date\r\n              };\r\n\r\n              if (h.type === 'SUBMITTED' || h.type === 'RESUBMITTED') {\r\n                  fileItem.source = 'Delivery';\r\n                  submitted.push(fileItem);\r\n              } else if (h.type === 'REVISION_REQUESTED') {\r\n                  fileItem.source = 'Revision Markup';\r\n                  revisions.push(fileItem);\r\n              }\r\n          }\r\n      });\r\n\r\n      return {\r\n          originalFiles: originals.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()),\r\n          submittedFiles: submitted.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()),\r\n          revisionFiles: revisions.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n      };\r\n  }, [job]);\r\n\r\n  return (\r\n    <div className=\"p-5 md:p-8 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-left-4 duration-300\">\r\n      \r\n      {/* Status Banners */}\r\n      {job.status === 'Revision' && (\r\n          <div className=\"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-4 md:p-6 rounded-r-xl shadow-sm\">\r\n              <h3 className=\"font-bold text-amber-800 dark:text-amber-200 flex items-center gap-2 mb-2 text-lg\">\r\n                  <AlertTriangle size={20} /> Revision Requested\r\n              </h3>\r\n              <p className=\"text-amber-900 dark:text-amber-100 text-sm mb-4 leading-relaxed\">\r\n                  {job.revisionFeedback || \"Please review the job details and resubmit.\"}\r\n              </p>\r\n              {job.revisionFile && (\r\n                  <button className=\"bg-white dark:bg-amber-900/40 text-amber-800 dark:text-amber-200 px-4 py-2 rounded-lg text-xs font-bold border border-amber-200 dark:border-amber-800 flex items-center gap-2 hover:bg-amber-100 transition-colors\">\r\n                      <Download size={14} /> Download Mark-up: {job.revisionFile}\r\n                  </button>\r\n              )}\r\n          </div>\r\n      )}\r\n\r\n      {job.status === 'Pending Approval' && (\r\n          <div className=\"bg-indigo-50 dark:bg-indigo-900/20 border-l-4 border-indigo-500 p-4 md:p-6 rounded-r-xl shadow-sm flex items-start gap-4\">\r\n              <div className=\"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-full text-indigo-600 dark:text-indigo-400\">\r\n                  <Loader2 size={24} className=\"animate-spin\" />\r\n              </div>\r\n              <div>\r\n                  <h3 className=\"font-bold text-indigo-900 dark:text-indigo-200 text-lg mb-1\">Pending Approval</h3>\r\n                  <p className=\"text-indigo-800 dark:text-indigo-300 text-sm leading-relaxed\">\r\n                      Your completion details have been submitted. An administrator will review your work shortly.\r\n                  </p>\r\n              </div>\r\n          </div>\r\n      )}\r\n\r\n      {/* Key Details Grid */}\r\n      <div className=\"grid grid-cols-2 gap-4 md:gap-6 p-4 md:p-6 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5\">\r\n        <div className=\"space-y-1\">\r\n          <p className=\"text-[10px] md:text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide flex items-center gap-1\"><Calendar size={12}/> Date & Time</p>\r\n          <p className=\"text-base md:text-lg font-bold text-gray-900 dark:text-gray-100 leading-tight\">\r\n            {new Date(job.date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}\r\n            {job.time && `, ${job.time}`}\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"space-y-1\">\r\n          <p className=\"text-[10px] md:text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide flex items-center gap-1\">\r\n             <PoundSterling size={12}/> {payoutDetails ? 'Est. Payout' : 'Rate'}\r\n          </p>\r\n          <p className=\"text-base md:text-lg font-bold text-jambo-600 dark:text-jambo-400 leading-tight\">\r\n            {payoutDetails ? `£${payoutDetails.total.toFixed(2)}` : rateDisplay}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-1\">\r\n          <p className=\"text-[10px] md:text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide flex items-center gap-1\"><Globe size={12}/> Language Pair</p>\r\n          <p className=\"text-base md:text-lg font-bold text-gray-900 dark:text-gray-100 leading-tight\">{job.languagePair}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-1\">\r\n          <p className=\"text-[10px] md:text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide flex items-center gap-1\">\r\n            {job.category === 'Translation' ? <FileText size={12}/> : (job.category === 'Interpreting' ? <Briefcase size={12} /> : <Clock size={12}/>)} \r\n            {job.category === 'Translation' ? 'Volume' : 'Type'}\r\n          </p>\r\n          <p className=\"text-base md:text-lg font-bold text-gray-900 dark:text-gray-100 leading-tight\">\r\n            {job.category === 'Translation' ? `${job.wordCount?.toLocaleString()} wds` : job.type}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <h3 className=\"text-sm md:text-lg font-bold text-gray-900 dark:text-white mb-2 md:mb-3 font-serif\">Description & Requirements</h3>\r\n        <p className=\"text-sm md:text-base text-gray-600 dark:text-gray-300 leading-relaxed font-light\">\r\n          {job.description}\r\n        </p>\r\n        \r\n        <div className=\"mt-4 md:mt-6 space-y-3\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <MapPin className=\"text-gray-400 dark:text-gray-500 shrink-0 mt-0.5 md:mt-1\" size={16} />\r\n            <div>\r\n              <p className=\"font-bold text-gray-900 dark:text-white text-xs md:text-sm\">Location / Context</p>\r\n              <p className=\"text-gray-600 dark:text-gray-400 text-sm md:text-base leading-snug\">{job.location}</p>\r\n            </div>\r\n          </div>\r\n           {job.duration && (\r\n            <div className=\"flex items-start gap-3\">\r\n                <Clock className=\"text-gray-400 dark:text-gray-500 shrink-0 mt-0.5 md:mt-1\" size={16} />\r\n                <div>\r\n                  <p className=\"font-bold text-gray-900 dark:text-white text-xs md:text-sm\">Duration</p>\r\n                  <p className=\"text-gray-600 dark:text-gray-400 text-sm md:text-base leading-snug\">{job.duration}</p>\r\n                </div>\r\n            </div>\r\n           )}\r\n        </div>\r\n\r\n         {payoutDetails && <RateBreakdown job={job} />}\r\n\r\n      </div>\r\n\r\n      {/* 1. Original Instructions (Always show if present, possibly locked) */}\r\n      <JobResources \r\n        files={originalFiles} \r\n        isLocked={isAvailable} \r\n        title=\"Job Instructions & Resources\"\r\n        icon={FileText}\r\n      />\r\n\r\n      {/* 2. Revisions (Only if present, unlocked) */}\r\n      {revisionFiles.length > 0 && !isAvailable && (\r\n         <JobResources \r\n            files={revisionFiles}\r\n            isLocked={false}\r\n            title=\"Revision Requests\"\r\n            icon={AlertTriangle}\r\n         />\r\n      )}\r\n\r\n      {/* 3. User Submissions (Only if present, unlocked) */}\r\n      {submittedFiles.length > 0 && !isAvailable && (\r\n         <JobResources \r\n            files={submittedFiles}\r\n            isLocked={false}\r\n            title=\"My Deliverables\"\r\n            icon={UploadCloud}\r\n         />\r\n      )}\r\n      \r\n      {/* Completion Details Summary */}\r\n      {isHistory && job.completedAt && (\r\n        <div className=\"mt-8 pt-8 border-t border-gray-100 dark:border-white/10\">\r\n          <h4 className=\"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2 text-sm md:text-base\">\r\n            <CheckCircle size={18} className=\"text-green-600 dark:text-green-500\"/> Completion Summary\r\n          </h4>\r\n          <div className=\"bg-gray-50 dark:bg-white/5 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-white/10\">\r\n            <div className=\"flex justify-between items-start mb-2\">\r\n                <span className=\"text-xs font-bold uppercase text-gray-400 tracking-wider\">Submitted On</span>\r\n                <span className=\"text-xs font-mono text-gray-500\">{new Date(job.completedAt).toLocaleString()}</span>\r\n            </div>\r\n            {job.completionNotes ? (\r\n                <div>\r\n                    <span className=\"text-xs font-bold uppercase text-gray-400 tracking-wider block mb-1\">Notes</span>\r\n                    <p className=\"text-gray-800 dark:text-gray-200 italic text-sm md:text-base leading-relaxed\">\"{job.completionNotes}\"</p>\r\n                </div>\r\n            ) : (\r\n                <p className=\"text-sm text-gray-400 italic\">No completion notes provided.</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3924, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/modal/CompletionForm.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { AlertCircle, FileText, Upload } from 'lucide-react';\r\n\r\ninterface CompletionFormProps {\r\n  completionNotes: string;\r\n  setCompletionNotes: (notes: string) => void;\r\n  completionFile: string | null;\r\n  handleFileSelect: () => void;\r\n}\r\n\r\nexport const CompletionForm = ({ completionNotes, setCompletionNotes, completionFile, handleFileSelect }: CompletionFormProps) => {\r\n  return (\r\n    <div className=\"p-4 md:p-8 space-y-6 animate-in slide-in-from-right-8 duration-300\">\r\n      <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex gap-3 text-yellow-800 text-xs md:text-sm\">\r\n        <AlertCircle size={20} className=\"shrink-0\" />\r\n        <p>Please ensure all deliverables are correct. Once submitted, the job status will be updated to Completed and cannot be reverted.</p>\r\n      </div>\r\n\r\n      <div className=\"space-y-4 md:space-y-6\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-xs md:text-sm font-bold text-gray-700 uppercase tracking-wide\">Completion Notes / Summary *</label>\r\n          <textarea \r\n            value={completionNotes}\r\n            onChange={(e) => setCompletionNotes(e.target.value)}\r\n            placeholder=\"Describe the work done, duration confirmation, or any issues encountered...\"\r\n            rows={4}\r\n            className=\"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 md:p-4 focus:outline-none focus:border-jambo-600 focus:ring-4 focus:ring-jambo-50 transition-all resize-none text-sm md:text-base\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-xs md:text-sm font-bold text-gray-700 uppercase tracking-wide\">Upload Proof / Deliverable</label>\r\n          <div \r\n            onClick={handleFileSelect}\r\n            className={`border-2 border-dashed rounded-xl p-6 md:p-8 flex flex-col items-center justify-center gap-2 cursor-pointer transition-colors ${completionFile ? 'border-jambo-600 bg-jambo-50' : 'border-gray-300 hover:border-jambo-400 hover:bg-gray-50'}`}\r\n          >\r\n            {completionFile ? (\r\n              <>\r\n                <div className=\"w-10 h-10 md:w-12 md:h-12 bg-jambo-600 text-white rounded-full flex items-center justify-center\">\r\n                  <FileText size={20} className=\"md:w-6 md:h-6\" />\r\n                </div>\r\n                <p className=\"font-bold text-jambo-700 text-center text-sm md:text-base break-all\">{completionFile}</p>\r\n                <p className=\"text-xs text-gray-500\">Click to change file</p>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Upload size={24} className=\"text-gray-400 md:w-8 md:h-8\" />\r\n                <p className=\"font-medium text-gray-600 text-sm md:text-base text-center\">Tap to upload file</p>\r\n                <p className=\"text-[10px] md:text-xs text-gray-400\">PDF, DOCX, MP3 (Max 10MB)</p>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;;;AASO,MAAM,iBAAiB,CAAC,EAAE,eAAe,EAAE,kBAAkB,EAAE,cAAc,EAAE,gBAAgB,EAAuB;IAC3H,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mOAAW;wBAAC,MAAM;wBAAI,WAAU;;;;;;kCACjC,8OAAC;kCAAE;;;;;;;;;;;;0BAGL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAqE;;;;;;0CACtF,8OAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gCAClD,aAAY;gCACZ,MAAM;gCACN,WAAU;;;;;;;;;;;;kCAId,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAqE;;;;;;0CACtF,8OAAC;gCACC,SAAS;gCACT,WAAW,CAAC,8HAA8H,EAAE,iBAAiB,iCAAiC,2DAA2D;0CAExP,+BACC;;sDACE,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,0NAAQ;gDAAC,MAAM;gDAAI,WAAU;;;;;;;;;;;sDAEhC,8OAAC;4CAAE,WAAU;sDAAuE;;;;;;sDACpF,8OAAC;4CAAE,WAAU;sDAAwB;;;;;;;iEAGvC;;sDACE,8OAAC,gNAAM;4CAAC,MAAM;4CAAI,WAAU;;;;;;sDAC5B,8OAAC;4CAAE,WAAU;sDAA6D;;;;;;sDAC1E,8OAAC;4CAAE,WAAU;sDAAuC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpE"}},
    {"offset": {"line": 4097, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/modal/ModalFooter.tsx"],"sourcesContent":["\r\nimport React, { useMemo, useState } from 'react';\r\nimport { CheckCircle, Phone, Printer, Send, Lock, Loader2, XCircle, RotateCcw, LogOut } from 'lucide-react';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { Job, Invoice } from '@/data/types';\r\nimport { generateInvoicePDF } from '../../finance/pdfGenerator';\r\nimport { calculateJobPayout } from '../job-helpers';\r\n\r\ninterface ModalFooterProps {\r\n  currentStatus: string;\r\n  viewMode: 'details' | 'completionForm';\r\n  isAvailable: boolean;\r\n  isBooked: boolean;\r\n  isHistory: boolean;\r\n  uploading: boolean;\r\n  completionNotes: string;\r\n  onClose: () => void;\r\n  handleAccept: () => void;\r\n  handleSubmitCompletion: () => void;\r\n  handleUnassign?: () => void; // New prop\r\n  setViewMode: (mode: 'details' | 'completionForm') => void;\r\n  job: Job;\r\n}\r\n\r\nexport const ModalFooter = ({ \r\n  currentStatus, viewMode, isAvailable, isBooked, isHistory, \r\n  uploading, completionNotes, onClose, \r\n  handleAccept, handleSubmitCompletion, handleUnassign, setViewMode, job\r\n}: ModalFooterProps) => {\r\n\r\n  const [isGeneratingInvoice, setIsGeneratingInvoice] = useState(false);\r\n  const isRevision = currentStatus === 'Revision';\r\n  \r\n  const complianceCheck = useMemo(() => {\r\n     if (!job || !job.requiredCourseIds) return { compliant: true, missingCourses: [] };\r\n     return mockDb.checkCompliance(job.requiredCourseIds);\r\n  }, [job]);\r\n\r\n  const handlePrintInvoice = async () => {\r\n      if (!job) return;\r\n      setIsGeneratingInvoice(true);\r\n      \r\n      const user = mockDb.auth.getCurrentUser();\r\n      if (!user) {\r\n          setIsGeneratingInvoice(false);\r\n          return;\r\n      }\r\n\r\n      const payout = calculateJobPayout(job);\r\n\r\n      if (payout <= 0) {\r\n          console.error(\"Cannot generate invoice with zero or negative payout.\");\r\n          setIsGeneratingInvoice(false);\r\n          return;\r\n      }\r\n\r\n      const invoice: Invoice = {\r\n          id: `inv-${job.id}`,\r\n          userId: user.id,\r\n          reference: `INV-${job.id}`,\r\n          date: job.completedAt || new Date().toISOString(),\r\n          dueDate: new Date(new Date(job.completedAt || new Date()).getTime() + 14 * 24 * 60 * 60 * 1000).toISOString(),\r\n          amount: payout,\r\n          status: 'Pending',\r\n          items: [\r\n              { description: `${job.category}: ${job.title}`, amount: payout, jobId: job.id }\r\n          ],\r\n          createdAt: new Date().toISOString(),\r\n          updatedAt: new Date().toISOString(),\r\n          deletedAt: null\r\n      };\r\n      \r\n      try {\r\n          await generateInvoicePDF(invoice, user);\r\n      } catch (error) {\r\n          console.error(\"Failed to generate PDF invoice:\", error);\r\n      } finally {\r\n          setIsGeneratingInvoice(false);\r\n      }\r\n  };\r\n\r\n  // Expiration Logic\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const jobDate = new Date(job.date);\r\n  const isExpired = isAvailable && jobDate < today;\r\n\r\n  return (\r\n    <div className=\"p-4 md:p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5 flex flex-col sm:flex-row items-center justify-between gap-3 md:gap-4 shrink-0 safe-area-bottom\">\r\n      {/* Left Side Info - Status messages */}\r\n      <div className=\"text-center sm:text-left w-full sm:w-auto min-h-[20px] sm:min-h-[36px]\">\r\n        {viewMode === 'completionForm' && (\r\n          <p className=\"text-sm font-bold text-gray-500 dark:text-gray-400 hidden sm:block\">\r\n              {isRevision ? 'Submitting Revision...' : 'Finalizing Job...'}\r\n          </p>\r\n        )}\r\n        \r\n        {viewMode === 'details' && (\r\n            <>\r\n                {isAvailable && (\r\n                    <div className=\"flex justify-center sm:justify-start items-center w-full\">\r\n                        {isExpired ? (\r\n                            <p className=\"text-sm font-bold text-red-500 dark:text-red-400 flex items-center gap-1\">\r\n                                <XCircle size={14} /> Application Closed\r\n                            </p>\r\n                        ) : complianceCheck.compliant ? (\r\n                            <div className=\"flex sm:flex-col items-center sm:items-start gap-2 sm:gap-0\">\r\n                                <p className=\"text-xs text-gray-500 dark:text-gray-400 font-medium\">Deadline:</p>\r\n                                <p className=\"text-sm font-bold text-gray-900 dark:text-gray-200\">Today, 5:00 PM</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex items-center gap-2 text-red-600 dark:text-red-400\">\r\n                                <Lock size={16} />\r\n                                <div className=\"text-left\">\r\n                                    <p className=\"text-[10px] md:text-xs font-bold uppercase\">Qualifications Missing</p>\r\n                                    <p className=\"text-[10px] md:text-xs hidden sm:block\">Complete: {complianceCheck.missingCourses.join(', ')}</p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                {isBooked && !isRevision && (\r\n                    <p className=\"text-sm font-bold text-green-600 dark:text-green-500 flex items-center justify-center sm:justify-start gap-1\">\r\n                        <CheckCircle size={14}/> Job is active\r\n                    </p>\r\n                )}\r\n                {isRevision && (\r\n                    <p className=\"text-sm font-bold text-amber-600 dark:text-amber-500 flex items-center justify-center sm:justify-start gap-1\">\r\n                        <RotateCcw size={14}/> Action Required: Revision\r\n                    </p>\r\n                )}\r\n                {currentStatus === 'Pending Approval' && (\r\n                    <p className=\"text-sm font-bold text-indigo-500 dark:text-indigo-400 flex items-center justify-center sm:justify-start gap-1\">\r\n                        <Loader2 size={14} className=\"animate-spin\" /> Awaiting Admin Review\r\n                    </p>\r\n                )}\r\n                {currentStatus === 'Completed' && (\r\n                    <p className=\"text-sm font-bold text-gray-500 dark:text-gray-400 flex items-center justify-center sm:justify-start gap-1\">\r\n                        <CheckCircle size={14}/> Work Approved • Payment Pending\r\n                    </p>\r\n                )}\r\n            </>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Buttons */}\r\n      <div className=\"flex gap-3 w-full sm:w-auto\">\r\n        <button \r\n          onClick={onClose}\r\n          disabled={uploading}\r\n          className=\"flex-1 sm:flex-none px-4 md:px-6 py-2.5 md:py-3 border border-gray-300 dark:border-white/10 text-gray-700 dark:text-gray-200 font-bold rounded-xl hover:bg-gray-100 dark:hover:bg-white/10 transition-colors disabled:opacity-50 text-sm md:text-base\"\r\n        >\r\n          Close\r\n        </button>\r\n        \r\n        {viewMode === 'completionForm' ? (\r\n          <button \r\n            onClick={handleSubmitCompletion}\r\n            disabled={uploading || !completionNotes}\r\n            className=\"flex-[2] sm:flex-none px-6 md:px-8 py-2.5 md:py-3 bg-jambo-600 dark:bg-jambo-500 text-white font-bold rounded-xl shadow-lg hover:bg-jambo-700 dark:hover:bg-jambo-600 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:shadow-none text-sm md:text-base\"\r\n          >\r\n            {uploading ? (\r\n              <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin\"></div> Sending...</span>\r\n            ) : (\r\n              <><Send size={18} /> {isRevision ? 'Submit Revision' : 'Submit Work'}</>\r\n            )}\r\n          </button>\r\n        ) : (\r\n          <>\r\n            {isAvailable && (\r\n              <button \r\n                onClick={handleAccept}\r\n                disabled={uploading || !complianceCheck.compliant || isExpired}\r\n                className={`flex-[2] sm:flex-none px-6 md:px-8 py-2.5 md:py-3 font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all text-sm md:text-base ${\r\n                    complianceCheck.compliant && !isExpired\r\n                    ? 'bg-jambo-600 dark:bg-jambo-500 text-white hover:bg-jambo-700 dark:hover:bg-jambo-600 hover:scale-105'\r\n                    : 'bg-gray-200 dark:bg-white/10 text-gray-400 dark:text-gray-500 cursor-not-allowed shadow-none'\r\n                }`}\r\n              >\r\n                {uploading ? (\r\n                  <span className=\"flex items-center gap-2\"><div className=\"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin\"></div> Accepting...</span>\r\n                ) : (\r\n                  <>{isExpired ? <XCircle size={18} /> : (complianceCheck.compliant ? <CheckCircle size={20} /> : <Lock size={18} />)} {isExpired ? 'Expired' : 'Claim Job'}</>\r\n                )}\r\n              </button>\r\n            )}\r\n\r\n            {(isBooked || isRevision) && (\r\n              <div className=\"flex gap-2 w-full sm:w-auto\">\r\n                {handleUnassign && currentStatus === 'Scheduled' && (\r\n                    <button \r\n                        type=\"button\"\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            handleUnassign();\r\n                        }}\r\n                        className=\"flex-1 sm:flex-none px-4 py-2.5 md:py-3 bg-white dark:bg-white/5 border border-red-200 dark:border-red-900/50 text-red-600 dark:text-red-400 font-bold rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 flex items-center justify-center gap-2 text-sm md:text-base\"\r\n                    >\r\n                        <LogOut size={18} /> Unassign\r\n                    </button>\r\n                )}\r\n                <button className=\"flex-1 sm:flex-none px-4 py-2.5 md:py-3 bg-white dark:bg-white/5 border border-gray-300 dark:border-white/10 text-gray-700 dark:text-gray-200 font-bold rounded-xl hover:bg-gray-50 dark:hover:bg-white/10 flex items-center justify-center gap-2 text-sm md:text-base\">\r\n                  <Phone size={18} /> <span className=\"hidden sm:inline\">Contact</span>\r\n                </button>\r\n                <button \r\n                  onClick={() => setViewMode('completionForm')}\r\n                  className={`flex-[2] sm:flex-none px-4 md:px-6 py-2.5 md:py-3 text-white font-bold rounded-xl flex items-center justify-center gap-2 shadow-lg text-sm md:text-base transition-all\r\n                    ${isRevision ? 'bg-amber-500 hover:bg-amber-600' : 'bg-jambo-600 hover:bg-jambo-700 dark:bg-jambo-500 dark:hover:bg-jambo-600'}\r\n                  `}\r\n                >\r\n                  {isRevision ? <RotateCcw size={18} /> : <CheckCircle size={18} />} \r\n                  {isRevision ? 'Update & Resubmit' : 'Complete Job'}\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {currentStatus === 'Completed' && (\r\n              <button \r\n                onClick={handlePrintInvoice}\r\n                disabled={isGeneratingInvoice}\r\n                className=\"flex-[2] sm:flex-none px-4 md:px-6 py-2.5 md:py-3 bg-gray-800 dark:bg-gray-700 text-white font-bold rounded-xl hover:bg-gray-900 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 text-sm md:text-base disabled:opacity-60\"\r\n              >\r\n                {isGeneratingInvoice ? <Loader2 size={18} className=\"animate-spin\"/> : <Printer size={18} />} \r\n                Invoice\r\n              </button>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4592, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/jobs/JobDetailsModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { FileText, Mic, Video } from 'lucide-react';\r\nimport { Job, mockDb } from '@/data/mockDatabase';\r\nimport { ToastType } from '../Toast';\r\nimport { JobChatWidget } from '../../../messaging/JobChatWidget';\r\n\r\n// Sub-components\r\nimport { ModalHeader } from './modal/ModalHeader';\r\nimport { JobInfo } from './modal/JobInfo';\r\nimport { CompletionForm } from './modal/CompletionForm';\r\nimport { ModalFooter } from './modal/ModalFooter';\r\n\r\ninterface JobDetailsModalProps {\r\n  job: Job;\r\n  onClose: () => void;\r\n  onNavigate: (section: string) => void;\r\n  showToast: (msg: string, type: ToastType) => void;\r\n}\r\n\r\nexport const JobDetailsModal = ({ job, onClose, onNavigate, showToast }: JobDetailsModalProps) => {\r\n  const [currentStatus, setCurrentStatus] = useState(job.status);\r\n  const [viewMode, setViewMode] = useState<'details' | 'completionForm'>('details');\r\n  const [completionNotes, setCompletionNotes] = useState('');\r\n  const [completionFile, setCompletionFile] = useState<string | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  \r\n  // Chat Logic\r\n  const currentUser = mockDb.auth.getCurrentUser();\r\n  // Default to admin if no postedBy set, or if postedBy is self (unlikely but possible in testing)\r\n  const chatPeerId = (job.postedBy && job.postedBy !== currentUser?.id) ? job.postedBy : 'u-admin-001';\r\n\r\n  // Status Helpers\r\n  const isAvailable = currentStatus === 'Open';\r\n  const isBooked = currentStatus === 'Scheduled' || currentStatus === 'In Progress';\r\n  const isHistory = currentStatus === 'Completed' || currentStatus === 'Cancelled';\r\n  \r\n  // Theme Helper\r\n  const getTheme = () => {\r\n    switch (job.category) {\r\n      case 'Translation': return { bg: 'bg-teal-50 dark:bg-teal-900/30', text: 'text-teal-700 dark:text-teal-300', border: 'border-teal-200 dark:border-teal-800', icon: FileText };\r\n      case 'Transcription': return { bg: 'bg-orange-50 dark:bg-orange-900/30', text: 'text-orange-700 dark:text-orange-300', border: 'border-orange-200 dark:border-orange-800', icon: Mic };\r\n      default: return { bg: 'bg-purple-50 dark:bg-purple-900/30', text: 'text-jambo-700 dark:text-purple-300', border: 'border-purple-200 dark:border-purple-800', icon: Video };\r\n    }\r\n  };\r\n\r\n  const theme = getTheme();\r\n\r\n  // Handlers\r\n  const handleAccept = () => {\r\n    setUploading(true);\r\n    setTimeout(() => {\r\n        mockDb.updateJobStatus(job.id, 'Scheduled');\r\n        setCurrentStatus('Scheduled');\r\n        setUploading(false);\r\n        showToast('Job Accepted Successfully', 'success');\r\n        onClose();\r\n        onNavigate('jobs-bookings');\r\n    }, 1200);\r\n  };\r\n\r\n  const handleSubmitCompletion = () => {\r\n      setUploading(true);\r\n      setTimeout(() => {\r\n          mockDb.updateJobStatus(job.id, 'Completed', {\r\n              notes: completionNotes,\r\n              file: completionFile || undefined\r\n          });\r\n          setUploading(false);\r\n          showToast('Job Completed Successfully', 'success');\r\n          onClose();\r\n          onNavigate('jobs-history');\r\n      }, 2000);\r\n  };\r\n\r\n  const handleUnassign = () => {\r\n      if (window.confirm('Are you sure you want to unassign yourself from this job? It will be returned to the marketplace.')) {\r\n          setUploading(true);\r\n          setTimeout(() => {\r\n              const success = mockDb.unassignJob(job.id);\r\n              setUploading(false);\r\n              if (success) {\r\n                  showToast('Job unassigned successfully.', 'info');\r\n                  onClose();\r\n                  // Force refresh or nav\r\n                  onNavigate('jobs-available'); \r\n              } else {\r\n                  showToast('Failed to unassign job. Please contact support.', 'error');\r\n              }\r\n          }, 800);\r\n      }\r\n  };\r\n\r\n  const handleFileSelect = () => {\r\n      const fakeFileName = `Completion_Proof_${job.id}_${Date.now()}.pdf`;\r\n      setCompletionFile(fakeFileName);\r\n  };\r\n\r\n  // Lock body scroll when modal is open\r\n  useEffect(() => {\r\n    document.body.style.overflow = 'hidden';\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, []);\r\n\r\n  const modalContent = (\r\n    <div className=\"fixed inset-0 z-[9999] flex items-center justify-center md:p-4 animate-in fade-in duration-300 safe-area-inset-top\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"absolute inset-0 bg-jambo-950/60 backdrop-blur-sm transition-opacity\"\r\n        onClick={onClose}\r\n      ></div>\r\n\r\n      {/* Main Container */}\r\n      <div className=\"bg-white dark:bg-[#1a1625] w-full h-full md:h-auto md:max-h-[90vh] landscape:max-h-[100dvh] md:max-w-3xl md:rounded-2xl shadow-2xl relative z-10 flex flex-col animate-in zoom-in-95 duration-300 overflow-hidden safe-area-padding\">\r\n        \r\n        <ModalHeader \r\n          job={job}\r\n          viewMode={viewMode}\r\n          setViewMode={setViewMode}\r\n          onClose={onClose}\r\n          theme={theme}\r\n          currentStatus={currentStatus}\r\n        />\r\n\r\n        {/* Dynamic Body Content - Scrollable Area */}\r\n        <div className=\"flex-1 min-h-0 overflow-y-auto custom-scrollbar bg-white dark:bg-[#1a1625] pb-24 md:pb-0\">\r\n          {viewMode === 'details' ? (\r\n            <JobInfo \r\n              job={job} \r\n              isHistory={isHistory} \r\n              isAvailable={isAvailable} \r\n            />\r\n          ) : (\r\n            <CompletionForm \r\n              completionNotes={completionNotes}\r\n              setCompletionNotes={setCompletionNotes}\r\n              completionFile={completionFile}\r\n              handleFileSelect={handleFileSelect}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <ModalFooter \r\n          currentStatus={currentStatus}\r\n          job={job}\r\n          viewMode={viewMode}\r\n          isAvailable={isAvailable}\r\n          isBooked={isBooked}\r\n          isHistory={isHistory}\r\n          uploading={uploading}\r\n          completionNotes={completionNotes}\r\n          onClose={onClose}\r\n          handleAccept={handleAccept}\r\n          handleSubmitCompletion={handleSubmitCompletion}\r\n          handleUnassign={handleUnassign}\r\n          setViewMode={setViewMode}\r\n        />\r\n\r\n        {/* Messaging Widget (Floats above content) */}\r\n        {currentUser && (\r\n            <JobChatWidget \r\n                jobId={job.id}\r\n                currentUserId={currentUser.id}\r\n                peerId={chatPeerId}\r\n            />\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Use React Portal to render at document root, bypassing all other stacking contexts (headers, sidebars)\r\n  return createPortal(modalContent, document.body);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4811, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/messages/PortalMessages.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { mockDb, Conversation } from '@/data/mockDatabase';\r\nimport { ConversationList } from '../../../messaging/ConversationList';\r\nimport { MessageThread } from '../../../messaging/MessageThread';\r\nimport { Search, Edit } from 'lucide-react';\r\nimport { AdminJobModal } from '../../../admin/jobs/AdminJobModal';\r\nimport { JobDetailsModal } from '../jobs/JobDetailsModal';\r\n\r\ninterface PortalMessagesProps {\r\n    // Props if needed\r\n}\r\n\r\nexport const PortalMessages = () => {\r\n  const [conversations, setConversations] = useState<Conversation[]>([]);\r\n  const [selectedPeerId, setSelectedPeerId] = useState<string | null>(null);\r\n  const [selectedJobId, setSelectedJobId] = useState<string | undefined>(undefined);\r\n  const [viewingJobId, setViewingJobId] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  \r\n  // Mobile View State\r\n  const [showThread, setShowThread] = useState(false);\r\n\r\n  const currentUser = mockDb.auth.getCurrentUser();\r\n\r\n  const refreshConversations = () => {\r\n      if (currentUser) {\r\n          setConversations(mockDb.getConversations(currentUser.id));\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n      refreshConversations();\r\n      const unsubscribe = mockDb.subscribe(refreshConversations);\r\n      return unsubscribe;\r\n  }, [currentUser]);\r\n\r\n  // Handle selection\r\n  const handleSelectConversation = (peerId: string, jobId?: string) => {\r\n      setSelectedPeerId(peerId);\r\n      setSelectedJobId(jobId);\r\n      setShowThread(true);\r\n      \r\n      // Mark as read immediately on selection\r\n      if (currentUser) {\r\n          mockDb.markAsRead(currentUser.id, peerId, jobId);\r\n      }\r\n  };\r\n\r\n  const handleSendMessage = (content: string) => {\r\n      if (!currentUser || !selectedPeerId) return;\r\n      mockDb.sendMessage(currentUser.id, selectedPeerId, content, selectedJobId);\r\n      // Conversations will auto-refresh via subscription, bumping thread to top\r\n  };\r\n\r\n  const filteredConversations = conversations.filter(c => {\r\n      const name = c.peer ? `${c.peer.firstName} ${c.peer.lastName}` : 'Unknown';\r\n      const jobTitle = c.job ? c.job.title : '';\r\n      const term = searchTerm.toLowerCase();\r\n      return name.toLowerCase().includes(term) || jobTitle.toLowerCase().includes(term);\r\n  });\r\n\r\n  if (!currentUser) return null;\r\n\r\n  // Resolve current thread messages\r\n  const activeMessages = selectedPeerId \r\n      ? mockDb.getThread(currentUser.id, selectedPeerId, selectedJobId) \r\n      : [];\r\n\r\n  return (\r\n    <div className=\"h-[calc(100vh-140px)] min-h-[500px] flex bg-white dark:bg-[#1a1625] rounded-2xl shadow-sm border border-gray-200 dark:border-white/5 overflow-hidden animate-in fade-in duration-500\">\r\n        \r\n        {/* Sidebar (List) - Hidden on mobile if thread is open */}\r\n        <div className={`w-full md:w-80 lg:w-96 border-r border-gray-200 dark:border-white/5 flex flex-col ${showThread ? 'hidden md:flex' : 'flex'}`}>\r\n            <div className=\"p-4 border-b border-gray-100 dark:border-white/5\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Messages</h2>\r\n                <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                    <input \r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-jambo-600 dark:text-white transition-all\"\r\n                        placeholder=\"Search messages...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n                <ConversationList \r\n                    conversations={filteredConversations}\r\n                    selectedPeerId={selectedPeerId || undefined}\r\n                    selectedJobId={selectedJobId}\r\n                    onSelect={handleSelectConversation}\r\n                />\r\n            </div>\r\n        </div>\r\n\r\n        {/* Main Chat Area */}\r\n        <div className={`flex-1 flex flex-col ${!showThread ? 'hidden md:flex' : 'flex'}`}>\r\n            {selectedPeerId ? (\r\n                <MessageThread \r\n                    currentUserId={currentUser.id}\r\n                    peerId={selectedPeerId}\r\n                    jobId={selectedJobId}\r\n                    messages={activeMessages}\r\n                    onSendMessage={handleSendMessage}\r\n                    onBack={() => setShowThread(false)}\r\n                    onViewJob={setViewingJobId}\r\n                />\r\n            ) : (\r\n                <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 p-8 text-center\">\r\n                    <div className=\"w-20 h-20 bg-gray-100 dark:bg-white/5 rounded-full flex items-center justify-center mb-4\">\r\n                        <Edit size={32} className=\"opacity-50\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-bold text-gray-600 dark:text-gray-300\">Select a conversation</h3>\r\n                    <p className=\"text-sm\">Choose a thread from the list to start messaging.</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n\r\n        {/* View Job Modal Logic */}\r\n        {viewingJobId && (\r\n            // Determine which modal to show based on Role\r\n            currentUser.role === 'admin' ? (\r\n                <AdminJobModal \r\n                    job={mockDb.getAllJobs().find(j => j.id === viewingJobId)!} \r\n                    onClose={() => setViewingJobId(null)}\r\n                    onUpdate={() => {}}\r\n                />\r\n            ) : (\r\n                <JobDetailsModal \r\n                    job={mockDb.getAllJobs().find(j => j.id === viewingJobId)!}\r\n                    onClose={() => setViewingJobId(null)}\r\n                    onNavigate={() => {}}\r\n                    showToast={() => {}} // Dummy prop for this context\r\n                />\r\n            )\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5039, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/UnderConstruction.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Briefcase } from 'lucide-react';\r\nimport { IconBox } from '../../ui/IconBox';\r\n\r\nexport const UnderConstruction = ({ title }: { title: string }) => {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-[50vh] text-center opacity-50 animate-in fade-in zoom-in duration-500\">\r\n        <div className=\"mb-6\">\r\n            <IconBox icon={Briefcase} variant=\"neutral\" size=\"2xl\" />\r\n        </div>\r\n        <h3 className=\"text-2xl font-bold text-gray-300 dark:text-white/50 font-serif mb-2\">Section Under Construction</h3>\r\n        <p className=\"text-gray-400 dark:text-white/30 max-w-sm mx-auto\">\r\n            You have navigated to <strong>{title}</strong>. \r\n            This feature is coming soon to the Jambo Portal.\r\n        </p>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAEO,MAAM,oBAAoB,CAAC,EAAE,KAAK,EAAqB;IAC5D,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,uIAAO;oBAAC,MAAM,yNAAS;oBAAE,SAAQ;oBAAU,MAAK;;;;;;;;;;;0BAErD,8OAAC;gBAAG,WAAU;0BAAsE;;;;;;0BACpF,8OAAC;gBAAE,WAAU;;oBAAoD;kCACvC,8OAAC;kCAAQ;;;;;;oBAAe;;;;;;;;;;;;;AAK1D"}}]
}