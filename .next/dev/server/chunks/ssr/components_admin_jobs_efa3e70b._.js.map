{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/pdf/JobDetailsPDF.ts"],"sourcesContent":["\r\nimport { jsPDF } from \"jspdf\";\r\nimport { Job, mockDb } from \"@/data/mockDatabase\";\r\nimport { CONSTANTS, COLORS, getCompanyLogo, formatDateUK, formatCurrency } from \"../../../portal/dashboard/finance/pdf/PDFConfig\";\r\nimport { PDFHeader } from \"../../../portal/dashboard/finance/pdf/PDFHeader\";\r\nimport { PDFFooter } from \"../../../portal/dashboard/finance/pdf/PDFFooter\";\r\nimport { getInterpretingJobPayoutDetails } from \"../../../../portal/dashboard/jobs/job-helpers\";\r\n\r\nexport class JobDetailsPDF {\r\n  static async generate(job: Job) {\r\n    const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });\r\n    const logoUrl = await getCompanyLogo();\r\n    const width = doc.internal.pageSize.getWidth();\r\n    const height = doc.internal.pageSize.getHeight();\r\n    const margin = CONSTANTS.MARGIN;\r\n    const footerHeight = 40; // Reserve space for footer at bottom\r\n\r\n    let y = margin;\r\n\r\n    // --- HEADER ---\r\n    const header = new PDFHeader(doc);\r\n    const meta = [\r\n      { label: 'Job Ref', value: job.id },\r\n      { label: 'Status', value: job.status },\r\n      { label: 'Created', value: formatDateUK(job.history.find(h => h.type === 'CREATED')?.date || new Date().toISOString()) }\r\n    ];\r\n    \r\n    let recipientUser = null;\r\n    if (job.clientId) {\r\n        recipientUser = mockDb.getAllUsers().find(u => u.id === job.clientId) || null;\r\n    } else if (job.linguistId) {\r\n        recipientUser = mockDb.getAllUsers().find(u => u.id === job.linguistId) || null;\r\n    }\r\n\r\n    y = header.render('JOB ORDER', recipientUser, meta, logoUrl, margin);\r\n\r\n    // --- MAIN TITLE & TAGS ---\r\n    y += 5; // Reduced from 10\r\n    \r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(16);\r\n    doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    const titleLines = doc.splitTextToSize(job.title, width - (margin * 2));\r\n    doc.text(titleLines, margin, y);\r\n    y += (titleLines.length * 6);\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    doc.setTextColor(COLORS.ORANGE.r, COLORS.ORANGE.g, COLORS.ORANGE.b);\r\n    const tags = `${job.languagePair.toUpperCase()} • ${job.category.toUpperCase()} • ${job.type.toUpperCase()}`;\r\n    doc.text(tags, margin, y);\r\n    y += 8; // Reduced from 12\r\n\r\n    // --- PAGE BREAK HELPER ---\r\n    const checkPageBreak = (heightNeeded: number) => {\r\n        if (y + heightNeeded > height - footerHeight) {\r\n            doc.addPage();\r\n            y = margin + 10; // Add a small margin at top of new page\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    // --- DRAW SECTION HELPER ---\r\n    const drawSection = (title: string, data: {label: string, value: string}[]) => {\r\n        // Pre-calculate height with tighter spacing\r\n        const rowHeight = 9; // Reduced from 12\r\n        const rowCount = Math.ceil(data.length / 2);\r\n        const estimatedHeight = 8 + (rowCount * rowHeight) + 4; // Reduced estimates\r\n\r\n        checkPageBreak(estimatedHeight);\r\n\r\n        // --- DRAWING ---\r\n        doc.setFont('helvetica', 'bold');\r\n        doc.setFontSize(10);\r\n        doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n        doc.text(title.toUpperCase(), margin, y);\r\n        \r\n        doc.setDrawColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n        doc.setLineWidth(0.1);\r\n        doc.line(margin, y + 2, width - margin, y + 2);\r\n        \r\n        y += 7; // Reduced from 8\r\n\r\n        const colWidth = (width - (margin * 2)) / 2;\r\n\r\n        data.forEach((item, i) => {\r\n            const isRight = i % 2 !== 0;\r\n            const x = isRight ? margin + colWidth : margin;\r\n            \r\n            // Label\r\n            doc.setFont('helvetica', 'bold');\r\n            doc.setFontSize(9);\r\n            doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n            doc.text(item.label, x, y);\r\n            \r\n            // Value\r\n            doc.setFont('helvetica', 'normal');\r\n            doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n            \r\n            const maxValWidth = colWidth - 5;\r\n            const valLines = doc.splitTextToSize(item.value || '-', maxValWidth);\r\n            doc.text(valLines, x, y + 4.5); // Tighter vertical alignment\r\n\r\n            if (isRight) {\r\n                // Move to next row\r\n                y += rowHeight; \r\n            }\r\n        });\r\n        \r\n        // If odd items, advance Y for next section manually\r\n        if (data.length % 2 !== 0) y += rowHeight;\r\n        y += 4; // Reduced section spacing\r\n    };\r\n\r\n    // --- LOGISTICS ---\r\n    drawSection('Logistics Details', [\r\n        { label: 'Assignment Date', value: formatDateUK(job.date) },\r\n        { label: 'Time', value: job.time || 'N/A' },\r\n        { label: 'Location', value: job.location },\r\n        { label: 'Duration', value: job.duration || 'N/A' },\r\n        { label: 'Urgency', value: job.isUrgent ? 'High Priority' : 'Standard' },\r\n        { label: 'Start / Deadline', value: job.deadlineTime || job.time || 'N/A' }\r\n    ]);\r\n\r\n    // --- FINANCIALS ---\r\n    drawSection('Financial Information', [\r\n        { label: 'Agreed Rate', value: job.rate },\r\n        { label: 'Est. Total Payout', value: job.totalPayout ? formatCurrency(job.totalPayout) : 'Calculated on completion' },\r\n        ...(job.hourlyRate ? [{ label: 'Hourly Rate', value: formatCurrency(job.hourlyRate) }] : []),\r\n        ...(job.travelRate ? [{ label: 'Travel Rate', value: formatCurrency(job.travelRate) }] : []),\r\n        ...(job.mileageRate ? [{ label: 'Mileage Rate', value: formatCurrency(job.mileageRate) }] : []),\r\n    ]);\r\n\r\n    // --- DESCRIPTION ---\r\n    // Calculate Description Height accurately with tighter box\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    const descLines = doc.splitTextToSize(job.description, width - (margin * 2) - 8);\r\n    const lineHeight = 4.5;\r\n    const boxPadding = 6;\r\n    const boxHeight = (descLines.length * lineHeight) + (boxPadding * 2);\r\n    \r\n    const headerHeight = 8; \r\n    const totalDescHeight = headerHeight + boxHeight + 8;\r\n\r\n    checkPageBreak(totalDescHeight);\r\n\r\n    // Draw Description Header\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(10);\r\n    doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n    doc.text('INSTRUCTIONS / DESCRIPTION', margin, y);\r\n    doc.setDrawColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    doc.line(margin, y + 2, width - margin, y + 2);\r\n    y += 6;\r\n\r\n    // Draw Box\r\n    doc.setFillColor(248, 250, 252);\r\n    doc.setDrawColor(226, 232, 240);\r\n    doc.rect(margin, y, width - (margin * 2), boxHeight, 'FD');\r\n    \r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(9);\r\n    doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n    doc.text(descLines, margin + 4, y + boxPadding + 1);\r\n    y += boxHeight + 8;\r\n\r\n    // --- ASSIGNMENT ---\r\n    if (job.linguistId) {\r\n        const linguist = mockDb.getAllUsers().find(u => u.id === job.linguistId);\r\n        if (linguist) {\r\n             drawSection('Assigned Linguist', [\r\n                { label: 'Name', value: `${linguist.firstName} ${linguist.lastName}` },\r\n                { label: 'Email', value: linguist.email },\r\n                { label: 'Phone', value: linguist.phone || 'N/A' },\r\n                { label: 'Qualifications', value: linguist.qualifications?.join(', ') || 'N/A' }\r\n            ]);\r\n        }\r\n    }\r\n\r\n    // --- FOOTERS (Apply to ALL pages) ---\r\n    const pageCount = doc.getNumberOfPages();\r\n    const footer = new PDFFooter(doc);\r\n    for (let i = 1; i <= pageCount; i++) {\r\n        doc.setPage(i);\r\n        const bottomY = height - 40;\r\n        footer.renderBottomInfo(null, `REF: ${job.id} • Page ${i} of ${pageCount}`, bottomY);\r\n    }\r\n\r\n    doc.save(`job-${job.id}-details.pdf`);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/JobHeader.tsx"],"sourcesContent":["\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { X, Printer, Loader2, MoreVertical, Edit, FileText } from 'lucide-react';\r\nimport { Job } from '@/data/types';\r\nimport { JobStatusBadge } from '../../../ui/JobStatusBadge';\r\nimport { JobDetailsPDF } from '../pdf/JobDetailsPDF';\r\n\r\ninterface JobHeaderProps {\r\n  job: Job;\r\n  onClose: () => void;\r\n  onEdit?: () => void;\r\n}\r\n\r\nexport const JobHeader = ({ job, onClose, onEdit }: JobHeaderProps) => {\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n        if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n            setIsMenuOpen(false);\r\n        }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const handleExportPDF = async () => {\r\n      setIsExporting(true);\r\n      try {\r\n          await JobDetailsPDF.generate(job);\r\n      } catch (e) {\r\n          console.error(\"Failed to generate Job PDF:\", e);\r\n          alert(\"Failed to generate PDF. Please try again.\");\r\n      } finally {\r\n          setIsExporting(false);\r\n      }\r\n  };\r\n\r\n  return (\r\n    <header className=\"p-4 sm:p-5 md:p-6 bg-white dark:bg-[#1a1625] border-b border-gray-200 dark:border-white/5 flex justify-between items-center shadow-sm z-10 shrink-0\">\r\n        <div className=\"min-w-0 pr-4\">\r\n            <h2 className=\"font-serif font-bold text-lg sm:text-xl md:text-2xl text-gray-900 dark:text-white truncate\">{job.title}</h2>\r\n            <div className=\"flex flex-wrap items-center gap-2 sm:gap-3 text-xs text-gray-500 mt-1\">\r\n                <span className=\"font-mono\">#{job.id}</span>\r\n                <span className=\"hidden xs:inline\">•</span>\r\n                <span>{job.category}</span>\r\n                <span className=\"hidden sm:inline\">•</span>\r\n                <JobStatusBadge status={job.status} className=\"scale-90 origin-left\" />\r\n            </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 shrink-0\">\r\n            <button \r\n                onClick={handleExportPDF}\r\n                disabled={isExporting}\r\n                className=\"hidden sm:flex p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400 transition-colors disabled:opacity-50\"\r\n                title=\"Export PDF\"\r\n            >\r\n                {isExporting ? <Loader2 size={18} className=\"animate-spin\"/> : <Printer size={18} />}\r\n            </button>\r\n            \r\n            {/* Dropdown Menu */}\r\n            <div className=\"relative\" ref={menuRef}>\r\n                <button \r\n                    onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n                    className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400\"\r\n                >\r\n                    <MoreVertical size={18} />\r\n                </button>\r\n                {isMenuOpen && (\r\n                    <div className=\"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-[#2a2438] rounded-xl shadow-2xl border border-gray-200 dark:border-white/10 overflow-hidden animate-in fade-in zoom-in-95 duration-200 z-50\">\r\n                        {onEdit && (\r\n                            <button \r\n                                onClick={() => { onEdit(); setIsMenuOpen(false); }}\r\n                                className=\"w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5 flex items-center gap-2 font-medium\"\r\n                            >\r\n                                <Edit size={16} className=\"text-jambo-600 dark:text-jambo-400\" /> Edit Job Details\r\n                            </button>\r\n                        )}\r\n                        <button \r\n                            onClick={() => { handleExportPDF(); setIsMenuOpen(false); }}\r\n                            className=\"w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5 flex items-center gap-2 md:hidden\"\r\n                        >\r\n                            {isExporting ? <Loader2 size={16} className=\"animate-spin\"/> : <FileText size={16} />} \r\n                            Export PDF\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <button \r\n                onClick={onClose} \r\n                className=\"p-2 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-full text-gray-500 dark:text-gray-300 transition-colors\"\r\n            >\r\n                <X size={18} />\r\n            </button>\r\n        </div>\r\n    </header>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;;;;;AAQO,MAAM,YAAY,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAkB;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,UAAU,IAAA,+MAAM,EAAiB;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YACxB,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBACpE,cAAc;YAClB;QACJ;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,MAAM,kBAAkB;QACpB,eAAe;QACf,IAAI;YACA,MAAM,oKAAa,CAAC,QAAQ,CAAC;QACjC,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACV,SAAU;YACN,eAAe;QACnB;IACJ;IAEA,qBACE,8OAAC;QAAO,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAA8F,IAAI,KAAK;;;;;;kCACrH,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;;oCAAY;oCAAE,IAAI,EAAE;;;;;;;0CACpC,8OAAC;gCAAK,WAAU;0CAAmB;;;;;;0CACnC,8OAAC;0CAAM,IAAI,QAAQ;;;;;;0CACnB,8OAAC;gCAAK,WAAU;0CAAmB;;;;;;0CACnC,8OAAC,qJAAc;gCAAC,QAAQ,IAAI,MAAM;gCAAE,WAAU;;;;;;;;;;;;;;;;;;0BAGtD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACG,SAAS;wBACT,UAAU;wBACV,WAAU;wBACV,OAAM;kCAEL,4BAAc,8OAAC,4NAAO;4BAAC,MAAM;4BAAI,WAAU;;;;;qFAAmB,8OAAC,mNAAO;4BAAC,MAAM;;;;;;;;;;;kCAIlF,8OAAC;wBAAI,WAAU;wBAAW,KAAK;;0CAC3B,8OAAC;gCACG,SAAS,IAAM,cAAc,CAAC;gCAC9B,WAAU;0CAEV,cAAA,8OAAC,0OAAY;oCAAC,MAAM;;;;;;;;;;;4BAEvB,4BACG,8OAAC;gCAAI,WAAU;;oCACV,wBACG,8OAAC;wCACG,SAAS;4CAAQ;4CAAU,cAAc;wCAAQ;wCACjD,WAAU;;0DAEV,8OAAC,mNAAI;gDAAC,MAAM;gDAAI,WAAU;;;;;;4CAAuC;;;;;;;kDAGzE,8OAAC;wCACG,SAAS;4CAAQ;4CAAmB,cAAc;wCAAQ;wCAC1D,WAAU;;4CAET,4BAAc,8OAAC,4NAAO;gDAAC,MAAM;gDAAI,WAAU;;;;;yGAAmB,8OAAC,0NAAQ;gDAAC,MAAM;;;;;;4CAAO;;;;;;;;;;;;;;;;;;;kCAOtG,8OAAC;wBACG,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC,iMAAC;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKzB"}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/LinguistSelector.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { User as UserType } from '@/data/types';\r\nimport { ChevronDown, Search, X } from 'lucide-react';\r\n\r\nexport const LinguistSelector = ({ allLinguists, currentLinguist, onSelect, disabled }: { allLinguists: UserType[], currentLinguist: UserType | null | undefined, onSelect: (userId: string | null) => void, disabled?: boolean }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const filteredLinguists = allLinguists.filter(u =>\r\n        u.id !== currentLinguist?.id && (\r\n            `${u.firstName} ${u.lastName}`.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            (u.location && u.location.toLowerCase().includes(searchTerm.toLowerCase()))\r\n        )\r\n    );\r\n\r\n    const handleSelect = (userId: string | null) => {\r\n        onSelect(userId);\r\n        setIsOpen(false);\r\n        setSearchTerm('');\r\n    };\r\n\r\n    const initials = (name: string) => name.split(' ').map(n => n[0]).join('');\r\n\r\n    return (\r\n        <div ref={dropdownRef} className=\"relative w-full\">\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => !disabled && setIsOpen(!isOpen)}\r\n                disabled={disabled}\r\n                className={`w-full border rounded-lg p-2 text-sm flex items-center justify-between transition-all \r\n                    ${disabled \r\n                        ? 'bg-gray-100 dark:bg-white/5 border-gray-200 dark:border-white/10 text-gray-400 cursor-not-allowed' \r\n                        : 'bg-gray-50 dark:bg-white/5 border-gray-200 dark:border-white/10 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-jambo-600 hover:border-jambo-300'\r\n                    }`}\r\n            >\r\n                {currentLinguist ? (\r\n                    <div className={`flex items-center gap-2 ${disabled ? 'opacity-70' : ''}`}>\r\n                        <div className=\"w-6 h-6 rounded-full bg-jambo-100 dark:bg-jambo-900 text-jambo-700 dark:text-jambo-300 flex items-center justify-center text-[10px] font-bold overflow-hidden\">\r\n                            {currentLinguist.avatarUrl ? <img src={currentLinguist.avatarUrl} className=\"w-full h-full object-cover\"/> : initials(`${currentLinguist.firstName} ${currentLinguist.lastName}`)}\r\n                        </div>\r\n                        <span className=\"font-medium\">{currentLinguist.firstName} {currentLinguist.lastName}</span>\r\n                    </div>\r\n                ) : (\r\n                    <span className=\"text-gray-400\">Select a linguist...</span>\r\n                )}\r\n                {!disabled && <ChevronDown size={16} className={`text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`} />}\r\n            </button>\r\n            \r\n            {isOpen && !disabled && (\r\n                <div className=\"absolute top-full mt-2 w-full bg-white/90 dark:bg-[#2a2438]/90 backdrop-blur-md rounded-xl shadow-2xl border border-gray-200 dark:border-white/10 z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                    <div className=\"p-2 border-b border-gray-100 dark:border-white/10\">\r\n                        <div className=\"relative\">\r\n                            <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                            <input \r\n                                type=\"text\"\r\n                                placeholder=\"Search by name or location...\"\r\n                                value={searchTerm}\r\n                                autoFocus\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                className=\"w-full bg-gray-100 dark:bg-white/5 border-none rounded-md pl-9 pr-4 py-2 text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-jambo-500\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ul className=\"max-h-60 overflow-y-auto custom-scrollbar p-2\">\r\n                        <li>\r\n                            <button onClick={() => handleSelect(null)} className=\"w-full flex items-center gap-2 px-3 py-2 rounded-md text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\">\r\n                                <X size={16} /> Unassign / Clear\r\n                            </button>\r\n                        </li>\r\n                        {filteredLinguists.length > 0 ? filteredLinguists.map(u => (\r\n                            <li key={u.id}>\r\n                                <button onClick={() => handleSelect(u.id)} className=\"w-full flex items-center gap-3 px-3 py-2 rounded-md hover:bg-jambo-50 dark:hover:bg-jambo-900/30 transition-colors text-left\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center text-xs font-bold text-gray-500 overflow-hidden shrink-0\">\r\n                                        {u.avatarUrl ? <img src={u.avatarUrl} className=\"w-full h-full object-cover\"/> : initials(`${u.firstName} ${u.lastName}`)}\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <p className=\"font-bold text-gray-900 dark:text-white truncate\">{u.firstName} {u.lastName}</p>\r\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">{u.location}</p>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n                        )) : (\r\n                            <li className=\"px-3 py-4 text-center text-sm text-gray-400 dark:text-gray-500\">No linguists found.</li>\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 755, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/JobOverview.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Calendar, MapPin, PoundSterling, Lock, FileText, Download, ExternalLink } from 'lucide-react';\r\nimport { Job } from '@/data/types';\r\nimport { JobStatusBadge } from '../../../ui/JobStatusBadge';\r\nimport { LinguistSelector } from './LinguistSelector';\r\nimport { User } from '@/data/types';\r\n\r\ninterface JobOverviewProps {\r\n  job: Job;\r\n  linguist: User | null | undefined;\r\n  allLinguists: User[];\r\n  isAssignmentLocked: boolean;\r\n  onAssign: (id: string | null) => void;\r\n  onViewProfile: (id: string) => void;\r\n}\r\n\r\nexport const JobOverview = ({ job, linguist, allLinguists, isAssignmentLocked, onAssign, onViewProfile }: JobOverviewProps) => {\r\n  \r\n  const renderFiles = () => (\r\n    job.attachments && job.attachments.length > 0 ? (\r\n        <div className=\"space-y-2\">\r\n            {job.attachments.map((file, idx) => (\r\n                <div key={idx} className=\"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 group\">\r\n                    <div className=\"flex items-center gap-2 overflow-hidden\">\r\n                        <div className=\"bg-white dark:bg-white/10 p-1.5 rounded text-jambo-600 dark:text-jambo-400\">\r\n                            <FileText size={14} />\r\n                        </div>\r\n                        <span className=\"text-xs font-bold text-gray-700 dark:text-gray-300 truncate\">{file.name}</span>\r\n                    </div>\r\n                    <a \r\n                        href={file.url} \r\n                        download={file.type === 'file'}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                        className=\"text-gray-400 hover:text-jambo-600 dark:hover:text-white transition-colors\"\r\n                        title={file.type === 'link' ? 'Open Link' : 'Download'}\r\n                    >\r\n                        {file.type === 'link' ? <ExternalLink size={14} /> : <Download size={14} />}\r\n                    </a>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    ) : (\r\n        <p className=\"text-xs text-gray-400 italic\">No source files attached.</p>\r\n    )\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-8\">\r\n        {/* Status */}\r\n        <div>\r\n            <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider block mb-2\">Job Status</span>\r\n            <JobStatusBadge status={job.status} />\r\n        </div>\r\n\r\n        {/* Linguist Assignment */}\r\n        <div>\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n                <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Assigned Linguist</span>\r\n                {isAssignmentLocked && <div title=\"Cannot reassign while pending review\"><Lock size={12} className=\"text-gray-400\" /></div>}\r\n            </div>\r\n            <LinguistSelector \r\n                allLinguists={allLinguists}\r\n                currentLinguist={linguist}\r\n                onSelect={onAssign}\r\n                disabled={isAssignmentLocked}\r\n            />\r\n            {isAssignmentLocked && (\r\n                <p className=\"text-[10px] text-gray-400 mt-2 italic bg-gray-50 dark:bg-white/5 p-2 rounded\">\r\n                    Reassignment is disabled for this status. Request a revision to unlock.\r\n                </p>\r\n            )}\r\n            {linguist && (\r\n                <div className=\"mt-2 flex justify-end\">\r\n                    <button \r\n                        className=\"text-[10px] font-bold text-jambo-600 dark:text-jambo-400 hover:underline\"\r\n                        onClick={() => onViewProfile(linguist.id)}\r\n                    >\r\n                        View Profile\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n\r\n        <div className=\"h-px bg-gray-100 dark:bg-white/5\"></div>\r\n\r\n        {/* Details */}\r\n        <div className=\"space-y-4 text-sm\">\r\n            <div className=\"flex gap-3\">\r\n                <Calendar size={16} className=\"text-gray-400 shrink-0\" />\r\n                <div>\r\n                    <p className=\"font-bold text-gray-900 dark:text-white\">Date & Time</p>\r\n                    <p className=\"text-gray-500 dark:text-gray-400\">{new Date(job.date).toLocaleDateString()} at {job.time}</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n                <MapPin size={16} className=\"text-gray-400 shrink-0\" />\r\n                <div>\r\n                    <p className=\"font-bold text-gray-900 dark:text-white\">Location</p>\r\n                    <p className=\"text-gray-500 dark:text-gray-400 leading-snug break-words\">{job.location}</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n                <PoundSterling size={16} className=\"text-gray-400 shrink-0\" />\r\n                <div>\r\n                    <p className=\"font-bold text-gray-900 dark:text-white\">Rate</p>\r\n                    <p className=\"text-gray-500 dark:text-gray-400 font-mono\">{job.rate}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"h-px bg-gray-100 dark:bg-white/5\"></div>\r\n\r\n        {/* Attachments */}\r\n        <div>\r\n            <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider block mb-3\">Job Files</span>\r\n            {renderFiles()}\r\n        </div>\r\n\r\n        <div className=\"h-px bg-gray-100 dark:bg-white/5\"></div>\r\n\r\n        <div>\r\n            <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider block mb-2\">Description</span>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-300 leading-relaxed\">{job.description}</p>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1162, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/LinguistAssignment.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Lock } from 'lucide-react';\r\nimport { LinguistSelector } from './LinguistSelector';\r\nimport { User } from '@/data/types';\r\n\r\ninterface LinguistAssignmentProps {\r\n  linguist: User | null | undefined;\r\n  allLinguists: User[];\r\n  isLocked: boolean;\r\n  onAssign: (id: string | null) => void;\r\n}\r\n\r\nexport const LinguistAssignment = ({ linguist, allLinguists, isLocked, onAssign }: LinguistAssignmentProps) => {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n        <span className=\"text-xs font-bold uppercase text-gray-500 flex items-center gap-2\">\r\n            Assigned Linguist\r\n            {isLocked && <Lock size={12} className=\"text-gray-400\" />}\r\n        </span>\r\n        <LinguistSelector \r\n            allLinguists={allLinguists}\r\n            currentLinguist={linguist}\r\n            onSelect={onAssign}\r\n            disabled={isLocked}\r\n        />\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAUO,MAAM,qBAAqB,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAA2B;IACxG,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAK,WAAU;;oBAAoE;oBAE/E,0BAAY,8OAAC,0MAAI;wBAAC,MAAM;wBAAI,WAAU;;;;;;;;;;;;0BAE3C,8OAAC,6KAAgB;gBACb,cAAc;gBACd,iBAAiB;gBACjB,UAAU;gBACV,UAAU;;;;;;;;;;;;AAItB"}},
    {"offset": {"line": 1215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/view-modal/JobProcessStepper.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { CheckCircle } from 'lucide-react';\r\n\r\nexport const JobProcessStepper = ({ status }: { status: string }) => {\r\n  const steps = [\r\n    { label: 'Open', index: 0 },\r\n    { label: 'Active', index: 1 },\r\n    { label: 'Review', index: 2 },\r\n    { label: 'Done', index: 3 }\r\n  ];\r\n\r\n  let currentStep = 0;\r\n  if (['Scheduled', 'In Progress'].includes(status)) currentStep = 1;\r\n  else if (['Pending Approval', 'Revision'].includes(status)) currentStep = 2;\r\n  else if (['Completed'].includes(status)) currentStep = 3;\r\n  else if (status === 'Cancelled') currentStep = -1;\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl mx-auto px-1 mb-10\">\r\n      <div className=\"flex items-center justify-between\">\r\n        {steps.map((step, i) => {\r\n          const isCompleted = i < currentStep;\r\n          const isCurrent = i === currentStep;\r\n          const isLast = i === steps.length - 1;\r\n\r\n          return (\r\n            <React.Fragment key={i}>\r\n              <div className=\"relative flex flex-col items-center z-10\">\r\n                <div className={`\r\n                    w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300\r\n                    ${isCompleted \r\n                        ? 'bg-jambo-600 border-jambo-600 text-white shadow-md' \r\n                        : isCurrent \r\n                            ? 'bg-white dark:bg-jambo-950 border-jambo-600 text-jambo-600 scale-110 shadow-[0_0_0_4px_rgba(132,27,160,0.15)] dark:shadow-[0_0_0_4px_rgba(132,27,160,0.3)]'\r\n                            : 'bg-white dark:bg-[#13111c] border-gray-200 dark:border-white/10 text-gray-300 dark:text-gray-600'\r\n                    }\r\n                `}>\r\n                    {isCompleted ? (\r\n                        <CheckCircle size={18} className=\"md:w-6 md:h-6\" strokeWidth={3} />\r\n                    ) : (\r\n                        <span className={`text-xs md:text-sm font-bold ${isCurrent ? 'animate-pulse' : ''}`}>{i + 1}</span>\r\n                    )}\r\n                </div>\r\n                \r\n                <div className={`\r\n                    absolute top-11 md:top-14 text-[9px] md:text-[10px] font-bold uppercase tracking-widest whitespace-nowrap transition-colors duration-300\r\n                    ${isCurrent || isCompleted ? 'text-jambo-700 dark:text-jambo-400 opacity-100' : 'text-gray-300 dark:text-gray-600'}\r\n                `}>\r\n                    {step.label}\r\n                </div>\r\n              </div>\r\n\r\n              {!isLast && (\r\n                  <div className=\"flex-1 mx-2 md:mx-4 h-[2px] bg-gray-100 dark:bg-white/10 rounded-full overflow-hidden relative\">\r\n                      <div className={`absolute left-0 top-0 bottom-0 bg-jambo-600 transition-all duration-700 ease-in-out ${isCompleted ? 'w-full' : 'w-0'}`}></div>\r\n                  </div>\r\n              )}\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAEO,MAAM,oBAAoB,CAAC,EAAE,MAAM,EAAsB;IAC9D,MAAM,QAAQ;QACZ;YAAE,OAAO;YAAQ,OAAO;QAAE;QAC1B;YAAE,OAAO;YAAU,OAAO;QAAE;QAC5B;YAAE,OAAO;YAAU,OAAO;QAAE;QAC5B;YAAE,OAAO;YAAQ,OAAO;QAAE;KAC3B;IAED,IAAI,cAAc;IAClB,IAAI;QAAC;QAAa;KAAc,CAAC,QAAQ,CAAC,SAAS,cAAc;SAC5D,IAAI;QAAC;QAAoB;KAAW,CAAC,QAAQ,CAAC,SAAS,cAAc;SACrE,IAAI;QAAC;KAAY,CAAC,QAAQ,CAAC,SAAS,cAAc;SAClD,IAAI,WAAW,aAAa,cAAc,CAAC;IAEhD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,MAAM,GAAG,CAAC,CAAC,MAAM;gBAChB,MAAM,cAAc,IAAI;gBACxB,MAAM,YAAY,MAAM;gBACxB,MAAM,SAAS,MAAM,MAAM,MAAM,GAAG;gBAEpC,qBACE,8OAAC,gNAAK,CAAC,QAAQ;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAW,CAAC;;oBAEb,EAAE,cACI,uDACA,YACI,+JACA,mGACT;gBACL,CAAC;8CACI,4BACG,8OAAC,0OAAW;wCAAC,MAAM;wCAAI,WAAU;wCAAgB,aAAa;;;;;iGAE9D,8OAAC;wCAAK,WAAW,CAAC,6BAA6B,EAAE,YAAY,kBAAkB,IAAI;kDAAG,IAAI;;;;;;;;;;;8CAIlG,8OAAC;oCAAI,WAAW,CAAC;;oBAEb,EAAE,aAAa,cAAc,mDAAmD,mCAAmC;gBACvH,CAAC;8CACI,KAAK,KAAK;;;;;;;;;;;;wBAIhB,CAAC,wBACE,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC;gCAAI,WAAW,CAAC,oFAAoF,EAAE,cAAc,WAAW,OAAO;;;;;;;;;;;;mBA5B5H;;;;;YAiCzB;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 1349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/view-modal/SubmissionDetails.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { AlertCircle, Download, CheckCircle, FileText } from 'lucide-react';\r\nimport { Job } from '@/data/types';\r\nimport { Button } from '../../../ui/Button';\r\n\r\ninterface SubmissionDetailsProps {\r\n  job: Job;\r\n  onApprove: () => void;\r\n  onRequestRevision: () => void;\r\n  isLoading: boolean;\r\n  isRevisionMode: boolean;\r\n  children?: React.ReactNode; // For Revision Form injection\r\n}\r\n\r\nexport const SubmissionDetails = ({ job, onApprove, onRequestRevision, isLoading, isRevisionMode, children }: SubmissionDetailsProps) => {\r\n    if (!['Pending Approval'].includes(job.status)) return null;\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-[#1a1625] border border-orange-200 dark:border-orange-900/50 rounded-xl p-4 md:p-6 shadow-sm ring-1 ring-orange-100 dark:ring-orange-900/30\">\r\n            <div className=\"flex items-start gap-3 mb-4\">\r\n                <div className=\"p-2 bg-orange-100 dark:bg-orange-900/40 text-orange-600 dark:text-orange-400 rounded-lg shrink-0\">\r\n                    <AlertCircle size={20} />\r\n                </div>\r\n                <div>\r\n                    <h3 className=\"font-bold text-gray-900 dark:text-white\">Review Submission</h3>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">Linguist has submitted work.</p>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-gray-50 dark:bg-white/5 p-4 rounded-lg border border-gray-100 dark:border-white/5 mb-4 text-sm text-gray-700 dark:text-gray-300 break-words\">\r\n                <span className=\"font-bold block mb-1 text-xs uppercase text-gray-400\">Linguist Note:</span>\r\n                \"{job.completionNotes || 'No notes provided.'}\"\r\n                {job.completionFile && (\r\n                    <div className=\"mt-2 flex items-center gap-2 font-bold text-blue-600 dark:text-blue-400 cursor-pointer hover:underline\">\r\n                        <Download size={14} /> <span className=\"truncate\">{job.completionFile}</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {!isRevisionMode ? (\r\n                <div className=\"flex flex-col sm:flex-row gap-3 mt-4\">\r\n                    <Button \r\n                        variant=\"danger\" \r\n                        onClick={onRequestRevision} \r\n                        className=\"flex-1\"\r\n                    >\r\n                        Request Revision\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"primary\" \r\n                        onClick={onApprove} \r\n                        isLoading={isLoading} \r\n                        className=\"flex-[2] bg-green-600 hover:bg-green-700\"\r\n                    >\r\n                        <CheckCircle size={16} /> Approve & Pay\r\n                    </Button>\r\n                </div>\r\n            ) : (\r\n                children\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAEA;;;;AAWO,MAAM,oBAAoB,CAAC,EAAE,GAAG,EAAE,SAAS,EAAE,iBAAiB,EAAE,SAAS,EAAE,cAAc,EAAE,QAAQ,EAA0B;IAChI,IAAI,CAAC;QAAC;KAAmB,CAAC,QAAQ,CAAC,IAAI,MAAM,GAAG,OAAO;IAEvD,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,mOAAW;4BAAC,MAAM;;;;;;;;;;;kCAEvB,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAA0C;;;;;;0CACxD,8OAAC;gCAAE,WAAU;0CAAgD;;;;;;;;;;;;;;;;;;0BAIrE,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAAuD;;;;;;oBAAqB;oBAC1F,IAAI,eAAe,IAAI;oBAAqB;oBAC7C,IAAI,cAAc,kBACf,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,sNAAQ;gCAAC,MAAM;;;;;;4BAAM;0CAAC,8OAAC;gCAAK,WAAU;0CAAY,IAAI,cAAc;;;;;;;;;;;;;;;;;;YAKhF,CAAC,+BACE,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,qIAAM;wBACH,SAAQ;wBACR,SAAS;wBACT,WAAU;kCACb;;;;;;kCAGD,8OAAC,qIAAM;wBACH,SAAQ;wBACR,SAAS;wBACT,WAAW;wBACX,WAAU;;0CAEV,8OAAC,0OAAW;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;2DAIjC;;;;;;;AAIhB"}},
    {"offset": {"line": 1510, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/view-modal/RevisionRequestForm.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { Send, Paperclip, X } from 'lucide-react';\r\nimport { Button } from '../../../ui/Button';\r\n\r\ninterface RevisionRequestFormProps {\r\n  onCancel: () => void;\r\n  onSubmit: (feedback: string, file: File | null) => void;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport const RevisionRequestForm = ({ onCancel, onSubmit, isLoading }: RevisionRequestFormProps) => {\r\n  const [feedback, setFeedback] = useState('');\r\n  const [revisionFile, setRevisionFile] = useState<File | null>(null);\r\n\r\n  const handleSubmit = () => {\r\n      onSubmit(feedback, revisionFile);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3 mt-4 bg-orange-50 dark:bg-orange-900/10 p-4 rounded-lg border border-orange-100 dark:border-orange-800 animate-in fade-in slide-in-from-top-2\">\r\n        <h4 className=\"text-xs font-bold text-orange-800 dark:text-orange-200 uppercase\">Revision Details</h4>\r\n        <textarea \r\n            className=\"w-full p-3 border border-gray-200 dark:border-white/10 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none bg-white dark:bg-black/20 text-gray-900 dark:text-white\"\r\n            placeholder=\"Enter feedback for revision...\"\r\n            rows={3}\r\n            value={feedback}\r\n            onChange={(e) => setFeedback(e.target.value)}\r\n        ></textarea>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n            <label className=\"flex items-center gap-2 text-xs font-bold text-gray-500 dark:text-gray-400 cursor-pointer hover:text-orange-600 transition-colors bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 px-3 py-2 rounded-lg\">\r\n                <Paperclip size={14} />\r\n                <span className=\"truncate max-w-[150px]\">{revisionFile ? revisionFile.name : \"Attach Markup (Optional)\"}</span>\r\n                <input type=\"file\" className=\"hidden\" onChange={(e) => setRevisionFile(e.target.files?.[0] || null)} />\r\n            </label>\r\n            {revisionFile && <button onClick={() => setRevisionFile(null)} className=\"text-red-500 hover:text-red-600\"><X size={14}/></button>}\r\n        </div>\r\n\r\n        <div className=\"flex gap-3 pt-2\">\r\n            <Button variant=\"secondary\" onClick={onCancel} className=\"flex-1\">\r\n                Cancel\r\n            </Button>\r\n            <Button \r\n                variant=\"danger\" \r\n                onClick={handleSubmit} \r\n                isLoading={isLoading} \r\n                disabled={!feedback}\r\n                className=\"flex-1\"\r\n            >\r\n                <Send size={14} /> Send\r\n            </Button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AACA;;;;;AAQO,MAAM,sBAAsB,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAA4B;IAC7F,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAE9D,MAAM,eAAe;QACjB,SAAS,UAAU;IACvB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAmE;;;;;;0BACjF,8OAAC;gBACG,WAAU;gBACV,aAAY;gBACZ,MAAM;gBACN,OAAO;gBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;0BAG/C,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAM,WAAU;;0CACb,8OAAC,yNAAS;gCAAC,MAAM;;;;;;0CACjB,8OAAC;gCAAK,WAAU;0CAA0B,eAAe,aAAa,IAAI,GAAG;;;;;;0CAC7E,8OAAC;gCAAM,MAAK;gCAAO,WAAU;gCAAS,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;;;;;;;;;;;;oBAEjG,8BAAgB,8OAAC;wBAAO,SAAS,IAAM,gBAAgB;wBAAO,WAAU;kCAAkC,cAAA,8OAAC,iMAAC;4BAAC,MAAM;;;;;;;;;;;;;;;;;0BAGxH,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,qIAAM;wBAAC,SAAQ;wBAAY,SAAS;wBAAU,WAAU;kCAAS;;;;;;kCAGlE,8OAAC,qIAAM;wBACH,SAAQ;wBACR,SAAS;wBACT,WAAW;wBACX,UAAU,CAAC;wBACX,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;AAKlC"}},
    {"offset": {"line": 1660, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/view-modal/PaymentBanner.tsx"],"sourcesContent":["\r\n\r\nimport React from 'react';\r\nimport { CheckCircle, Clock } from 'lucide-react';\r\nimport { Invoice } from '@/data/types';\r\n\r\ninterface PaymentBannerProps {\r\n    existingInvoice: Invoice | undefined;\r\n    onReview: () => void;\r\n}\r\n\r\nexport const PaymentBanner = ({ existingInvoice, onReview }: PaymentBannerProps) => {\r\n    if (!existingInvoice) return null;\r\n    \r\n    const isPaid = existingInvoice.status === 'Paid';\r\n\r\n    return (\r\n        <div className={`border rounded-xl p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6 animate-in fade-in duration-300 ${isPaid ? 'bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800' : 'bg-orange-50 border-orange-200 dark:bg-orange-900/20 dark:border-orange-800'}`}>\r\n            <div className=\"flex items-center gap-3\">\r\n                <div className={`p-2 rounded-full ${isPaid ? 'bg-green-100 text-green-600' : 'bg-orange-100 text-orange-600'}`}>\r\n                    {isPaid ? <CheckCircle size={20}/> : <Clock size={20}/>}\r\n                </div>\r\n                <div>\r\n                    <h4 className={`font-bold text-sm ${isPaid ? 'text-green-800 dark:text-green-200' : 'text-orange-800 dark:text-orange-200'}`}>\r\n                        {isPaid ? 'Payment Complete' : 'Payment Pending'}\r\n                    </h4>\r\n                    <p className={`text-xs opacity-80 ${isPaid ? 'text-green-700 dark:text-green-300' : 'text-orange-700 dark:text-orange-300'}`}>\r\n                        {`Invoice #${existingInvoice.reference}`}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <button \r\n                onClick={onReview}\r\n                className={`w-full sm:w-auto text-xs font-bold px-4 py-2 rounded-lg shadow-sm hover:opacity-80 transition-opacity border ${isPaid ? 'bg-white text-green-700 border-green-200' : 'bg-white text-orange-700 border-orange-200'}`}\r\n            >\r\n                {isPaid ? 'View Receipt' : 'Review & Pay'}\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;;;AAQO,MAAM,gBAAgB,CAAC,EAAE,eAAe,EAAE,QAAQ,EAAsB;IAC3E,IAAI,CAAC,iBAAiB,OAAO;IAE7B,MAAM,SAAS,gBAAgB,MAAM,KAAK;IAE1C,qBACI,8OAAC;QAAI,WAAW,CAAC,uIAAuI,EAAE,SAAS,4EAA4E,+EAA+E;;0BAC1T,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAW,CAAC,iBAAiB,EAAE,SAAS,gCAAgC,iCAAiC;kCACzG,uBAAS,8OAAC,0OAAW;4BAAC,MAAM;;;;;qFAAQ,8OAAC,6MAAK;4BAAC,MAAM;;;;;;;;;;;kCAEtD,8OAAC;;0CACG,8OAAC;gCAAG,WAAW,CAAC,kBAAkB,EAAE,SAAS,uCAAuC,wCAAwC;0CACvH,SAAS,qBAAqB;;;;;;0CAEnC,8OAAC;gCAAE,WAAW,CAAC,mBAAmB,EAAE,SAAS,uCAAuC,wCAAwC;0CACvH,CAAC,SAAS,EAAE,gBAAgB,SAAS,EAAE;;;;;;;;;;;;;;;;;;0BAIpD,8OAAC;gBACG,SAAS;gBACT,WAAW,CAAC,6GAA6G,EAAE,SAAS,6CAA6C,8CAA8C;0BAE9N,SAAS,iBAAiB;;;;;;;;;;;;AAI3C"}},
    {"offset": {"line": 1748, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/Fieldset.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\nexport const Fieldset: React.FC<{ title: string; icon: any; children: React.ReactNode }> = ({ title, icon: Icon, children }) => (\r\n    <fieldset className=\"border border-gray-200 dark:border-white/10 rounded-xl p-4 pt-2\">\r\n        <legend className=\"px-2 text-xs font-bold text-jambo-600 dark:text-jambo-400 uppercase tracking-widest flex items-center gap-2\">\r\n            <Icon size={14} /> {title}\r\n        </legend>\r\n        <div className=\"space-y-4 pt-2\">{children}</div>\r\n    </fieldset>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,WAA8E,CAAC,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,QAAQ,EAAE,iBACvH,8OAAC;QAAS,WAAU;;0BAChB,8OAAC;gBAAO,WAAU;;kCACd,8OAAC;wBAAK,MAAM;;;;;;oBAAM;oBAAE;;;;;;;0BAExB,8OAAC;gBAAI,WAAU;0BAAkB"}},
    {"offset": {"line": 1793, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/LabeledInput.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\nexport const LabeledInput: React.FC<{ label: string; name?: string; value?: any; onChange?: any; required?: boolean; children: React.ReactNode }> = ({ label, required, children }) => (\r\n    <div>\r\n        <label className=\"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">\r\n            {label} {required && <span className=\"text-red-500\">*</span>}\r\n        </label>\r\n        <div className=\"mt-1.5\">{children}</div>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,eAAuI,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,iBAC9K,8OAAC;;0BACG,8OAAC;gBAAM,WAAU;;oBACZ;oBAAM;oBAAE,0BAAY,8OAAC;wBAAK,WAAU;kCAAe;;;;;;;;;;;;0BAExD,8OAAC;gBAAI,WAAU;0BAAU"}},
    {"offset": {"line": 1838, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/CustomSelect.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { ChevronDown } from 'lucide-react';\r\n\r\ninterface CustomSelectOption {\r\n    value: string;\r\n    label: string;\r\n}\r\n\r\ninterface CustomSelectProps {\r\n    options: CustomSelectOption[];\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n}\r\n\r\nexport const CustomSelect = ({ options, value, onChange, placeholder = \"Select an option\" }: CustomSelectProps) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const selectedLabel = options.find(opt => opt.value === value)?.label || placeholder;\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const handleSelect = (newValue: string) => {\r\n        onChange(newValue);\r\n        setIsOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div ref={dropdownRef} className=\"relative w-full\">\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none flex items-center justify-between text-left\"\r\n            >\r\n                <span className=\"font-medium text-gray-800 dark:text-white\">{selectedLabel}</span>\r\n                <ChevronDown size={16} className={`text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`} />\r\n            </button>\r\n            {isOpen && (\r\n                <div className=\"absolute top-full mt-2 w-full bg-white/95 dark:bg-[#2a2438]/95 backdrop-blur-md rounded-xl shadow-2xl border border-gray-200 dark:border-white/10 z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                    <ul className=\"max-h-60 overflow-y-auto custom-scrollbar p-2\">\r\n                        {options.map(opt => (\r\n                            <li key={opt.value}>\r\n                                <button\r\n                                    onClick={() => handleSelect(opt.value)}\r\n                                    className={`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${\r\n                                        value === opt.value\r\n                                            ? 'font-bold bg-jambo-50 dark:bg-jambo-900/30 text-jambo-700 dark:text-jambo-300'\r\n                                            : 'text-gray-800 dark:text-gray-200 hover:bg-jambo-50/50 dark:hover:bg-jambo-900/20'\r\n                                    }`}\r\n                                >\r\n                                    {opt.label}\r\n                                </button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAcO,MAAM,eAAe,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,cAAc,kBAAkB,EAAqB;IAC1G,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAC3C,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAA,MAAO,IAAI,KAAK,KAAK,QAAQ,SAAS;IAEzE,IAAA,kNAAS,EAAC;QACN,MAAM,qBAAqB,CAAC;YACxB,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC5E,UAAU;YACd;QACJ;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO;YACH,SAAS,mBAAmB,CAAC,aAAa;QAC9C;IACJ,GAAG,EAAE;IAEL,MAAM,eAAe,CAAC;QAClB,SAAS;QACT,UAAU;IACd;IAEA,qBACI,8OAAC;QAAI,KAAK;QAAa,WAAU;;0BAC7B,8OAAC;gBACG,MAAK;gBACL,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,8OAAC;wBAAK,WAAU;kCAA6C;;;;;;kCAC7D,8OAAC,mOAAW;wBAAC,MAAM;wBAAI,WAAW,CAAC,mCAAmC,EAAE,SAAS,eAAe,IAAI;;;;;;;;;;;;YAEvG,wBACG,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BACT,QAAQ,GAAG,CAAC,CAAA,oBACT,8OAAC;sCACG,cAAA,8OAAC;gCACG,SAAS,IAAM,aAAa,IAAI,KAAK;gCACrC,WAAW,CAAC,gEAAgE,EACxE,UAAU,IAAI,KAAK,GACb,kFACA,oFACR;0CAED,IAAI,KAAK;;;;;;2BATT,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;AAkB9C"}},
    {"offset": {"line": 1938, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/CoreDetailsForm.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { JobCategory, JobType } from '@/data/types';\r\nimport { LabeledInput } from './LabeledInput';\r\nimport { CustomSelect } from '../modal/CustomSelect';\r\n\r\ninterface CoreDetailsFormProps {\r\n    formData: any;\r\n    setFormData: (fn: (prev: any) => any) => void;\r\n    handleInputChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n}\r\n\r\nconst categoryTypes: Record<JobCategory, JobType[]> = {\r\n    'Interpreting': ['Face-to-Face', 'Video', 'Telephone'],\r\n    'Translation': ['Document'],\r\n    'Transcription': ['Audio/Video'],\r\n};\r\n\r\nexport const CoreDetailsForm = ({ formData, setFormData, handleInputChange }: CoreDetailsFormProps) => {\r\n    const categoryOptions = Object.keys(categoryTypes).map(cat => ({ value: cat, label: cat }));\r\n    \r\n    // Ensure type options are available for the current category\r\n    const currentCategory = formData.category as JobCategory;\r\n    const typeOptions = categoryTypes[currentCategory] ? categoryTypes[currentCategory].map(type => ({ value: type, label: type })) : [];\r\n    \r\n    return (\r\n        <>\r\n            <LabeledInput label=\"Job Title\" required>\r\n                <input name=\"title\" value={formData.title} onChange={handleInputChange} placeholder=\"e.g., Medical Consultation Interpreting\" required className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" />\r\n            </LabeledInput>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <LabeledInput label=\"Category\" required>\r\n                    <CustomSelect options={categoryOptions} value={formData.category!} onChange={(val) => setFormData(p => ({...p, category: val as JobCategory}))} />\r\n                </LabeledInput>\r\n                <LabeledInput label=\"Type\" required>\r\n                    <CustomSelect options={typeOptions} value={formData.type!} onChange={(val) => setFormData(p => ({...p, type: val as JobType}))} />\r\n                </LabeledInput>\r\n            </div>\r\n            <LabeledInput label=\"Language Pair\" required>\r\n                <input name=\"languagePair\" value={formData.languagePair} onChange={handleInputChange} placeholder=\"e.g., English <> Swahili\" required className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" />\r\n            </LabeledInput>\r\n            <LabeledInput label=\"Description\">\r\n                <textarea name=\"description\" value={formData.description} onChange={handleInputChange} placeholder=\"Job Description & Requirements\" rows={3} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\"></textarea>\r\n            </LabeledInput>\r\n            <label className=\"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 cursor-pointer\"><input type=\"checkbox\" name=\"isUrgent\" checked={formData.isUrgent} onChange={handleInputChange} className=\"h-4 w-4 rounded text-jambo-600 focus:ring-jambo-500\"/> Mark as Urgent</label>\r\n        </>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;;AAQA,MAAM,gBAAgD;IAClD,gBAAgB;QAAC;QAAgB;QAAS;KAAY;IACtD,eAAe;QAAC;KAAW;IAC3B,iBAAiB;QAAC;KAAc;AACpC;AAEO,MAAM,kBAAkB,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAE,iBAAiB,EAAwB;IAC9F,MAAM,kBAAkB,OAAO,IAAI,CAAC,eAAe,GAAG,CAAC,CAAA,MAAO,CAAC;YAAE,OAAO;YAAK,OAAO;QAAI,CAAC;IAEzF,6DAA6D;IAC7D,MAAM,kBAAkB,SAAS,QAAQ;IACzC,MAAM,cAAc,aAAa,CAAC,gBAAgB,GAAG,aAAa,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAA,OAAQ,CAAC;YAAE,OAAO;YAAM,OAAO;QAAK,CAAC,KAAK,EAAE;IAEpI,qBACI;;0BACI,8OAAC,0KAAY;gBAAC,OAAM;gBAAY,QAAQ;0BACpC,cAAA,8OAAC;oBAAM,MAAK;oBAAQ,OAAO,SAAS,KAAK;oBAAE,UAAU;oBAAmB,aAAY;oBAA0C,QAAQ;oBAAC,WAAU;;;;;;;;;;;0BAErJ,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0KAAY;wBAAC,OAAM;wBAAW,QAAQ;kCACnC,cAAA,8OAAC,qKAAY;4BAAC,SAAS;4BAAiB,OAAO,SAAS,QAAQ;4BAAG,UAAU,CAAC,MAAQ,YAAY,CAAA,IAAK,CAAC;wCAAC,GAAG,CAAC;wCAAE,UAAU;oCAAkB,CAAC;;;;;;;;;;;kCAEhJ,8OAAC,0KAAY;wBAAC,OAAM;wBAAO,QAAQ;kCAC/B,cAAA,8OAAC,qKAAY;4BAAC,SAAS;4BAAa,OAAO,SAAS,IAAI;4BAAG,UAAU,CAAC,MAAQ,YAAY,CAAA,IAAK,CAAC;wCAAC,GAAG,CAAC;wCAAE,MAAM;oCAAc,CAAC;;;;;;;;;;;;;;;;;0BAGpI,8OAAC,0KAAY;gBAAC,OAAM;gBAAgB,QAAQ;0BACxC,cAAA,8OAAC;oBAAM,MAAK;oBAAe,OAAO,SAAS,YAAY;oBAAE,UAAU;oBAAmB,aAAY;oBAA2B,QAAQ;oBAAC,WAAU;;;;;;;;;;;0BAEpJ,8OAAC,0KAAY;gBAAC,OAAM;0BAChB,cAAA,8OAAC;oBAAS,MAAK;oBAAc,OAAO,SAAS,WAAW;oBAAE,UAAU;oBAAmB,aAAY;oBAAiC,MAAM;oBAAG,WAAU;;;;;;;;;;;0BAE3J,8OAAC;gBAAM,WAAU;;kCAAkF,8OAAC;wBAAM,MAAK;wBAAW,MAAK;wBAAW,SAAS,SAAS,QAAQ;wBAAE,UAAU;wBAAmB,WAAU;;;;;;oBAAuD;;;;;;;;;AAGhR"}},
    {"offset": {"line": 2110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/LogisticsForm.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { LabeledInput } from './LabeledInput';\r\n\r\ninterface LogisticsFormProps {\r\n    formData: any;\r\n    handleInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nexport const LogisticsForm = ({ formData, handleInputChange }: LogisticsFormProps) => {\r\n    return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <LabeledInput label=\"Date\" required>\r\n                <input type=\"date\" name=\"date\" value={formData.date} onChange={handleInputChange} required className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" />\r\n            </LabeledInput>\r\n            {formData.category === 'Interpreting' ? (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                    <LabeledInput label=\"Start Time\"><input type=\"time\" name=\"time\" value={formData.time} onChange={handleInputChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                    <LabeledInput label=\"Duration\"><input type=\"text\" name=\"duration\" value={formData.duration || ''} onChange={handleInputChange} placeholder=\"e.g. 2h 30m\" className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                </div>\r\n            ) : (\r\n                <LabeledInput label=\"Deadline Time\" name=\"deadlineTime\">\r\n                    <input type=\"time\" name=\"deadlineTime\" value={formData.deadlineTime || ''} onChange={handleInputChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" />\r\n                </LabeledInput>\r\n            )}\r\n             <div className=\"md:col-span-2\">\r\n                <LabeledInput label=\"Location / Context\" required>\r\n                    <input name=\"location\" value={formData.location} onChange={handleInputChange} placeholder={formData.type === 'Face-to-Face' ? 'Full Address' : 'e.g. Remote, Zoom Call'} required className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" />\r\n                </LabeledInput>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":";;;;;AAEA;;;AAOO,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,iBAAiB,EAAsB;IAC7E,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,0KAAY;gBAAC,OAAM;gBAAO,QAAQ;0BAC/B,cAAA,8OAAC;oBAAM,MAAK;oBAAO,MAAK;oBAAO,OAAO,SAAS,IAAI;oBAAE,UAAU;oBAAmB,QAAQ;oBAAC,WAAU;;;;;;;;;;;YAExG,SAAS,QAAQ,KAAK,+BACnB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0KAAY;wBAAC,OAAM;kCAAa,cAAA,8OAAC;4BAAM,MAAK;4BAAO,MAAK;4BAAO,OAAO,SAAS,IAAI;4BAAE,UAAU;4BAAmB,WAAU;;;;;;;;;;;kCAC7H,8OAAC,0KAAY;wBAAC,OAAM;kCAAW,cAAA,8OAAC;4BAAM,MAAK;4BAAO,MAAK;4BAAW,OAAO,SAAS,QAAQ,IAAI;4BAAI,UAAU;4BAAmB,aAAY;4BAAc,WAAU;;;;;;;;;;;;;;;;yEAGvK,8OAAC,0KAAY;gBAAC,OAAM;gBAAgB,MAAK;0BACrC,cAAA,8OAAC;oBAAM,MAAK;oBAAO,MAAK;oBAAe,OAAO,SAAS,YAAY,IAAI;oBAAI,UAAU;oBAAmB,WAAU;;;;;;;;;;;0BAGzH,8OAAC;gBAAI,WAAU;0BACZ,cAAA,8OAAC,0KAAY;oBAAC,OAAM;oBAAqB,QAAQ;8BAC7C,cAAA,8OAAC;wBAAM,MAAK;wBAAW,OAAO,SAAS,QAAQ;wBAAE,UAAU;wBAAmB,aAAa,SAAS,IAAI,KAAK,iBAAiB,iBAAiB;wBAA0B,QAAQ;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAKhN"}},
    {"offset": {"line": 2244, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/DocumentsForm.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { UploadCloud, FileText, X } from 'lucide-react';\r\n\r\ninterface DocumentsFormProps {\r\n    files: File[];\r\n    onFileChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n    onRemoveFile: (index: number) => void;\r\n}\r\n\r\nexport const DocumentsForm = ({ files, onFileChange, onRemoveFile }: DocumentsFormProps) => {\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            <div className=\"border-2 border-dashed border-gray-300 dark:border-white/20 rounded-xl p-6 text-center cursor-pointer hover:border-jambo-500 hover:bg-jambo-50/50 dark:hover:bg-jambo-900/10 transition-colors relative\">\r\n                <input type=\"file\" multiple onChange={onFileChange} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\" />\r\n                <div className=\"flex flex-col items-center\">\r\n                    <UploadCloud size={24} className=\"text-gray-400 mb-2\" />\r\n                    <p className=\"font-medium text-gray-600 dark:text-gray-300 text-sm\">Click to upload or drag & drop</p>\r\n                    <p className=\"text-xs text-gray-400\">PDF, DOCX, etc. (Max 10MB each)</p>\r\n                </div>\r\n            </div>\r\n            {files.length > 0 && (\r\n                <div className=\"space-y-2\">\r\n                    {files.map((file, index) => (\r\n                        <div key={index} className=\"flex items-center gap-3 p-2 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-200 dark:border-white/10\">\r\n                            <FileText size={16} className=\"text-jambo-600 dark:text-jambo-400 shrink-0\" />\r\n                            <span className=\"text-xs font-medium text-gray-800 dark:text-gray-200 truncate flex-1\">{file.name}</span>\r\n                            <span className=\"text-xs text-gray-400 shrink-0\">{(file.size / 1024).toFixed(1)} KB</span>\r\n                            <button type=\"button\" onClick={() => onRemoveFile(index)} className=\"p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 shrink-0\"><X size={14} /></button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;;;AAQO,MAAM,gBAAgB,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,YAAY,EAAsB;IACnF,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAM,MAAK;wBAAO,QAAQ;wBAAC,UAAU;wBAAc,WAAU;;;;;;kCAC9D,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,mOAAW;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CACjC,8OAAC;gCAAE,WAAU;0CAAuD;;;;;;0CACpE,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;YAG5C,MAAM,MAAM,GAAG,mBACZ,8OAAC;gBAAI,WAAU;0BACV,MAAM,GAAG,CAAC,CAAC,MAAM,sBACd,8OAAC;wBAAgB,WAAU;;0CACvB,8OAAC,0NAAQ;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC9B,8OAAC;gCAAK,WAAU;0CAAwE,KAAK,IAAI;;;;;;0CACjG,8OAAC;gCAAK,WAAU;;oCAAkC,CAAC,KAAK,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC;oCAAG;;;;;;;0CAChF,8OAAC;gCAAO,MAAK;gCAAS,SAAS,IAAM,aAAa;gCAAQ,WAAU;0CAAwE,cAAA,8OAAC,iMAAC;oCAAC,MAAM;;;;;;;;;;;;uBAJ/I;;;;;;;;;;;;;;;;AAWlC"}},
    {"offset": {"line": 2380, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/FinancialsForm.tsx"],"sourcesContent":["\r\nimport React, { useEffect, useState } from 'react';\r\nimport { PoundSterling, Navigation, Briefcase } from 'lucide-react';\r\nimport { Job } from '@/data/types';\r\nimport { calculateJobPayout } from '../../../portal/dashboard/jobs/job-helpers';\r\n\r\ninterface FinancialsFormProps {\r\n  job: Job;\r\n  isEditing: boolean;\r\n  formData: Partial<Job>;\r\n  setFormData: (data: Partial<Job>) => void;\r\n}\r\n\r\nconst Field: React.FC<{ label: string; children: React.ReactNode }> = ({ label, children }) => (\r\n    <div>\r\n        <label className=\"text-[10px] font-bold text-gray-500 uppercase\">{label}</label>\r\n        <div className=\"mt-1\">{children}</div>\r\n    </div>\r\n);\r\n\r\nconst Input = (props: React.InputHTMLAttributes<HTMLInputElement>) => (\r\n    <input \r\n        {...props}\r\n        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-md px-2 py-1.5 text-sm font-mono text-gray-900 dark:text-white focus:outline-none focus:border-jambo-600 transition-colors\"\r\n    />\r\n);\r\n\r\nconst ReadOnly = ({ value }: { value: string | number }) => (\r\n    <div className=\"text-sm font-medium text-gray-800 dark:text-gray-200 py-1.5\">{value}</div>\r\n);\r\n\r\nexport const FinancialsForm = ({ job, isEditing, formData, setFormData }: FinancialsFormProps) => {\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const combinedJob = { ...job, ...formData };\r\n    setTotal(calculateJobPayout(combinedJob));\r\n  }, [formData, job]);\r\n\r\n  const handleNumericChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const { name, value } = e.target;\r\n      setFormData({ ...formData, [name]: value === '' ? undefined : parseFloat(value) });\r\n  };\r\n  \r\n  const handlePenceInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    const pence = parseFloat(value);\r\n    setFormData({ ...formData, [name]: isNaN(pence) ? undefined : pence / 100 });\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleRateTypeChange = (isFixed: boolean) => {\r\n      if (isFixed) {\r\n          setFormData({ ...formData, wordRate: undefined });\r\n      } else {\r\n          setFormData({ ...formData, fixedRate: undefined });\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#1a1625] rounded-xl p-5 border border-gray-200 dark:border-white/10 shadow-sm mt-6\">\r\n        <div className=\"flex items-center justify-between mb-4 border-b border-gray-100 dark:border-white/5 pb-2\">\r\n            <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2\">\r\n                <PoundSterling size={14} /> Logistics & Finance\r\n            </h3>\r\n            {isEditing && <span className=\"text-[10px] text-orange-500 font-bold bg-orange-50 dark:bg-orange-900/20 px-2 py-0.5 rounded\">Editing Mode</span>}\r\n        </div>\r\n\r\n        {job.category === 'Interpreting' && (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 items-end\">\r\n                <Field label=\"Hourly Rate (£)\">{isEditing ? <Input type=\"number\" step=\"0.01\" name=\"hourlyRate\" value={formData.hourlyRate || ''} onChange={handleNumericChange} /> : <ReadOnly value={`£${job.hourlyRate?.toFixed(2) || '0.00'}`} />}</Field>\r\n                {job.type === 'Face-to-Face' && <>\r\n                    <Field label=\"Distance (mi)\">{isEditing ? <Input type=\"number\" name=\"distance\" value={formData.distance || ''} onChange={handleNumericChange} /> : <ReadOnly value={`${job.distance || 0} mi`} />}</Field>\r\n                    <Field label=\"Mileage Rate (£)\">{isEditing ? <Input type=\"number\" step=\"0.01\" name=\"mileageRate\" value={formData.mileageRate || ''} onChange={handleNumericChange} /> : <ReadOnly value={`£${job.mileageRate?.toFixed(2) || '0.00'}`} />}</Field>\r\n                    <Field label=\"Travel Time (hrs)\">{isEditing ? <Input type=\"number\" step=\"0.1\" name=\"travelHours\" value={formData.travelHours || ''} onChange={handleNumericChange} /> : <ReadOnly value={`${job.travelHours || 0} hrs`} />}</Field>\r\n                </>}\r\n            </div>\r\n        )}\r\n\r\n        {job.category === 'Translation' && (\r\n             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\">\r\n                <Field label=\"Word Count\">{isEditing ? <Input type=\"number\" name=\"wordCount\" value={formData.wordCount || ''} onChange={handleNumericChange} /> : <ReadOnly value={`${job.wordCount?.toLocaleString() || 0} words`} />}</Field>\r\n                <div className=\"md:col-span-2\">\r\n                    {isEditing ? (\r\n                        <div className=\"flex flex-col gap-4\">\r\n                            <div className=\"flex items-center gap-2 flex-1 w-full\">\r\n                                <input type=\"radio\" id=\"rate_word\" name=\"rateType\" checked={!formData.fixedRate} onChange={() => handleRateTypeChange(false)} className=\"h-4 w-4 text-jambo-600 focus:ring-jambo-500 mt-4 sm:mt-0\"/>\r\n                                <label htmlFor=\"rate_word\" className=\"text-sm flex-1 w-full\">\r\n                                    <Field label=\"Rate per Word (p)\">\r\n                                        <Input \r\n                                            type=\"number\" \r\n                                            step=\"0.1\" \r\n                                            name=\"wordRate\" \r\n                                            value={formData.wordRate !== undefined ? (formData.wordRate * 100) : ''} \r\n                                            onChange={handlePenceInputChange} \r\n                                            disabled={!!formData.fixedRate} \r\n                                        />\r\n                                    </Field>\r\n                                </label>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center gap-2 flex-1 w-full\">\r\n                                <input type=\"radio\" id=\"rate_fixed\" name=\"rateType\" checked={!!formData.fixedRate} onChange={() => handleRateTypeChange(true)} className=\"h-4 w-4 text-jambo-600 focus:ring-jambo-500 mt-4 sm:mt-0\"/>\r\n                                <label htmlFor=\"rate_fixed\" className=\"text-sm flex-1 w-full\">\r\n                                    <Field label=\"Fixed Total (£)\">\r\n                                        <Input type=\"number\" step=\"10\" name=\"fixedRate\" value={formData.fixedRate || ''} onChange={handleNumericChange} disabled={!formData.fixedRate} />\r\n                                    </Field>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <Field label=\"Rate\"><ReadOnly value={job.wordRate ? `${(job.wordRate * 100).toFixed(0)}p/word` : job.rate} /></Field>\r\n                    )}\r\n                </div>\r\n             </div>\r\n        )}\r\n        \r\n        {job.category === 'Transcription' && (\r\n             <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 items-end\">\r\n                <Field label=\"Audio Length\">{isEditing ? <Input type=\"text\" name=\"duration\" value={formData.duration || ''} onChange={handleInputChange} /> : <ReadOnly value={job.duration || 'N/A'} />}</Field>\r\n                <Field label=\"Rate per Minute (£)\">{isEditing ? <Input type=\"number\" step=\"0.01\" name=\"minuteRate\" value={formData.minuteRate || ''} onChange={handleNumericChange} /> : <ReadOnly value={`£${job.minuteRate?.toFixed(2) || '0.00'}`} />}</Field>\r\n             </div>\r\n        )}\r\n\r\n        <div className=\"mt-4 pt-4 border-t border-gray-100 dark:border-white/5 flex justify-end\">\r\n            <div className=\"bg-gray-50 dark:bg-white/5 p-3 rounded-lg flex items-center gap-4\">\r\n                <span className=\"text-[10px] font-bold text-gray-400 uppercase\">Est. Payout</span>\r\n                <div className=\"text-xl font-bold text-jambo-600 dark:text-jambo-400 font-mono\">\r\n                    £{total.toFixed(2)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2883, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/AdminJobEditForm.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Briefcase, Calendar, FileText, PoundSterling, Save } from 'lucide-react';\r\nimport { Job } from '@/data/types';\r\nimport { calculateJobPayout } from '../../../portal/dashboard/jobs/job-helpers';\r\nimport { Button } from '../../../ui/Button';\r\nimport { Fieldset } from '../add-job/Fieldset';\r\nimport { CoreDetailsForm } from '../add-job/CoreDetailsForm';\r\nimport { LogisticsForm } from '../add-job/LogisticsForm';\r\nimport { DocumentsForm } from '../add-job/DocumentsForm';\r\nimport { FinancialsForm } from './FinancialsForm';\r\n\r\ninterface AdminJobEditFormProps {\r\n  job: Job;\r\n  onSave: (updatedData: Partial<Job>, newFiles: File[], keptAttachments: any[]) => void;\r\n  onCancel: () => void;\r\n  isSaving: boolean;\r\n}\r\n\r\nexport const AdminJobEditForm = ({ job, onSave, onCancel, isSaving }: AdminJobEditFormProps) => {\r\n  // --- Local Form State ---\r\n  const [formData, setFormData] = useState<Partial<Job>>({});\r\n  const [newFiles, setNewFiles] = useState<File[]>([]);\r\n  const [keptAttachments, setKeptAttachments] = useState<any[]>([]);\r\n  const [estimatedTotal, setEstimatedTotal] = useState(0);\r\n\r\n  // Initialize state from prop\r\n  useEffect(() => {\r\n    setFormData({ ...job });\r\n    setNewFiles([]);\r\n    setKeptAttachments(job.attachments || []);\r\n  }, [job]);\r\n\r\n  // Recalculate financial totals dynamically\r\n  useEffect(() => {\r\n    const tempJob = { ...job, ...formData } as Job;\r\n    setEstimatedTotal(calculateJobPayout(tempJob));\r\n  }, [formData, job]);\r\n\r\n  // --- Handlers ---\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value, type } = e.target;\r\n    if (type === 'checkbox') {\r\n        const { checked } = e.target as HTMLInputElement;\r\n        setFormData(prev => ({...prev, [name]: checked }));\r\n    } else {\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (event.target.files) {\r\n        setNewFiles(prev => [...prev, ...Array.from(event.target.files!)]);\r\n    }\r\n  };\r\n\r\n  const handleRemoveNewFile = (index: number) => {\r\n    setNewFiles(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n      // Inject calculated rate string before saving\r\n      const finalData = {\r\n          ...formData,\r\n          rate: `£${estimatedTotal.toFixed(2)}`\r\n      };\r\n      onSave(finalData, newFiles, keptAttachments);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-2\">\r\n        <div className=\"bg-orange-50 dark:bg-orange-900/10 p-3 rounded-lg border border-orange-100 dark:border-orange-800 text-xs text-orange-800 dark:text-orange-200\">\r\n            <strong>Editing Mode:</strong> Changes will be logged in the audit trail.\r\n        </div>\r\n\r\n        <Fieldset title=\"Core Details\" icon={Briefcase}>\r\n            <CoreDetailsForm \r\n                formData={formData} \r\n                setFormData={setFormData} \r\n                handleInputChange={handleInputChange} \r\n            />\r\n        </Fieldset>\r\n        \r\n        <Fieldset title=\"Logistics & Schedule\" icon={Calendar}>\r\n            <LogisticsForm \r\n                formData={formData} \r\n                handleInputChange={handleInputChange} \r\n            />\r\n        </Fieldset>\r\n\r\n        <Fieldset title=\"Job Documents\" icon={FileText}>\r\n            {keptAttachments.length > 0 && (\r\n                <div className=\"mb-4\">\r\n                    <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Current Attachments</p>\r\n                    <div className=\"space-y-2\">\r\n                        {keptAttachments.map((f, i) => (\r\n                            <div key={i} className=\"flex items-center justify-between p-2 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-200 dark:border-white/10\">\r\n                                <div className=\"flex items-center gap-2 overflow-hidden\">\r\n                                    <FileText size={14} className=\"text-jambo-600 dark:text-jambo-400 shrink-0\" />\r\n                                    <span className=\"text-sm text-gray-600 dark:text-gray-300 truncate\">{f.name}</span>\r\n                                </div>\r\n                                <button \r\n                                    type=\"button\"\r\n                                    onClick={() => setKeptAttachments(prev => prev.filter((_, idx) => idx !== i))}\r\n                                    className=\"text-gray-400 hover:text-red-500 p-1 transition-colors\"\r\n                                >\r\n                                    &times;\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Add New Files</p>\r\n            <DocumentsForm \r\n                files={newFiles} \r\n                onFileChange={handleFileChange} \r\n                onRemoveFile={handleRemoveNewFile} \r\n            />\r\n        </Fieldset>\r\n\r\n        <Fieldset title=\"Financials\" icon={PoundSterling}>\r\n            <FinancialsForm \r\n                job={job}\r\n                isEditing={true}\r\n                formData={formData} \r\n                setFormData={setFormData}\r\n            />\r\n        </Fieldset>\r\n\r\n        <div className=\"flex gap-3 pt-4 border-t border-gray-200 dark:border-white/10 sticky bottom-0 bg-white dark:bg-[#1a1625] pb-2 z-10\">\r\n            <Button variant=\"secondary\" onClick={onCancel} className=\"flex-1\">\r\n                Cancel\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={handleSubmit} isLoading={isSaving} className=\"flex-[2]\">\r\n                <Save size={16} /> Save Changes\r\n            </Button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3189, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/modal/JobActions.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Save, Ban, CheckCircle, Edit2, Loader2, Repeat, FileText, Lock } from 'lucide-react';\r\n\r\ninterface JobActionsProps {\r\n  isEditing: boolean;\r\n  setIsEditing: (val: boolean) => void;\r\n  onSave: () => void;\r\n  onCancelChanges: () => void;\r\n  onClose: () => void;\r\n  onCancelJob: () => void;\r\n  onCompleteJob: () => void;\r\n  onRequestRevision: () => void; \r\n  onAdminOverride?: () => void;\r\n  isProcessing: boolean;\r\n  status: string;\r\n}\r\n\r\nexport const JobActions = ({ \r\n  isEditing, setIsEditing, onSave, onCancelChanges, onClose, \r\n  onCancelJob, onCompleteJob, onRequestRevision, onAdminOverride, isProcessing, status \r\n}: JobActionsProps) => {\r\n  return (\r\n    <div className=\"p-4 md:p-6 border-t border-gray-200 dark:border-white/10 bg-white dark:bg-[#1a1625] flex flex-col-reverse sm:flex-row justify-between items-center gap-3 sticky bottom-0 z-20\">\r\n       \r\n       <div className=\"flex gap-3 w-full sm:w-auto\">\r\n          {status !== 'Cancelled' && status !== 'Completed' && (\r\n              <button \r\n                onClick={onCancelJob}\r\n                className=\"flex-1 sm:flex-none justify-center px-4 py-2 border border-red-200 text-red-600 dark:border-red-900/50 dark:text-red-400 rounded-lg text-sm font-bold hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2\"\r\n              >\r\n                  <Ban size={16} /> Cancel Job\r\n              </button>\r\n          )}\r\n          {status === 'Pending Approval' && (\r\n              <>\r\n                <button \r\n                    onClick={onRequestRevision}\r\n                    disabled={isProcessing}\r\n                    className=\"flex-1 sm:flex-none justify-center px-4 py-2 bg-amber-100 text-amber-700 border border-amber-200 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800 rounded-lg text-sm font-bold hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors flex items-center gap-2 disabled:opacity-70\"\r\n                >\r\n                    <Repeat size={16} /> Request Revision\r\n                </button>\r\n                <button \r\n                    onClick={onCompleteJob}\r\n                    disabled={isProcessing}\r\n                    className=\"flex-1 sm:flex-none justify-center px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 transition-colors flex items-center gap-2 shadow-lg shadow-green-600/20 disabled:opacity-70\"\r\n                >\r\n                    {isProcessing ? <Loader2 size={16} className=\"animate-spin\" /> : <FileText size={16} />}\r\n                    Approve Work & Invoice\r\n                </button>\r\n              </>\r\n          )}\r\n          {status === 'Revision' && onAdminOverride && (\r\n              <button \r\n                  onClick={onAdminOverride}\r\n                  className=\"flex-1 sm:flex-none justify-center px-4 py-2 bg-gray-900 text-white dark:bg-white dark:text-gray-900 rounded-lg text-sm font-bold hover:opacity-90 transition-opacity flex items-center gap-2 shadow-md\"\r\n              >\r\n                  <Lock size={16} /> Override & Complete\r\n              </button>\r\n          )}\r\n       </div>\r\n\r\n       <div className=\"flex gap-3 w-full sm:w-auto\">\r\n          {isEditing ? (\r\n              <>\r\n                <button \r\n                    onClick={onCancelChanges}\r\n                    className=\"flex-1 sm:flex-none justify-center px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-sm font-bold transition-colors\"\r\n                >\r\n                    Discard\r\n                </button>\r\n                <button \r\n                    onClick={onSave}\r\n                    disabled={isProcessing}\r\n                    className=\"flex-1 sm:flex-none justify-center px-6 py-2 bg-jambo-600 text-white rounded-lg text-sm font-bold hover:bg-jambo-700 transition-colors flex items-center gap-2 shadow-lg shadow-jambo-600/20 disabled:opacity-70\"\r\n                >\r\n                    {isProcessing ? <Loader2 size={16} className=\"animate-spin\" /> : <Save size={16} />} \r\n                    Save Changes\r\n                </button>\r\n              </>\r\n          ) : (\r\n              <button \r\n                onClick={() => setIsEditing(true)}\r\n                className=\"w-full sm:w-auto justify-center px-6 py-2 bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-white rounded-lg text-sm font-bold hover:bg-gray-200 dark:hover:bg-white/20 transition-colors flex items-center gap-2\"\r\n              >\r\n                  <Edit2 size={16} /> Edit Details\r\n              </button>\r\n          )}\r\n       </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAgBO,MAAM,aAAa,CAAC,EACzB,SAAS,EAAE,YAAY,EAAE,MAAM,EAAE,eAAe,EAAE,OAAO,EACzD,WAAW,EAAE,aAAa,EAAE,iBAAiB,EAAE,eAAe,EAAE,YAAY,EAAE,MAAM,EACpE;IAChB,qBACE,8OAAC;QAAI,WAAU;;0BAEZ,8OAAC;gBAAI,WAAU;;oBACX,WAAW,eAAe,WAAW,6BAClC,8OAAC;wBACC,SAAS;wBACT,WAAU;;0CAER,8OAAC,uMAAG;gCAAC,MAAM;;;;;;4BAAM;;;;;;;oBAGxB,WAAW,oCACR;;0CACE,8OAAC;gCACG,SAAS;gCACT,UAAU;gCACV,WAAU;;kDAEV,8OAAC,gNAAM;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAExB,8OAAC;gCACG,SAAS;gCACT,UAAU;gCACV,WAAU;;oCAET,6BAAe,8OAAC,4NAAO;wCAAC,MAAM;wCAAI,WAAU;;;;;iGAAoB,8OAAC,0NAAQ;wCAAC,MAAM;;;;;;oCAAO;;;;;;;;;oBAKjG,WAAW,cAAc,iCACtB,8OAAC;wBACG,SAAS;wBACT,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;0BAK7B,8OAAC;gBAAI,WAAU;0BACX,0BACG;;sCACE,8OAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;sCAGD,8OAAC;4BACG,SAAS;4BACT,UAAU;4BACV,WAAU;;gCAET,6BAAe,8OAAC,4NAAO;oCAAC,MAAM;oCAAI,WAAU;;;;;6FAAoB,8OAAC,0MAAI;oCAAC,MAAM;;;;;;gCAAO;;;;;;;;iDAK1F,8OAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAU;;sCAER,8OAAC,2MAAK;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAMrC"}},
    {"offset": {"line": 3375, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/view-modal/AdminCompletionForm.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { Send, AlertTriangle } from 'lucide-react';\r\nimport { Button } from '../../../ui/Button';\r\n\r\ninterface AdminCompletionFormProps {\r\n  onCancel: () => void;\r\n  onSubmit: (notes: string) => void;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport const AdminCompletionForm = ({ onCancel, onSubmit, isLoading }: AdminCompletionFormProps) => {\r\n  const [notes, setNotes] = useState('');\r\n\r\n  const handleSubmit = () => {\r\n      onSubmit(notes);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#1a1625] border border-red-200 dark:border-red-900/50 rounded-xl p-6 shadow-sm ring-1 ring-red-100 dark:ring-red-900/30 space-y-4\">\r\n        <div className=\"flex items-start gap-3\">\r\n            <div className=\"p-2 bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 rounded-lg shrink-0\">\r\n                <AlertTriangle size={20} />\r\n            </div>\r\n            <div>\r\n                <h3 className=\"font-bold text-gray-900 dark:text-white\">Admin Force Completion</h3>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                    You are overriding the normal workflow. This job will be reassigned to you and marked complete. \r\n                    <strong className=\"block mt-1 text-red-600 dark:text-red-400\">The original linguist will NOT be invoiced for this job.</strong>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        \r\n        <div>\r\n            <label className=\"text-xs font-bold text-gray-500 uppercase mb-2 block\">Completion Notes</label>\r\n            <textarea \r\n                className=\"w-full p-3 border border-gray-200 dark:border-white/10 rounded-lg text-sm focus:ring-2 focus:ring-red-500 outline-none bg-gray-50 dark:bg-black/20 text-gray-900 dark:text-white\"\r\n                placeholder=\"Enter details about how this job was completed internally...\"\r\n                rows={4}\r\n                value={notes}\r\n                onChange={(e) => setNotes(e.target.value)}\r\n            ></textarea>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 pt-2\">\r\n            <Button variant=\"secondary\" onClick={onCancel}>\r\n                Cancel\r\n            </Button>\r\n            <Button \r\n                variant=\"danger\" \r\n                onClick={handleSubmit} \r\n                isLoading={isLoading} \r\n                disabled={!notes}\r\n            >\r\n                <Send size={14} /> Confirm & Complete\r\n            </Button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;;;;;AAQO,MAAM,sBAAsB,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAA4B;IAC7F,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe;QACjB,SAAS;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,yOAAa;4BAAC,MAAM;;;;;;;;;;;kCAEzB,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAA0C;;;;;;0CACxD,8OAAC;gCAAE,WAAU;;oCAAgD;kDAEzD,8OAAC;wCAAO,WAAU;kDAA4C;;;;;;;;;;;;;;;;;;;;;;;;0BAK1E,8OAAC;;kCACG,8OAAC;wBAAM,WAAU;kCAAuD;;;;;;kCACxE,8OAAC;wBACG,WAAU;wBACV,aAAY;wBACZ,MAAM;wBACN,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAIhD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,qIAAM;wBAAC,SAAQ;wBAAY,SAAS;kCAAU;;;;;;kCAG/C,8OAAC,qIAAM;wBACH,SAAQ;wBACR,SAAS;wBACT,WAAW;wBACX,UAAU,CAAC;;0CAEX,8OAAC,0MAAI;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;AAKlC"}},
    {"offset": {"line": 3529, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/view-modal/RevisionHistory.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { AlertCircle, FileText, History, Download, CheckCircle, Clock } from 'lucide-react';\r\nimport { Job, JobHistoryEvent } from '@/data/types';\r\n\r\ninterface RevisionHistoryProps {\r\n    job: Job;\r\n}\r\n\r\nexport const RevisionHistory = ({ job }: RevisionHistoryProps) => {\r\n    // Filter history for revision-related events\r\n    const revisionEvents = (job.history || [])\r\n        .filter(h => h.type === 'REVISION_REQUESTED' || h.type === 'RESUBMITTED')\r\n        .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n    const activeRevision = job.status === 'Revision' \r\n        ? revisionEvents.find(h => h.type === 'REVISION_REQUESTED' && new Date(h.date).getTime() > new Date(job.completedAt || 0).getTime())\r\n        : null;\r\n\r\n    if (revisionEvents.length === 0) {\r\n        return (\r\n            <div className=\"p-8 text-center border border-dashed border-gray-200 dark:border-white/10 rounded-xl mt-6\">\r\n                <div className=\"w-12 h-12 bg-gray-100 dark:bg-white/5 rounded-full flex items-center justify-center mx-auto mb-3 text-gray-400\">\r\n                    <History size={24} />\r\n                </div>\r\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm\">No revision history found for this job.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300 mt-6\">\r\n            \r\n            {/* Active Revision Banner */}\r\n            {job.status === 'Revision' && (\r\n                <div className=\"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-5 shadow-sm\">\r\n                    <h3 className=\"font-bold text-amber-800 dark:text-amber-200 flex items-center gap-2 mb-3\">\r\n                        <AlertCircle size={20} /> Active Revision Request\r\n                    </h3>\r\n                    <div className=\"bg-white dark:bg-black/20 p-4 rounded-lg border border-amber-100 dark:border-amber-900/30\">\r\n                        <p className=\"text-sm text-gray-800 dark:text-gray-200 leading-relaxed\">\r\n                            {job.revisionFeedback || \"Please review the deliverables and make necessary corrections.\"}\r\n                        </p>\r\n                        {job.revisionFile && (\r\n                            <div className=\"mt-3 pt-3 border-t border-amber-100 dark:border-amber-900/30 flex items-center gap-3\">\r\n                                <span className=\"text-xs font-bold text-amber-700 dark:text-amber-300 uppercase\">Markup File:</span>\r\n                                <div className=\"flex items-center gap-2 bg-amber-100 dark:bg-amber-900/40 px-3 py-1.5 rounded-lg text-xs font-bold text-amber-900 dark:text-amber-100\">\r\n                                    <FileText size={12} /> {job.revisionFile}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"mt-3 flex justify-end\">\r\n                        <span className=\"text-xs font-bold text-amber-600 dark:text-amber-400 flex items-center gap-1\">\r\n                            <Clock size={12} /> Awaiting Linguist Response\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Timeline */}\r\n            <div className=\"bg-white dark:bg-[#1a1625] rounded-xl p-6 border border-gray-200 dark:border-white/10 shadow-sm\">\r\n                <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2\">\r\n                    <History size={14} /> Revision Timeline\r\n                </h3>\r\n                \r\n                <div className=\"relative border-l-2 border-gray-100 dark:border-white/5 ml-3 space-y-8\">\r\n                    {revisionEvents.map((event) => (\r\n                        <div key={event.id} className=\"relative pl-8\">\r\n                            {/* Dot */}\r\n                            <div className={`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white dark:border-[#1a1625] ${event.type === 'REVISION_REQUESTED' ? 'bg-amber-500' : 'bg-blue-500'}`}></div>\r\n                            \r\n                            <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-1 mb-2\">\r\n                                <div>\r\n                                    <span className={`text-[10px] font-bold uppercase px-2 py-0.5 rounded border mb-1 inline-block ${\r\n                                        event.type === 'REVISION_REQUESTED' \r\n                                            ? 'bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800' \r\n                                            : 'bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800'\r\n                                    }`}>\r\n                                        {event.type === 'REVISION_REQUESTED' ? 'Request Sent' : 'Linguist Responded'}\r\n                                    </span>\r\n                                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">{new Date(event.date).toLocaleString()}</p>\r\n                                </div>\r\n                                <span className=\"text-xs font-bold text-gray-700 dark:text-gray-300\">{event.actorName}</span>\r\n                            </div>\r\n\r\n                            <div className=\"bg-gray-50 dark:bg-white/5 p-3 rounded-lg border border-gray-100 dark:border-white/5 text-sm text-gray-700 dark:text-gray-300\">\r\n                                {event.description}\r\n                                {event.attachment && (\r\n                                    <div className=\"mt-2 flex items-center gap-2 text-xs font-bold text-jambo-600 dark:text-jambo-400 bg-white dark:bg-white/10 p-2 rounded border border-gray-200 dark:border-white/5 w-fit\">\r\n                                        <FileText size={12} /> {event.attachment}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;;;AAOO,MAAM,kBAAkB,CAAC,EAAE,GAAG,EAAwB;IACzD,6CAA6C;IAC7C,MAAM,iBAAiB,CAAC,IAAI,OAAO,IAAI,EAAE,EACpC,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,wBAAwB,EAAE,IAAI,KAAK,eAC1D,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO;IAEzE,MAAM,iBAAiB,IAAI,MAAM,KAAK,aAChC,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,wBAAwB,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,KAAK,IAAI,KAAK,IAAI,WAAW,IAAI,GAAG,OAAO,MAC/H;IAEN,IAAI,eAAe,MAAM,KAAK,GAAG;QAC7B,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,mNAAO;wBAAC,MAAM;;;;;;;;;;;8BAEnB,8OAAC;oBAAE,WAAU;8BAA2C;;;;;;;;;;;;IAGpE;IAEA,qBACI,8OAAC;QAAI,WAAU;;YAGV,IAAI,MAAM,KAAK,4BACZ,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;;0CACV,8OAAC,mOAAW;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAE7B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CACR,IAAI,gBAAgB,IAAI;;;;;;4BAE5B,IAAI,YAAY,kBACb,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAK,WAAU;kDAAiE;;;;;;kDACjF,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,0NAAQ;gDAAC,MAAM;;;;;;4CAAM;4CAAE,IAAI,YAAY;;;;;;;;;;;;;;;;;;;kCAKxD,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;;8CACZ,8OAAC,6MAAK;oCAAC,MAAM;;;;;;gCAAM;;;;;;;;;;;;;;;;;;0BAOnC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;;0CACV,8OAAC,mNAAO;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAGzB,8OAAC;wBAAI,WAAU;kCACV,eAAe,GAAG,CAAC,CAAC,sBACjB,8OAAC;gCAAmB,WAAU;;kDAE1B,8OAAC;wCAAI,WAAW,CAAC,4FAA4F,EAAE,MAAM,IAAI,KAAK,uBAAuB,iBAAiB,eAAe;;;;;;kDAErL,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;;kEACG,8OAAC;wDAAK,WAAW,CAAC,6EAA6E,EAC3F,MAAM,IAAI,KAAK,uBACT,gHACA,yGACR;kEACG,MAAM,IAAI,KAAK,uBAAuB,iBAAiB;;;;;;kEAE5D,8OAAC;wDAAE,WAAU;kEAA4C,IAAI,KAAK,MAAM,IAAI,EAAE,cAAc;;;;;;;;;;;;0DAEhG,8OAAC;gDAAK,WAAU;0DAAsD,MAAM,SAAS;;;;;;;;;;;;kDAGzF,8OAAC;wCAAI,WAAU;;4CACV,MAAM,WAAW;4CACjB,MAAM,UAAU,kBACb,8OAAC;gDAAI,WAAU;;kEACX,8OAAC,0NAAQ;wDAAC,MAAM;;;;;;oDAAM;oDAAE,MAAM,UAAU;;;;;;;;;;;;;;+BAtB9C,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;AAgC1C"}},
    {"offset": {"line": 3811, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/AdminJobModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Job, Invoice } from '@/data/types';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { Modal } from '../../ui/Modal';\r\nimport { InvoicePreviewModal } from '../../portal/dashboard/finance/InvoicePreviewModal';\r\nimport { UserProfileModal } from '../users/UserProfileModal';\r\nimport { JobHistoryTimeline } from '../../ui/JobHistoryTimeline';\r\nimport { JobStatusBadge } from '../../ui/JobStatusBadge';\r\nimport { JobChatWidget } from '../../messaging/JobChatWidget';\r\n\r\n// Sub-components\r\nimport { JobHeader } from './modal/JobHeader';\r\nimport { JobOverview } from './modal/JobOverview';\r\nimport { LinguistAssignment } from './modal/LinguistAssignment';\r\nimport { JobProcessStepper } from './view-modal/JobProcessStepper';\r\nimport { SubmissionDetails } from './view-modal/SubmissionDetails';\r\nimport { RevisionRequestForm } from './view-modal/RevisionRequestForm';\r\nimport { PaymentBanner } from './view-modal/PaymentBanner';\r\nimport { AdminJobEditForm } from './modal/AdminJobEditForm';\r\nimport { JobActions } from './modal/JobActions';\r\nimport { AdminCompletionForm } from './view-modal/AdminCompletionForm';\r\nimport { RevisionHistory } from './view-modal/RevisionHistory';\r\n\r\ninterface AdminJobModalProps {\r\n  job: Job;\r\n  onClose: () => void;\r\n  onUpdate: (message?: string) => void;\r\n}\r\n\r\nexport const AdminJobModal = ({ job: initialJob, onClose, onUpdate }: AdminJobModalProps) => {\r\n  // --- State ---\r\n  const [job, setJob] = useState<Job>(initialJob);\r\n  const [loadingAction, setLoadingAction] = useState<'approve' | 'request_revision' | 'save' | 'admin_complete' | null>(null);\r\n  \r\n  // UI Modes\r\n  const [isRevisionMode, setIsRevisionMode] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isAdminCompleting, setIsAdminCompleting] = useState(false);\r\n  \r\n  // Navigation State\r\n  const [invoiceToPreview, setInvoiceToPreview] = useState<Invoice | null>(null);\r\n  const [viewingLinguistId, setViewingLinguistId] = useState<string | null>(null);\r\n\r\n  // Derived Data (Services)\r\n  const currentUser = mockDb.auth.getCurrentUser();\r\n  const linguist = job.linguistId ? mockDb.getAllUsers().find(u => u.id === job.linguistId) : null;\r\n  const allLinguists = mockDb.getAllUsers().filter(u => u.role === 'linguist' && u.isVerified && !u.isSuspended);\r\n  const invoice = mockDb.getAllInvoices().find(i => i.items.some(item => item.jobId === job.id));\r\n  \r\n  const isAssignmentLocked = ['Pending Approval', 'Completed', 'Cancelled'].includes(job.status);\r\n  const peerId = job.linguistId; // Chat target\r\n\r\n  // Reset local state when prop changes\r\n  useEffect(() => { \r\n      setJob(initialJob); \r\n      setIsRevisionMode(false); \r\n      setIsEditing(false); \r\n      setIsAdminCompleting(false);\r\n  }, [initialJob]);\r\n\r\n  // --- Actions (Service Calls) ---\r\n\r\n  const handleApprove = () => {\r\n      setLoadingAction('approve');\r\n      setTimeout(() => {\r\n          // Service call: Approve logic\r\n          const newInvoice = mockDb.adminApproveJobSubmission(job.id);\r\n          setLoadingAction(null);\r\n          setInvoiceToPreview(newInvoice); // Trigger invoice modal\r\n          \r\n          // Refresh local job state\r\n          const updatedJob = mockDb.getAllJobs().find(j => j.id === job.id);\r\n          if (updatedJob) setJob(updatedJob);\r\n      }, 1000);\r\n  };\r\n\r\n  const handleRequestRevision = (feedback: string, file: File | null) => {\r\n      setLoadingAction('request_revision');\r\n      setTimeout(() => {\r\n          // Service call: Update status with feedback\r\n          mockDb.updateJobStatus(job.id, 'Revision', { \r\n              revisionFeedback: feedback,\r\n              revisionFile: file ? file.name : undefined\r\n          });\r\n          setLoadingAction(null);\r\n          setIsRevisionMode(false);\r\n          \r\n          const updatedJob = mockDb.getAllJobs().find(j => j.id === job.id);\r\n          if (updatedJob) setJob(updatedJob);\r\n          \r\n          onUpdate('Revision Requested');\r\n      }, 1000);\r\n  };\r\n\r\n  const handleAssignLinguist = (linguistId: string | null) => {\r\n      // Service call: Assign\r\n      mockDb.adminAssignJob(job.id, linguistId);\r\n      \r\n      const updatedJob = mockDb.getAllJobs().find(j => j.id === job.id);\r\n      if (updatedJob) setJob(updatedJob);\r\n      \r\n      onUpdate(linguistId ? 'Linguist Assigned' : 'Job Unassigned');\r\n  };\r\n\r\n  const handleSaveEdit = (updatedData: Partial<Job>, newFiles: File[], keptAttachments: any[]) => {\r\n      setLoadingAction('save');\r\n      \r\n      // Prepare attachment payload\r\n      const newAttachmentsPayload = newFiles.map(f => ({ name: f.name, type: 'file' as const, url: '#' }));\r\n      \r\n      setTimeout(() => {\r\n          // Service call: Full update\r\n          const updated = mockDb.adminUpdateJobDetails(\r\n              job.id, \r\n              updatedData, \r\n              newAttachmentsPayload,\r\n              keptAttachments\r\n          );\r\n          \r\n          if (updated) {\r\n              setJob(updated);\r\n              onUpdate('Job Details Updated');\r\n          }\r\n          setLoadingAction(null);\r\n          setIsEditing(false);\r\n      }, 1000);\r\n  };\r\n\r\n  const handleAdminForceComplete = (notes: string) => {\r\n      setLoadingAction('admin_complete');\r\n      setTimeout(() => {\r\n          const updated = mockDb.adminForceCompleteJob(job.id, notes);\r\n          setJob(updated);\r\n          setLoadingAction(null);\r\n          setIsAdminCompleting(false);\r\n          onUpdate('Job Force Completed by Admin');\r\n      }, 1000);\r\n  };\r\n\r\n  const handleCancelJob = () => {\r\n      if(window.confirm(\"Are you sure you want to cancel this job? This action will be logged.\")) {\r\n          mockDb.updateJobStatus(job.id, 'Cancelled');\r\n          \r\n          // Immediate UI update\r\n          const updated = mockDb.getAllJobs().find(j => j.id === job.id);\r\n          if(updated) setJob(updated);\r\n          \r\n          // Notify parent to refresh list\r\n          onUpdate('Job Cancelled');\r\n      }\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Modal isOpen={true} onClose={onClose} size=\"4xl\" className=\"h-full md:h-[85vh]\">\r\n        <div className=\"flex flex-col md:flex-row h-full overflow-hidden bg-gray-50 dark:bg-[#0f0a15]\">\r\n            \r\n            {/* LEFT PANEL: Activity Stream / Edit Form */}\r\n            <div className=\"flex-1 flex flex-col min-w-0 min-h-0 bg-white dark:bg-[#1a1625] md:bg-gray-50 md:dark:bg-[#0f0a15] order-2 md:order-1 relative\">\r\n                \r\n                <JobHeader \r\n                    job={job} \r\n                    onClose={onClose} \r\n                    onEdit={() => setIsEditing(true)} \r\n                />\r\n\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-6 space-y-6 pb-24 md:pb-6\">\r\n                    {isEditing ? (\r\n                        <AdminJobEditForm \r\n                            job={job}\r\n                            onSave={handleSaveEdit}\r\n                            onCancel={() => setIsEditing(false)}\r\n                            isSaving={loadingAction === 'save'}\r\n                        />\r\n                    ) : isAdminCompleting ? (\r\n                        <AdminCompletionForm \r\n                            onCancel={() => setIsAdminCompleting(false)}\r\n                            onSubmit={handleAdminForceComplete}\r\n                            isLoading={loadingAction === 'admin_complete'}\r\n                        />\r\n                    ) : (\r\n                        <>\r\n                            {/* Mobile Info Block */}\r\n                            <div className=\"md:hidden space-y-4\">\r\n                               <div className=\"flex items-center justify-between\">\r\n                                  <span className=\"text-xs font-bold uppercase text-gray-500\">Status</span>\r\n                                  <JobStatusBadge status={job.status} />\r\n                               </div>\r\n                               \r\n                               <div className=\"bg-gray-50 dark:bg-white/5 p-4 rounded-xl border border-gray-100 dark:border-white/5\">\r\n                                   <div className=\"space-y-2 mb-4\">\r\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">{job.description}</p>\r\n                                        <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                            <p><span className=\"font-bold\">Location:</span> {job.location}</p>\r\n                                            <p><span className=\"font-bold\">Time:</span> {job.time || 'N/A'}</p>\r\n                                        </div>\r\n                                   </div>\r\n                               </div>\r\n\r\n                               <LinguistAssignment \r\n                                    linguist={linguist}\r\n                                    allLinguists={allLinguists}\r\n                                    isLocked={isAssignmentLocked}\r\n                                    onAssign={handleAssignLinguist}\r\n                               />\r\n                            </div>\r\n\r\n                            <JobProcessStepper status={job.status} />\r\n\r\n                            {invoice && (\r\n                                <PaymentBanner \r\n                                    existingInvoice={invoice} \r\n                                    onReview={() => setInvoiceToPreview(invoice)} \r\n                                />\r\n                            )}\r\n\r\n                            <SubmissionDetails \r\n                                job={job}\r\n                                onApprove={handleApprove}\r\n                                onRequestRevision={() => setIsRevisionMode(true)}\r\n                                isLoading={loadingAction === 'approve'}\r\n                                isRevisionMode={isRevisionMode}\r\n                            >\r\n                                <RevisionRequestForm \r\n                                    onCancel={() => setIsRevisionMode(false)}\r\n                                    onSubmit={handleRequestRevision}\r\n                                    isLoading={loadingAction === 'request_revision'}\r\n                                />\r\n                            </SubmissionDetails>\r\n\r\n                            <RevisionHistory job={job} />\r\n\r\n                            <JobHistoryTimeline history={job.history || []} />\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {!isEditing && !isAdminCompleting && (\r\n                    <JobActions \r\n                        isEditing={isEditing}\r\n                        setIsEditing={setIsEditing}\r\n                        onSave={() => {}} // Handled inside Edit Form\r\n                        onCancelChanges={() => setIsEditing(false)}\r\n                        onClose={onClose}\r\n                        onCancelJob={handleCancelJob}\r\n                        onCompleteJob={handleApprove}\r\n                        onRequestRevision={() => setIsRevisionMode(true)}\r\n                        onAdminOverride={() => setIsAdminCompleting(true)}\r\n                        isProcessing={!!loadingAction}\r\n                        status={job.status}\r\n                    />\r\n                )}\r\n\r\n                {/* Chat Widget: Only show if not editing and a linguist is assigned */}\r\n                {!isEditing && !isAdminCompleting && currentUser && peerId && (\r\n                    <JobChatWidget \r\n                        jobId={job.id} \r\n                        currentUserId={currentUser.id} \r\n                        peerId={peerId}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* RIGHT PANEL: Static Context Sidebar (Desktop Only) */}\r\n            {!isEditing && !isAdminCompleting && (\r\n                <div className=\"w-80 bg-white dark:bg-[#1a1625] border-l border-gray-200 dark:border-white/5 overflow-y-auto custom-scrollbar hidden md:block shrink-0 order-1 md:order-2\">\r\n                    <JobOverview \r\n                        job={job}\r\n                        linguist={linguist}\r\n                        allLinguists={allLinguists}\r\n                        isAssignmentLocked={isAssignmentLocked}\r\n                        onAssign={handleAssignLinguist}\r\n                        onViewProfile={setViewingLinguistId}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    </Modal>\r\n\r\n    {/* Sub-Modals */}\r\n    {invoiceToPreview && (\r\n        <InvoicePreviewModal \r\n            invoice={invoiceToPreview} \r\n            onClose={() => { setInvoiceToPreview(null); }} \r\n            onMarkPaid={() => {\r\n                // Service call: Update invoice status\r\n                mockDb.updateInvoiceStatus(invoiceToPreview.id, 'Paid');\r\n                setInvoiceToPreview(null);\r\n                onUpdate('Invoice Marked as Paid');\r\n            }}\r\n        />\r\n    )}\r\n\r\n    {viewingLinguistId && (\r\n        <UserProfileModal \r\n            user={mockDb.getAllUsers().find(u => u.id === viewingLinguistId)!} \r\n            onClose={() => setViewingLinguistId(null)}\r\n            onUpdate={() => {}}\r\n            onNavigate={() => {}}\r\n        />\r\n    )}\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4267, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/FinancialsForm.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { LabeledInput } from './LabeledInput';\r\n\r\ninterface FinancialsFormProps {\r\n    formData: any;\r\n    handleNumericChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n    handlePenceInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n    handleInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nexport const FinancialsForm = ({ formData, handleNumericChange, handlePenceInputChange, handleInputChange }: FinancialsFormProps) => {\r\n    return (\r\n        <>\r\n            {formData.category === 'Interpreting' && (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4\">\r\n                     <LabeledInput label=\"Hourly Rate (£)\"><input type=\"number\" name=\"hourlyRate\" value={formData.hourlyRate || ''} onChange={handleNumericChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                    {formData.type === 'Face-to-Face' && <>\r\n                        <LabeledInput label=\"Distance (mi)\"><input type=\"number\" name=\"distance\" value={formData.distance || ''} onChange={handleNumericChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                        <LabeledInput label=\"Mileage Rate (£)\"><input type=\"number\" step=\"0.01\" name=\"mileageRate\" value={formData.mileageRate || ''} onChange={handleNumericChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                        <LabeledInput label=\"Travel Time (hrs)\"><input type=\"number\" step=\"0.1\" name=\"travelHours\" value={formData.travelHours || ''} onChange={handleNumericChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                    </>}\r\n                </div>\r\n            )}\r\n            {formData.category === 'Translation' && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <LabeledInput label=\"Word Count\"><input type=\"number\" name=\"wordCount\" value={formData.wordCount || ''} onChange={handleNumericChange} className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 border border-gray-200 dark:border-white/10 rounded-lg p-2 bg-gray-50 dark:bg-white/5\">\r\n                        <LabeledInput label=\"Rate/Word (p)\"><input type=\"number\" step=\"0.1\" name=\"wordRate\" value={formData.wordRate !== undefined ? (formData.wordRate * 100) : ''} onChange={handlePenceInputChange} placeholder=\"10\" className=\"w-full bg-white dark:bg-black/10 border-none rounded-md px-2 py-1 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                        <LabeledInput label=\"Fixed Rate (£)\"><input type=\"number\" step=\"10\" name=\"fixedRate\" value={formData.fixedRate || ''} onChange={handleNumericChange} placeholder=\"500\" className=\"w-full bg-white dark:bg-black/10 border-none rounded-md px-2 py-1 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {formData.category === 'Transcription' && (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                    <LabeledInput label=\"Audio/Video Length (mins)\"><input type=\"text\" name=\"duration\" value={formData.duration || ''} onChange={handleInputChange} placeholder=\"e.g. 45\" className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                    <LabeledInput label=\"Rate Per Minute (£)\"><input type=\"number\" step=\"0.1\" name=\"minuteRate\" value={formData.minuteRate || ''} onChange={handleNumericChange} placeholder=\"4.50\" className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg px-4 py-2.5 text-sm dark:text-white focus:ring-2 focus:ring-jambo-500 outline-none\" /></LabeledInput>\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AASO,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,iBAAiB,EAAuB;IAC5H,qBACI;;YACK,SAAS,QAAQ,KAAK,gCACnB,8OAAC;gBAAI,WAAU;;kCACV,8OAAC,0KAAY;wBAAC,OAAM;kCAAkB,cAAA,8OAAC;4BAAM,MAAK;4BAAS,MAAK;4BAAa,OAAO,SAAS,UAAU,IAAI;4BAAI,UAAU;4BAAqB,WAAU;;;;;;;;;;;oBACxJ,SAAS,IAAI,KAAK,gCAAkB;;0CACjC,8OAAC,0KAAY;gCAAC,OAAM;0CAAgB,cAAA,8OAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAW,OAAO,SAAS,QAAQ,IAAI;oCAAI,UAAU;oCAAqB,WAAU;;;;;;;;;;;0CAClJ,8OAAC,0KAAY;gCAAC,OAAM;0CAAmB,cAAA,8OAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAO,MAAK;oCAAc,OAAO,SAAS,WAAW,IAAI;oCAAI,UAAU;oCAAqB,WAAU;;;;;;;;;;;0CACvK,8OAAC,0KAAY;gCAAC,OAAM;0CAAoB,cAAA,8OAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAM,MAAK;oCAAc,OAAO,SAAS,WAAW,IAAI;oCAAI,UAAU;oCAAqB,WAAU;;;;;;;;;;;;;;;;;;;YAIlL,SAAS,QAAQ,KAAK,+BACnB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0KAAY;wBAAC,OAAM;kCAAa,cAAA,8OAAC;4BAAM,MAAK;4BAAS,MAAK;4BAAY,OAAO,SAAS,SAAS,IAAI;4BAAI,UAAU;4BAAqB,WAAU;;;;;;;;;;;kCACjJ,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,0KAAY;gCAAC,OAAM;0CAAgB,cAAA,8OAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAM,MAAK;oCAAW,OAAO,SAAS,QAAQ,KAAK,YAAa,SAAS,QAAQ,GAAG,MAAO;oCAAI,UAAU;oCAAwB,aAAY;oCAAK,WAAU;;;;;;;;;;;0CAC1N,8OAAC,0KAAY;gCAAC,OAAM;0CAAiB,cAAA,8OAAC;oCAAM,MAAK;oCAAS,MAAK;oCAAK,MAAK;oCAAY,OAAO,SAAS,SAAS,IAAI;oCAAI,UAAU;oCAAqB,aAAY;oCAAM,WAAU;;;;;;;;;;;;;;;;;;;;;;;YAI5L,SAAS,QAAQ,KAAK,iCACnB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0KAAY;wBAAC,OAAM;kCAA4B,cAAA,8OAAC;4BAAM,MAAK;4BAAO,MAAK;4BAAW,OAAO,SAAS,QAAQ,IAAI;4BAAI,UAAU;4BAAmB,aAAY;4BAAU,WAAU;;;;;;;;;;;kCAChL,8OAAC,0KAAY;wBAAC,OAAM;kCAAsB,cAAA,8OAAC;4BAAM,MAAK;4BAAS,MAAK;4BAAM,MAAK;4BAAa,OAAO,SAAS,UAAU,IAAI;4BAAI,UAAU;4BAAqB,aAAY;4BAAO,WAAU;;;;;;;;;;;;;;;;;;;AAK9M"}},
    {"offset": {"line": 4496, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/add-job/AssignmentForm.tsx"],"sourcesContent":["\r\nimport React, { useMemo } from 'react';\r\nimport { User as UserIcon, Globe } from 'lucide-react';\r\nimport { User } from '@/data/types';\r\nimport { LinguistSelector } from '../modal/LinguistSelector';\r\n\r\ninterface AssignmentFormProps {\r\n    assignmentType: 'open' | 'assigned';\r\n    setAssignmentType: (type: 'open' | 'assigned') => void;\r\n    formData: any;\r\n    setFormData: (fn: (prev: any) => any) => void;\r\n    allLinguists: User[];\r\n}\r\n\r\nexport const AssignmentForm = ({ assignmentType, setAssignmentType, formData, setFormData, allLinguists }: AssignmentFormProps) => {\r\n    const currentLinguist = useMemo(() => allLinguists.find(u => u.id === formData.linguistId), [formData.linguistId, allLinguists]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex gap-2 rounded-lg bg-gray-100 dark:bg-white/5 p-1\">\r\n                <button type=\"button\" onClick={() => { setAssignmentType('open'); setFormData(prev => ({...prev, linguistId: null})); }} className={`flex-1 py-2 text-sm font-bold rounded-md transition-colors flex items-center justify-center gap-2 ${assignmentType === 'open' ? 'bg-white dark:bg-jambo-900/50 shadow text-jambo-700 dark:text-white' : 'text-gray-500 hover:bg-white/50 dark:hover:bg-black/10'}`}>\r\n                    <Globe size={14} /> Open Marketplace\r\n                </button>\r\n                <button type=\"button\" onClick={() => setAssignmentType('assigned')} className={`flex-1 py-2 text-sm font-bold rounded-md transition-colors flex items-center justify-center gap-2 ${assignmentType === 'assigned' ? 'bg-white dark:bg-jambo-900/50 shadow text-jambo-700 dark:text-white' : 'text-gray-500 hover:bg-white/50 dark:hover:bg-black/10'}`}>\r\n                    <UserIcon size={14} /> Assign Linguist\r\n                </button>\r\n            </div>\r\n             {assignmentType === 'assigned' && (\r\n                <div className=\"animate-in fade-in slide-in-from-top-2 duration-300\">\r\n                   <LinguistSelector\r\n                        allLinguists={allLinguists}\r\n                        currentLinguist={currentLinguist}\r\n                        onSelect={(userId) => setFormData(prev => ({...prev, linguistId: userId }))}\r\n                   />\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAEA;;;;;AAUO,MAAM,iBAAiB,CAAC,EAAE,cAAc,EAAE,iBAAiB,EAAE,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAuB;IAC1H,MAAM,kBAAkB,IAAA,gNAAO,EAAC,IAAM,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS,UAAU,GAAG;QAAC,SAAS,UAAU;QAAE;KAAa;IAE/H,qBACI;;0BACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAO,MAAK;wBAAS,SAAS;4BAAQ,kBAAkB;4BAAS,YAAY,CAAA,OAAQ,CAAC;oCAAC,GAAG,IAAI;oCAAE,YAAY;gCAAI,CAAC;wBAAI;wBAAG,WAAW,CAAC,kGAAkG,EAAE,mBAAmB,SAAS,wEAAwE,0DAA0D;;0CACnY,8OAAC,6MAAK;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAEvB,8OAAC;wBAAO,MAAK;wBAAS,SAAS,IAAM,kBAAkB;wBAAa,WAAW,CAAC,kGAAkG,EAAE,mBAAmB,aAAa,wEAAwE,0DAA0D;;0CAClV,8OAAC,0MAAQ;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;YAG5B,mBAAmB,4BACjB,8OAAC;gBAAI,WAAU;0BACZ,cAAA,8OAAC,6KAAgB;oBACZ,cAAc;oBACd,iBAAiB;oBACjB,UAAU,CAAC,SAAW,YAAY,CAAA,OAAQ,CAAC;gCAAC,GAAG,IAAI;gCAAE,YAAY;4BAAO,CAAC;;;;;;;;;;;;;AAMjG"}},
    {"offset": {"line": 4595, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/AddJobModal.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { X, Plus, Loader2, Briefcase, Calendar, PoundSterling, User, FileText } from 'lucide-react';\r\nimport { mockDb, Job } from '@/data/mockDatabase';\r\nimport { calculateJobPayout } from '../../portal/dashboard/jobs/job-helpers';\r\nimport { Fieldset } from './add-job/Fieldset';\r\nimport { CoreDetailsForm } from './add-job/CoreDetailsForm';\r\nimport { LogisticsForm } from './add-job/LogisticsForm';\r\nimport { DocumentsForm } from './add-job/DocumentsForm';\r\nimport { FinancialsForm } from './add-job/FinancialsForm';\r\nimport { AssignmentForm } from './add-job/AssignmentForm';\r\nimport { Modal } from '../../ui/Modal';\r\n\r\ninterface AddJobModalProps {\r\n  onClose: () => void;\r\n  onJobAdded: (newJob: Job) => void;\r\n}\r\n\r\nexport const AddJobModal = ({ onClose, onJobAdded }: AddJobModalProps) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [assignmentType, setAssignmentType] = useState<'open' | 'assigned'>('open');\r\n    const [files, setFiles] = useState<File[]>([]);\r\n    const [estimatedTotal, setEstimatedTotal] = useState(0);\r\n    const currentUser = mockDb.auth.getCurrentUser();\r\n\r\n    const [formData, setFormData] = useState<Partial<Job>>({\r\n        title: '',\r\n        category: 'Interpreting',\r\n        type: 'Face-to-Face',\r\n        languagePair: 'English <> Swahili',\r\n        date: new Date().toISOString().split('T')[0],\r\n        time: '09:00',\r\n        location: '',\r\n        description: '',\r\n        isUrgent: false,\r\n        linguistId: null,\r\n        postedBy: currentUser?.id, // Set current user as poster\r\n        rate: '',\r\n        hourlyRate: 30,\r\n        mileageRate: 0.45,\r\n        wordRate: 0.10,\r\n        minuteRate: 4.50,\r\n    });\r\n    \r\n    const allLinguists = useMemo(() => mockDb.getAllUsers().filter(u => u.role === 'linguist' && u.isVerified && !u.isSuspended), []);\r\n\r\n    useEffect(() => {\r\n        const jobForCalc: Job = {\r\n            id: '', status: 'Open', title: '', description: '', date: '', location: '', languagePair: '', rate: '', isUrgent: false,\r\n            history: [],\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString(),\r\n            deletedAt: null,\r\n            ...formData,\r\n            category: formData.category || 'Interpreting',\r\n            type: formData.type || 'Face-to-Face',\r\n        };\r\n        setEstimatedTotal(calculateJobPayout(jobForCalc));\r\n    }, [formData]);\r\n\r\n    const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (event.target.files) {\r\n            setFiles(prev => [...prev, ...Array.from(event.target.files!)]);\r\n        }\r\n    };\r\n\r\n    const handleRemoveFile = (index: number) => {\r\n        setFiles(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        const attachments = files.map(file => ({ name: file.name, type: 'file' as const, url: '#' }));\r\n        const finalData = {\r\n            ...formData, \r\n            rate: `£${estimatedTotal.toFixed(2)}`,\r\n            postedBy: currentUser?.id // Ensure postedBy is set even if state was reset\r\n        };\r\n        setTimeout(() => {\r\n            const newJob = mockDb.adminCreateJob({ ...finalData, attachments });\r\n            setLoading(false);\r\n            onJobAdded(newJob);\r\n        }, 1000);\r\n    };\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        const { name, value, type } = e.target;\r\n        if (type === 'checkbox') {\r\n            const { checked } = e.target as HTMLInputElement;\r\n            setFormData(prev => ({...prev, [name]: checked }));\r\n        } else {\r\n            setFormData(prev => ({ ...prev, [name]: value }));\r\n        }\r\n    };\r\n\r\n    const handleNumericChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value === '' ? undefined : parseFloat(value) }));\r\n    };\r\n\r\n    const handlePenceInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        const pence = parseFloat(value);\r\n        setFormData(prev => ({ ...prev, [name]: isNaN(pence) ? undefined : pence / 100 }));\r\n    };\r\n    \r\n    return (\r\n        <Modal isOpen={true} onClose={onClose} size=\"3xl\">\r\n            <header className=\"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center bg-gray-50/50 dark:bg-white/5\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                    <Plus className=\"text-jambo-600 dark:text-jambo-400\" size={24} /> Create New Job\r\n                </h2>\r\n                <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors\"><X size={20} /></button>\r\n            </header>\r\n\r\n            <div className=\"p-6 overflow-y-auto custom-scrollbar\">\r\n                <form id=\"addJobForm\" onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    <Fieldset title=\"Core Details\" icon={Briefcase}>\r\n                        <CoreDetailsForm formData={formData} setFormData={setFormData} handleInputChange={handleInputChange} />\r\n                    </Fieldset>\r\n                    \r\n                    <Fieldset title=\"Logistics & Schedule\" icon={Calendar}>\r\n                            <LogisticsForm formData={formData} handleInputChange={handleInputChange} />\r\n                    </Fieldset>\r\n\r\n                    <Fieldset title=\"Job Documents\" icon={FileText}>\r\n                        <DocumentsForm files={files} onFileChange={handleFileChange} onRemoveFile={handleRemoveFile} />\r\n                    </Fieldset>\r\n\r\n                    <Fieldset title=\"Financials\" icon={PoundSterling}>\r\n                        <FinancialsForm formData={formData} handleNumericChange={handleNumericChange} handlePenceInputChange={handlePenceInputChange} handleInputChange={handleInputChange} />\r\n                    </Fieldset>\r\n                    \r\n                    <Fieldset title=\"Assignment\" icon={User}>\r\n                        <AssignmentForm assignmentType={assignmentType} setAssignmentType={setAssignmentType} formData={formData} setFormData={setFormData} allLinguists={allLinguists} />\r\n                    </Fieldset>\r\n                </form>\r\n            </div>\r\n            \r\n            <footer className=\"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-white/5 flex flex-col sm:flex-row justify-between items-center gap-4\">\r\n                <div className=\"w-full sm:w-auto text-center sm:text-left\">\r\n                    <span className=\"text-xs font-bold text-gray-400 uppercase\">Est. Total Payout</span>\r\n                    <p className=\"text-2xl font-bold text-jambo-600 dark:text-jambo-400 font-mono\">\r\n                        £{estimatedTotal.toFixed(2)}\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex gap-3 w-full sm:w-auto\">\r\n                    <button type=\"button\" onClick={onClose} disabled={loading} className=\"flex-1 sm:flex-none px-6 py-2.5 rounded-lg border border-gray-200 dark:border-white/10 text-gray-600 dark:text-gray-300 font-bold text-sm hover:bg-white dark:hover:bg-white/5 transition-colors disabled:opacity-50\">Cancel</button>\r\n                    <button form=\"addJobForm\" type=\"submit\" disabled={loading} className=\"flex-1 sm:flex-none justify-center px-6 py-2.5 rounded-lg bg-jambo-600 hover:bg-jambo-700 text-white font-bold text-sm shadow-lg flex items-center gap-2 transition-all disabled:opacity-70\">\r\n                        {loading ? <Loader2 size={16} className=\"animate-spin\" /> : <Plus size={18} />}\r\n                        {loading ? 'Creating Job...' : 'Create Job'}\r\n                    </button>\r\n                </div>\r\n            </footer>\r\n        </Modal>\r\n    );\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4988, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/list/AdminJobsFilter.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Search, ArrowUpDown, ChevronDown } from 'lucide-react';\r\n\r\nexport interface SortConfig {\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n}\r\n\r\ninterface AdminJobsFilterProps {\r\n    searchTerm: string;\r\n    setSearchTerm: (term: string) => void;\r\n    filterStatus: string;\r\n    setFilterStatus: (status: string) => void;\r\n    filters: { id: string; label: string }[];\r\n    unpaidJobsCount: number;\r\n    sortConfig: SortConfig;\r\n    setSortConfig: (config: SortConfig) => void;\r\n}\r\n\r\nconst FilterPopover: React.FC<{\r\n  label: string;\r\n  icon: React.ReactNode;\r\n  options: { value: string; label: string }[];\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  className?: string;\r\n}> = ({ label, icon, options, value, onChange, className }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div ref={ref} className={`relative ${className}`}>\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className={`flex w-full items-center gap-2 border rounded-lg px-3 py-2.5 text-sm font-medium transition-colors bg-white dark:bg-white/5 border-gray-200 dark:border-white/10 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/10 ${\r\n            isOpen && 'bg-gray-100 dark:bg-white/10 border-gray-300 dark:border-white/20 text-gray-900 dark:text-white'\r\n        }`}\r\n      >\r\n        {icon}\r\n        <span className=\"flex-1 text-left\">{label}</span>\r\n        <ChevronDown size={14} className={`transition-transform duration-200 text-gray-400 ${isOpen ? 'rotate-180' : ''}`} />\r\n      </button>\r\n      {isOpen && (\r\n        <div className=\"absolute top-full mt-2 w-full min-w-[180px] bg-white dark:bg-[#2a2438] rounded-xl shadow-xl border border-gray-100 dark:border-white/10 z-20 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200\">\r\n          {options.map(opt => (\r\n            <button\r\n              key={opt.value}\r\n              onClick={() => { onChange(opt.value); setIsOpen(false); }}\r\n              className={`w-full text-left px-4 py-2.5 text-sm transition-colors border-l-2 ${value === opt.value ? 'font-bold bg-jambo-50 dark:bg-jambo-900/20 text-jambo-700 dark:text-jambo-300 border-jambo-600' : 'border-transparent text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5'}`}\r\n            >\r\n              {opt.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AdminJobsFilter = ({ \r\n    searchTerm, setSearchTerm, filterStatus, setFilterStatus, \r\n    filters, unpaidJobsCount, sortConfig, setSortConfig \r\n}: AdminJobsFilterProps) => {\r\n\r\n    const sortOptions = [\r\n        { value: 'date-desc', label: 'Date (Newest First)' },\r\n        { value: 'date-asc', label: 'Date (Oldest First)' },\r\n        { value: 'status-asc', label: 'Status' },\r\n        { value: 'rate-desc', label: 'Rate (High to Low)' },\r\n    ];\r\n    const currentSortValue = `${sortConfig.key}-${sortConfig.direction}`;\r\n    const currentSortLabel = sortOptions.find(o => o.value === currentSortValue)?.label || 'Sort By';\r\n    \r\n    return (\r\n        <div className=\"bg-white dark:bg-[#13111c] p-4 rounded-xl shadow-sm border border-gray-200 dark:border-white/5 flex flex-col gap-4\">\r\n            <div className=\"flex flex-col md:flex-row gap-4 justify-between items-center\">\r\n                {/* Search */}\r\n                <div className=\"relative w-full md:flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Search by ID, Title, Location...\" \r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-jambo-600 dark:text-white\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Sort Controls */}\r\n                <div className=\"flex items-center gap-2 w-full md:w-auto\">\r\n                    <FilterPopover\r\n                        icon={<ArrowUpDown size={14} />}\r\n                        label={currentSortLabel}\r\n                        options={sortOptions}\r\n                        value={currentSortValue}\r\n                        onChange={(v) => {\r\n                            const [key, direction] = v.split('-');\r\n                            setSortConfig({ key, direction: direction as 'asc' | 'desc' });\r\n                        }}\r\n                        className=\"w-full md:w-48\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filter Tags */}\r\n            <div className=\"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 custom-scrollbar\">\r\n                {filters.map(f => (\r\n                    <button \r\n                        key={f.id}\r\n                        onClick={() => setFilterStatus(f.id)}\r\n                        className={`px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap transition-colors border flex items-center ${filterStatus === f.id ? 'bg-jambo-600 text-white border-jambo-600' : 'bg-white dark:bg-white/5 text-gray-600 dark:text-gray-300 border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10'}`}\r\n                    >\r\n                        {f.label}\r\n                        {f.id === 'Payment Pending' && unpaidJobsCount > 0 && (\r\n                            <span className=\"ml-2 bg-red-500 text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full\">{unpaidJobsCount}</span>\r\n                        )}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/list/AdminJobsTable.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Job, Invoice } from '@/data/types';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { Star, AlertCircle } from 'lucide-react';\r\nimport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell } from '../../../ui/Table';\r\nimport { Badge } from '../../../ui/Badge';\r\n\r\ninterface AdminJobsTableProps {\r\n    jobs: Job[];\r\n    invoices: Invoice[];\r\n    onJobSelect: (job: Job) => void;\r\n    onLinguistSelect: (e: React.MouseEvent, linguistId: string) => void;\r\n    getStatusColor: (status: string) => string;\r\n}\r\n\r\nexport const AdminJobsTable = ({ jobs, invoices, onJobSelect, onLinguistSelect, getStatusColor }: AdminJobsTableProps) => {\r\n    // Mock score generator\r\n    const getConfidence = (id: string) => (4 + (id.length % 10) / 10).toFixed(1);\r\n\r\n    const getRateDisplay = (job: Job) => {\r\n        if (job.totalPayout) return `£${job.totalPayout.toFixed(2)}`;\r\n        \r\n        if (job.category === 'Translation' && job.wordRate !== undefined) {\r\n            return `${(job.wordRate * 100).toString()}p/word`; \r\n        }\r\n        if (job.category === 'Interpreting' && job.hourlyRate) {\r\n            return `£${job.hourlyRate.toFixed(2)}/hr`;\r\n        }\r\n        if (job.category === 'Transcription' && job.minuteRate) {\r\n            return `£${job.minuteRate.toFixed(2)}/min`;\r\n        }\r\n        if (job.fixedRate) {\r\n            return `£${job.fixedRate.toFixed(2)} Fixed`;\r\n        }\r\n        return job.rate;\r\n    };\r\n\r\n    const getBadgeVariant = (status: string) => {\r\n        switch (status) {\r\n            case 'Completed': return 'success';\r\n            case 'Pending Approval': return 'warning';\r\n            case 'Scheduled': \r\n            case 'In Progress': return 'info';\r\n            case 'Cancelled': return 'neutral';\r\n            default: return 'brand';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"hidden md:block\">\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHead>Ref ID</TableHead>\r\n                        <TableHead>Title</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Date</TableHead>\r\n                        <TableHead>Linguist</TableHead>\r\n                        <TableHead>Financials</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {jobs.map(job => {\r\n                        const invoice = invoices.find(i => i.items.some(item => item.jobId === job.id));\r\n                        const linguist = job.linguistId ? mockDb.getAllUsers().find(u => u.id === job.linguistId) : null;\r\n                        return (\r\n                            <TableRow key={job.id} onClick={() => onJobSelect(job)}>\r\n                                <TableCell className=\"font-mono text-xs text-gray-500\">\r\n                                    {job.id}\r\n                                </TableCell>\r\n                                <TableCell className=\"font-medium text-gray-900 dark:text-white max-w-[200px]\">\r\n                                    <div className=\"truncate\">{job.title}</div>\r\n                                    <span className=\"block text-xs text-gray-500 font-normal\">{job.category}</span>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <Badge variant={getBadgeVariant(job.status)}>\r\n                                        {job.status}\r\n                                    </Badge>\r\n                                </TableCell>\r\n                                <TableCell className=\"text-gray-600 dark:text-gray-400\">\r\n                                    {new Date(job.date).toLocaleDateString()}\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    {linguist ? (\r\n                                        <div onClick={(e) => onLinguistSelect(e, linguist.id)} className=\"flex items-center gap-2 group cursor-pointer\">\r\n                                            <div className=\"w-8 h-8 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center overflow-hidden border-2 border-white dark:border-gray-800 shrink-0\">\r\n                                                {linguist.avatarUrl ? (\r\n                                                    <img src={linguist.avatarUrl} className=\"w-full h-full object-cover\" alt={`${linguist.firstName}'s avatar`} />\r\n                                                ) : (\r\n                                                    <span className=\"text-xs font-bold text-gray-500\">{linguist.firstName[0]}{linguist.lastName[0]}</span>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"min-w-0\">\r\n                                                <p className=\"font-bold text-gray-900 dark:text-white text-sm truncate group-hover:text-jambo-600 dark:group-hover:text-jambo-400 transition-colors\">\r\n                                                    {linguist.firstName} {linguist.lastName}\r\n                                                </p>\r\n                                                <p className=\"text-[10px] text-orange-500 font-bold flex items-center gap-0.5\">\r\n                                                    <Star size={10} fill=\"currentColor\" /> {getConfidence(linguist.id)} Confidence\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <span className=\"text-orange-500 text-xs italic\">Unassigned</span>\r\n                                    )}\r\n                                </TableCell>\r\n                                <TableCell className=\"font-bold text-gray-900 dark:text-white\">\r\n                                    {job.status === 'Completed' && invoice?.status !== 'Paid' ? (\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"text-orange-600 text-xs flex items-center gap-1\"><AlertCircle size={10}/> Payment Due</span>\r\n                                            <span className=\"text-[10px] text-gray-400\">Inv: {invoice?.reference}</span>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <span>{getRateDisplay(job)}</span>\r\n                                    )}\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        );\r\n                    })}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5537, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/list/AdminJobsMobileList.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Job } from '@/data/types';\r\nimport { Clock, MapPin, Briefcase, MoreVertical, ArrowRight, User } from 'lucide-react';\r\nimport { mockDb } from '@/data/mockDatabase';\r\n\r\ninterface AdminJobsMobileListProps {\r\n    jobs: Job[];\r\n    onJobSelect: (job: Job) => void;\r\n    getStatusColor: (status: string) => string;\r\n}\r\n\r\nexport const AdminJobsMobileList = ({ jobs, onJobSelect, getStatusColor }: AdminJobsMobileListProps) => {\r\n    \r\n    const getRateDisplay = (job: Job) => {\r\n        if (job.totalPayout) return `£${job.totalPayout.toFixed(2)}`;\r\n        \r\n        if (job.category === 'Translation' && job.wordRate !== undefined) {\r\n            // Display exact pence value (e.g. 0.065 -> 6.5p)\r\n            return `${(job.wordRate * 100).toString()}p/word`; \r\n        }\r\n        if (job.category === 'Interpreting' && job.hourlyRate) {\r\n            return `£${job.hourlyRate.toFixed(2)}/hr`;\r\n        }\r\n        if (job.category === 'Transcription' && job.minuteRate) {\r\n            return `£${job.minuteRate.toFixed(2)}/min`;\r\n        }\r\n        if (job.fixedRate) {\r\n            return `£${job.fixedRate.toFixed(2)} Fixed`;\r\n        }\r\n        return job.rate;\r\n    };\r\n\r\n    return (\r\n        <div className=\"md:hidden divide-y divide-gray-100 dark:divide-white/5\">\r\n            {jobs.map(job => {\r\n                const linguist = job.linguistId ? mockDb.getAllUsers().find(u => u.id === job.linguistId) : null;\r\n                \r\n                return (\r\n                    <div key={job.id} className=\"p-4 space-y-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5\" onClick={() => onJobSelect(job)}>\r\n                        <div className=\"flex justify-between items-start\">\r\n                            <div>\r\n                                <span className={`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${getStatusColor(job.status)}`}>\r\n                                    {job.status}\r\n                                </span>\r\n                                <h4 className=\"font-bold text-gray-900 dark:text-white mt-1\">{job.title}</h4>\r\n                                <p className=\"text-xs text-gray-500 font-mono\">#{job.id}</p>\r\n                            </div>\r\n                            {job.status === 'Pending Approval' ? (\r\n                                <span className=\"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-1.5 rounded-full\"><Clock size={16} /></span>\r\n                            ) : (\r\n                                <button className=\"p-2 text-gray-400 hover:bg-gray-50 rounded-lg\">\r\n                                    <MoreVertical size={16} />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        \r\n                        {/* Details Grid */}\r\n                        <div className=\"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400\">\r\n                            <div className=\"flex items-center gap-1\"><Clock size={12}/> {new Date(job.date).toLocaleDateString()}</div>\r\n                            <div className=\"flex items-center gap-1\"><MapPin size={12}/> {job.location.split(',')[0]}</div>\r\n                            <div className=\"flex items-center gap-1\"><Briefcase size={12}/> {job.category}</div>\r\n                            <div className=\"font-bold text-jambo-600 dark:text-jambo-400\">{getRateDisplay(job)}</div>\r\n                        </div>\r\n\r\n                        {/* Linguist Section */}\r\n                        {linguist ? (\r\n                            <div className=\"flex items-center gap-2 p-2 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-100 dark:border-white/5\">\r\n                                <div className=\"w-6 h-6 rounded-full bg-jambo-100 dark:bg-jambo-900 text-jambo-700 dark:text-jambo-300 flex items-center justify-center text-[10px] font-bold overflow-hidden shrink-0\">\r\n                                    {linguist.avatarUrl ? <img src={linguist.avatarUrl} className=\"w-full h-full object-cover\" alt=\"Linguist\"/> : linguist.firstName[0]}\r\n                                </div>\r\n                                <span className=\"text-xs font-bold text-gray-700 dark:text-gray-300\">{linguist.firstName} {linguist.lastName}</span>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex items-center gap-2 p-2 bg-gray-50 dark:bg-white/5 rounded-lg border border-gray-100 dark:border-white/5 border-dashed\">\r\n                                <div className=\"w-6 h-6 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center text-gray-400 shrink-0\">\r\n                                    <User size={12} />\r\n                                </div>\r\n                                <span className=\"text-xs text-gray-400 italic\">Unassigned</span>\r\n                            </div>\r\n                        )}\r\n\r\n                        {job.status === 'Pending Approval' && (\r\n                            <button \r\n                                onClick={(e) => { e.stopPropagation(); onJobSelect(job); }}\r\n                                className=\"w-full mt-2 bg-jambo-600 text-white text-xs font-bold py-2.5 rounded-lg flex items-center justify-center gap-2 shadow-sm\"\r\n                            >\r\n                                Review Submission <ArrowRight size={14} />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5825, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/AdminJobs.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { Plus, Search } from 'lucide-react';\r\nimport { mockDb, Job, JobStatus, Invoice } from '@/data/mockDatabase';\r\nimport { AdminJobModal } from './AdminJobModal';\r\nimport { UserProfileModal } from '../users/UserProfileModal';\r\nimport { Toast, ToastType } from '../../portal/dashboard/Toast';\r\nimport { AddJobModal } from './AddJobModal';\r\nimport { AdminJobsFilter, SortConfig } from './list/AdminJobsFilter';\r\nimport { AdminJobsTable } from './list/AdminJobsTable';\r\nimport { AdminJobsMobileList } from './list/AdminJobsMobileList';\r\n\r\ninterface AdminJobsProps {\r\n  initialFilter?: string;\r\n  actionRequest?: string | null; // Prop to handle external triggers like 'create-job'\r\n  onActionComplete?: () => void;\r\n}\r\n\r\nexport const AdminJobs = ({ initialFilter = 'All', actionRequest, onActionComplete }: AdminJobsProps) => {\r\n  const [jobs, setJobs] = useState<Job[]>(mockDb.getAllJobs());\r\n  const [invoices, setInvoices] = useState<Invoice[]>(mockDb.getAllInvoices());\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState<string>(initialFilter);\r\n  const [selectedJob, setSelectedJob] = useState<Job | null>(null);\r\n  const [selectedLinguistId, setSelectedLinguistId] = useState<string | null>(null);\r\n  const [isAddJobModalOpen, setIsAddJobModalOpen] = useState(false);\r\n  \r\n  // Sorting State\r\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'date', direction: 'desc' });\r\n  \r\n  const [toast, setToast] = useState<{ visible: boolean; message: string; type: ToastType }>({\r\n    visible: false,\r\n    message: '',\r\n    type: 'success'\r\n  });\r\n\r\n  const showToast = (message: string, type: ToastType = 'success') => {\r\n    setToast({ visible: true, message, type });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setFilterStatus(initialFilter);\r\n  }, [initialFilter]);\r\n\r\n  // Handle external actions (like from FAB)\r\n  useEffect(() => {\r\n      if (actionRequest === 'create-job') {\r\n          setIsAddJobModalOpen(true);\r\n          if (onActionComplete) onActionComplete();\r\n      }\r\n  }, [actionRequest, onActionComplete]);\r\n\r\n  const refreshData = () => {\r\n      setJobs(mockDb.getAllJobs());\r\n      setInvoices(mockDb.getAllInvoices());\r\n  };\r\n\r\n  const filteredJobs = useMemo(() => {\r\n      let result = jobs.filter(job => {\r\n        const matchesSearch = \r\n            job.title.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n            job.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            job.location.toLowerCase().includes(searchTerm.toLowerCase());\r\n        \r\n        let matchesStatus = false;\r\n        if (filterStatus === 'All') {\r\n            matchesStatus = true;\r\n        } else if (filterStatus === 'Scheduled') {\r\n            matchesStatus = job.status === 'Scheduled' || job.status === 'In Progress';\r\n        } else if (filterStatus === 'Payment Pending') {\r\n            const inv = invoices.find(i => i.items.some(item => item.jobId === job.id));\r\n            matchesStatus = job.status === 'Completed' && (inv?.status === 'Pending' || inv?.status === 'Overdue');\r\n        } else {\r\n            matchesStatus = job.status === filterStatus;\r\n        }\r\n\r\n        return matchesSearch && matchesStatus;\r\n      });\r\n\r\n      // Sorting Logic\r\n      result.sort((a, b) => {\r\n          let aVal: any = '';\r\n          let bVal: any = '';\r\n\r\n          switch(sortConfig.key) {\r\n              case 'date':\r\n                  aVal = new Date(a.date).getTime();\r\n                  bVal = new Date(b.date).getTime();\r\n                  break;\r\n              case 'status':\r\n                  aVal = a.status;\r\n                  bVal = b.status;\r\n                  break;\r\n              case 'rate':\r\n                  // Extract number from rate string for rough sorting\r\n                  const getRateVal = (rate: string | undefined) => {\r\n                      if (!rate) return 0;\r\n                      const num = parseFloat(rate.replace(/[^0-9.]/g, ''));\r\n                      return isNaN(num) ? 0 : num;\r\n                  }\r\n                  aVal = getRateVal(a.rate);\r\n                  bVal = getRateVal(b.rate);\r\n                  break;\r\n              default:\r\n                  aVal = new Date(a.date).getTime();\r\n                  bVal = new Date(b.date).getTime();\r\n          }\r\n\r\n          if (aVal < bVal) return sortConfig.direction === 'asc' ? -1 : 1;\r\n          if (aVal > bVal) return sortConfig.direction === 'asc' ? 1 : -1;\r\n          return 0;\r\n      });\r\n\r\n      return result;\r\n  }, [jobs, searchTerm, filterStatus, invoices, sortConfig]);\r\n  \r\n  const unpaidJobsCount = useMemo(() => {\r\n    const unpaidInvoiceJobIds = new Set<string>();\r\n    invoices\r\n        .filter(inv => inv.status === 'Pending' || inv.status === 'Overdue')\r\n        .forEach(inv => {\r\n            inv.items.forEach(item => {\r\n                if (item.jobId) {\r\n                    unpaidInvoiceJobIds.add(item.jobId);\r\n                }\r\n            });\r\n        });\r\n    return unpaidInvoiceJobIds.size;\r\n  }, [invoices]);\r\n\r\n  const handleLinguistClick = (e: React.MouseEvent, linguistId: string) => {\r\n      e.stopPropagation();\r\n      setSelectedLinguistId(linguistId);\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n      switch(status) {\r\n          case 'Open': return 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400';\r\n          case 'Scheduled': return 'bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400';\r\n          case 'In Progress': return 'bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 animate-pulse';\r\n          case 'Pending Approval': return 'bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400';\r\n          case 'Revision': return 'bg-amber-100 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400';\r\n          case 'Completed': return 'bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300';\r\n          default: return 'bg-gray-100 text-gray-600';\r\n      }\r\n  };\r\n\r\n  const filters = [\r\n      { id: 'All', label: 'All Jobs' },\r\n      { id: 'Pending Approval', label: 'Pending Approval' },\r\n      { id: 'Revision', label: 'Revision' },\r\n      { id: 'Open', label: 'Marketplace' },\r\n      { id: 'Scheduled', label: 'Live / Scheduled' },\r\n      { id: 'Payment Pending', label: 'Unpaid Invoices' },\r\n      { id: 'Completed', label: 'Completed History' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n        <Toast \r\n            message={toast.message} \r\n            type={toast.type} \r\n            isVisible={toast.visible} \r\n            onClose={() => setToast(prev => ({ ...prev, visible: false }))} \r\n        />\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between gap-4\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Job Operations</h2>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Manage assignments, approvals, and history.</p>\r\n            </div>\r\n            <button \r\n                onClick={() => setIsAddJobModalOpen(true)}\r\n                className=\"bg-jambo-600 hover:bg-jambo-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 text-sm shadow-lg shadow-jambo-600/20 transition-all w-fit\"\r\n            >\r\n                <Plus size={18} /> Create Job\r\n            </button>\r\n        </div>\r\n\r\n        <AdminJobsFilter \r\n            searchTerm={searchTerm}\r\n            setSearchTerm={setSearchTerm}\r\n            filterStatus={filterStatus}\r\n            setFilterStatus={setFilterStatus}\r\n            filters={filters}\r\n            unpaidJobsCount={unpaidJobsCount}\r\n            sortConfig={sortConfig}\r\n            setSortConfig={setSortConfig}\r\n        />\r\n\r\n        <div className=\"bg-white dark:bg-[#13111c] rounded-xl shadow-sm border border-gray-200 dark:border-white/5 overflow-hidden\">\r\n            {filteredJobs.length === 0 ? (\r\n                <div className=\"p-12 text-center text-gray-400\">No jobs found matching filters.</div>\r\n            ) : (\r\n                <>\r\n                    <AdminJobsMobileList \r\n                        jobs={filteredJobs}\r\n                        onJobSelect={setSelectedJob}\r\n                        getStatusColor={getStatusColor}\r\n                    />\r\n                    <AdminJobsTable \r\n                        jobs={filteredJobs}\r\n                        invoices={invoices}\r\n                        onJobSelect={setSelectedJob}\r\n                        onLinguistSelect={handleLinguistClick}\r\n                        getStatusColor={getStatusColor}\r\n                    />\r\n                </>\r\n            )}\r\n        </div>\r\n\r\n        {isAddJobModalOpen && (\r\n            <AddJobModal \r\n                onClose={() => setIsAddJobModalOpen(false)}\r\n                onJobAdded={(newJob) => {\r\n                    refreshData();\r\n                    showToast('Job created successfully!', 'success');\r\n                    setIsAddJobModalOpen(false);\r\n                    setSelectedJob(newJob);\r\n                }}\r\n            />\r\n        )}\r\n\r\n        {selectedJob && (\r\n            <AdminJobModal \r\n                job={selectedJob} \r\n                onClose={() => setSelectedJob(null)} \r\n                onUpdate={(msg) => { \r\n                    refreshData(); \r\n                    // Update current selected job to keep modal open with new info\r\n                    const updated = mockDb.getAllJobs().find(j => j.id === selectedJob.id);\r\n                    if (updated) setSelectedJob(updated);\r\n                    \r\n                    if (msg) showToast(msg, 'success');\r\n                }} \r\n            />\r\n        )}\r\n\r\n        {selectedLinguistId && (\r\n            <UserProfileModal\r\n                user={mockDb.getAllUsers().find(u => u.id === selectedLinguistId)!}\r\n                onClose={() => setSelectedLinguistId(null)}\r\n                onUpdate={() => {}}\r\n                onNavigate={() => {}}\r\n            />\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6183, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/admin/jobs/AdminJobsCalendar.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport { ChevronLeft, ChevronRight, Clock, MapPin, Calendar as CalendarIcon, Briefcase, User, Users, Filter, X } from 'lucide-react';\r\nimport { mockDb, Job } from '@/data/mockDatabase';\r\nimport { AdminJobModal } from './AdminJobModal';\r\nimport { Toast, ToastType } from '../../portal/dashboard/Toast';\r\nimport { Badge } from '../../ui/Badge';\r\n\r\nexport const AdminJobsCalendar = () => {\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [selectedDay, setSelectedDay] = useState<Date>(new Date());\r\n  const [selectedJob, setSelectedJob] = useState<Job | null>(null);\r\n  const [isMobileAgendaOpen, setIsMobileAgendaOpen] = useState(false);\r\n  \r\n  const [toast, setToast] = useState<{ visible: boolean; message: string; type: ToastType }>({\r\n    visible: false,\r\n    message: '',\r\n    type: 'success'\r\n  });\r\n\r\n  const showToast = (message: string, type: ToastType = 'success') => {\r\n    setToast({ visible: true, message, type });\r\n  };\r\n\r\n  // Fetch ALL jobs for admin view\r\n  const allJobs = mockDb.getAllJobs();\r\n  const allUsers = mockDb.getAllUsers();\r\n\r\n  // Calendar Logic\r\n  const getDaysInMonth = (year: number, month: number) => new Date(year, month + 1, 0).getDate();\r\n  const getFirstDayOfMonth = (year: number, month: number) => new Date(year, month, 1).getDay(); // 0 = Sun\r\n\r\n  const year = currentDate.getFullYear();\r\n  const month = currentDate.getMonth();\r\n  const daysInMonth = getDaysInMonth(year, month);\r\n  const firstDay = getFirstDayOfMonth(year, month);\r\n  \r\n  // Adjust for Monday start (0=Sun -> 6, 1=Mon -> 0)\r\n  const startOffset = firstDay === 0 ? 6 : firstDay - 1;\r\n\r\n  const days = [];\r\n  // Previous month padding\r\n  for (let i = 0; i < startOffset; i++) {\r\n    days.push(null);\r\n  }\r\n  // Current month days\r\n  for (let i = 1; i <= daysInMonth; i++) {\r\n    days.push(new Date(year, month, i));\r\n  }\r\n\r\n  const prevMonth = () => setCurrentDate(new Date(year, month - 1, 1));\r\n  const nextMonth = () => setCurrentDate(new Date(year, month + 1, 1));\r\n  const goToday = () => {\r\n      const now = new Date();\r\n      setCurrentDate(now);\r\n      setSelectedDay(new Date(now.getFullYear(), now.getMonth(), now.getDate()));\r\n      // If mobile, jump to today in drawer? Or just select.\r\n      if (window.innerWidth < 1280) setIsMobileAgendaOpen(true);\r\n  };\r\n\r\n  const handleDayClick = (date: Date) => {\r\n      setSelectedDay(date);\r\n      // Open drawer on mobile/tablet (xl breakpoint is where layout shifts)\r\n      if (window.innerWidth < 1280) {\r\n          setIsMobileAgendaOpen(true);\r\n      }\r\n  };\r\n\r\n  // Get jobs for a specific date\r\n  const getJobsForDate = (date: Date) => {\r\n    return allJobs.filter(job => {\r\n      const jobDate = new Date(job.date);\r\n      return (\r\n        jobDate.getDate() === date.getDate() &&\r\n        jobDate.getMonth() === date.getMonth() &&\r\n        jobDate.getFullYear() === date.getFullYear()\r\n      );\r\n    });\r\n  };\r\n\r\n  const selectedDayJobs = selectedDay ? getJobsForDate(selectedDay) : [];\r\n\r\n  const getLinguistName = (id?: string | null) => {\r\n      if (!id) return null;\r\n      const user = allUsers.find(u => u.id === id);\r\n      return user ? `${user.firstName} ${user.lastName}` : 'Unknown';\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n      switch(status) {\r\n          case 'Open': return 'bg-green-500';\r\n          case 'Scheduled': return 'bg-blue-500';\r\n          case 'In Progress': return 'bg-purple-500 animate-pulse';\r\n          case 'Pending Approval': return 'bg-orange-500';\r\n          case 'Revision': return 'bg-red-500';\r\n          case 'Completed': return 'bg-gray-500';\r\n          case 'Cancelled': return 'bg-gray-300';\r\n          default: return 'bg-gray-400';\r\n      }\r\n  };\r\n\r\n  // Reusable Job List Component\r\n  const AgendaList = ({ jobs }: { jobs: Job[] }) => (\r\n    <div className=\"space-y-3\">\r\n        {jobs.length === 0 ? (\r\n            <div className=\"flex flex-col items-center justify-center py-10 text-gray-400 text-center\">\r\n                <Briefcase size={32} className=\"mb-3 opacity-20\" />\r\n                <p className=\"text-sm\">No jobs scheduled.</p>\r\n            </div>\r\n        ) : (\r\n            jobs.map(job => {\r\n                const linguistName = getLinguistName(job.linguistId);\r\n                return (\r\n                    <div \r\n                        key={job.id} \r\n                        onClick={() => setSelectedJob(job)}\r\n                        className=\"group p-4 rounded-xl border border-gray-100 dark:border-white/5 hover:border-jambo-300 dark:hover:border-jambo-600 bg-white dark:bg-white/5 hover:bg-gray-50 dark:hover:bg-white/10 transition-all cursor-pointer relative overflow-hidden shadow-sm\"\r\n                    >\r\n                        <div className={`absolute left-0 top-0 bottom-0 w-1 ${getStatusColor(job.status)}`}></div>\r\n                        \r\n                        <div className=\"flex justify-between items-start mb-2 pl-2\">\r\n                            <Badge variant=\"neutral\" className=\"text-[10px]\">{job.status}</Badge>\r\n                            <span className=\"text-xs font-bold text-gray-500 flex items-center gap-1\">\r\n                                <Clock size={12} /> {job.time || 'All Day'}\r\n                            </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"pl-2\">\r\n                            <h4 className=\"font-bold text-gray-900 dark:text-white text-sm mb-1 line-clamp-1 group-hover:text-jambo-600 dark:group-hover:text-jambo-400 transition-colors\">\r\n                                {job.title}\r\n                            </h4>\r\n                            \r\n                            <div className=\"space-y-1.5 mt-2\">\r\n                                <div className=\"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400\">\r\n                                    <MapPin size={12} className=\"shrink-0\" /> \r\n                                    <span className=\"truncate\">{job.location.split(',')[0]}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-white/10 p-1.5 rounded-lg border border-gray-100 dark:border-white/5\">\r\n                                    {linguistName ? (\r\n                                        <>\r\n                                            <User size={12} className=\"text-jambo-600 dark:text-jambo-400 shrink-0\" />\r\n                                            <span className=\"font-bold text-gray-700 dark:text-gray-300 truncate\">{linguistName}</span>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Users size={12} className=\"text-gray-400 shrink-0\" />\r\n                                            <span className=\"italic text-gray-400\">Unassigned</span>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })\r\n        )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6 h-full flex flex-col\">\r\n      <Toast \r\n        message={toast.message} \r\n        type={toast.type} \r\n        isVisible={toast.visible} \r\n        onClose={() => setToast(prev => ({ ...prev, visible: false }))} \r\n      />\r\n\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 shrink-0\">\r\n        <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                <CalendarIcon className=\"text-jambo-600 dark:text-jambo-400\" /> \r\n                Calendar\r\n            </h2>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center justify-between md:justify-end gap-3 bg-white dark:bg-[#13111c] p-1.5 rounded-xl shadow-sm border border-gray-200 dark:border-white/5 w-full md:w-auto\">\r\n            <button onClick={prevMonth} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\">\r\n                <ChevronLeft size={20} className=\"text-gray-600 dark:text-gray-300\"/>\r\n            </button>\r\n            <div className=\"text-center min-w-[120px]\">\r\n                <h3 className=\"font-bold text-gray-900 dark:text-white text-base md:text-lg\">\r\n                    {currentDate.toLocaleString('default', { month: 'short', year: 'numeric' })}\r\n                </h3>\r\n            </div>\r\n            <button onClick={nextMonth} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\">\r\n                <ChevronRight size={20} className=\"text-gray-600 dark:text-gray-300\"/>\r\n            </button>\r\n            <div className=\"w-px h-6 bg-gray-200 dark:bg-white/10 mx-1 hidden md:block\"></div>\r\n            <button onClick={goToday} className=\"text-xs md:text-sm font-bold text-jambo-600 dark:text-jambo-400 hover:bg-jambo-50 dark:hover:bg-jambo-900/20 px-3 py-1.5 rounded-lg transition-colors whitespace-nowrap\">\r\n                Today\r\n            </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid xl:grid-cols-4 gap-6 flex-1 min-h-0\">\r\n         \r\n         {/* Calendar Grid */}\r\n         <div className=\"xl:col-span-3 bg-white dark:bg-[#13111c] rounded-2xl shadow-sm border border-gray-200 dark:border-white/5 p-2 md:p-6 flex flex-col h-full overflow-hidden\">\r\n            {/* Weekday Headers */}\r\n            <div className=\"grid grid-cols-7 mb-2 border-b border-gray-100 dark:border-white/5 pb-2\">\r\n                {['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((day, i) => (\r\n                    <div key={i} className=\"text-center text-[10px] md:text-xs font-bold text-gray-400 uppercase\">\r\n                        {day}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            \r\n            {/* Days Grid */}\r\n            <div className=\"grid grid-cols-7 gap-px md:gap-1 lg:gap-2 flex-1 auto-rows-fr\">\r\n                {days.map((date, i) => {\r\n                    if (!date) return <div key={`empty-${i}`} className=\"bg-transparent\"></div>;\r\n                    \r\n                    const dayJobs = getJobsForDate(date);\r\n                    const isToday = new Date().toDateString() === date.toDateString();\r\n                    const isSelected = selectedDay?.toDateString() === date.toDateString();\r\n                    \r\n                    return (\r\n                        <div \r\n                            key={i}\r\n                            onClick={() => handleDayClick(date)}\r\n                            className={`\r\n                                rounded-lg md:rounded-xl border p-1 md:p-2 cursor-pointer transition-all flex flex-col gap-1 h-full min-h-[60px] md:min-h-[100px]\r\n                                ${isSelected \r\n                                    ? 'border-jambo-600 bg-jambo-50 dark:bg-jambo-900/20 dark:border-jambo-500 ring-1 ring-jambo-600 z-10' \r\n                                    : 'border-gray-100 dark:border-white/5 bg-white dark:bg-white/5 hover:border-gray-300 dark:hover:border-white/20'\r\n                                }\r\n                            `}\r\n                        >\r\n                            <div className=\"flex justify-center md:justify-between items-center\">\r\n                                <span className={`text-xs md:text-sm font-bold w-6 h-6 rounded-full flex items-center justify-center ${isToday ? 'bg-brand-orange text-white' : 'text-gray-700 dark:text-gray-300'}`}>\r\n                                    {date.getDate()}\r\n                                </span>\r\n                                <span className=\"hidden md:inline text-[10px] text-gray-400 font-medium\">\r\n                                    {dayJobs.length > 0 ? `${dayJobs.length} Jobs` : ''}\r\n                                </span>\r\n                            </div>\r\n                            \r\n                            {/* MOBILE DOTS INDICATOR (Visible on small screens) */}\r\n                            <div className=\"flex xl:hidden flex-wrap justify-center gap-1 mt-1 content-start h-full\">\r\n                                {dayJobs.slice(0, 5).map(job => (\r\n                                    <div key={job.id} className={`w-1.5 h-1.5 rounded-full ${getStatusColor(job.status)}`}></div>\r\n                                ))}\r\n                                {dayJobs.length > 5 && <span className=\"text-[8px] text-gray-400 leading-none self-center\">+</span>}\r\n                            </div>\r\n\r\n                            {/* DESKTOP LIST (Visible on xl screens) */}\r\n                            <div className=\"hidden xl:flex flex-col gap-1 mt-1 overflow-y-auto custom-scrollbar flex-1\">\r\n                                {dayJobs.slice(0, 3).map(job => (\r\n                                    <div \r\n                                        key={job.id} \r\n                                        className=\"flex items-center gap-1.5 px-1.5 py-1 rounded bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 hover:border-jambo-200 dark:hover:border-jambo-700 transition-colors group\"\r\n                                    >\r\n                                        <div className={`w-1.5 h-1.5 rounded-full shrink-0 ${getStatusColor(job.status)}`}></div>\r\n                                        <span className=\"text-[10px] text-gray-600 dark:text-gray-300 truncate font-medium group-hover:text-jambo-600 dark:group-hover:text-jambo-400\">\r\n                                            {job.time || 'All Day'} - {getLinguistName(job.linguistId) || 'Unassigned'}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                                {dayJobs.length > 3 && (\r\n                                    <div className=\"text-[9px] text-gray-400 text-center font-bold\">+ {dayJobs.length - 3} more</div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n         </div>\r\n\r\n         {/* Desktop Side Panel: Daily Agenda (Visible only on XL) */}\r\n         <div className=\"hidden xl:flex xl:col-span-1 flex-col h-full bg-white dark:bg-[#13111c] rounded-2xl shadow-sm border border-gray-200 dark:border-white/5 overflow-hidden\">\r\n            <div className=\"p-5 border-b border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5\">\r\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white font-serif\">\r\n                    {selectedDay.toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'short' })}\r\n                </h3>\r\n                <div className=\"flex justify-between items-center mt-2\">\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        {selectedDayJobs.length} Assignment{selectedDayJobs.length !== 1 ? 's' : ''}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4\">\r\n                <AgendaList jobs={selectedDayJobs} />\r\n            </div>\r\n         </div>\r\n      </div>\r\n\r\n      {/* MOBILE AGENDA BOTTOM SHEET (Drawer) */}\r\n      {isMobileAgendaOpen && (\r\n        <div className=\"fixed inset-0 z-50 xl:hidden flex flex-col justify-end\">\r\n            <div \r\n                className=\"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity\" \r\n                onClick={() => setIsMobileAgendaOpen(false)}\r\n            ></div>\r\n            <div className=\"bg-white dark:bg-[#1a1625] w-full rounded-t-3xl shadow-2xl relative z-10 flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-full duration-300\">\r\n                \r\n                {/* Drag Handle */}\r\n                <div className=\"w-full flex justify-center pt-3 pb-1\" onClick={() => setIsMobileAgendaOpen(false)}>\r\n                    <div className=\"w-12 h-1.5 bg-gray-300 dark:bg-white/20 rounded-full\"></div>\r\n                </div>\r\n\r\n                <div className=\"p-6 border-b border-gray-100 dark:border-white/5 flex justify-between items-center\">\r\n                    <div>\r\n                        <h3 className=\"text-2xl font-serif font-bold text-gray-900 dark:text-white\">\r\n                            {selectedDay.toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'short' })}\r\n                        </h3>\r\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                            {selectedDayJobs.length} Assignment{selectedDayJobs.length !== 1 ? 's' : ''}\r\n                        </p>\r\n                    </div>\r\n                    <button \r\n                        onClick={() => setIsMobileAgendaOpen(false)}\r\n                        className=\"p-2 bg-gray-100 dark:bg-white/10 rounded-full text-gray-500 dark:text-gray-300\"\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4 pb-8 bg-gray-50 dark:bg-black/20\">\r\n                    <AgendaList jobs={selectedDayJobs} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n\r\n      {selectedJob && (\r\n        <AdminJobModal \r\n            job={selectedJob} \r\n            onClose={() => setSelectedJob(null)}\r\n            onUpdate={(msg) => {\r\n                if(msg) showToast(msg, 'success');\r\n                const updatedJob = mockDb.getAllJobs().find(j => j.id === selectedJob?.id);\r\n                if (updatedJob) {\r\n                    setSelectedJob(updatedJob);\r\n                }\r\n            }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}}]
}