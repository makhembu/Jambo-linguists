{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/messaging/MessageBubble.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Message } from '@/data/types';\r\nimport { Check, CheckCheck } from 'lucide-react';\r\n\r\ninterface MessageBubbleProps {\r\n  message: Message;\r\n  isOwn: boolean;\r\n}\r\n\r\nexport const MessageBubble: React.FC<MessageBubbleProps> = ({ message, isOwn }) => {\r\n  const time = new Date(message.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n\r\n  return (\r\n    <div className={`flex w-full ${isOwn ? 'justify-end' : 'justify-start'}`}>\r\n      <div className={`max-w-[75%] md:max-w-[60%] flex flex-col ${isOwn ? 'items-end' : 'items-start'}`}>\r\n        <div \r\n          className={`\r\n            px-4 py-2.5 rounded-2xl text-sm leading-relaxed shadow-sm\r\n            ${isOwn \r\n              ? 'bg-jambo-600 text-white rounded-tr-none' \r\n              : 'bg-white dark:bg-white/10 text-gray-800 dark:text-gray-100 border border-gray-100 dark:border-white/5 rounded-tl-none'\r\n            }\r\n          `}\r\n        >\r\n          {message.content}\r\n        </div>\r\n        <div className=\"flex items-center gap-1 mt-1 text-[10px] text-gray-400\">\r\n          <span>{time}</span>\r\n          {isOwn && (\r\n            <span>\r\n              {message.isRead ? <CheckCheck size={12} className=\"text-blue-500\" /> : <Check size={12} />}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAEA;AAAA;;;AAOO,MAAM,gBAA8C,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE;IAC5E,MAAM,OAAO,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IAErG,qBACE,8OAAC;QAAI,WAAW,CAAC,YAAY,EAAE,QAAQ,gBAAgB,iBAAiB;kBACtE,cAAA,8OAAC;YAAI,WAAW,CAAC,yCAAyC,EAAE,QAAQ,cAAc,eAAe;;8BAC/F,8OAAC;oBACC,WAAW,CAAC;;YAEV,EAAE,QACE,4CACA,wHACH;UACH,CAAC;8BAEA,QAAQ,OAAO;;;;;;8BAElB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAM;;;;;;wBACN,uBACC,8OAAC;sCACE,QAAQ,MAAM,iBAAG,8OAAC,gOAAU;gCAAC,MAAM;gCAAI,WAAU;;;;;yFAAqB,8OAAC,6MAAK;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlG"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/messaging/JobChatWidget.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { mockDb, Message } from '@/data/mockDatabase';\r\nimport { MessageBubble } from './MessageBubble';\r\nimport { Send, MessageSquare, X } from 'lucide-react';\r\n\r\ninterface JobChatWidgetProps {\r\n  jobId: string;\r\n  currentUserId: string;\r\n  peerId?: string; // If known (e.g. assigned linguist/client). If null, might disable or show placeholder.\r\n}\r\n\r\nexport const JobChatWidget = ({ jobId, currentUserId, peerId }: JobChatWidgetProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [input, setInput] = useState('');\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  \r\n  // Calculate unread\r\n  const unreadCount = messages.filter(m => m.recipientId === currentUserId && !m.isRead).length;\r\n\r\n  const refreshMessages = () => {\r\n      if (peerId) {\r\n          const msgs = mockDb.getThread(currentUserId, peerId, jobId);\r\n          setMessages(msgs);\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n      refreshMessages();\r\n      const unsubscribe = mockDb.subscribe(refreshMessages);\r\n      return unsubscribe;\r\n  }, [jobId, peerId]);\r\n\r\n  // Mark as read when opened\r\n  useEffect(() => {\r\n      if (isOpen && peerId) {\r\n          mockDb.markAsRead(currentUserId, peerId, jobId);\r\n          refreshMessages(); \r\n      }\r\n  }, [isOpen, messages]);\r\n\r\n  useEffect(() => {\r\n      if (isOpen) {\r\n          messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n      }\r\n  }, [messages, isOpen]);\r\n\r\n  const handleSend = (e: React.FormEvent) => {\r\n      e.preventDefault();\r\n      if (!input.trim() || !peerId) return;\r\n      mockDb.sendMessage(currentUserId, peerId, input, jobId);\r\n      setInput('');\r\n  };\r\n\r\n  if (!peerId) return null; // Don't show chat if no counterpart assigned\r\n\r\n  return (\r\n    <>\r\n        {/* Toggle Button - Fixed to viewport to stay visible over modal content */}\r\n        <div className={`fixed bottom-24 right-4 md:bottom-8 md:right-8 z-[10000] transition-all duration-300 ${isOpen ? 'translate-y-20 opacity-0 pointer-events-none' : 'translate-y-0 opacity-100'}`}>\r\n            <button \r\n                onClick={() => setIsOpen(true)}\r\n                className=\"bg-jambo-600 hover:bg-jambo-700 text-white rounded-full p-3 md:p-4 shadow-2xl flex items-center justify-center relative transition-transform hover:scale-105 border-2 border-white dark:border-[#1a1625]\"\r\n                aria-label=\"Open Chat\"\r\n            >\r\n                <MessageSquare size={24} />\r\n                {unreadCount > 0 && (\r\n                    <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white dark:border-[#1a1625]\">\r\n                        {unreadCount}\r\n                    </span>\r\n                )}\r\n            </button>\r\n        </div>\r\n\r\n        {/* Chat Panel - Fixed positioning for mobile/desktop handling */}\r\n        <div \r\n            className={`\r\n                fixed inset-0 md:inset-y-0 md:right-0 md:left-auto md:w-96 \r\n                bg-white dark:bg-[#1a1625] shadow-2xl md:border-l border-gray-200 dark:border-white/10 \r\n                z-[10001] transform transition-transform duration-300 flex flex-col\r\n                ${isOpen ? 'translate-x-0' : 'translate-x-full'}\r\n            `}\r\n        >\r\n            {/* Header */}\r\n            <div className=\"p-4 border-b border-gray-100 dark:border-white/5 flex justify-between items-center bg-gray-50/50 dark:bg-white/5 shadow-sm relative z-10 shrink-0\">\r\n                <h3 className=\"font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                    <MessageSquare size={18} className=\"text-jambo-600 dark:text-jambo-400\" /> \r\n                    Job Chat\r\n                </h3>\r\n                <div className=\"flex items-center gap-1\">\r\n                    <button \r\n                        onClick={() => setIsOpen(false)} \r\n                        className=\"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-lg transition-colors text-gray-500 dark:text-gray-400\"\r\n                        title=\"Close Chat\"\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Messages */}\r\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4 bg-gray-50 dark:bg-black/10\">\r\n                {messages.length === 0 ? (\r\n                    <div className=\"text-center py-10 text-gray-400 text-sm\">\r\n                        <p>No messages yet.</p>\r\n                        <p className=\"text-xs mt-1\">Start the conversation about this job.</p>\r\n                    </div>\r\n                ) : (\r\n                    messages.map(msg => (\r\n                        <MessageBubble key={msg.id} message={msg} isOwn={msg.senderId === currentUserId} />\r\n                    ))\r\n                )}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Input */}\r\n            <form onSubmit={handleSend} className=\"p-3 border-t border-gray-200 dark:border-white/10 bg-white dark:bg-[#1a1625] flex gap-2 shrink-0 safe-area-bottom\">\r\n                <input \r\n                    className=\"flex-1 bg-gray-100 dark:bg-white/5 border-transparent focus:border-jambo-600 border rounded-full px-4 py-2 text-sm outline-none dark:text-white transition-all\"\r\n                    placeholder=\"Message...\"\r\n                    value={input}\r\n                    onChange={(e) => setInput(e.target.value)}\r\n                />\r\n                <button \r\n                    type=\"submit\" \r\n                    disabled={!input.trim()}\r\n                    className=\"p-2 bg-jambo-600 text-white rounded-full hover:bg-jambo-700 disabled:opacity-50 transition-colors shadow-sm shrink-0\"\r\n                >\r\n                    <Send size={18} />\r\n                </button>\r\n            </form>\r\n        </div>\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/messaging/ConversationList.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Conversation } from '@/data/types';\r\nimport { Briefcase, User } from 'lucide-react';\r\n\r\ninterface ConversationListProps {\r\n  conversations: Conversation[];\r\n  selectedPeerId?: string;\r\n  selectedJobId?: string;\r\n  onSelect: (peerId: string, jobId?: string) => void;\r\n}\r\n\r\nexport const ConversationList = ({ conversations, selectedPeerId, selectedJobId, onSelect }: ConversationListProps) => {\r\n  \r\n  if (conversations.length === 0) {\r\n      return <div className=\"p-6 text-center text-gray-400 text-sm\">No messages yet.</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"divide-y divide-gray-100 dark:divide-white/5\">\r\n        {conversations.map((conv, idx) => {\r\n            const isSelected = conv.peerId === selectedPeerId && conv.jobId === selectedJobId;\r\n            const peerName = conv.peer ? `${conv.peer.firstName} ${conv.peer.lastName}` : 'Unknown User';\r\n            const time = new Date(conv.lastMessage.createdAt).toLocaleDateString(undefined, { month: 'short', day: 'numeric' });\r\n            \r\n            return (\r\n                <div \r\n                    key={`${conv.peerId}-${conv.jobId}-${idx}`}\r\n                    onClick={() => onSelect(conv.peerId, conv.jobId)}\r\n                    className={`p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 transition-colors relative ${isSelected ? 'bg-jambo-50 dark:bg-jambo-900/10' : ''}`}\r\n                >\r\n                    <div className=\"flex items-start gap-3\">\r\n                        <div className=\"relative\">\r\n                            <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center text-xs font-bold text-gray-500 overflow-hidden shrink-0\">\r\n                                {conv.peer?.avatarUrl ? <img src={conv.peer.avatarUrl} className=\"w-full h-full object-cover\" /> : <User size={16} />}\r\n                            </div>\r\n                            {conv.unreadCount > 0 && (\r\n                                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white dark:border-[#1a1625]\">\r\n                                    {conv.unreadCount}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        \r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex justify-between items-baseline mb-0.5\">\r\n                                <h4 className={`text-sm font-bold truncate ${conv.unreadCount > 0 ? 'text-gray-900 dark:text-white' : 'text-gray-700 dark:text-gray-300'}`}>\r\n                                    {peerName}\r\n                                </h4>\r\n                                <span className=\"text-[10px] text-gray-400 shrink-0\">{time}</span>\r\n                            </div>\r\n                            \r\n                            {conv.job && (\r\n                                <div className=\"flex items-center gap-1 text-[10px] text-jambo-600 dark:text-jambo-400 font-bold uppercase tracking-wide mb-1\">\r\n                                    <Briefcase size={10} />\r\n                                    <span className=\"truncate\">{conv.job.title}</span>\r\n                                </div>\r\n                            )}\r\n                            \r\n                            <p className={`text-xs truncate ${conv.unreadCount > 0 ? 'font-bold text-gray-800 dark:text-gray-100' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                                {conv.lastMessage.senderId !== conv.peerId && 'You: '}\r\n                                {conv.lastMessage.content}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    {isSelected && <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-jambo-600\"></div>}\r\n                </div>\r\n            );\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;;;AASO,MAAM,mBAAmB,CAAC,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,EAAE,QAAQ,EAAyB;IAEhH,IAAI,cAAc,MAAM,KAAK,GAAG;QAC5B,qBAAO,8OAAC;YAAI,WAAU;sBAAwC;;;;;;IAClE;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACV,cAAc,GAAG,CAAC,CAAC,MAAM;YACtB,MAAM,aAAa,KAAK,MAAM,KAAK,kBAAkB,KAAK,KAAK,KAAK;YACpE,MAAM,WAAW,KAAK,IAAI,GAAG,GAAG,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE,GAAG;YAC9E,MAAM,OAAO,IAAI,KAAK,KAAK,WAAW,CAAC,SAAS,EAAE,kBAAkB,CAAC,WAAW;gBAAE,OAAO;gBAAS,KAAK;YAAU;YAEjH,qBACI,8OAAC;gBAEG,SAAS,IAAM,SAAS,KAAK,MAAM,EAAE,KAAK,KAAK;gBAC/C,WAAW,CAAC,qFAAqF,EAAE,aAAa,qCAAqC,IAAI;;kCAEzJ,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;kDACV,KAAK,IAAI,EAAE,0BAAY,8OAAC;4CAAI,KAAK,KAAK,IAAI,CAAC,SAAS;4CAAE,WAAU;;;;;qGAAkC,8OAAC,0MAAI;4CAAC,MAAM;;;;;;;;;;;oCAElH,KAAK,WAAW,GAAG,mBAChB,8OAAC;wCAAK,WAAU;kDACX,KAAK,WAAW;;;;;;;;;;;;0CAK7B,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAG,WAAW,CAAC,2BAA2B,EAAE,KAAK,WAAW,GAAG,IAAI,kCAAkC,oCAAoC;0DACrI;;;;;;0DAEL,8OAAC;gDAAK,WAAU;0DAAsC;;;;;;;;;;;;oCAGzD,KAAK,GAAG,kBACL,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,yNAAS;gDAAC,MAAM;;;;;;0DACjB,8OAAC;gDAAK,WAAU;0DAAY,KAAK,GAAG,CAAC,KAAK;;;;;;;;;;;;kDAIlD,8OAAC;wCAAE,WAAW,CAAC,iBAAiB,EAAE,KAAK,WAAW,GAAG,IAAI,+CAA+C,oCAAoC;;4CACvI,KAAK,WAAW,CAAC,QAAQ,KAAK,KAAK,MAAM,IAAI;4CAC7C,KAAK,WAAW,CAAC,OAAO;;;;;;;;;;;;;;;;;;;oBAIpC,4BAAc,8OAAC;wBAAI,WAAU;;;;;;;eArCzB,GAAG,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK;;;;;QAwCtD;;;;;;AAGR"}},
    {"offset": {"line": 512, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/messaging/MessageThread.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { Message, User, Job } from '@/data/types';\r\nimport { MessageBubble } from './MessageBubble';\r\nimport { Send, ArrowLeft, MoreVertical, Briefcase, ExternalLink, Calendar } from 'lucide-react';\r\nimport { mockDb } from '@/data/mockDatabase';\r\n\r\ninterface MessageThreadProps {\r\n  currentUserId: string;\r\n  peerId: string;\r\n  jobId?: string;\r\n  messages: Message[];\r\n  onSendMessage: (content: string) => void;\r\n  onBack: () => void; // For mobile\r\n  onViewJob?: (jobId: string) => void;\r\n}\r\n\r\nexport const MessageThread = ({ currentUserId, peerId, jobId, messages, onSendMessage, onBack, onViewJob }: MessageThreadProps) => {\r\n  const [input, setInput] = useState('');\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  \r\n  const peer = mockDb.getAllUsers().find(u => u.id === peerId);\r\n  const job = jobId ? mockDb.getAllJobs().find(j => j.id === jobId) : null;\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSend = (e?: React.FormEvent) => {\r\n      e?.preventDefault();\r\n      if (!input.trim()) return;\r\n      onSendMessage(input);\r\n      setInput('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gray-50/50 dark:bg-black/20\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"h-16 px-4 border-b border-gray-200 dark:border-white/5 flex items-center justify-between bg-white dark:bg-[#1a1625] shrink-0\">\r\n            <div className=\"flex items-center gap-3\">\r\n                <button onClick={onBack} className=\"md:hidden p-1 text-gray-500\">\r\n                    <ArrowLeft size={20} />\r\n                </button>\r\n                <div className=\"w-8 h-8 rounded-full bg-gray-200 dark:bg-white/10 flex items-center justify-center overflow-hidden\">\r\n                    {peer?.avatarUrl ? <img src={peer.avatarUrl} className=\"w-full h-full object-cover\"/> : peer?.firstName[0]}\r\n                </div>\r\n                <div>\r\n                    <h3 className=\"font-bold text-gray-900 dark:text-white text-sm\">\r\n                        {peer ? `${peer.firstName} ${peer.lastName}` : 'Unknown'}\r\n                    </h3>\r\n                    {job ? (\r\n                        <span className=\"text-[10px] text-gray-500 dark:text-gray-400 flex items-center gap-1\">\r\n                            Ref: {job.id} â€¢ {job.status}\r\n                        </span>\r\n                    ) : (\r\n                        <span className=\"text-[10px] text-green-500 font-bold\">Online</span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            \r\n            {job && (\r\n                <button \r\n                    onClick={() => onViewJob && onViewJob(job.id)}\r\n                    className=\"text-xs font-bold text-jambo-600 dark:text-jambo-400 hover:bg-jambo-50 dark:hover:bg-jambo-900/20 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1\"\r\n                >\r\n                    Job Details <ExternalLink size={12} />\r\n                </button>\r\n            )}\r\n        </div>\r\n\r\n        {/* Messages Area */}\r\n        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4\">\r\n            {job && (\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <div className=\"bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/10 p-3 rounded-xl max-w-sm text-center\">\r\n                        <p className=\"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1\">Context: {job.category}</p>\r\n                        <p className=\"text-sm font-bold text-gray-800 dark:text-white\">{job.title}</p>\r\n                        <p className=\"text-xs text-gray-500 mt-1 flex items-center justify-center gap-1\">\r\n                            <Calendar size={10}/> {new Date(job.date).toLocaleDateString()}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {messages.map(msg => (\r\n                <MessageBubble \r\n                    key={msg.id} \r\n                    message={msg} \r\n                    isOwn={msg.senderId === currentUserId} \r\n                />\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Input Area */}\r\n        <div className=\"p-4 bg-white dark:bg-[#1a1625] border-t border-gray-200 dark:border-white/5\">\r\n            <form onSubmit={handleSend} className=\"flex items-center gap-2\">\r\n                <input \r\n                    type=\"text\" \r\n                    value={input} \r\n                    onChange={(e) => setInput(e.target.value)}\r\n                    placeholder=\"Type your message...\" \r\n                    className=\"flex-1 bg-gray-100 dark:bg-white/5 border border-transparent focus:border-jambo-600 rounded-full px-4 py-2.5 text-sm outline-none dark:text-white transition-all\"\r\n                />\r\n                <button \r\n                    type=\"submit\" \r\n                    disabled={!input.trim()}\r\n                    className=\"p-2.5 bg-jambo-600 text-white rounded-full hover:bg-jambo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md\"\r\n                >\r\n                    <Send size={18} />\r\n                </button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AAYO,MAAM,gBAAgB,CAAC,EAAE,aAAa,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,EAAE,SAAS,EAAsB;IAC5H,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,iBAAiB,IAAA,+MAAM,EAAiB;IAE9C,MAAM,OAAO,8IAAM,CAAC,WAAW,GAAG,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACrD,MAAM,MAAM,QAAQ,8IAAM,CAAC,UAAU,GAAG,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS;IAEpE,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,aAAa,CAAC;QAChB,GAAG;QACH,IAAI,CAAC,MAAM,IAAI,IAAI;QACnB,cAAc;QACd,SAAS;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAGX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAO,SAAS;gCAAQ,WAAU;0CAC/B,cAAA,8OAAC,6NAAS;oCAAC,MAAM;;;;;;;;;;;0CAErB,8OAAC;gCAAI,WAAU;0CACV,MAAM,0BAAY,8OAAC;oCAAI,KAAK,KAAK,SAAS;oCAAE,WAAU;;;;;+EAAiC,MAAM,SAAS,CAAC,EAAE;;;;;;0CAE9G,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDACT,OAAO,GAAG,KAAK,SAAS,CAAC,CAAC,EAAE,KAAK,QAAQ,EAAE,GAAG;;;;;;oCAElD,oBACG,8OAAC;wCAAK,WAAU;;4CAAuE;4CAC7E,IAAI,EAAE;4CAAC;4CAAI,IAAI,MAAM;;;;;;iGAG/B,8OAAC;wCAAK,WAAU;kDAAuC;;;;;;;;;;;;;;;;;;oBAKlE,qBACG,8OAAC;wBACG,SAAS,IAAM,aAAa,UAAU,IAAI,EAAE;wBAC5C,WAAU;;4BACb;0CACe,8OAAC,sOAAY;gCAAC,MAAM;;;;;;;;;;;;;;;;;;0BAM5C,8OAAC;gBAAI,WAAU;;oBACV,qBACG,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAE,WAAU;;wCAAiE;wCAAU,IAAI,QAAQ;;;;;;;8CACpG,8OAAC;oCAAE,WAAU;8CAAmD,IAAI,KAAK;;;;;;8CACzE,8OAAC;oCAAE,WAAU;;sDACT,8OAAC,sNAAQ;4CAAC,MAAM;;;;;;wCAAK;wCAAE,IAAI,KAAK,IAAI,IAAI,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;oBAM3E,SAAS,GAAG,CAAC,CAAA,oBACV,8OAAC,0JAAa;4BAEV,SAAS;4BACT,OAAO,IAAI,QAAQ,KAAK;2BAFnB,IAAI,EAAE;;;;;kCAKnB,8OAAC;wBAAI,KAAK;;;;;;;;;;;;0BAId,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAK,UAAU;oBAAY,WAAU;;sCAClC,8OAAC;4BACG,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,aAAY;4BACZ,WAAU;;;;;;sCAEd,8OAAC;4BACG,MAAK;4BACL,UAAU,CAAC,MAAM,IAAI;4BACrB,WAAU;sCAEV,cAAA,8OAAC,0MAAI;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhC"}},
    {"offset": {"line": 787, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/seo/SeoHead.tsx"],"sourcesContent":["'use client'\r\nimport React, { useEffect } from 'react';\r\nimport { SeoConfig } from '@/data/types';\r\nimport { COMPANY_INFO } from '@/data/constants';\r\nimport { mockDb } from '@/data/mockDatabase';\r\n\r\ninterface SeoHeadProps {\r\n  seo?: SeoConfig;\r\n  title?: string;\r\n  description?: string;\r\n  path?: string;\r\n  type?: 'website' | 'article' | 'profile' | 'service';\r\n  image?: string;\r\n  forceNoIndex?: boolean; // Override for portals\r\n  structuredData?: object | object[];\r\n}\r\n\r\nexport const SeoHead = ({ \r\n  seo, \r\n  title, \r\n  description, \r\n  path, \r\n  type = 'website', \r\n  image,\r\n  forceNoIndex = false,\r\n  structuredData\r\n}: SeoHeadProps) => {\r\n  const globalSeo = mockDb.getSettings().seo;\r\n  const siteName = globalSeo.siteTitle || COMPANY_INFO.name;\r\n  \r\n  // Priority: Prop > SEO Object > Global Default\r\n  const pageTitle = seo?.metaTitle || title || siteName;\r\n  const finalTitle = pageTitle.includes(COMPANY_INFO.name) ? pageTitle : `${pageTitle} | ${COMPANY_INFO.name}`;\r\n  \r\n  const pageDescription = seo?.metaDescription || description || globalSeo.siteDescription || \"Professional Swahili Translation & Interpreting Services across the UK.\";\r\n  \r\n  const baseUrl = \"https://jambolinguists.com\"; \r\n  const canonical = seo?.canonicalUrl || (path ? `${baseUrl}${path}` : baseUrl);\r\n  \r\n  const pageImage = seo?.ogImage || image || \"https://jambolinguists.com/wp-content/uploads/2025/03/logo-purple.jpeg\";\r\n  \r\n  const shouldIndex = !forceNoIndex && !seo?.noIndex;\r\n\r\n  useEffect(() => {\r\n    // 1. Update Document Title\r\n    document.title = finalTitle;\r\n\r\n    // Helper to update/create meta tags\r\n    const updateMeta = (name: string, content: string) => {\r\n      let element = document.querySelector(`meta[name=\"${name}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('name', name);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    // Helper for OpenGraph / Twitter properties\r\n    const updateProperty = (property: string, content: string) => {\r\n      let element = document.querySelector(`meta[property=\"${property}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('property', property);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    // --- Standard Meta ---\r\n    updateMeta('description', pageDescription);\r\n    updateMeta('viewport', 'width=device-width, initial-scale=1.0');\r\n    \r\n    // Robots (Strict Security & SEO)\r\n    const robotsContent = shouldIndex \r\n        ? \"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1\" \r\n        : \"noindex, nofollow\";\r\n    updateMeta('robots', robotsContent);\r\n\r\n    // Keywords (Merge specific + global defaults)\r\n    const keywords = [...(seo?.keywords || []), ...(globalSeo.defaultKeywords || [])];\r\n    const uniqueKeywords = Array.from(new Set(keywords));\r\n    if (uniqueKeywords.length > 0) {\r\n        updateMeta('keywords', uniqueKeywords.join(', '));\r\n    }\r\n\r\n    // --- Open Graph ---\r\n    updateProperty('og:title', finalTitle);\r\n    updateProperty('og:description', pageDescription);\r\n    updateProperty('og:type', type);\r\n    updateProperty('og:site_name', siteName);\r\n    updateProperty('og:url', canonical);\r\n    updateProperty('og:image', pageImage);\r\n    updateProperty('og:image:alt', pageTitle);\r\n    updateProperty('og:locale', 'en_GB');\r\n\r\n    // --- Twitter Card ---\r\n    updateMeta('twitter:card', 'summary_large_image');\r\n    updateMeta('twitter:title', finalTitle);\r\n    updateMeta('twitter:description', pageDescription);\r\n    updateMeta('twitter:image', pageImage);\r\n    updateMeta('twitter:image:alt', pageTitle);\r\n\r\n    // --- Canonical Link ---\r\n    let linkCanonical = document.querySelector(`link[rel=\"canonical\"]`);\r\n    if (canonical) {\r\n        if (!linkCanonical) {\r\n            linkCanonical = document.createElement('link');\r\n            linkCanonical.setAttribute('rel', 'canonical');\r\n            document.head.appendChild(linkCanonical);\r\n        }\r\n        linkCanonical.setAttribute('href', canonical);\r\n    } else if (linkCanonical) {\r\n        linkCanonical.remove();\r\n    }\r\n\r\n    // --- Structured Data (JSON-LD) ---\r\n    // Remove existing injected scripts to prevent duplication on nav\r\n    const existingScripts = document.querySelectorAll('script[type=\"application/ld+json\"]');\r\n    existingScripts.forEach(s => s.remove());\r\n\r\n    const schemas: any[] = [];\r\n\r\n    // 1. Global Organization Schema (Always present)\r\n    if (globalSeo.structuredData) {\r\n        try {\r\n            const globalJson = JSON.parse(globalSeo.structuredData);\r\n            if (Array.isArray(globalJson)) schemas.push(...globalJson);\r\n            else schemas.push(globalJson);\r\n        } catch (e) {\r\n            // console.error(\"Invalid Global JSON-LD\");\r\n        }\r\n    }\r\n\r\n    // 2. Page Specific Schema from DB settings\r\n    if (seo?.structuredData) {\r\n        try {\r\n            const pageJson = JSON.parse(seo.structuredData);\r\n            if (Array.isArray(pageJson)) schemas.push(...pageJson);\r\n            else schemas.push(pageJson);\r\n        } catch (e) {\r\n            // console.error(\"Invalid Page JSON-LD from Config\");\r\n        }\r\n    }\r\n\r\n    // 3. Prop Passed Schema (Dynamic)\r\n    if (structuredData) {\r\n        if (Array.isArray(structuredData)) schemas.push(...structuredData);\r\n        else schemas.push(structuredData);\r\n    }\r\n\r\n    // Inject Script\r\n    if (schemas.length > 0) {\r\n        const script = document.createElement('script');\r\n        script.setAttribute('type', 'application/ld+json');\r\n        script.textContent = JSON.stringify({\r\n            \"@context\": \"https://schema.org\",\r\n            \"@graph\": schemas\r\n        });\r\n        document.head.appendChild(script);\r\n    }\r\n\r\n  }, [finalTitle, pageDescription, shouldIndex, seo, canonical, siteName, globalSeo, type, pageImage, structuredData]);\r\n\r\n  return null;\r\n};\r\n"],"names":[],"mappings":"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"}}]
}