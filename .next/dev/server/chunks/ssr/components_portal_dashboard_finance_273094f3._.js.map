{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFConfig.ts"],"sourcesContent":["\r\nexport const COLORS = {\r\n  PRIMARY: { r: 132, g: 27, b: 160 },\r\n  ORANGE: { r: 234, g: 141, b: 53 },\r\n  SLATE_900: { r: 15, g: 23, b: 42 },\r\n  SLATE_700: { r: 51, g: 65, b: 85 },\r\n  SLATE_500: { r: 100, g: 116, b: 139 },\r\n  SLATE_400: { r: 148, g: 163, b: 184 },\r\n  SLATE_50: { r: 248, g: 250, b: 252 },\r\n};\r\n\r\nexport const CONSTANTS = {\r\n  MARGIN: 15,\r\n  LOGO_SOURCES: [] \r\n};\r\n\r\n// Base64 Purple Logo Fallback (Simple Purple Square) to prevent \"corrupt PNG\" errors\r\nconst BASE64_LOGO_FALLBACK = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGP8x4APjIqPio+KAd64AfrWp52fAAAAAElFTkSuQmCC\";\r\n\r\nexport const formatCurrency = (amount: number) => `£${amount.toFixed(2)}`;\r\n\r\nexport const formatDateUK = (dateStr: string) => {\r\n  if (!dateStr) return '';\r\n  return new Date(dateStr).toLocaleDateString('en-GB');\r\n};\r\n\r\nconst fetchImageAsBase64 = async (url: string): Promise<string | null> => {\r\n    try {\r\n        // Timeout to prevent hanging\r\n        const controller = new AbortController();\r\n        const id = setTimeout(() => controller.abort(), 2000);\r\n        \r\n        const response = await fetch(url, { signal: controller.signal });\r\n        clearTimeout(id);\r\n        \r\n        if (!response.ok) {\r\n            return null;\r\n        }\r\n        const blob = await response.blob();\r\n        return new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                const result = reader.result as string;\r\n                if (result) {\r\n                    resolve(result);\r\n                } else {\r\n                    resolve(null);\r\n                }\r\n            };\r\n            reader.onerror = () => resolve(null);\r\n            reader.readAsDataURL(blob);\r\n        });\r\n    } catch (e) {\r\n        return null; \r\n    }\r\n};\r\n\r\nexport const getCompanyLogo = async (): Promise<string | null> => {\r\n    // Disabled to prevent application hang during PDF generation\r\n    return null;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;AACO,MAAM,SAAS;IACpB,SAAS;QAAE,GAAG;QAAK,GAAG;QAAI,GAAG;IAAI;IACjC,QAAQ;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAG;IAChC,WAAW;QAAE,GAAG;QAAI,GAAG;QAAI,GAAG;IAAG;IACjC,WAAW;QAAE,GAAG;QAAI,GAAG;QAAI,GAAG;IAAG;IACjC,WAAW;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;IACpC,WAAW;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;IACpC,UAAU;QAAE,GAAG;QAAK,GAAG;QAAK,GAAG;IAAI;AACrC;AAEO,MAAM,YAAY;IACvB,QAAQ;IACR,cAAc,EAAE;AAClB;AAEA,qFAAqF;AACrF,MAAM,uBAAuB;AAEtB,MAAM,iBAAiB,CAAC,SAAmB,CAAC,CAAC,EAAE,OAAO,OAAO,CAAC,IAAI;AAElE,MAAM,eAAe,CAAC;IAC3B,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,IAAI,KAAK,SAAS,kBAAkB,CAAC;AAC9C;AAEA,MAAM,qBAAqB,OAAO;IAC9B,IAAI;QACA,6BAA6B;QAC7B,MAAM,aAAa,IAAI;QACvB,MAAM,KAAK,WAAW,IAAM,WAAW,KAAK,IAAI;QAEhD,MAAM,WAAW,MAAM,MAAM,KAAK;YAAE,QAAQ,WAAW,MAAM;QAAC;QAC9D,aAAa;QAEb,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,OAAO;QACX;QACA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,IAAI,QAAQ,CAAC;YAChB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACf,MAAM,SAAS,OAAO,MAAM;gBAC5B,IAAI,QAAQ;oBACR,QAAQ;gBACZ,OAAO;oBACH,QAAQ;gBACZ;YACJ;YACA,OAAO,OAAO,GAAG,IAAM,QAAQ;YAC/B,OAAO,aAAa,CAAC;QACzB;IACJ,EAAE,OAAO,GAAG;QACR,OAAO;IACX;AACJ;AAEO,MAAM,iBAAiB;IAC1B,6DAA6D;IAC7D,OAAO;AACX"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFHeader.ts"],"sourcesContent":["\r\nimport { jsPDF } from \"jspdf\";\r\nimport { User } from \"@/data/types\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport interface HeaderMeta {\r\n  label: string;\r\n  value: string;\r\n}\r\n\r\nexport class PDFHeader {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private margin: number;\r\n\r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = doc.internal.pageSize.getWidth();\r\n    this.margin = CONSTANTS.MARGIN;\r\n  }\r\n\r\n  render(title: string, user: User | null, meta: HeaderMeta[], logoDataUrl: string | null, startY: number): number {\r\n    let y = startY;\r\n\r\n    // 1. Logo (Disabled per request)\r\n    /*\r\n    if (logoDataUrl) {\r\n      try {\r\n        const isPng = logoDataUrl.toLowerCase().includes('image/png') || logoDataUrl.toLowerCase().includes('.png');\r\n        const format = isPng ? 'PNG' : 'JPEG';\r\n        this.doc.addImage(logoDataUrl, format, this.margin, y, 15, 15, undefined, 'FAST');\r\n      } catch (e) {\r\n        console.warn('PDF Logo Error (Ignored):', e);\r\n      }\r\n    }\r\n    */\r\n\r\n    // 2. Company Address (Fixed for Jambo)\r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(8);\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n    \r\n    const address = [\r\n        \"Jambo Linguists Ltd\",\r\n        \"First Floor, Radley House\",\r\n        \"Richardshaw Rd\",\r\n        \"Pudsey, LS28 6LE\",\r\n        \"United Kingdom\"\r\n    ];\r\n    let ay = y + 20;\r\n    address.forEach(l => { this.doc.text(l, this.margin, ay); ay += 3.5; });\r\n    this.doc.text(`Tel: +44 7938 065 717 • jamii@jambolinguists.com`, this.margin, ay);\r\n\r\n    // 3. Document Title (INVOICE or STATEMENT)\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(24);\r\n    this.doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.text(title, this.width - this.margin, y + 10, { align: 'right' });\r\n\r\n    y = Math.max(ay + 10, y + 30);\r\n    const contentStartY = y;\r\n\r\n    // 4. Recipient Info (Billed To)\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(9);\r\n    this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    this.doc.text('PREPARED FOR', this.margin, contentStartY);\r\n    \r\n    let billY = contentStartY + 5;\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(11);\r\n    this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n\r\n    if (user) {\r\n        this.doc.text(`${user.firstName} ${user.lastName}`, this.margin, billY); \r\n        billY += 5;\r\n        this.doc.setFont('helvetica', 'normal');\r\n        this.doc.setFontSize(10);\r\n        this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n        if (user.location) { this.doc.text(user.location, this.margin, billY); billY += 5; }\r\n        this.doc.text(user.email, this.margin, billY); \r\n        billY += 5;\r\n    } else {\r\n        this.doc.text('Unknown Recipient', this.margin, billY);\r\n    }\r\n\r\n    // 5. Meta Data (Right Side)\r\n    let metaY = contentStartY;\r\n    const metaX = this.width - this.margin;\r\n    const labelX = metaX - 40;\r\n\r\n    meta.forEach(item => {\r\n        if (!item.value) return;\r\n        this.doc.setFont('helvetica', 'bold');\r\n        this.doc.setFontSize(9);\r\n        this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n        this.doc.text(item.label, labelX, metaY, { align: 'right' });\r\n        this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n        this.doc.text(item.value, metaX, metaY, { align: 'right' });\r\n        metaY += 5;\r\n    });\r\n\r\n    return Math.max(billY, metaY) + 12;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFTable.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport interface PDFTableColumn {\r\n  header: string;\r\n  weight: number;\r\n  align: 'left' | 'right' | 'center';\r\n}\r\n\r\nexport class PDFTable {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private height: number;\r\n  private margin: number;\r\n  \r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = doc.internal.pageSize.getWidth();\r\n    this.height = doc.internal.pageSize.getHeight();\r\n    this.margin = CONSTANTS.MARGIN;\r\n  }\r\n\r\n  render(columns: PDFTableColumn[], rows: string[][], startY: number): number {\r\n    let y = startY;\r\n    const availW = this.width - this.margin * 2;\r\n    \r\n    // Calculate Column Widths\r\n    const totalWeight = columns.reduce((sum, c) => sum + c.weight, 0);\r\n    const colWidths = columns.map(c => (c.weight / totalWeight) * availW);\r\n    const colX = columns.reduce<number[]>((acc, _, i) => {\r\n        acc.push(i === 0 ? this.margin : acc[i-1] + colWidths[i-1]);\r\n        return acc;\r\n    }, []);\r\n\r\n    const headerH = 10;\r\n    const rowPadding = 3;\r\n\r\n    // Helper: Draw Header\r\n    const drawHeader = (currY: number) => {\r\n        this.doc.setFillColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n        this.doc.rect(this.margin, currY, availW, headerH, 'F'); \r\n        this.doc.setTextColor(255, 255, 255);\r\n        this.doc.setFont('helvetica', 'bold');\r\n        this.doc.setFontSize(9);\r\n        columns.forEach((col, i) => {\r\n            let px = colX[i] + 3; // Default left\r\n            if (col.align === 'right') px = colX[i] + colWidths[i] - 3;\r\n            if (col.align === 'center') px = colX[i] + (colWidths[i] / 2);\r\n            \r\n            this.doc.text(col.header, px, currY + 6.5, { align: col.align });\r\n        });\r\n        return currY + headerH;\r\n    };\r\n\r\n    y = drawHeader(y);\r\n\r\n    // Draw Rows\r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(9);\r\n\r\n    for (let i = 0; i < rows.length; i++) {\r\n        const rowData = rows[i];\r\n        \r\n        let maxLines = 1;\r\n        columns.forEach((_, cIdx) => {\r\n            const text = rowData[cIdx] ? String(rowData[cIdx]) : '';\r\n            const lines = this.doc.splitTextToSize(text, colWidths[cIdx] - 6);\r\n            if(lines.length > maxLines) {\r\n                maxLines = lines.length;\r\n            }\r\n        });\r\n\r\n        const rowH = (maxLines * 4) + (rowPadding * 2) + 2;\r\n\r\n        // Page Break Logic - Check if row fits on page (with buffer for footer)\r\n        if (y + rowH > this.height - this.margin - 20) {\r\n            this.doc.addPage();\r\n            y = this.margin;\r\n            y = drawHeader(y);\r\n        }\r\n        \r\n        // Zebra Stripe\r\n        if (i % 2 === 0) {\r\n            this.doc.setFillColor(COLORS.SLATE_50.r, COLORS.SLATE_50.g, COLORS.SLATE_50.b);\r\n            this.doc.rect(this.margin, y, availW, rowH, 'F');\r\n        }\r\n\r\n        this.doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n        const cy = y + rowPadding + 3.5;\r\n\r\n        // Render Cells\r\n        columns.forEach((col, cIdx) => {\r\n            const text = rowData[cIdx] ? String(rowData[cIdx]) : '';\r\n            const cellLines = this.doc.splitTextToSize(text, colWidths[cIdx] - 6);\r\n            \r\n            let px = colX[cIdx] + 3; \r\n            if (col.align === 'right') px = colX[cIdx] + colWidths[cIdx] - 3;\r\n            if (col.align === 'center') px = colX[cIdx] + (colWidths[cIdx] / 2);\r\n\r\n            if (cIdx === columns.length - 1) this.doc.setFont('helvetica', 'bold');\r\n            else this.doc.setFont('helvetica', 'normal');\r\n\r\n            this.doc.text(cellLines, px, cy, { align: col.align });\r\n        });\r\n\r\n        // Bottom Line\r\n        this.doc.setDrawColor(226, 232, 240);\r\n        this.doc.setLineWidth(0.1);\r\n        this.doc.line(this.margin, y + rowH, this.width - this.margin, y + rowH);\r\n        \r\n        y += rowH;\r\n    }\r\n\r\n    return y;\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/PDFFooter.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { User } from \"@/data/types\";\r\nimport { COLORS, CONSTANTS } from \"./PDFConfig\";\r\n\r\nexport interface SummaryRow {\r\n  label: string;\r\n  value: string;\r\n  isTotal?: boolean;\r\n}\r\n\r\nexport class PDFFooter {\r\n  private doc: jsPDF;\r\n  private width: number;\r\n  private height: number;\r\n  private margin: number;\r\n\r\n  constructor(doc: jsPDF) {\r\n    this.doc = doc;\r\n    this.width = doc.internal.pageSize.getWidth();\r\n    this.height = doc.internal.pageSize.getHeight();\r\n    this.margin = CONSTANTS.MARGIN;\r\n  }\r\n\r\n  renderSummaryBox(rows: SummaryRow[], startY: number): number {\r\n    let y = startY + 5;\r\n    const boxW = 80;\r\n    const boxX = this.width - this.margin - boxW;\r\n\r\n    rows.forEach(row => {\r\n        const h = row.isTotal ? 10 : 7;\r\n        \r\n        if (y + h > this.height - this.margin - 40) { // Keep space for bottom info\r\n            this.doc.addPage();\r\n            y = this.margin;\r\n        }\r\n\r\n        if (row.isTotal) {\r\n             this.doc.setFillColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n             this.doc.roundedRect(boxX, y, boxW, h, 1, 1, 'F');\r\n             this.doc.setTextColor(255, 255, 255);\r\n             this.doc.setFont('helvetica', 'bold');\r\n             this.doc.setFontSize(11);\r\n             this.doc.text(row.label, boxX + 4, y + 6.5);\r\n             this.doc.text(row.value, boxX + boxW - 4, y + 6.5, { align: 'right' });\r\n        } else {\r\n             this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n             this.doc.setFont('helvetica', 'bold');\r\n             this.doc.setFontSize(9);\r\n             this.doc.text(row.label, boxX + 4, y + 5);\r\n             this.doc.setTextColor(COLORS.SLATE_900.r, COLORS.SLATE_900.g, COLORS.SLATE_900.b);\r\n             this.doc.text(row.value, boxX + boxW - 4, y + 5, { align: 'right' });\r\n        }\r\n        y += h;\r\n    });\r\n\r\n    return y;\r\n  }\r\n\r\n  renderBottomInfo(user: User | null, refText: string, startY: number): number {\r\n    let y = startY;\r\n    const neededHeight = 25;\r\n    if (y + neededHeight > this.height - this.margin - 15) { // Keep space for page footer\r\n        this.doc.addPage();\r\n        y = this.margin;\r\n    }\r\n    y += 5;\r\n    \r\n    this.doc.setDrawColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    this.doc.setLineWidth(0.1);\r\n    this.doc.line(this.margin, y, this.width - this.margin, y);\r\n    y += 5;\r\n    \r\n    const contentY = y;\r\n    \r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(8);\r\n    this.doc.setTextColor(COLORS.SLATE_700.r, COLORS.SLATE_700.g, COLORS.SLATE_700.b);\r\n    this.doc.text('PAYMENT DETAILS', this.margin, contentY + 3);\r\n    \r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setTextColor(COLORS.SLATE_500.r, COLORS.SLATE_500.g, COLORS.SLATE_500.b);\r\n\r\n    if (user && user.bankDetails) {\r\n        this.doc.text(`${user.bankDetails.bankName} • Sort: ${user.bankDetails.sortCode} • Acc: ${user.bankDetails.accountNumber}`, this.margin, contentY + 8);\r\n        this.doc.text(`Beneficiary: ${user.firstName} ${user.lastName}`, this.margin, contentY + 12);\r\n    } else {\r\n        this.doc.text('Bank Details: Not provided in profile', this.margin, contentY + 8);\r\n    }\r\n\r\n    this.doc.text(`Ref: ${refText}`, this.margin, contentY + 16);\r\n\r\n    this.doc.setFont('helvetica', 'bold');\r\n    this.doc.setFontSize(10);\r\n    this.doc.setTextColor(COLORS.PRIMARY.r, COLORS.PRIMARY.g, COLORS.PRIMARY.b);\r\n    this.doc.text('Thank you for your business', this.width - this.margin, contentY + 8, { align: 'right' });\r\n    \r\n    this.doc.setFont('helvetica', 'normal');\r\n    this.doc.setFontSize(8);\r\n    this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    this.doc.text(`Jambo Linguists Ltd • Reg: 15333696`, this.width - this.margin, contentY + 13, { align: 'right' });\r\n    \r\n    return y + neededHeight;\r\n  }\r\n\r\n  renderPageFooter(pageNumber: number, totalPages: number) {\r\n    const footerY = this.height - (this.margin / 2);\r\n    this.doc.setFont('helvetica', 'italic');\r\n    this.doc.setFontSize(7);\r\n    this.doc.setTextColor(COLORS.SLATE_400.r, COLORS.SLATE_400.g, COLORS.SLATE_400.b);\r\n    \r\n    const disclaimer = \"This is a computer-generated document and does not require a signature.\";\r\n    this.doc.text(disclaimer, this.width / 2, footerY, { align: 'center' });\r\n\r\n    const pageStr = `Page ${pageNumber} of ${totalPages}`;\r\n    const textWidth = this.doc.getStringUnitWidth(pageStr) * this.doc.getFontSize() / this.doc.internal.scaleFactor;\r\n    this.doc.text(pageStr, this.width - this.margin, footerY);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/InvoicePDF.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { Invoice, User, mockDb } from \"@/data/mockDatabase\";\r\nimport { CONSTANTS, COLORS, formatCurrency, formatDateUK, getCompanyLogo } from \"./PDFConfig\";\r\nimport { HeaderMeta, PDFHeader } from \"./PDFHeader\";\r\nimport { PDFTable, PDFTableColumn } from \"./PDFTable\";\r\nimport { PDFFooter, SummaryRow } from \"./PDFFooter\";\r\nimport { getInterpretingJobPayoutDetails } from \"../../jobs/job-helpers\";\r\n\r\nexport class InvoicePDF {\r\n  \r\n  static async generate(invoice: Invoice, user: User | null) {\r\n    // 1. Data Preparation\r\n    const { columns, tableRows } = this.getTableData(invoice);\r\n    \r\n    // 2. Document Initialization\r\n    const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });\r\n    const logoUrl = await getCompanyLogo();\r\n    const width = doc.internal.pageSize.getWidth();\r\n    const height = doc.internal.pageSize.getHeight();\r\n    const margin = CONSTANTS.MARGIN;\r\n\r\n    // 3. Header\r\n    const header = new PDFHeader(doc);\r\n    const meta: HeaderMeta[] = [\r\n        { label: 'Invoice No.', value: invoice.reference },\r\n        { label: 'Issue Date', value: formatDateUK(invoice.date) },\r\n        { label: 'Due Date', value: formatDateUK(invoice.dueDate) },\r\n        { label: 'Status', value: invoice.status },\r\n    ];\r\n    \r\n    let recipientUser = user;\r\n    if (!user && invoice.customRecipient) {\r\n        recipientUser = {\r\n            id: 'custom',\r\n            firstName: invoice.customRecipient.name,\r\n            lastName: '',\r\n            email: invoice.customRecipient.email || '',\r\n            location: invoice.customRecipient.address || '',\r\n            role: 'client',\r\n            isVerified: true,\r\n            createdAt: ''\r\n        } as User;\r\n    }\r\n\r\n    let currentY = header.render('INVOICE', recipientUser, meta, logoUrl, margin);\r\n\r\n    // 4. Table\r\n    const table = new PDFTable(doc);\r\n    currentY = table.render(columns, tableRows, currentY);\r\n\r\n    // 5. Summary and Footer\r\n    const footer = new PDFFooter(doc);\r\n    const summary = this.getSummaryData(invoice);\r\n\r\n    // Determine position for summary box and footer info\r\n    let summaryY = currentY + 5;\r\n    const summaryHeight = 24; // approx for subtotal, vat, total\r\n    const bottomInfoHeight = 40; // approx for payment details, thank you, line\r\n\r\n    if (summaryY + summaryHeight + bottomInfoHeight > height - margin) {\r\n        doc.addPage();\r\n        summaryY = margin;\r\n    }\r\n    \r\n    const summaryBottomY = footer.renderSummaryBox(summary, summaryY);\r\n    \r\n    // The footer info starts after the summary box. This will draw the line, then payment details and thank you.\r\n    footer.renderBottomInfo(recipientUser, invoice.reference, summaryBottomY + 5);\r\n\r\n\r\n    // 6. Add Page Footers to all pages\r\n    const totalPages = doc.getNumberOfPages();\r\n    for (let i = 1; i <= totalPages; i++) {\r\n        doc.setPage(i);\r\n        footer.renderPageFooter(i, totalPages);\r\n    }\r\n\r\n    doc.save(`invoice-${invoice.reference}.pdf`);\r\n  }\r\n\r\n  private static getTableData(invoice: Invoice) {\r\n    const allJobs = mockDb.getAllJobs();\r\n    \r\n    const columns: PDFTableColumn[] = [\r\n        { header: 'Description', weight: 4, align: 'left' },\r\n        { header: 'Qty/Ref', weight: 2.5, align: 'left' },\r\n        { header: 'Date', weight: 2, align: 'left' },\r\n        { header: 'Rate', weight: 2.5, align: 'left' },\r\n        { header: 'Amount', weight: 2, align: 'right' }\r\n    ];\r\n\r\n    const tableRows: string[][] = [];\r\n\r\n    for (const item of invoice.items) {\r\n      const job = item.jobId ? allJobs.find(j => j.id === item.jobId) : undefined;\r\n      \r\n      if (!job) {\r\n          // Manual Item\r\n          tableRows.push([\r\n              item.description, \r\n              item.quantity ? String(item.quantity) : '—', \r\n              item.date ? formatDateUK(item.date) : '—', \r\n              item.rate ? formatCurrency(item.rate) : '—', \r\n              formatCurrency(item.amount)\r\n          ]);\r\n          continue;\r\n      }\r\n\r\n      // Job Linked Item Logic\r\n      if (job.category === 'Interpreting') {\r\n          const details = getInterpretingJobPayoutDetails(job);\r\n          if (details) {\r\n              if (details.sessionPay > 0) {\r\n                  tableRows.push([\r\n                      `Interpreting Session: ${job.title}`,\r\n                      job.id,\r\n                      formatDateUK(job.date),\r\n                      `${details.hours.toFixed(2)} hrs @ ${formatCurrency(job.hourlyRate || 0)}/hr`,\r\n                      formatCurrency(details.sessionPay)\r\n                  ]);\r\n              }\r\n              if (details.mileagePay > 0) {\r\n                  tableRows.push([\r\n                      'Travel - Mileage',\r\n                      job.id,\r\n                      formatDateUK(job.date),\r\n                      `${job.distance} mi @ ${formatCurrency(job.mileageRate || 0)}/mi`,\r\n                      formatCurrency(details.mileagePay)\r\n                  ]);\r\n              }\r\n              if (details.travelPay > 0) {\r\n                  tableRows.push([\r\n                      'Travel - Time',\r\n                      job.id,\r\n                      formatDateUK(job.date),\r\n                      `${job.travelHours || 0} hrs @ ${formatCurrency(job.travelRate || 0)}/hr`,\r\n                      formatCurrency(details.travelPay)\r\n                  ]);\r\n              }\r\n          } else {\r\n               tableRows.push([\r\n                  `${job.category}: ${job.title}`,\r\n                  job.id, formatDateUK(job.date), job.duration || 'N/A', formatCurrency(item.amount)\r\n              ]);\r\n          }\r\n      } else if (job.category === 'Translation') {\r\n          const wordCount = job.wordCount || 0;\r\n          const rateDetail = job.fixedRate \r\n              ? 'Fixed Rate' \r\n              : `${wordCount.toLocaleString()} words @ ${formatCurrency(job.wordRate || 0)}/word`;\r\n\r\n          tableRows.push([\r\n              `Translation: ${job.title}`,\r\n              job.id,\r\n              formatDateUK(job.date),\r\n              rateDetail,\r\n              formatCurrency(item.amount)\r\n          ]);\r\n      } else if (job.category === 'Transcription') {\r\n          const duration = job.duration || 'N/A';\r\n          const rateDetail = `${duration} @ ${formatCurrency(job.minuteRate || 0)}/min`;\r\n           tableRows.push([\r\n              `Transcription: ${job.title}`,\r\n              job.id,\r\n              formatDateUK(job.date),\r\n              rateDetail,\r\n              formatCurrency(item.amount)\r\n          ]);\r\n      } else {\r\n          tableRows.push([\r\n              `${job.category}: ${job.title}`,\r\n              job.id, formatDateUK(job.date), job.duration || 'N/A', formatCurrency(item.amount)\r\n          ]);\r\n      }\r\n    }\r\n\r\n    return { columns, tableRows };\r\n  }\r\n\r\n  private static getSummaryData(invoice: Invoice): SummaryRow[] {\r\n    const summary: SummaryRow[] = [];\r\n    if (invoice.vatRate && invoice.vatRate > 0) {\r\n        const subtotal = invoice.subtotal || (invoice.amount / (1 + invoice.vatRate / 100));\r\n        const vatAmount = invoice.amount - subtotal;\r\n        \r\n        summary.push({ label: 'Subtotal', value: formatCurrency(subtotal) });\r\n        summary.push({ label: `VAT (${invoice.vatRate}%)`, value: formatCurrency(vatAmount) });\r\n    } else {\r\n        summary.push({ label: 'Subtotal', value: formatCurrency(invoice.amount) });\r\n    }\r\n    summary.push({ label: 'Total Due', value: formatCurrency(invoice.amount), isTotal: true });\r\n    return summary;\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 654, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdf/StatementPDF.ts"],"sourcesContent":["import { jsPDF } from \"jspdf\";\r\nimport { Invoice, User } from \"@/data/mockDatabase\";\r\nimport { CONSTANTS, formatCurrency, formatDateUK, getCompanyLogo } from \"./PDFConfig\";\r\nimport { HeaderMeta, PDFHeader } from \"./PDFHeader\";\r\nimport { PDFTable, PDFTableColumn } from \"./PDFTable\";\r\nimport { PDFFooter, SummaryRow } from \"./PDFFooter\";\r\n\r\nexport class StatementPDF {\r\n  \r\n  static async generate(invoices: Invoice[], user: User | null, periodLabel: string) {\r\n    const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });\r\n    const logoUrl = await getCompanyLogo();\r\n    \r\n    // Stats Calc\r\n    const totalBilled = invoices.reduce((sum, i) => sum + i.amount, 0);\r\n    const totalPaid = invoices.filter(i => i.status === 'Paid').reduce((sum, i) => sum + i.amount, 0);\r\n    const balanceDue = totalBilled - totalPaid;\r\n\r\n    // 1. Header\r\n    const header = new PDFHeader(doc);\r\n    const meta: HeaderMeta[] = [\r\n        { label: 'Statement Date', value: formatDateUK(new Date().toISOString()) },\r\n        { label: 'Period', value: periodLabel },\r\n        { label: 'Total Invoices', value: invoices.length.toString() },\r\n    ];\r\n    let currentY = header.render('STATEMENT OF ACCOUNT', user, meta, logoUrl, CONSTANTS.MARGIN);\r\n  \r\n    // 2. Table\r\n    const table = new PDFTable(doc);\r\n    const columns: PDFTableColumn[] = [\r\n        { header: 'Date', weight: 2, align: 'left' },\r\n        { header: 'Invoice No.', weight: 3, align: 'left' },\r\n        { header: 'Status', weight: 2, align: 'center' },\r\n        { header: 'Billed', weight: 2, align: 'right' },\r\n        { header: 'Paid', weight: 2, align: 'right' },\r\n    ];\r\n  \r\n    const rows = invoices.map(inv => {\r\n        const isPaid = inv.status === 'Paid';\r\n        return [\r\n            formatDateUK(inv.date),\r\n            inv.reference,\r\n            inv.status.toUpperCase(),\r\n            formatCurrency(inv.amount),\r\n            isPaid ? formatCurrency(inv.amount) : '£0.00'\r\n        ];\r\n    });\r\n  \r\n    currentY = table.render(columns, rows, currentY);\r\n  \r\n    // 3. Footer & Summary\r\n    const footer = new PDFFooter(doc);\r\n    const summary: SummaryRow[] = [\r\n        { label: 'Total Billed', value: formatCurrency(totalBilled) },\r\n        { label: 'Total Paid', value: formatCurrency(totalPaid) },\r\n        { label: 'Balance Due', value: formatCurrency(balanceDue), isTotal: true },\r\n    ];\r\n    \r\n    const summaryHeight = 40; // Estimate for summary box\r\n    if (currentY + summaryHeight > doc.internal.pageSize.getHeight() - CONSTANTS.MARGIN - 20) {\r\n        doc.addPage();\r\n        currentY = CONSTANTS.MARGIN;\r\n    }\r\n\r\n    currentY = footer.renderSummaryBox(summary, currentY);\r\n\r\n    // 4. Add Page Footers to all pages\r\n    const totalPages = doc.getNumberOfPages();\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      doc.setPage(i);\r\n      footer.renderPageFooter(i, totalPages);\r\n    }\r\n  \r\n    doc.save(`statement-${user ? `${user.lastName}-` : ''}${new Date().toISOString().split('T')[0]}.pdf`);\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;AAEO,MAAM;IAEX,aAAa,SAAS,QAAmB,EAAE,IAAiB,EAAE,WAAmB,EAAE;QACjF,MAAM,MAAM,IAAI,8JAAK,CAAC;YAAE,aAAa;YAAY,MAAM;YAAM,QAAQ;QAAK;QAC1E,MAAM,UAAU,MAAM,IAAA,kLAAc;QAEpC,aAAa;QACb,MAAM,cAAc,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;QAChE,MAAM,YAAY,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;QAC/F,MAAM,aAAa,cAAc;QAEjC,YAAY;QACZ,MAAM,SAAS,IAAI,6KAAS,CAAC;QAC7B,MAAM,OAAqB;YACvB;gBAAE,OAAO;gBAAkB,OAAO,IAAA,gLAAY,EAAC,IAAI,OAAO,WAAW;YAAI;YACzE;gBAAE,OAAO;gBAAU,OAAO;YAAY;YACtC;gBAAE,OAAO;gBAAkB,OAAO,SAAS,MAAM,CAAC,QAAQ;YAAG;SAChE;QACD,IAAI,WAAW,OAAO,MAAM,CAAC,wBAAwB,MAAM,MAAM,SAAS,6KAAS,CAAC,MAAM;QAE1F,WAAW;QACX,MAAM,QAAQ,IAAI,2KAAQ,CAAC;QAC3B,MAAM,UAA4B;YAC9B;gBAAE,QAAQ;gBAAQ,QAAQ;gBAAG,OAAO;YAAO;YAC3C;gBAAE,QAAQ;gBAAe,QAAQ;gBAAG,OAAO;YAAO;YAClD;gBAAE,QAAQ;gBAAU,QAAQ;gBAAG,OAAO;YAAS;YAC/C;gBAAE,QAAQ;gBAAU,QAAQ;gBAAG,OAAO;YAAQ;YAC9C;gBAAE,QAAQ;gBAAQ,QAAQ;gBAAG,OAAO;YAAQ;SAC/C;QAED,MAAM,OAAO,SAAS,GAAG,CAAC,CAAA;YACtB,MAAM,SAAS,IAAI,MAAM,KAAK;YAC9B,OAAO;gBACH,IAAA,gLAAY,EAAC,IAAI,IAAI;gBACrB,IAAI,SAAS;gBACb,IAAI,MAAM,CAAC,WAAW;gBACtB,IAAA,kLAAc,EAAC,IAAI,MAAM;gBACzB,SAAS,IAAA,kLAAc,EAAC,IAAI,MAAM,IAAI;aACzC;QACL;QAEA,WAAW,MAAM,MAAM,CAAC,SAAS,MAAM;QAEvC,sBAAsB;QACtB,MAAM,SAAS,IAAI,6KAAS,CAAC;QAC7B,MAAM,UAAwB;YAC1B;gBAAE,OAAO;gBAAgB,OAAO,IAAA,kLAAc,EAAC;YAAa;YAC5D;gBAAE,OAAO;gBAAc,OAAO,IAAA,kLAAc,EAAC;YAAW;YACxD;gBAAE,OAAO;gBAAe,OAAO,IAAA,kLAAc,EAAC;gBAAa,SAAS;YAAK;SAC5E;QAED,MAAM,gBAAgB,IAAI,2BAA2B;QACrD,IAAI,WAAW,gBAAgB,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS,KAAK,6KAAS,CAAC,MAAM,GAAG,IAAI;YACtF,IAAI,OAAO;YACX,WAAW,6KAAS,CAAC,MAAM;QAC/B;QAEA,WAAW,OAAO,gBAAgB,CAAC,SAAS;QAE5C,mCAAmC;QACnC,MAAM,aAAa,IAAI,gBAAgB;QACvC,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,IAAK;YACpC,IAAI,OAAO,CAAC;YACZ,OAAO,gBAAgB,CAAC,GAAG;QAC7B;QAEA,IAAI,IAAI,CAAC,CAAC,UAAU,EAAE,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC;IACtG;AACF"}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/pdfGenerator.ts"],"sourcesContent":["\r\nimport { Invoice, User } from \"@/data/mockDatabase\";\r\nimport { InvoicePDF } from \"./pdf/InvoicePDF\";\r\nimport { StatementPDF } from \"./pdf/StatementPDF\";\r\n\r\n// Facade for backward compatibility\r\nexport const generateInvoicePDF = async (invoice: Invoice, user: User | null) => {\r\n    await InvoicePDF.generate(invoice, user);\r\n};\r\n\r\nexport const generateStatementPDF = async (invoices: Invoice[], user: User | null, periodLabel: string) => {\r\n    await StatementPDF.generate(invoices, user, periodLabel);\r\n};\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;;;AAGO,MAAM,qBAAqB,OAAO,SAAkB;IACvD,MAAM,+KAAU,CAAC,QAAQ,CAAC,SAAS;AACvC;AAEO,MAAM,uBAAuB,OAAO,UAAqB,MAAmB;IAC/E,MAAM,mLAAY,CAAC,QAAQ,CAAC,UAAU,MAAM;AAChD"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/preview/PreviewHeader.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface PreviewHeaderProps {\r\n  reference: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const PreviewHeader = ({ reference, onClose }: PreviewHeaderProps) => (\r\n  <header className=\"p-4 sm:p-6 flex items-center justify-between border-b border-gray-100 dark:border-white/5 shrink-0\">\r\n    <div>\r\n      <h2 className=\"text-xl font-serif font-bold text-gray-900 dark:text-white\">Invoice Preview</h2>\r\n      <p className=\"text-sm text-gray-500 dark:text-gray-400\">Reference: {reference}</p>\r\n    </div>\r\n    <button \r\n      onClick={onClose}\r\n      className=\"p-2 bg-gray-100 dark:bg-white/5 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400 transition-colors\"\r\n      aria-label=\"Close modal\"\r\n    >\r\n      <X size={20} />\r\n    </button>\r\n  </header>\r\n);\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAOO,MAAM,gBAAgB,CAAC,EAAE,SAAS,EAAE,OAAO,EAAsB,iBACtE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAA6D;;;;;;kCAC3E,8OAAC;wBAAE,WAAU;;4BAA2C;4BAAY;;;;;;;;;;;;;0BAEtE,8OAAC;gBACC,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,8OAAC,iMAAC;oBAAC,MAAM"}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/preview/PreviewItems.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Invoice } from '@/data/types';\r\nimport { ArrowRightCircle } from 'lucide-react';\r\n\r\nexport const PreviewItems = ({ items, onViewJob }: { items: Invoice['items'], onViewJob?: (jobId: string) => void }) => (\r\n  <div className=\"overflow-x-auto\">\r\n    <table className=\"w-full text-left\">\r\n      <thead>\r\n        <tr className=\"border-b border-gray-200 dark:border-white/10\">\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400\">Description</th>\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400 text-center\">Qty</th>\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400 text-right\">Rate</th>\r\n          <th className=\"p-3 text-xs font-bold uppercase text-gray-500 dark:text-gray-400 text-right\">Amount</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {items.map((item, index) => (\r\n          <tr key={index} className=\"border-b border-gray-100 dark:border-white/5\">\r\n            <td className=\"p-3\">\r\n                <p className=\"font-medium text-gray-800 dark:text-gray-200\">{item.description}</p>\r\n                {item.jobId && (\r\n                  <p \r\n                    onClick={() => onViewJob && item.jobId && onViewJob(item.jobId)}\r\n                    className={`text-xs mt-0.5 flex items-center gap-1 ${onViewJob ? 'text-jambo-600 dark:text-jambo-400 cursor-pointer hover:underline' : 'text-gray-500 dark:text-gray-400'}`}\r\n                  >\r\n                    Job Ref: {item.jobId} {onViewJob && <ArrowRightCircle size={10} />}\r\n                  </p>\r\n                )}\r\n            </td>\r\n            <td className=\"p-3 text-center text-gray-600 dark:text-gray-400\">{item.quantity || '-'}</td>\r\n            <td className=\"p-3 text-right text-gray-600 dark:text-gray-400\">{item.rate ? `£${item.rate.toFixed(2)}` : '-'}</td>\r\n            <td className=\"p-3 font-mono text-right text-gray-700 dark:text-gray-300\">£{item.amount.toFixed(2)}</td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n);"],"names":[],"mappings":";;;;;AAEA;;;AAEO,MAAM,eAAe,CAAC,EAAE,KAAK,EAAE,SAAS,EAAoE,iBACjH,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;;8BACf,8OAAC;8BACC,cAAA,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC;gCAAG,WAAU;0CAAmE;;;;;;0CACjF,8OAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAC7F,8OAAC;gCAAG,WAAU;0CAA8E;;;;;;0CAC5F,8OAAC;gCAAG,WAAU;0CAA8E;;;;;;;;;;;;;;;;;8BAGhG,8OAAC;8BACE,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,8OAAC;4BAAe,WAAU;;8CACxB,8OAAC;oCAAG,WAAU;;sDACV,8OAAC;4CAAE,WAAU;sDAAgD,KAAK,WAAW;;;;;;wCAC5E,KAAK,KAAK,kBACT,8OAAC;4CACC,SAAS,IAAM,aAAa,KAAK,KAAK,IAAI,UAAU,KAAK,KAAK;4CAC9D,WAAW,CAAC,uCAAuC,EAAE,YAAY,sEAAsE,oCAAoC;;gDAC5K;gDACW,KAAK,KAAK;gDAAC;gDAAE,2BAAa,8OAAC,sPAAgB;oDAAC,MAAM;;;;;;;;;;;;;;;;;;8CAIpE,8OAAC;oCAAG,WAAU;8CAAoD,KAAK,QAAQ,IAAI;;;;;;8CACnF,8OAAC;oCAAG,WAAU;8CAAmD,KAAK,IAAI,GAAG,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG;;;;;;8CAC1G,8OAAC;oCAAG,WAAU;;wCAA4D;wCAAE,KAAK,MAAM,CAAC,OAAO,CAAC;;;;;;;;2BAdzF"}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/preview/PreviewSummary.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Invoice } from '@/data/types';\r\n\r\nexport const PreviewSummary = ({ invoice }: { invoice: Invoice }) => {\r\n  const hasVat = invoice.vatRate && invoice.vatRate > 0;\r\n  const subtotal = invoice.subtotal || (hasVat ? invoice.amount / (1 + (invoice.vatRate! / 100)) : invoice.amount);\r\n  const vatAmount = invoice.amount - subtotal;\r\n\r\n  return (\r\n    <div className=\"mt-8 flex justify-end\">\r\n        <div className=\"w-full max-w-xs space-y-2\">\r\n            <div className=\"flex justify-between text-gray-600 dark:text-gray-300\">\r\n                <span>Subtotal</span>\r\n                <span>£{subtotal.toFixed(2)}</span>\r\n            </div>\r\n            {hasVat && (\r\n                <div className=\"flex justify-between text-gray-600 dark:text-gray-300\">\r\n                    <span>VAT ({invoice.vatRate}%)</span>\r\n                    <span>£{vatAmount.toFixed(2)}</span>\r\n                </div>\r\n            )}\r\n            <div className=\"h-px bg-gray-200 dark:bg-white/10\"></div>\r\n            <div className=\"flex justify-between font-bold text-xl text-gray-900 dark:text-white\">\r\n                <span>Total Due</span>\r\n                <span>£{invoice.amount.toFixed(2)}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;AAIO,MAAM,iBAAiB,CAAC,EAAE,OAAO,EAAwB;IAC9D,MAAM,SAAS,QAAQ,OAAO,IAAI,QAAQ,OAAO,GAAG;IACpD,MAAM,WAAW,QAAQ,QAAQ,IAAI,CAAC,SAAS,QAAQ,MAAM,GAAG,CAAC,IAAK,QAAQ,OAAO,GAAI,GAAI,IAAI,QAAQ,MAAM;IAC/G,MAAM,YAAY,QAAQ,MAAM,GAAG;IAEnC,qBACE,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;sCAAK;;;;;;sCACN,8OAAC;;gCAAK;gCAAE,SAAS,OAAO,CAAC;;;;;;;;;;;;;gBAE5B,wBACG,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;;gCAAK;gCAAM,QAAQ,OAAO;gCAAC;;;;;;;sCAC5B,8OAAC;;gCAAK;gCAAE,UAAU,OAAO,CAAC;;;;;;;;;;;;;8BAGlC,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;sCAAK;;;;;;sCACN,8OAAC;;gCAAK;gCAAE,QAAQ,MAAM,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAK/C"}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/components/StatusBadge.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\nexport const StatusBadge = ({ status }: { status: string }) => {\r\n    const statusColors: Record<string, string> = {\r\n      'Paid': 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-800',\r\n      'Pending': 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200 dark:border-orange-800',\r\n      'Overdue': 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800',\r\n      'Draft': 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700',\r\n  };\r\n  \r\n  // Default to Draft if status unknown\r\n  const colorClass = statusColors[status] || statusColors['Draft'];\r\n\r\n  return (\r\n    <span className={`px-3 py-1 rounded-full text-xs font-bold border ${colorClass}`}>\r\n      {status}\r\n    </span>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,cAAc,CAAC,EAAE,MAAM,EAAsB;IACtD,MAAM,eAAuC;QAC3C,QAAQ;QACR,WAAW;QACX,WAAW;QACX,SAAS;IACb;IAEA,qCAAqC;IACrC,MAAM,aAAa,YAAY,CAAC,OAAO,IAAI,YAAY,CAAC,QAAQ;IAEhE,qBACE,8OAAC;QAAK,WAAW,CAAC,gDAAgD,EAAE,YAAY;kBAC7E;;;;;;AAGP"}},
    {"offset": {"line": 1159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/InvoicePreviewModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Download, Loader2, CheckCircle, Edit, User as UserIcon } from 'lucide-react';\r\nimport { Invoice, User } from '@/data/types';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { generateInvoicePDF } from './pdfGenerator';\r\nimport { PreviewHeader } from './preview/PreviewHeader';\r\nimport { PreviewItems } from './preview/PreviewItems';\r\nimport { PreviewSummary } from './preview/PreviewSummary';\r\nimport { StatusBadge } from './components/StatusBadge';\r\nimport { Modal } from '../../../ui/Modal';\r\n\r\ninterface InvoicePreviewModalProps {\r\n  invoice: Invoice;\r\n  onClose: () => void;\r\n  onMarkPaid?: () => void;\r\n  onEdit?: (invoice: Invoice) => void;\r\n  onViewJob?: (jobId: string) => void;\r\n  onViewProfile?: (userId: string) => void;\r\n}\r\n\r\nexport const InvoicePreviewModal = ({ invoice, onClose, onMarkPaid, onEdit, onViewJob, onViewProfile }: InvoicePreviewModalProps) => {\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [isPaying, setIsPaying] = useState(false);\r\n  const currentUser = mockDb.auth.getCurrentUser();\r\n  const isAdmin = currentUser?.role === 'admin';\r\n  \r\n  // ROBUST USER RESOLUTION\r\n  let user: User | undefined | null = null;\r\n\r\n  if (invoice.customRecipient) {\r\n      user = {\r\n          id: 'custom',\r\n          firstName: invoice.customRecipient.name || 'Unknown',\r\n          lastName: '',\r\n          email: invoice.customRecipient.email || '',\r\n          location: invoice.customRecipient.address || '',\r\n          role: 'client',\r\n          isVerified: true,\r\n          createdAt: ''\r\n      } as any;\r\n  } else if (invoice.userId) {\r\n      user = mockDb.getAllUsers().find(u => u.id === invoice.userId);\r\n      if (!user) {\r\n           user = {\r\n              id: invoice.userId,\r\n              firstName: 'Unknown',\r\n              lastName: 'User',\r\n              email: '',\r\n              role: 'client',\r\n              isVerified: false,\r\n              createdAt: ''\r\n           } as any;\r\n      }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = 'hidden';\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const handleDownload = async () => {\r\n    setIsGenerating(true);\r\n    try {\r\n      await generateInvoicePDF(invoice, user || null);\r\n    } catch (error) {\r\n      console.error(\"Failed to generate PDF\", error);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handlePay = () => {\r\n      if (!onMarkPaid) return;\r\n      setIsPaying(true);\r\n      setTimeout(() => {\r\n          onMarkPaid();\r\n          setIsPaying(false);\r\n      }, 1000);\r\n  }\r\n\r\n  // Handle profile click\r\n  const handleProfileClick = () => {\r\n      if (onViewProfile && user && user.id !== 'custom') {\r\n          onViewProfile(user.id);\r\n      }\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} size=\"4xl\">\r\n        <PreviewHeader reference={invoice.reference} onClose={onClose} />\r\n\r\n        {/* Scrollable Content */}\r\n        <main className=\"flex-1 overflow-y-auto custom-scrollbar p-4 sm:p-8\">\r\n          <div className=\"flex flex-col md:flex-row gap-6 md:gap-8 mb-8\">\r\n            {/* From */}\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-xs font-bold uppercase tracking-wider text-gray-400 mb-2\">From</p>\r\n              <p className=\"font-bold text-gray-900 dark:text-white\">Jambo Linguists Ltd</p>\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-300\">\r\n                First Floor, Radley House,<br />\r\n                Richardshaw Rd, Pudsey, LS28 6LE\r\n              </p>\r\n            </div>\r\n            \r\n            {/* To */}\r\n            <div className=\"flex-1 md:text-right\">\r\n              <p className=\"text-xs font-bold uppercase tracking-wider text-gray-400 mb-2\">Billed To</p>\r\n              <div \r\n                className={`inline-block text-left md:text-right ${onViewProfile && user?.id !== 'custom' ? 'cursor-pointer group' : ''}`}\r\n                onClick={handleProfileClick}\r\n              >\r\n                  <p className={`font-bold text-gray-900 dark:text-white flex items-center md:justify-end gap-2 ${onViewProfile && user?.id !== 'custom' ? 'group-hover:text-jambo-600 dark:group-hover:text-jambo-400 transition-colors' : ''}`}>\r\n                    {user?.firstName} {user?.lastName}\r\n                    {onViewProfile && user?.id !== 'custom' && <UserIcon size={14} className=\"opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n                  </p>\r\n                  {user?.email && <p className=\"text-sm text-gray-600 dark:text-gray-300\">{user.email}</p>}\r\n                  {user?.location && <p className=\"text-sm text-gray-600 dark:text-gray-300\">{user.location}</p>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/10 mb-8\">\r\n            <div>\r\n              <p className=\"text-xs font-bold uppercase text-gray-400\">Issue Date</p>\r\n              <p className=\"font-medium text-gray-800 dark:text-gray-200 text-sm md:text-base\">{new Date(invoice.date).toLocaleDateString('en-GB')}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs font-bold uppercase text-gray-400\">Due Date</p>\r\n              <p className=\"font-medium text-gray-800 dark:text-gray-200 text-sm md:text-base\">{new Date(invoice.dueDate).toLocaleDateString('en-GB')}</p>\r\n            </div>\r\n            <div className=\"col-span-2 md:col-span-1 md:text-right flex md:block justify-between items-center\">\r\n              <p className=\"text-xs font-bold uppercase text-gray-400 mb-1\">Status</p>\r\n              <StatusBadge status={invoice.status} />\r\n            </div>\r\n          </div>\r\n          \r\n          <PreviewItems items={invoice.items} onViewJob={onViewJob} />\r\n          <PreviewSummary invoice={invoice} />\r\n          \r\n          {invoice.notes && (\r\n              <div className=\"mt-8 p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5\">\r\n                  <p className=\"text-xs font-bold uppercase text-gray-400 mb-1\">Notes</p>\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-300\">{invoice.notes}</p>\r\n              </div>\r\n          )}\r\n\r\n        </main>\r\n        \r\n        {/* Footer */}\r\n        <footer className=\"p-4 sm:p-6 bg-gray-50 dark:bg-white/5 border-t border-gray-100 dark:border-white/5 flex flex-col sm:flex-row justify-between gap-3 shrink-0\">\r\n          <div className=\"flex gap-3 w-full sm:w-auto\">\r\n             <button\r\n                onClick={handleDownload}\r\n                disabled={isGenerating}\r\n                className=\"flex-1 sm:flex-none bg-white dark:bg-white/10 hover:bg-gray-50 dark:hover:bg-white/20 border border-gray-200 dark:border-white/10 text-gray-700 dark:text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all disabled:opacity-60 text-sm\"\r\n            >\r\n                {isGenerating ? <Loader2 size={18} className=\"animate-spin\" /> : <Download size={18} />}\r\n                {isGenerating ? 'Generating...' : 'PDF'}\r\n            </button>\r\n            \r\n            {isAdmin && onEdit && (\r\n                <button\r\n                    onClick={() => onEdit(invoice)}\r\n                    className=\"flex-1 sm:flex-none bg-white dark:bg-white/10 hover:bg-gray-50 dark:hover:bg-white/20 border border-gray-200 dark:border-white/10 text-gray-700 dark:text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-all text-sm\"\r\n                >\r\n                    <Edit size={18} /> Edit\r\n                </button>\r\n            )}\r\n          </div>\r\n          \r\n          {onMarkPaid && invoice.status !== 'Paid' && (\r\n              <button \r\n                onClick={handlePay}\r\n                disabled={isPaying}\r\n                className=\"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg flex items-center justify-center gap-2 transition-all disabled:opacity-60 text-sm\"\r\n              >\r\n                  {isPaying ? <Loader2 size={18} className=\"animate-spin\" /> : <CheckCircle size={18} />}\r\n                  Mark as Paid\r\n              </button>\r\n          )}\r\n        </footer>\r\n    </Modal>\r\n  );\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1611, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/FinanceStats.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Wallet, Clock, CalendarCheck, TrendingUp } from 'lucide-react';\r\nimport { FinanceStats as FinanceStatsType } from '@/data/types';\r\nimport { IconBox } from '../../../ui/IconBox';\r\n\r\ninterface FinanceStatsProps {\r\n  stats: FinanceStatsType;\r\n}\r\n\r\nexport const FinanceStats = ({ stats }: FinanceStatsProps) => {\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8\">\r\n      {/* Total Earnings */}\r\n      <div className=\"bg-gradient-to-br from-jambo-600 to-jambo-700 dark:from-jambo-900 dark:to-jambo-950 p-6 rounded-2xl shadow-lg text-white relative overflow-hidden group\">\r\n        <div className=\"absolute top-0 right-0 p-4 opacity-10 transform group-hover:scale-110 transition-transform\">\r\n           <Wallet size={64} />\r\n        </div>\r\n        <p className=\"text-jambo-200 text-xs font-bold uppercase tracking-widest mb-1\">Total Paid (YTD)</p>\r\n        <p className=\"text-3xl font-bold mb-2\">£{stats.totalPaid.toLocaleString('en-GB', { minimumFractionDigits: 2 })}</p>\r\n        <div className=\"flex items-center gap-2 text-xs text-white/80\">\r\n           <TrendingUp size={14} className=\"text-green-300\"/>\r\n           <span>+12% from last month</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pending Payout */}\r\n      <div className=\"bg-white dark:bg-[#1a1625] p-6 rounded-2xl border border-gray-100 dark:border-white/5 shadow-lg\">\r\n         <div className=\"flex items-start justify-between mb-4\">\r\n            <div>\r\n               <p className=\"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-widest mb-1\">Pending Payout</p>\r\n               <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">£{stats.pendingPayout.toLocaleString('en-GB', { minimumFractionDigits: 2 })}</p>\r\n            </div>\r\n            <IconBox icon={Clock} variant=\"warning\" size=\"md\" />\r\n         </div>\r\n         <p className=\"text-xs text-gray-400\">Processing cycle: 14 days</p>\r\n      </div>\r\n\r\n      {/* Next Payout Date */}\r\n      <div className=\"bg-white dark:bg-[#1a1625] p-6 rounded-2xl border border-gray-100 dark:border-white/5 shadow-lg\">\r\n         <div className=\"flex items-start justify-between mb-4\">\r\n            <div>\r\n               <p className=\"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-widest mb-1\">Next Payout</p>\r\n               <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.nextPayoutDate}</p>\r\n            </div>\r\n            <IconBox icon={CalendarCheck} variant=\"info\" size=\"md\" />\r\n         </div>\r\n         <p className=\"text-xs text-gray-400\">Bank transfers usually take 2-3 days</p>\r\n      </div>\r\n\r\n      {/* Invoice Count */}\r\n      <div className=\"bg-white dark:bg-[#1a1625] p-6 rounded-2xl border border-gray-100 dark:border-white/5 shadow-lg flex flex-col justify-center items-center text-center\">\r\n         <p className=\"text-4xl font-bold text-gray-900 dark:text-white mb-1\">{stats.invoicesCount}</p>\r\n         <p className=\"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-widest\">Invoices Generated</p>\r\n         <div className=\"w-8 h-1 bg-jambo-600 dark:bg-jambo-500 rounded-full mt-3\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAEA;;;;AAMO,MAAM,eAAe,CAAC,EAAE,KAAK,EAAqB;IACvD,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACZ,cAAA,8OAAC,gNAAM;4BAAC,MAAM;;;;;;;;;;;kCAEjB,8OAAC;wBAAE,WAAU;kCAAkE;;;;;;kCAC/E,8OAAC;wBAAE,WAAU;;4BAA0B;4BAAE,MAAM,SAAS,CAAC,cAAc,CAAC,SAAS;gCAAE,uBAAuB;4BAAE;;;;;;;kCAC5G,8OAAC;wBAAI,WAAU;;0CACZ,8OAAC,gOAAU;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAChC,8OAAC;0CAAK;;;;;;;;;;;;;;;;;;0BAKX,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;;0CACZ,8OAAC;;kDACE,8OAAC;wCAAE,WAAU;kDAAoF;;;;;;kDACjG,8OAAC;wCAAE,WAAU;;4CAAmD;4CAAE,MAAM,aAAa,CAAC,cAAc,CAAC,SAAS;gDAAE,uBAAuB;4CAAE;;;;;;;;;;;;;0CAE5I,8OAAC,uIAAO;gCAAC,MAAM,6MAAK;gCAAE,SAAQ;gCAAU,MAAK;;;;;;;;;;;;kCAEhD,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAIxC,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;;0CACZ,8OAAC;;kDACE,8OAAC;wCAAE,WAAU;kDAAoF;;;;;;kDACjG,8OAAC;wCAAE,WAAU;kDAAoD,MAAM,cAAc;;;;;;;;;;;;0CAExF,8OAAC,uIAAO;gCAAC,MAAM,yOAAa;gCAAE,SAAQ;gCAAO,MAAK;;;;;;;;;;;;kCAErD,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAIxC,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAE,WAAU;kCAAyD,MAAM,aAAa;;;;;;kCACzF,8OAAC;wBAAE,WAAU;kCAA+E;;;;;;kCAC5F,8OAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIxB"}},
    {"offset": {"line": 1862, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/InvoiceRow.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { FileText, Eye, Download, Loader2 } from 'lucide-react';\r\nimport { Invoice } from '@/data/types';\r\nimport { generateInvoicePDF } from './pdfGenerator';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { Card } from '../../../ui/Card';\r\nimport { IconBox } from '../../../ui/IconBox';\r\n\r\nexport interface InvoiceRowProps {\r\n  invoice: Invoice;\r\n  onSelect: () => void;\r\n}\r\n\r\nexport const InvoiceRow: React.FC<InvoiceRowProps> = ({ invoice, onSelect }) => {\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const user = mockDb.auth.getCurrentUser();\r\n\r\n  const statusColors = {\r\n      'Paid': 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-800',\r\n      'Pending': 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200 dark:border-orange-800',\r\n      'Overdue': 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800',\r\n      'Draft': 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700',\r\n  };\r\n  \r\n  const handleDownload = async (e: React.MouseEvent) => {\r\n    e.stopPropagation(); // Prevent modal from opening\r\n    if (isDownloading) return;\r\n    setIsDownloading(true);\r\n    try {\r\n        await generateInvoicePDF(invoice, user);\r\n    } catch (err) {\r\n        console.error(\"PDF generation failed:\", err);\r\n    } finally {\r\n        setIsDownloading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card \r\n      onClick={onSelect}\r\n      hoverEffect={true}\r\n      className=\"p-4 md:p-5 flex flex-col md:flex-row items-start md:items-center gap-4 group\"\r\n    >\r\n       {/* Icon & Ref */}\r\n       <div className=\"flex items-center gap-4 min-w-[200px]\">\r\n          <div className=\"group-hover:text-jambo-600 dark:group-hover:text-jambo-400 transition-colors\">\r\n             <IconBox icon={FileText} variant=\"neutral\" size=\"md\" />\r\n          </div>\r\n          <div>\r\n              <p className=\"font-bold text-gray-900 dark:text-white text-sm\">{invoice.reference}</p>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">{invoice.items.length} item{invoice.items.length !== 1 ? 's' : ''}</p>\r\n          </div>\r\n       </div>\r\n\r\n       {/* Dates */}\r\n       <div className=\"flex-1 grid grid-cols-2 md:grid-cols-2 gap-4 w-full md:w-auto\">\r\n          <div>\r\n              <p className=\"text-[10px] text-gray-400 font-bold uppercase\">Issued</p>\r\n              <p className=\"text-sm text-gray-700 dark:text-gray-300 font-medium\">{new Date(invoice.date).toLocaleDateString('en-GB')}</p>\r\n          </div>\r\n          <div>\r\n              <p className=\"text-[10px] text-gray-400 font-bold uppercase\">Due Date</p>\r\n              <p className=\"text-sm text-gray-700 dark:text-gray-300 font-medium\">{new Date(invoice.dueDate).toLocaleDateString('en-GB')}</p>\r\n          </div>\r\n       </div>\r\n\r\n       {/* Amount, Status, & Actions */}\r\n       <div className=\"flex items-center justify-between w-full md:w-auto gap-4 md:gap-6 mt-2 md:mt-0 pt-2 md:pt-0 border-t md:border-t-0 border-gray-50 dark:border-white/5\">\r\n          <div className=\"text-left md:text-right min-w-[80px]\">\r\n              <p className=\"font-bold text-gray-900 dark:text-white\">£{invoice.amount.toFixed(2)}</p>\r\n          </div>\r\n          \r\n          <div className={`px-3 py-1 rounded-full text-xs font-bold border ${statusColors[invoice.status]} min-w-[80px] text-center`}>\r\n              {invoice.status}\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={handleDownload}\r\n              disabled={isDownloading}\r\n              className=\"w-8 h-8 flex items-center justify-center rounded-lg text-gray-400 hover:text-jambo-600 dark:hover:text-jambo-400 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors\"\r\n              title=\"Download PDF\"\r\n            >\r\n              {isDownloading ? <Loader2 size={16} className=\"animate-spin\" /> : <Download size={16} />}\r\n            </button>\r\n            <div className=\"w-8 h-8 flex items-center justify-center rounded-lg text-gray-400 group-hover:text-jambo-600 dark:group-hover:text-jambo-400 opacity-0 group-hover:opacity-100 transition-opacity\" title=\"View Details\">\r\n                <Eye size={18} />\r\n            </div>\r\n          </div>\r\n       </div>\r\n    </Card>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAOO,MAAM,aAAwC,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE;IACzE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,OAAO,8IAAM,CAAC,IAAI,CAAC,cAAc;IAEvC,MAAM,eAAe;QACjB,QAAQ;QACR,WAAW;QACX,WAAW;QACX,SAAS;IACb;IAEA,MAAM,iBAAiB,OAAO;QAC5B,EAAE,eAAe,IAAI,6BAA6B;QAClD,IAAI,eAAe;QACnB,iBAAiB;QACjB,IAAI;YACA,MAAM,IAAA,kLAAkB,EAAC,SAAS;QACtC,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,0BAA0B;QAC5C,SAAU;YACN,iBAAiB;QACrB;IACF;IAEA,qBACE,8OAAC,iIAAI;QACH,SAAS;QACT,aAAa;QACb,WAAU;;0BAGT,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;kCACZ,cAAA,8OAAC,uIAAO;4BAAC,MAAM,0NAAQ;4BAAE,SAAQ;4BAAU,MAAK;;;;;;;;;;;kCAEnD,8OAAC;;0CACG,8OAAC;gCAAE,WAAU;0CAAmD,QAAQ,SAAS;;;;;;0CACjF,8OAAC;gCAAE,WAAU;;oCAA4C,QAAQ,KAAK,CAAC,MAAM;oCAAC;oCAAM,QAAQ,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM;;;;;;;;;;;;;;;;;;;0BAK9H,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;;0CACG,8OAAC;gCAAE,WAAU;0CAAgD;;;;;;0CAC7D,8OAAC;gCAAE,WAAU;0CAAwD,IAAI,KAAK,QAAQ,IAAI,EAAE,kBAAkB,CAAC;;;;;;;;;;;;kCAEnH,8OAAC;;0CACG,8OAAC;gCAAE,WAAU;0CAAgD;;;;;;0CAC7D,8OAAC;gCAAE,WAAU;0CAAwD,IAAI,KAAK,QAAQ,OAAO,EAAE,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;0BAKzH,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAE,WAAU;;gCAA0C;gCAAE,QAAQ,MAAM,CAAC,OAAO,CAAC;;;;;;;;;;;;kCAGpF,8OAAC;wBAAI,WAAW,CAAC,gDAAgD,EAAE,YAAY,CAAC,QAAQ,MAAM,CAAC,CAAC,yBAAyB,CAAC;kCACrH,QAAQ,MAAM;;;;;;kCAGnB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;gCACV,OAAM;0CAEL,8BAAgB,8OAAC,4NAAO;oCAAC,MAAM;oCAAI,WAAU;;;;;6FAAoB,8OAAC,sNAAQ;oCAAC,MAAM;;;;;;;;;;;0CAEpF,8OAAC;gCAAI,WAAU;gCAAoL,OAAM;0CACrM,cAAA,8OAAC,uMAAG;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3B"}},
    {"offset": {"line": 2113, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/InvoiceList.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { Invoice } from '@/data/types';\r\nimport { InvoiceRow } from './InvoiceRow';\r\nimport { Filter, Search } from 'lucide-react';\r\nimport { Input } from '../../../ui/Input';\r\n\r\ninterface InvoiceListProps {\r\n  invoices: Invoice[];\r\n  onInvoiceSelect: (invoice: Invoice) => void; // Add this prop\r\n}\r\n\r\nexport const InvoiceList = ({ invoices, onInvoiceSelect }: InvoiceListProps) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('All');\r\n\r\n  const filteredInvoices = invoices.filter(inv => {\r\n      const matchesStatus = statusFilter === 'All' || inv.status === statusFilter;\r\n      const matchesSearch = searchTerm === '' ||\r\n          inv.reference.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n          inv.amount.toString().includes(searchTerm);\r\n      return matchesStatus && matchesSearch;\r\n  });\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-2\">\r\n            <h3 className=\"text-lg font-serif font-bold text-gray-900 dark:text-white\">Recent Invoices</h3>\r\n            \r\n            <div className=\"flex items-center gap-3 w-full sm:w-auto\">\r\n                <div className=\"relative flex-grow sm:flex-grow-0 w-full sm:w-64\">\r\n                    <Input \r\n                        placeholder=\"Search ref, amount...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        leftIcon={<Search size={14} />}\r\n                    />\r\n                </div>\r\n                <div className=\"relative\">\r\n                  <select\r\n                      value={statusFilter}\r\n                      onChange={(e) => setStatusFilter(e.target.value)}\r\n                      className=\"w-full sm:w-36 appearance-none bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 text-gray-700 dark:text-gray-200 text-sm font-medium rounded-lg pl-9 pr-8 py-2.5 focus:outline-none focus:ring-1 focus:ring-jambo-600 focus:border-jambo-600 transition-colors cursor-pointer\"\r\n                  >\r\n                      <option value=\"All\">All Statuses</option>\r\n                      <option value=\"Paid\">Paid</option>\r\n                      <option value=\"Pending\">Pending</option>\r\n                      <option value=\"Overdue\">Overdue</option>\r\n                  </select>\r\n                  <Filter size={14} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        {filteredInvoices.length === 0 ? (\r\n            <div className=\"text-center py-12 bg-white dark:bg-[#1a1625] rounded-xl border border-dashed border-gray-200 dark:border-white/10\">\r\n                <p className=\"text-gray-400\">No invoices found matching your criteria.</p>\r\n            </div>\r\n        ) : (\r\n            <div className=\"flex flex-col gap-3\">\r\n                {filteredInvoices.map(inv => (\r\n                    <InvoiceRow \r\n                      key={inv.id} \r\n                      invoice={inv} \r\n                      onSelect={() => onInvoiceSelect(inv)} \r\n                    />\r\n                ))}\r\n            </div>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AAAA;AACA;;;;;;AAOO,MAAM,cAAc,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAoB;IACzE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,mBAAmB,SAAS,MAAM,CAAC,CAAA;QACrC,MAAM,gBAAgB,iBAAiB,SAAS,IAAI,MAAM,KAAK;QAC/D,MAAM,gBAAgB,eAAe,MACjC,IAAI,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OAC3D,IAAI,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACnC,OAAO,iBAAiB;IAC5B;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAA6D;;;;;;kCAE3E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,mIAAK;oCACF,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,wBAAU,8OAAC,gNAAM;wCAAC,MAAM;;;;;;;;;;;;;;;;0CAGhC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACG,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAC/C,WAAU;;0DAEV,8OAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,8OAAC;gDAAO,OAAM;0DAAO;;;;;;0DACrB,8OAAC;gDAAO,OAAM;0DAAU;;;;;;0DACxB,8OAAC;gDAAO,OAAM;0DAAU;;;;;;;;;;;;kDAE5B,8OAAC,gNAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;YAKrC,iBAAiB,MAAM,KAAK,kBACzB,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;yEAGjC,8OAAC;gBAAI,WAAU;0BACV,iBAAiB,GAAG,CAAC,CAAA,oBAClB,8OAAC,yKAAU;wBAET,SAAS;wBACT,UAAU,IAAM,gBAAgB;uBAF3B,IAAI,EAAE;;;;;;;;;;;;;;;;AASjC"}},
    {"offset": {"line": 2288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/BankDetailsCard.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { CreditCard, Lock, Edit2 } from 'lucide-react';\r\nimport { User } from '@/data/types';\r\nimport { IconBox } from '../../../ui/IconBox';\r\n\r\ninterface BankDetailsCardProps {\r\n  user: User | null;\r\n}\r\n\r\nexport const BankDetailsCard = ({ user }: BankDetailsCardProps) => {\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-b from-gray-900 to-gray-800 dark:from-[#2a2438] dark:to-[#1a1625] rounded-2xl p-6 text-white shadow-xl relative overflow-hidden\">\r\n        <div className=\"absolute top-0 right-0 p-32 bg-white/5 rounded-full blur-3xl translate-x-1/2 -translate-y-1/2\"></div>\r\n        \r\n        <div className=\"flex items-center justify-between mb-6 relative z-10\">\r\n            <div className=\"flex items-center gap-3\">\r\n                <IconBox icon={CreditCard} variant=\"glass\" size=\"md\" />\r\n                <h3 className=\"font-bold text-sm uppercase tracking-wide\">Payout Account</h3>\r\n            </div>\r\n            <button className=\"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white\">\r\n                <Edit2 size={16} />\r\n            </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-4 relative z-10 mb-8\">\r\n            <div>\r\n                <p className=\"text-xs text-gray-400 font-bold uppercase mb-1\">Bank Name</p>\r\n                <p className=\"text-lg font-medium\">{user.bankDetails?.bankName || 'Not Set'}</p>\r\n            </div>\r\n            <div>\r\n                <p className=\"text-xs text-gray-400 font-bold uppercase mb-1\">Account Number</p>\r\n                <p className=\"text-lg font-mono tracking-wider\">{user.bankDetails?.accountNumber || '**** ****'}</p>\r\n            </div>\r\n            <div>\r\n                <p className=\"text-xs text-gray-400 font-bold uppercase mb-1\">Sort Code</p>\r\n                <p className=\"text-lg font-mono tracking-wider\">{user.bankDetails?.sortCode || '**-**-**'}</p>\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-3 flex items-start gap-3 relative z-10\">\r\n             <Lock size={16} className=\"text-green-400 shrink-0 mt-0.5\" />\r\n             <div>\r\n                <p className=\"text-xs font-bold text-green-400 mb-0.5\">Secure Details</p>\r\n                <p className=\"text-[10px] text-green-200/70 leading-tight\">Your payment information is encrypted and stored securely.</p>\r\n             </div>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAEA;;;;AAMO,MAAM,kBAAkB,CAAC,EAAE,IAAI,EAAwB;IAC5D,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;;;;;0BAEf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uIAAO;gCAAC,MAAM,gOAAU;gCAAE,SAAQ;gCAAQ,MAAK;;;;;;0CAChD,8OAAC;gCAAG,WAAU;0CAA4C;;;;;;;;;;;;kCAE9D,8OAAC;wBAAO,WAAU;kCACd,cAAA,8OAAC,2MAAK;4BAAC,MAAM;;;;;;;;;;;;;;;;;0BAIrB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAE,WAAU;0CAAuB,KAAK,WAAW,EAAE,YAAY;;;;;;;;;;;;kCAEtE,8OAAC;;0CACG,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAE,WAAU;0CAAoC,KAAK,WAAW,EAAE,iBAAiB;;;;;;;;;;;;kCAExF,8OAAC;;0CACG,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAE,WAAU;0CAAoC,KAAK,WAAW,EAAE,YAAY;;;;;;;;;;;;;;;;;;0BAIvF,8OAAC;gBAAI,WAAU;;kCACV,8OAAC,0MAAI;wBAAC,MAAM;wBAAI,WAAU;;;;;;kCAC1B,8OAAC;;0CACE,8OAAC;gCAAE,WAAU;0CAA0C;;;;;;0CACvD,8OAAC;gCAAE,WAAU;0CAA8C;;;;;;;;;;;;;;;;;;;;;;;;AAK3E"}},
    {"offset": {"line": 2494, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/portal/dashboard/finance/FinancePage.tsx"],"sourcesContent":["\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { mockDb } from '@/data/mockDatabase';\r\nimport { FinanceStats } from './FinanceStats';\r\nimport { InvoiceList } from './InvoiceList';\r\nimport { BankDetailsCard } from './BankDetailsCard';\r\nimport { Download, Loader2 } from 'lucide-react';\r\nimport { generateStatementPDF } from './pdfGenerator';\r\nimport { InvoicePreviewModal } from './InvoicePreviewModal'; // Import new modal\r\nimport { Invoice } from '@/data/types'; // Import Invoice type\r\n\r\nexport const FinancePage = () => {\r\n  const user = mockDb.auth.getCurrentUser();\r\n  const invoices = mockDb.getInvoices();\r\n  const stats = mockDb.getFinanceStats();\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [isExportMenuOpen, setIsExportMenuOpen] = useState(false);\r\n  const exportMenuRef = useRef<HTMLDivElement>(null);\r\n  \r\n  // New state for modal\r\n  const [selectedInvoice, setSelectedInvoice] = useState<Invoice | null>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n        if (exportMenuRef.current && !exportMenuRef.current.contains(event.target as Node)) {\r\n            setIsExportMenuOpen(false);\r\n        }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const handleExportStatement = async (period: '30d' | '90d' | 'year' | 'all') => {\r\n      if (invoices.length === 0) return;\r\n      \r\n      setIsExporting(true);\r\n      setIsExportMenuOpen(false);\r\n\r\n      const now = new Date();\r\n      const filtered = invoices.filter(inv => {\r\n          const invDate = new Date(inv.date);\r\n          if (period === 'all') return true;\r\n          if (period === 'year') return invDate.getFullYear() === now.getFullYear();\r\n          \r\n          let days = 0;\r\n          if (period === '30d') days = 30;\r\n          if (period === '90d') days = 90;\r\n          \r\n          const cutoff = new Date();\r\n          cutoff.setDate(now.getDate() - days);\r\n          return invDate >= cutoff;\r\n      });\r\n\r\n      if (filtered.length === 0) {\r\n          console.warn(\"No invoices in selected period to export.\");\r\n          setIsExporting(false);\r\n          // Optionally, show a toast notification here\r\n          return;\r\n      }\r\n\r\n      try {\r\n          const periodLabel = {\r\n              '30d': 'Last 30 Days',\r\n              '90d': 'Last 90 Days',\r\n              'year': `Year ${now.getFullYear()}`,\r\n              'all': 'All Time'\r\n          }[period];\r\n          await generateStatementPDF(filtered, user, periodLabel);\r\n      } catch (e) {\r\n          console.error(e);\r\n      } finally {\r\n          setIsExporting(false);\r\n      }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"animate-in fade-in duration-500 pb-12\">\r\n         <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 mb-6 md:mb-8\">\r\n            <div>\r\n               <h2 className=\"text-2xl md:text-4xl font-serif font-bold text-jambo-950 dark:text-white mb-2\">Finances</h2>\r\n               <p className=\"text-gray-500 dark:text-gray-400 text-sm md:text-lg\">Track your earnings, invoices, and payment schedules.</p>\r\n            </div>\r\n            <div className=\"relative\" ref={exportMenuRef}>\r\n              <button \r\n                onClick={() => setIsExportMenuOpen(!isExportMenuOpen)}\r\n                disabled={isExporting || invoices.length === 0}\r\n                className=\"bg-white dark:bg-white/10 text-gray-700 dark:text-white border border-gray-200 dark:border-white/20 px-4 py-2 rounded-lg font-bold text-sm shadow-sm hover:bg-gray-50 dark:hover:bg-white/20 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {isExporting ? <Loader2 size={16} className=\"animate-spin\" /> : <Download size={16} />} \r\n                Export Statement\r\n              </button>\r\n              {isExportMenuOpen && (\r\n                <div className=\"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-[#1a1625] rounded-lg shadow-lg border border-gray-200 dark:border-white/10 z-10 p-2 animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                    <button onClick={() => handleExportStatement('30d')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">Last 30 Days</button>\r\n                    <button onClick={() => handleExportStatement('90d')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">Last 90 Days</button>\r\n                    <button onClick={() => handleExportStatement('year')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">This Year</button>\r\n                    <button onClick={() => handleExportStatement('all')} className=\"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200\">All Time</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n         </div>\r\n\r\n         <FinanceStats stats={stats} />\r\n\r\n         <div className=\"grid lg:grid-cols-3 gap-8\">\r\n            {/* Main Content: Invoice List */}\r\n            <div className=\"lg:col-span-2\">\r\n               <InvoiceList invoices={invoices} onInvoiceSelect={setSelectedInvoice} />\r\n            </div>\r\n\r\n            {/* Sidebar: Bank Details & Tax Info */}\r\n            <div className=\"lg:col-span-1 space-y-6\">\r\n               <BankDetailsCard user={user} />\r\n               \r\n               {/* Tax Summary Card */}\r\n               <div className=\"bg-white dark:bg-[#1a1625] rounded-2xl p-6 border border-gray-100 dark:border-white/5 shadow-lg\">\r\n                  <h4 className=\"font-serif font-bold text-gray-900 dark:text-white mb-4\">Tax Summary (24/25)</h4>\r\n                  <div className=\"space-y-3\">\r\n                     <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-500 dark:text-gray-400\">Gross Earnings</span>\r\n                        <span className=\"font-bold text-gray-900 dark:text-white\">£{stats.totalPaid.toLocaleString()}</span>\r\n                     </div>\r\n                     <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-500 dark:text-gray-400\">Estimated Tax</span>\r\n                        <span className=\"font-bold text-gray-900 dark:text-white\">£{(stats.totalPaid * 0.2).toLocaleString()}</span>\r\n                     </div>\r\n                     <div className=\"h-px bg-gray-100 dark:bg-white/10 my-2\"></div>\r\n                     <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-500 dark:text-gray-400\">Net Estimated</span>\r\n                        <span className=\"font-bold text-jambo-600 dark:text-jambo-400\">£{(stats.totalPaid * 0.8).toLocaleString()}</span>\r\n                     </div>\r\n                  </div>\r\n                  <div className=\"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-xs text-blue-700 dark:text-blue-300 leading-snug\">\r\n                     <strong>Note:</strong> This is an estimate based on a standard 20% rate. Consult your accountant for accuracy.\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n      {/* Render Modal */}\r\n      {selectedInvoice && (\r\n        <InvoicePreviewModal\r\n          invoice={selectedInvoice}\r\n          onClose={() => setSelectedInvoice(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}}]
}