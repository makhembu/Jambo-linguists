{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Khesh/Desktop/Jambo-linguists/components/seo/SeoHead.tsx"],"sourcesContent":["'use client'\r\nimport React, { useEffect } from 'react';\r\nimport { SeoConfig } from '@/data/types';\r\nimport { COMPANY_INFO } from '@/data/constants';\r\nimport { mockDb } from '@/data/mockDatabase';\r\n\r\ninterface SeoHeadProps {\r\n  seo?: SeoConfig;\r\n  title?: string;\r\n  description?: string;\r\n  path?: string;\r\n  type?: 'website' | 'article' | 'profile' | 'service';\r\n  image?: string;\r\n  forceNoIndex?: boolean; // Override for portals\r\n  structuredData?: object | object[];\r\n}\r\n\r\nexport const SeoHead = ({ \r\n  seo, \r\n  title, \r\n  description, \r\n  path, \r\n  type = 'website', \r\n  image,\r\n  forceNoIndex = false,\r\n  structuredData\r\n}: SeoHeadProps) => {\r\n  const globalSeo = mockDb.getSettings().seo;\r\n  const siteName = globalSeo.siteTitle || COMPANY_INFO.name;\r\n  \r\n  // Priority: Prop > SEO Object > Global Default\r\n  const pageTitle = seo?.metaTitle || title || siteName;\r\n  const finalTitle = pageTitle.includes(COMPANY_INFO.name) ? pageTitle : `${pageTitle} | ${COMPANY_INFO.name}`;\r\n  \r\n  const pageDescription = seo?.metaDescription || description || globalSeo.siteDescription || \"Professional Swahili Translation & Interpreting Services across the UK.\";\r\n  \r\n  const baseUrl = \"https://jambolinguists.com\"; \r\n  const canonical = seo?.canonicalUrl || (path ? `${baseUrl}${path}` : baseUrl);\r\n  \r\n  const pageImage = seo?.ogImage || image || \"https://jambolinguists.com/wp-content/uploads/2025/03/logo-purple.jpeg\";\r\n  \r\n  const shouldIndex = !forceNoIndex && !seo?.noIndex;\r\n\r\n  useEffect(() => {\r\n    // 1. Update Document Title\r\n    document.title = finalTitle;\r\n\r\n    // Helper to update/create meta tags\r\n    const updateMeta = (name: string, content: string) => {\r\n      let element = document.querySelector(`meta[name=\"${name}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('name', name);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    // Helper for OpenGraph / Twitter properties\r\n    const updateProperty = (property: string, content: string) => {\r\n      let element = document.querySelector(`meta[property=\"${property}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('property', property);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    // --- Standard Meta ---\r\n    updateMeta('description', pageDescription);\r\n    updateMeta('viewport', 'width=device-width, initial-scale=1.0');\r\n    \r\n    // Robots (Strict Security & SEO)\r\n    const robotsContent = shouldIndex \r\n        ? \"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1\" \r\n        : \"noindex, nofollow\";\r\n    updateMeta('robots', robotsContent);\r\n\r\n    // Keywords (Merge specific + global defaults)\r\n    const keywords = [...(seo?.keywords || []), ...(globalSeo.defaultKeywords || [])];\r\n    const uniqueKeywords = Array.from(new Set(keywords));\r\n    if (uniqueKeywords.length > 0) {\r\n        updateMeta('keywords', uniqueKeywords.join(', '));\r\n    }\r\n\r\n    // --- Open Graph ---\r\n    updateProperty('og:title', finalTitle);\r\n    updateProperty('og:description', pageDescription);\r\n    updateProperty('og:type', type);\r\n    updateProperty('og:site_name', siteName);\r\n    updateProperty('og:url', canonical);\r\n    updateProperty('og:image', pageImage);\r\n    updateProperty('og:image:alt', pageTitle);\r\n    updateProperty('og:locale', 'en_GB');\r\n\r\n    // --- Twitter Card ---\r\n    updateMeta('twitter:card', 'summary_large_image');\r\n    updateMeta('twitter:title', finalTitle);\r\n    updateMeta('twitter:description', pageDescription);\r\n    updateMeta('twitter:image', pageImage);\r\n    updateMeta('twitter:image:alt', pageTitle);\r\n\r\n    // --- Canonical Link ---\r\n    let linkCanonical = document.querySelector(`link[rel=\"canonical\"]`);\r\n    if (canonical) {\r\n        if (!linkCanonical) {\r\n            linkCanonical = document.createElement('link');\r\n            linkCanonical.setAttribute('rel', 'canonical');\r\n            document.head.appendChild(linkCanonical);\r\n        }\r\n        linkCanonical.setAttribute('href', canonical);\r\n    } else if (linkCanonical) {\r\n        linkCanonical.remove();\r\n    }\r\n\r\n    // --- Structured Data (JSON-LD) ---\r\n    // Remove existing injected scripts to prevent duplication on nav\r\n    const existingScripts = document.querySelectorAll('script[type=\"application/ld+json\"]');\r\n    existingScripts.forEach(s => s.remove());\r\n\r\n    const schemas: any[] = [];\r\n\r\n    // 1. Global Organization Schema (Always present)\r\n    if (globalSeo.structuredData) {\r\n        try {\r\n            const globalJson = JSON.parse(globalSeo.structuredData);\r\n            if (Array.isArray(globalJson)) schemas.push(...globalJson);\r\n            else schemas.push(globalJson);\r\n        } catch (e) {\r\n            // console.error(\"Invalid Global JSON-LD\");\r\n        }\r\n    }\r\n\r\n    // 2. Page Specific Schema from DB settings\r\n    if (seo?.structuredData) {\r\n        try {\r\n            const pageJson = JSON.parse(seo.structuredData);\r\n            if (Array.isArray(pageJson)) schemas.push(...pageJson);\r\n            else schemas.push(pageJson);\r\n        } catch (e) {\r\n            // console.error(\"Invalid Page JSON-LD from Config\");\r\n        }\r\n    }\r\n\r\n    // 3. Prop Passed Schema (Dynamic)\r\n    if (structuredData) {\r\n        if (Array.isArray(structuredData)) schemas.push(...structuredData);\r\n        else schemas.push(structuredData);\r\n    }\r\n\r\n    // Inject Script\r\n    if (schemas.length > 0) {\r\n        const script = document.createElement('script');\r\n        script.setAttribute('type', 'application/ld+json');\r\n        script.textContent = JSON.stringify({\r\n            \"@context\": \"https://schema.org\",\r\n            \"@graph\": schemas\r\n        });\r\n        document.head.appendChild(script);\r\n    }\r\n\r\n  }, [finalTitle, pageDescription, shouldIndex, seo, canonical, siteName, globalSeo, type, pageImage, structuredData]);\r\n\r\n  return null;\r\n};\r\n"],"names":[],"mappings":"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"}}]
}